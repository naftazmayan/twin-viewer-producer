import{createRequire as Hl}from"node:module";var y=($,q)=>()=>(q||$((q={exports:{}}).exports,q),q.exports);var i=Hl(import.meta.url);var ek=y((NG$,Yl)=>{Yl.exports={name:"dotenv",version:"16.4.7",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var U9=y((mG$,k_)=>{var e9=i("fs"),B9=i("path"),hl=i("os"),kl=i("crypto"),Tl=ek(),F9=Tl.version,Al=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Wl($){let q={},_=$.toString();_=_.replace(/\r\n?/mg,`
`);let K;while((K=Al.exec(_))!=null){let P=K[1],w=K[2]||"";w=w.trim();let O=w[0];if(w=w.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),O==='"')w=w.replace(/\\n/g,`
`),w=w.replace(/\\r/g,"\r");q[P]=w}return q}function Jl($){let q=Uk($),_=A6.configDotenv({path:q});if(!_.parsed){let O=new Error(`MISSING_DATA: Cannot parse ${q} for an unknown reason`);throw O.code="MISSING_DATA",O}let K=Fk($).split(","),P=K.length,w;for(let O=0;O<P;O++)try{let f=K[O].trim(),Y=pl(_,f);w=A6.decrypt(Y.ciphertext,Y.key);break}catch(f){if(O+1>=P)throw f}return A6.parse(w)}function Xl($){console.log(`[dotenv@${F9}][INFO] ${$}`)}function Dl($){console.log(`[dotenv@${F9}][WARN] ${$}`)}function vw($){console.log(`[dotenv@${F9}][DEBUG] ${$}`)}function Fk($){if($&&$.DOTENV_KEY&&$.DOTENV_KEY.length>0)return $.DOTENV_KEY;if(process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0)return process.env.DOTENV_KEY;return""}function pl($,q){let _;try{_=new URL(q)}catch(f){if(f.code==="ERR_INVALID_URL"){let Y=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw Y.code="INVALID_DOTENV_KEY",Y}throw f}let K=_.password;if(!K){let f=new Error("INVALID_DOTENV_KEY: Missing key part");throw f.code="INVALID_DOTENV_KEY",f}let P=_.searchParams.get("environment");if(!P){let f=new Error("INVALID_DOTENV_KEY: Missing environment part");throw f.code="INVALID_DOTENV_KEY",f}let w=`DOTENV_VAULT_${P.toUpperCase()}`,O=$.parsed[w];if(!O){let f=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${w} in your .env.vault file.`);throw f.code="NOT_FOUND_DOTENV_ENVIRONMENT",f}return{ciphertext:O,key:K}}function Uk($){let q=null;if($&&$.path&&$.path.length>0)if(Array.isArray($.path)){for(let _ of $.path)if(e9.existsSync(_))q=_.endsWith(".vault")?_:`${_}.vault`}else q=$.path.endsWith(".vault")?$.path:`${$.path}.vault`;else q=B9.resolve(process.cwd(),".env.vault");if(e9.existsSync(q))return q;return null}function Bk($){return $[0]==="~"?B9.join(hl.homedir(),$.slice(1)):$}function yl($){Xl("Loading env from encrypted .env.vault");let q=A6._parseVault($),_=process.env;if($&&$.processEnv!=null)_=$.processEnv;return A6.populate(_,q,$),{parsed:q}}function Sl($){let q=B9.resolve(process.cwd(),".env"),_="utf8",K=Boolean($&&$.debug);if($&&$.encoding)_=$.encoding;else if(K)vw("No encoding is specified. UTF-8 is used by default");let P=[q];if($&&$.path)if(!Array.isArray($.path))P=[Bk($.path)];else{P=[];for(let Y of $.path)P.push(Bk(Y))}let w,O={};for(let Y of P)try{let h=A6.parse(e9.readFileSync(Y,{encoding:_}));A6.populate(O,h,$)}catch(h){if(K)vw(`Failed to load ${Y} ${h.message}`);w=h}let f=process.env;if($&&$.processEnv!=null)f=$.processEnv;if(A6.populate(f,O,$),w)return{parsed:O,error:w};else return{parsed:O}}function Gl($){if(Fk($).length===0)return A6.configDotenv($);let q=Uk($);if(!q)return Dl(`You set DOTENV_KEY but you are missing a .env.vault file at ${q}. Did you forget to build it?`),A6.configDotenv($);return A6._configVault($)}function Zl($,q){let _=Buffer.from(q.slice(-64),"hex"),K=Buffer.from($,"base64"),P=K.subarray(0,12),w=K.subarray(-16);K=K.subarray(12,-16);try{let O=kl.createDecipheriv("aes-256-gcm",_,P);return O.setAuthTag(w),`${O.update(K)}${O.final()}`}catch(O){let f=O instanceof RangeError,Y=O.message==="Invalid key length",h=O.message==="Unsupported state or unable to authenticate data";if(f||Y){let k=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw k.code="INVALID_DOTENV_KEY",k}else if(h){let k=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw k.code="DECRYPTION_FAILED",k}else throw O}}function Nl($,q,_={}){let K=Boolean(_&&_.debug),P=Boolean(_&&_.override);if(typeof q!=="object"){let w=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw w.code="OBJECT_REQUIRED",w}for(let w of Object.keys(q))if(Object.prototype.hasOwnProperty.call($,w)){if(P===!0)$[w]=q[w];if(K)if(P===!0)vw(`"${w}" is already defined and WAS overwritten`);else vw(`"${w}" is already defined and was NOT overwritten`)}else $[w]=q[w]}var A6={configDotenv:Sl,_configVault:yl,_parseVault:Jl,config:Gl,decrypt:Zl,parse:Wl,populate:Nl};mG$.configDotenv=A6.configDotenv;mG$._configVault=A6._configVault;mG$._parseVault=A6._parseVault;mG$.config=A6.config;mG$.decrypt=A6.decrypt;mG$.parse=A6.parse;mG$.populate=A6.populate;k_.exports=A6});var Hw=y((EG$,vT)=>{U9().config();var rl=["DATABASE_HOST","DATABASE_NAME","DATABASE_USERNAME","DATABASE_PASSWORD","LOCAL_FASTIFY_PROTOCOL","LOCAL_FASTIFY_HOST","LOCAL_FASTIFY_PORT","LOCAL_API_USERNAME","LOCAL_API_PASSWORD","DESTINATION_FASTIFY_PROTOCOL","DESTINATION_FASTIFY_HOST","DESTINATION_FASTIFY_PORT","DESTINATION_API_USERNAME","DESTINATION_API_PASSWORD","BATCH_SIZE_COMMENTS","BATCH_SIZE_COMMENTS_DELETED","BATCH_SIZE_MASTERLOG","BATCH_SIZE_MASTERLOG_DELETED","BATCH_SIZE_FAILED_PROCESS_DATA","INTERVAL_TOKEN_LOCAL","INTERVAL_TOKEN_DESTINATION","INTERVAL_CONTROLLER","INTERVAL_COMMENTS","INTERVAL_COMMENTS_DELETED","INTERVAL_MASTERLOG","INTERVAL_MASTERLOG_DELETED","INTERVAL_FAILED_PROCESS_DATA"],Qk=rl.filter(($)=>!process.env[$]);if(Qk.length>0)throw new Error(`Missing required environment variables: ${Qk.join(", ")}`);var{DATABASE_HOST:$T,DATABASE_NAME:qT,DATABASE_USERNAME:_T,DATABASE_PASSWORD:KT,DATABASE_INSTANCE:PT,LOCAL_FASTIFY_PROTOCOL:jT,LOCAL_FASTIFY_HOST:wT,LOCAL_FASTIFY_PORT:OT,LOCAL_API_USERNAME:Vl,LOCAL_API_PASSWORD:xl,DESTINATION_FASTIFY_PROTOCOL:zT,DESTINATION_FASTIFY_HOST:fT,DESTINATION_FASTIFY_PORT:MT,DESTINATION_API_USERNAME:dl,DESTINATION_API_PASSWORD:bl,BATCH_SIZE_COMMENTS:ol,BATCH_SIZE_COMMENTS_DELETED:il,BATCH_SIZE_MASTERLOG:gl,BATCH_SIZE_MASTERLOG_DELETED:al,BATCH_SIZE_FAILED_PROCESS_DATA:cl,INTERVAL_TOKEN_LOCAL:Il,INTERVAL_TOKEN_DESTINATION:ll,INTERVAL_CONTROLLER:tl,INTERVAL_COMMENTS:sl,INTERVAL_COMMENTS_DELETED:el,INTERVAL_MASTERLOG:Bl,INTERVAL_MASTERLOG_DELETED:Fl,INTERVAL_FAILED_PROCESS_DATA:Ul,TRANSFER:Ql,TRANSFER_COMMENTS:$t,TRANSFER_COMMENTS_DELETED:qt,TRANSFER_MASTERLOG:_t,TRANSFER_MASTERLOG_DELETED:Kt,TRANSFER_FAILED_PROCESS_DATA:Pt,TRANSFER_ONLINE_PROCESS_DATA:jt}=process.env,wt=`${jT}://${wT}:${OT}`,Ot=`${zT}://${fT}:${MT}`,zt={user:_T,password:KT,database:qT,server:$T,options:{encrypt:!1,ssl:!1,instanceName:PT,trustServerCertificate:!1}};vT.exports={DATABASE_HOST:$T,DATABASE_NAME:qT,DATABASE_USERNAME:_T,DATABASE_PASSWORD:KT,DATABASE_INSTANCE:PT,LOCAL_FASTIFY_PROTOCOL:jT,LOCAL_FASTIFY_HOST:wT,LOCAL_FASTIFY_PORT:OT,LOCAL_API_USERNAME:Vl,LOCAL_API_PASSWORD:xl,DESTINATION_FASTIFY_PROTOCOL:zT,DESTINATION_FASTIFY_HOST:fT,DESTINATION_FASTIFY_PORT:MT,DESTINATION_API_USERNAME:dl,DESTINATION_API_PASSWORD:bl,BATCH_SIZE_COMMENTS:Number(ol),BATCH_SIZE_COMMENTS_DELETED:Number(il),BATCH_SIZE_MASTERLOG:Number(gl),BATCH_SIZE_MASTERLOG_DELETED:Number(al),BATCH_SIZE_FAILED_PROCESS_DATA:Number(cl),INTERVAL_TOKEN_LOCAL:Number(Il),INTERVAL_TOKEN_DESTINATION:Number(ll),INTERVAL_CONTROLLER:Number(tl),INTERVAL_COMMENTS:Number(sl),INTERVAL_COMMENTS_DELETED:Number(el),INTERVAL_FAILED_PROCESS_DATA:Number(Ul),INTERVAL_MASTERLOG:Number(Bl),INTERVAL_MASTERLOG_DELETED:Number(Fl),TRANSFER:Boolean(Ql),TRANSFER_COMMENTS:Boolean($t),TRANSFER_COMMENTS_DELETED:Boolean(qt),TRANSFER_MASTERLOG:Boolean(_t),TRANSFER_MASTERLOG_DELETED:Boolean(Kt),TRANSFER_FAILED_PROCESS_DATA:Boolean(Pt),TRANSFER_ONLINE_PROCESS_DATA:Boolean(jt),hostLocal:wt,hostDestination:Ot,sqlConfig:zt}});var hT=y((RG$,YT)=>{var{INTERVAL_DESTINATION_HEALTH:uG$}=Hw(),HT=async($,q,_)=>{try{let K=new URL("/api/v1/auth/login",$),P=await fetch(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:q,password:_})});if(!P.ok)return console.error(`Error: ${P.status} - ${P.statusText}`),null;let w=await P.json();if(w.success&&w.data&&w.data.token)return w.data.token;else return console.error("Authentication failed: Invalid response structure"),null}catch(K){throw K}};function ft($,q,_,K){return new Promise((P,w)=>{let O=setInterval(async()=>{try{let f=await HT($,q,_);clearInterval(O),P(f)}catch(f){console.error(`# [${$}] Failed to fetch token. Retrying...`)}},K)})}YT.exports={getToken:HT,getTokenWithRetry:ft}});var AT=y((LG$,TT)=>{var u4=i("fs"),kT=i("url"),Mt=i("child_process").spawn;TT.exports=Q9;Q9.XMLHttpRequest=Q9;function Q9($){$=$||{};var q=this,_=i("http"),K=i("https"),P,w,O={},f=!1,Y={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},h=Object.assign({},Y),k=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],T=["TRACE","TRACK","CONNECT"],p=!1,G=!1,Z=!1,X={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var C=function(m){return f||m&&k.indexOf(m.toLowerCase())===-1},N=function(m){return m&&T.indexOf(m)===-1};this.open=function(m,E,W,V,n){if(this.abort(),G=!1,Z=!1,!N(m))throw new Error("SecurityError: Request method not allowed");O={method:m,url:E.toString(),async:typeof W!=="boolean"?!0:W,user:V||null,password:n||null},L(this.OPENED)},this.setDisableHeaderCheck=function(m){f=m},this.setRequestHeader=function(m,E){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!C(m))return console.warn('Refused to set unsafe header "'+m+'"'),!1;if(p)throw new Error("INVALID_STATE_ERR: send flag is true");return h[m]=E,!0},this.getResponseHeader=function(m){if(typeof m==="string"&&this.readyState>this.OPENED&&w.headers[m.toLowerCase()]&&!G)return w.headers[m.toLowerCase()];return null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||G)return"";var m="";for(var E in w.headers)if(E!=="set-cookie"&&E!=="set-cookie2")m+=E+": "+w.headers[E]+`\r
`;return m.substr(0,m.length-2)},this.getRequestHeader=function(m){if(typeof m==="string"&&h[m])return h[m];return""},this.send=function(m){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(p)throw new Error("INVALID_STATE_ERR: send has already been called");var E=!1,W=!1,V=kT.parse(O.url),n;switch(V.protocol){case"https:":E=!0;case"http:":n=V.hostname;break;case"file:":W=!0;break;case void 0:case"":n="localhost";break;default:throw new Error("Protocol not supported.")}if(W){if(O.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(O.async)u4.readFile(unescape(V.pathname),function(f6,Y_){if(f6)q.handleError(f6,f6.errno||-1);else q.status=200,q.responseText=Y_.toString("utf8"),q.response=Y_,L(q.DONE)});else try{this.response=u4.readFileSync(unescape(V.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,L(q.DONE)}catch(f6){this.handleError(f6,f6.errno||-1)}return}var b=V.port||(E?443:80),x=V.pathname+(V.search?V.search:"");if(h.Host=n,!(E&&b===443||b===80))h.Host+=":"+V.port;if(O.user){if(typeof O.password=="undefined")O.password="";var g=new Buffer(O.user+":"+O.password);h.Authorization="Basic "+g.toString("base64")}if(O.method==="GET"||O.method==="HEAD")m=null;else if(m){h["Content-Length"]=Buffer.isBuffer(m)?m.length:Buffer.byteLength(m);var s=Object.keys(h);if(!s.some(function(f6){return f6.toLowerCase()==="content-type"}))h["Content-Type"]="text/plain;charset=UTF-8"}else if(O.method==="POST")h["Content-Length"]=0;var v$=$.agent||!1,u={host:n,port:b,path:x,method:O.method,headers:h,agent:v$};if(E)u.pfx=$.pfx,u.key=$.key,u.passphrase=$.passphrase,u.cert=$.cert,u.ca=$.ca,u.ciphers=$.ciphers,u.rejectUnauthorized=$.rejectUnauthorized===!1?!1:!0;if(G=!1,O.async){var Cq=E?K.request:_.request;p=!0,q.dispatchEvent("readystatechange");var E6=function(f6){if(w=f6,w.statusCode===302||w.statusCode===303||w.statusCode===307){O.url=w.headers.location;var Y_=kT.parse(O.url);n=Y_.hostname;var $$={hostname:Y_.hostname,port:Y_.port,path:Y_.path,method:w.statusCode===303?"GET":O.method,headers:h};if(E)$$.pfx=$.pfx,$$.key=$.key,$$.passphrase=$.passphrase,$$.cert=$.cert,$$.ca=$.ca,$$.ciphers=$.ciphers,$$.rejectUnauthorized=$.rejectUnauthorized===!1?!1:!0;P=Cq($$,E6).on("error",K$),P.end();return}L(q.HEADERS_RECEIVED),q.status=w.statusCode,w.on("data",function(nq){if(nq){var L9=Buffer.from(nq);q.response=Buffer.concat([q.response,L9])}if(p)L(q.LOADING)}),w.on("end",function(){if(p)p=!1,L(q.DONE),q.responseText=q.response.toString("utf8")}),w.on("error",function(nq){q.handleError(nq)})},K$=function(f6){if(P.reusedSocket&&f6.code==="ECONNRESET")return Cq(u,E6).on("error",K$);q.handleError(f6)};if(P=Cq(u,E6).on("error",K$),$.autoUnref)P.on("socket",(f6)=>{f6.unref()});if(m)P.write(m);P.end(),q.dispatchEvent("loadstart")}else{var J=".node-xmlhttprequest-content-"+process.pid,GK=".node-xmlhttprequest-sync-"+process.pid;u4.writeFileSync(GK,"","utf8");var c="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(E?"s":"")+".request;var options = "+JSON.stringify(u)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+J+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+GK+"');});response.on('error', function(error) {fs.writeFileSync('"+J+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+GK+"');});}).on('error', function(error) {fs.writeFileSync('"+J+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+GK+"');});"+(m?"req.write('"+JSON.stringify(m).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",zq=Mt(process.argv[0],["-e",c]),ZK;while(u4.existsSync(GK));if(q.responseText=u4.readFileSync(J,"utf8"),zq.stdin.end(),u4.unlinkSync(J),q.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var z6=JSON.parse(q.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));q.handleError(z6,503)}else{q.status=q.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var N$=JSON.parse(q.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));w={statusCode:q.status,headers:N$.data.headers},q.responseText=N$.data.text,q.response=Buffer.from(N$.data.data,"base64"),L(q.DONE,!0)}}},this.handleError=function(m,E){this.status=E||0,this.statusText=m,this.responseText=m.stack,G=!0,L(this.DONE)},this.abort=function(){if(P)P.abort(),P=null;if(h=Object.assign({},Y),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),G=Z=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||p)&&this.readyState!==this.DONE)p=!1,L(this.DONE);this.readyState=this.UNSENT},this.addEventListener=function(m,E){if(!(m in X))X[m]=[];X[m].push(E)},this.removeEventListener=function(m,E){if(m in X)X[m]=X[m].filter(function(W){return W!==E})},this.dispatchEvent=function(m){if(typeof q["on"+m]==="function")if(this.readyState===this.DONE&&O.async)setTimeout(function(){q["on"+m]()},0);else q["on"+m]();if(m in X)for(let E=0,W=X[m].length;E<W;E++)if(this.readyState===this.DONE)setTimeout(function(){X[m][E].call(q)},0);else X[m][E].call(q)};var L=function(m){if(q.readyState===m||q.readyState===q.UNSENT&&Z)return;if(q.readyState=m,O.async||q.readyState<q.OPENED||q.readyState===q.DONE)q.dispatchEvent("readystatechange");if(q.readyState===q.DONE){let E;if(Z)E="abort";else if(G)E="error";else E="load";q.dispatchEvent(E),q.dispatchEvent("loadend")}}}});var Yw=y((JT)=>{Object.defineProperty(JT,"__esModule",{value:!0});JT.ERROR_PACKET=JT.PACKET_TYPES_REVERSE=JT.PACKET_TYPES=void 0;var bq=Object.create(null);JT.PACKET_TYPES=bq;bq.open="0";bq.close="1";bq.ping="2";bq.pong="3";bq.message="4";bq.upgrade="5";bq.noop="6";var WT=Object.create(null);JT.PACKET_TYPES_REVERSE=WT;Object.keys(bq).forEach(($)=>{WT[bq[$]]=$});var vt={type:"error",data:"parser error"};JT.ERROR_PACKET=vt});var yT=y((pT)=>{Object.defineProperty(pT,"__esModule",{value:!0});pT.encodePacket=void 0;pT.encodePacketToBinary=Tt;var ht=Yw(),kt=({type:$,data:q},_,K)=>{if(q instanceof ArrayBuffer||ArrayBuffer.isView(q))return K(_?q:"b"+DT(q,!0).toString("base64"));return K(ht.PACKET_TYPES[$]+(q||""))};pT.encodePacket=kt;var DT=($,q)=>{if(Buffer.isBuffer($)||$ instanceof Uint8Array&&!q)return $;else if($ instanceof ArrayBuffer)return Buffer.from($);else return Buffer.from($.buffer,$.byteOffset,$.byteLength)},$f;function Tt($,q){if($.data instanceof ArrayBuffer||ArrayBuffer.isView($.data))return q(DT($.data,!1));pT.encodePacket($,!0,(_)=>{if(!$f)$f=new TextEncoder;q($f.encode(_))})}});var NT=y((GT)=>{Object.defineProperty(GT,"__esModule",{value:!0});GT.decodePacket=void 0;var hw=Yw(),Wt=($,q)=>{if(typeof $!=="string")return{type:"message",data:ST($,q)};let _=$.charAt(0);if(_==="b"){let K=Buffer.from($.substring(1),"base64");return{type:"message",data:ST(K,q)}}if(!hw.PACKET_TYPES_REVERSE[_])return hw.ERROR_PACKET;return $.length>1?{type:hw.PACKET_TYPES_REVERSE[_],data:$.substring(1)}:{type:hw.PACKET_TYPES_REVERSE[_]}};GT.decodePacket=Wt;var ST=($,q)=>{switch(q){case"arraybuffer":if($ instanceof ArrayBuffer)return $;else if(Buffer.isBuffer($))return $.buffer.slice($.byteOffset,$.byteOffset+$.byteLength);else return $.buffer;case"nodebuffer":default:if(Buffer.isBuffer($))return $;else return Buffer.from($)}}});var R4=y((Aw)=>{Object.defineProperty(Aw,"__esModule",{value:!0});Aw.decodePayload=Aw.decodePacket=Aw.encodePayload=Aw.encodePacket=Aw.protocol=void 0;Aw.createPacketEncoderStream=Dt;Aw.createPacketDecoderStream=pt;var Kf=yT();Object.defineProperty(Aw,"encodePacket",{enumerable:!0,get:function(){return Kf.encodePacket}});var Pf=NT();Object.defineProperty(Aw,"decodePacket",{enumerable:!0,get:function(){return Pf.decodePacket}});var mT=Yw(),ET=String.fromCharCode(30),Jt=($,q)=>{let _=$.length,K=new Array(_),P=0;$.forEach((w,O)=>{Kf.encodePacket(w,!1,(f)=>{if(K[O]=f,++P===_)q(K.join(ET))})})};Aw.encodePayload=Jt;var Xt=($,q)=>{let _=$.split(ET),K=[];for(let P=0;P<_.length;P++){let w=Pf.decodePacket(_[P],q);if(K.push(w),w.type==="error")break}return K};Aw.decodePayload=Xt;function Dt(){return new TransformStream({transform($,q){Kf.encodePacketToBinary($,(_)=>{let K=_.length,P;if(K<126)P=new Uint8Array(1),new DataView(P.buffer).setUint8(0,K);else if(K<65536){P=new Uint8Array(3);let w=new DataView(P.buffer);w.setUint8(0,126),w.setUint16(1,K)}else{P=new Uint8Array(9);let w=new DataView(P.buffer);w.setUint8(0,127),w.setBigUint64(1,BigInt(K))}if($.data&&typeof $.data!=="string")P[0]|=128;q.enqueue(P),q.enqueue(_)})}})}var _f;function kw($){return $.reduce((q,_)=>q+_.length,0)}function Tw($,q){if($[0].length===q)return $.shift();let _=new Uint8Array(q),K=0;for(let P=0;P<q;P++)if(_[P]=$[0][K++],K===$[0].length)$.shift(),K=0;if($.length&&K<$[0].length)$[0]=$[0].slice(K);return _}function pt($,q){if(!_f)_f=new TextDecoder;let _=[],K=0,P=-1,w=!1;return new TransformStream({transform(O,f){_.push(O);while(!0){if(K===0){if(kw(_)<1)break;let Y=Tw(_,1);if(w=(Y[0]&128)===128,P=Y[0]&127,P<126)K=3;else if(P===126)K=1;else K=2}else if(K===1){if(kw(_)<2)break;let Y=Tw(_,2);P=new DataView(Y.buffer,Y.byteOffset,Y.length).getUint16(0),K=3}else if(K===2){if(kw(_)<8)break;let Y=Tw(_,8),h=new DataView(Y.buffer,Y.byteOffset,Y.length),k=h.getUint32(0);if(k>Math.pow(2,21)-1){f.enqueue(mT.ERROR_PACKET);break}P=k*Math.pow(2,32)+h.getUint32(4),K=3}else{if(kw(_)<P)break;let Y=Tw(_,P);f.enqueue(Pf.decodePacket(w?Y:_f.decode(Y),q)),K=0}if(P===0||P>$){f.enqueue(mT.ERROR_PACKET);break}}}})}Aw.protocol=4});var EK=y((mt)=>{mt.Emitter=P8;function P8($){if($)return Nt($)}function Nt($){for(var q in P8.prototype)$[q]=P8.prototype[q];return $}P8.prototype.on=P8.prototype.addEventListener=function($,q){return this._callbacks=this._callbacks||{},(this._callbacks["$"+$]=this._callbacks["$"+$]||[]).push(q),this};P8.prototype.once=function($,q){function _(){this.off($,_),q.apply(this,arguments)}return _.fn=q,this.on($,_),this};P8.prototype.off=P8.prototype.removeListener=P8.prototype.removeAllListeners=P8.prototype.removeEventListener=function($,q){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var _=this._callbacks["$"+$];if(!_)return this;if(arguments.length==1)return delete this._callbacks["$"+$],this;var K;for(var P=0;P<_.length;P++)if(K=_[P],K===q||K.fn===q){_.splice(P,1);break}if(_.length===0)delete this._callbacks["$"+$];return this};P8.prototype.emit=function($){this._callbacks=this._callbacks||{};var q=new Array(arguments.length-1),_=this._callbacks["$"+$];for(var K=1;K<arguments.length;K++)q[K-1]=arguments[K];if(_){_=_.slice(0);for(var K=0,P=_.length;K<P;++K)_[K].apply(this,q)}return this};P8.prototype.emitReserved=P8.prototype.emit;P8.prototype.listeners=function($){return this._callbacks=this._callbacks||{},this._callbacks["$"+$]||[]};P8.prototype.hasListeners=function($){return!!this.listeners($).length}});var uK=y((LT)=>{Object.defineProperty(LT,"__esModule",{value:!0});LT.CookieJar=LT.defaultBinaryType=LT.globalThisShim=LT.nextTick=void 0;LT.createCookieJar=ut;LT.parse=RT;LT.nextTick=process.nextTick;LT.globalThisShim=global;LT.defaultBinaryType="nodebuffer";function ut(){return new jf}function RT($){let q=$.split("; "),_=q[0].indexOf("=");if(_===-1)return;let K=q[0].substring(0,_).trim();if(!K.length)return;let P=q[0].substring(_+1).trim();if(P.charCodeAt(0)===34)P=P.slice(1,-1);let w={name:K,value:P};for(let O=1;O<q.length;O++){let f=q[O].split("=");if(f.length!==2)continue;let Y=f[0].trim(),h=f[1].trim();switch(Y){case"Expires":w.expires=new Date(h);break;case"Max-Age":let k=new Date;k.setUTCSeconds(k.getUTCSeconds()+parseInt(h,10)),w.expires=k;break;default:}}return w}class jf{constructor(){this._cookies=new Map}parseCookies($){if(!$)return;$.forEach((q)=>{let _=RT(q);if(_)this._cookies.set(_.name,_)})}get cookies(){let $=Date.now();return this._cookies.forEach((q,_)=>{var K;if(((K=q.expires)===null||K===void 0?void 0:K.getTime())<$)this._cookies.delete(_)}),this._cookies.entries()}addCookies($){let q=[];for(let[_,K]of this.cookies)q.push(`${_}=${K.value}`);if(q.length)$.setDisableHeaderCheck(!0),$.setRequestHeader("cookie",q.join("; "))}appendCookies($){for(let[q,_]of this.cookies)$.append("cookie",`${q}=${_.value}`)}}LT.CookieJar=jf});var RK=y((nT)=>{Object.defineProperty(nT,"__esModule",{value:!0});nT.pick=Vt;nT.installTimerFunctions=bt;nT.byteLength=it;nT.randomString=at;var o_=uK();function Vt($,...q){return q.reduce((_,K)=>{if($.hasOwnProperty(K))_[K]=$[K];return _},{})}var xt=o_.globalThisShim.setTimeout,dt=o_.globalThisShim.clearTimeout;function bt($,q){if(q.useNativeTimers)$.setTimeoutFn=xt.bind(o_.globalThisShim),$.clearTimeoutFn=dt.bind(o_.globalThisShim);else $.setTimeoutFn=o_.globalThisShim.setTimeout.bind(o_.globalThisShim),$.clearTimeoutFn=o_.globalThisShim.clearTimeout.bind(o_.globalThisShim)}var ot=1.33;function it($){if(typeof $==="string")return gt($);return Math.ceil(($.byteLength||$.size)*ot)}function gt($){let q=0,_=0;for(let K=0,P=$.length;K<P;K++)if(q=$.charCodeAt(K),q<128)_+=1;else if(q<2048)_+=2;else if(q<55296||q>=57344)_+=3;else K++,_+=4;return _}function at(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}});var wf=y((rT)=>{Object.defineProperty(rT,"__esModule",{value:!0});rT.encode=st;rT.decode=et;function st($){let q="";for(let _ in $)if($.hasOwnProperty(_)){if(q.length)q+="&";q+=encodeURIComponent(_)+"="+encodeURIComponent($[_])}return q}function et($){let q={},_=$.split("&");for(let K=0,P=_.length;K<P;K++){let w=_[K].split("=");q[decodeURIComponent(w[0])]=decodeURIComponent(w[1])}return q}});var Jw=y((aG$,VT)=>{var L4=1000,C4=L4*60,n4=C4*60,LK=n4*24,Ut=LK*7,Qt=LK*365.25;VT.exports=function($,q){q=q||{};var _=typeof $;if(_==="string"&&$.length>0)return $s($);else if(_==="number"&&isFinite($))return q.long?_s($):qs($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function $s($){if($=String($),$.length>100)return;var q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!q)return;var _=parseFloat(q[1]),K=(q[2]||"ms").toLowerCase();switch(K){case"years":case"year":case"yrs":case"yr":case"y":return _*Qt;case"weeks":case"week":case"w":return _*Ut;case"days":case"day":case"d":return _*LK;case"hours":case"hour":case"hrs":case"hr":case"h":return _*n4;case"minutes":case"minute":case"mins":case"min":case"m":return _*C4;case"seconds":case"second":case"secs":case"sec":case"s":return _*L4;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _;default:return}}function qs($){var q=Math.abs($);if(q>=LK)return Math.round($/LK)+"d";if(q>=n4)return Math.round($/n4)+"h";if(q>=C4)return Math.round($/C4)+"m";if(q>=L4)return Math.round($/L4)+"s";return $+"ms"}function _s($){var q=Math.abs($);if(q>=LK)return Ww($,q,LK,"day");if(q>=n4)return Ww($,q,n4,"hour");if(q>=C4)return Ww($,q,C4,"minute");if(q>=L4)return Ww($,q,L4,"second");return $+" ms"}function Ww($,q,_,K){var P=q>=_*1.5;return Math.round($/_)+" "+K+(P?"s":"")}});var Of=y((cG$,xT)=>{function Ks($){_.debug=_,_.default=_,_.coerce=Y,_.disable=w,_.enable=P,_.enabled=O,_.humanize=Jw(),_.destroy=h,Object.keys($).forEach((k)=>{_[k]=$[k]}),_.names=[],_.skips=[],_.formatters={};function q(k){let T=0;for(let p=0;p<k.length;p++)T=(T<<5)-T+k.charCodeAt(p),T|=0;return _.colors[Math.abs(T)%_.colors.length]}_.selectColor=q;function _(k){let T,p=null,G,Z;function X(...C){if(!X.enabled)return;let N=X,L=Number(new Date),m=L-(T||L);if(N.diff=m,N.prev=T,N.curr=L,T=L,C[0]=_.coerce(C[0]),typeof C[0]!=="string")C.unshift("%O");let E=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(V,n)=>{if(V==="%%")return"%";E++;let b=_.formatters[n];if(typeof b==="function"){let x=C[E];V=b.call(N,x),C.splice(E,1),E--}return V}),_.formatArgs.call(N,C),(N.log||_.log).apply(N,C)}if(X.namespace=k,X.useColors=_.useColors(),X.color=_.selectColor(k),X.extend=K,X.destroy=_.destroy,Object.defineProperty(X,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(p!==null)return p;if(G!==_.namespaces)G=_.namespaces,Z=_.enabled(k);return Z},set:(C)=>{p=C}}),typeof _.init==="function")_.init(X);return X}function K(k,T){let p=_(this.namespace+(typeof T==="undefined"?":":T)+k);return p.log=this.log,p}function P(k){_.save(k),_.namespaces=k,_.names=[],_.skips=[];let T,p=(typeof k==="string"?k:"").split(/[\s,]+/),G=p.length;for(T=0;T<G;T++){if(!p[T])continue;if(k=p[T].replace(/\*/g,".*?"),k[0]==="-")_.skips.push(new RegExp("^"+k.slice(1)+"$"));else _.names.push(new RegExp("^"+k+"$"))}}function w(){let k=[..._.names.map(f),..._.skips.map(f).map((T)=>"-"+T)].join(",");return _.enable(""),k}function O(k){if(k[k.length-1]==="*")return!0;let T,p;for(T=0,p=_.skips.length;T<p;T++)if(_.skips[T].test(k))return!1;for(T=0,p=_.names.length;T<p;T++)if(_.names[T].test(k))return!0;return!1}function f(k){return k.toString().substring(2,k.toString().length-2).replace(/\.\*\?$/,"*")}function Y(k){if(k instanceof Error)return k.stack||k.message;return k}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return _.enable(_.load()),_}xT.exports=Ks});var bT=y((dT,Dw)=>{dT.formatArgs=js;dT.save=ws;dT.load=Os;dT.useColors=Ps;dT.storage=zs();dT.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();dT.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ps(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function js($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+Dw.exports.humanize(this.diff),!this.useColors)return;let q="color: "+this.color;$.splice(1,0,q,"color: inherit");let _=0,K=0;$[0].replace(/%[a-zA-Z%]/g,(P)=>{if(P==="%%")return;if(_++,P==="%c")K=_}),$.splice(K,0,q)}dT.log=console.debug||console.log||(()=>{});function ws($){try{if($)dT.storage.setItem("debug",$);else dT.storage.removeItem("debug")}catch(q){}}function Os(){let $;try{$=dT.storage.getItem("debug")}catch(q){}if(!$&&typeof process!=="undefined"&&"env"in process)$=process.env.DEBUG;return $}function zs(){try{return localStorage}catch($){}}Dw.exports=Of()(dT);var{formatters:fs}=Dw.exports;fs.j=function($){try{return JSON.stringify($)}catch(q){return"[UnexpectedJSONParseError]: "+q.message}}});var aT=y((iT,yw)=>{var As=i("tty"),pw=i("util");iT.init=Ss;iT.log=Ds;iT.formatArgs=Js;iT.save=ps;iT.load=ys;iT.useColors=Ws;iT.destroy=pw.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");iT.colors=[6,2,3,4,5,1];try{let $=(()=>{throw new Error("Cannot require module "+"supports-color");})();if($&&($.stderr||$).level>=2)iT.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}iT.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,q)=>{let _=q.substring(6).toLowerCase().replace(/_([a-z])/g,(P,w)=>{return w.toUpperCase()}),K=process.env[q];if(/^(yes|on|true|enabled)$/i.test(K))K=!0;else if(/^(no|off|false|disabled)$/i.test(K))K=!1;else if(K==="null")K=null;else K=Number(K);return $[_]=K,$},{});function Ws(){return"colors"in iT.inspectOpts?Boolean(iT.inspectOpts.colors):As.isatty(process.stderr.fd)}function Js($){let{namespace:q,useColors:_}=this;if(_){let K=this.color,P="\x1B[3"+(K<8?K:"8;5;"+K),w=`  ${P};1m${q} \x1B[0m`;$[0]=w+$[0].split(`
`).join(`
`+w),$.push(P+"m+"+yw.exports.humanize(this.diff)+"\x1B[0m")}else $[0]=Xs()+q+" "+$[0]}function Xs(){if(iT.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function Ds(...$){return process.stderr.write(pw.formatWithOptions(iT.inspectOpts,...$)+`
`)}function ps($){if($)process.env.DEBUG=$;else delete process.env.DEBUG}function ys(){return process.env.DEBUG}function Ss($){$.inspectOpts={};let q=Object.keys(iT.inspectOpts);for(let _=0;_<q.length;_++)$.inspectOpts[q[_]]=iT.inspectOpts[q[_]]}yw.exports=Of()(iT);var{formatters:oT}=yw.exports;oT.o=function($){return this.inspectOpts.colors=this.useColors,pw.inspect($,this.inspectOpts).split(`
`).map((q)=>q.trim()).join(" ")};oT.O=function($){return this.inspectOpts.colors=this.useColors,pw.inspect($,this.inspectOpts)}});var o8=y((tG$,zf)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)zf.exports=bT();else zf.exports=aT()});var rP=y((i_)=>{var Ls=i_&&i_.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(i_,"__esModule",{value:!0});i_.Transport=i_.TransportError=void 0;var Cs=R4(),ns=EK(),rs=RK(),Vs=wf(),xs=Ls(o8()),ds=xs.default("engine.io-client:transport");class ff extends Error{constructor($,q,_){super($);this.description=q,this.context=_,this.type="TransportError"}}i_.TransportError=ff;class cT extends ns.Emitter{constructor($){super();this.writable=!1,rs.installTimerFunctions(this,$),this.opts=$,this.query=$.query,this.socket=$.socket,this.supportsBinary=!$.forceBase64}onError($,q,_){return super.emitReserved("error",new ff($,q,_)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){if(this.readyState==="opening"||this.readyState==="open")this.doClose(),this.onClose();return this}send($){if(this.readyState==="open")this.write($);else ds("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData($){let q=Cs.decodePacket($,this.socket.binaryType);this.onPacket(q)}onPacket($){super.emitReserved("packet",$)}onClose($){this.readyState="closed",super.emitReserved("close",$)}pause($){}createUri($,q={}){return $+"://"+this._hostname()+this._port()+this.opts.path+this._query(q)}_hostname(){let $=this.opts.hostname;return $.indexOf(":")===-1?$:"["+$+"]"}_port(){if(this.opts.port&&(this.opts.secure&&Number(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80))return":"+this.opts.port;else return""}_query($){let q=Vs.encode($);return q.length?"?"+q:""}}i_.Transport=cT});var Mf=y((r4)=>{var bs=r4&&r4.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(r4,"__esModule",{value:!0});r4.Polling=void 0;var os=rP(),is=RK(),IT=R4(),gs=bs(o8()),Yq=gs.default("engine.io-client:polling");class lT extends os.Transport{constructor(){super(...arguments);this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause($){this.readyState="pausing";let q=()=>{Yq("paused"),this.readyState="paused",$()};if(this._polling||!this.writable){let _=0;if(this._polling)Yq("we are currently polling - waiting to pause"),_++,this.once("pollComplete",function(){Yq("pre-pause polling complete"),--_||q()});if(!this.writable)Yq("we are currently writing - waiting to pause"),_++,this.once("drain",function(){Yq("pre-pause writing complete"),--_||q()})}else q()}_poll(){Yq("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData($){Yq("polling got data %s",$);let q=(_)=>{if(this.readyState==="opening"&&_.type==="open")this.onOpen();if(_.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(_)};if(IT.decodePayload($,this.socket.binaryType).forEach(q),this.readyState!=="closed")if(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open")this._poll();else Yq('ignoring poll - transport state "%s"',this.readyState)}doClose(){let $=()=>{Yq("writing close packet"),this.write([{type:"close"}])};if(this.readyState==="open")Yq("transport open - closing"),$();else Yq("transport not open - deferring close"),this.once("open",$)}write($){this.writable=!1,IT.encodePayload($,(q)=>{this.doWrite(q,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let $=this.opts.secure?"https":"http",q=this.query||{};if(this.opts.timestampRequests!==!1)q[this.opts.timestampParam]=is.randomString();if(!this.supportsBinary&&!q.sid)q.b64=1;return this.createUri($,q)}}r4.Polling=lT});var BT=y((sT)=>{Object.defineProperty(sT,"__esModule",{value:!0});sT.hasCORS=void 0;var tT=!1;try{tT=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch($){}sT.hasCORS=tT});var Yf=y((oq)=>{var as=oq&&oq.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(oq,"__esModule",{value:!0});oq.XHR=oq.Request=oq.BaseXHR=void 0;var cs=Mf(),Is=EK(),FT=RK(),QT=uK(),ls=BT(),ts=as(o8()),vf=ts.default("engine.io-client:polling");function ss(){}class Hf extends cs.Polling{constructor($){super($);if(typeof location!=="undefined"){let q=location.protocol==="https:",_=location.port;if(!_)_=q?"443":"80";this.xd=typeof location!=="undefined"&&$.hostname!==location.hostname||_!==$.port}}doWrite($,q){let _=this.request({method:"POST",data:$});_.on("success",q),_.on("error",(K,P)=>{this.onError("xhr post error",K,P)})}doPoll(){vf("xhr poll");let $=this.request();$.on("data",this.onData.bind(this)),$.on("error",(q,_)=>{this.onError("xhr poll error",q,_)}),this.pollXhr=$}}oq.BaseXHR=Hf;class hq extends Is.Emitter{constructor($,q,_){super();this.createRequest=$,FT.installTimerFunctions(this,_),this._opts=_,this._method=_.method||"GET",this._uri=q,this._data=_.data!==void 0?_.data:null,this._create()}_create(){var $;let q=FT.pick(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");q.xdomain=!!this._opts.xd;let _=this._xhr=this.createRequest(q);try{vf("xhr open %s: %s",this._method,this._uri),_.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){_.setDisableHeaderCheck&&_.setDisableHeaderCheck(!0);for(let K in this._opts.extraHeaders)if(this._opts.extraHeaders.hasOwnProperty(K))_.setRequestHeader(K,this._opts.extraHeaders[K])}}catch(K){}if(this._method==="POST")try{_.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(K){}try{_.setRequestHeader("Accept","*/*")}catch(K){}if(($=this._opts.cookieJar)===null||$===void 0||$.addCookies(_),"withCredentials"in _)_.withCredentials=this._opts.withCredentials;if(this._opts.requestTimeout)_.timeout=this._opts.requestTimeout;_.onreadystatechange=()=>{var K;if(_.readyState===3)(K=this._opts.cookieJar)===null||K===void 0||K.parseCookies(_.getResponseHeader("set-cookie"));if(_.readyState!==4)return;if(_.status===200||_.status===1223)this._onLoad();else this.setTimeoutFn(()=>{this._onError(typeof _.status==="number"?_.status:0)},0)},vf("xhr data %s",this._data),_.send(this._data)}catch(K){this.setTimeoutFn(()=>{this._onError(K)},0);return}if(typeof document!=="undefined")this._index=hq.requestsCount++,hq.requests[this._index]=this}_onError($){this.emitReserved("error",$,this._xhr),this._cleanup(!0)}_cleanup($){if(typeof this._xhr==="undefined"||this._xhr===null)return;if(this._xhr.onreadystatechange=ss,$)try{this._xhr.abort()}catch(q){}if(typeof document!=="undefined")delete hq.requests[this._index];this._xhr=null}_onLoad(){let $=this._xhr.responseText;if($!==null)this.emitReserved("data",$),this.emitReserved("success"),this._cleanup()}abort(){this._cleanup()}}oq.Request=hq;hq.requestsCount=0;hq.requests={};if(typeof document!=="undefined"){if(typeof attachEvent==="function")attachEvent("onunload",UT);else if(typeof addEventListener==="function"){let $="onpagehide"in QT.globalThisShim?"pagehide":"unload";addEventListener($,UT,!1)}}function UT(){for(let $ in hq.requests)if(hq.requests.hasOwnProperty($))hq.requests[$].abort()}var es=function(){let $=qA({xdomain:!1});return $&&$.responseType!==null}();class $A extends Hf{constructor($){super($);let q=$&&$.forceBase64;this.supportsBinary=es&&!q}request($={}){return Object.assign($,{xd:this.xd},this.opts),new hq(qA,this.uri(),$)}}oq.XHR=$A;function qA($){let q=$.xdomain;try{if(typeof XMLHttpRequest!=="undefined"&&(!q||ls.hasCORS))return new XMLHttpRequest}catch(_){}if(!q)try{return new QT.globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(_){}}});var hf=y((iq)=>{var Bs=iq&&iq.__createBinding||(Object.create?function($,q,_,K){if(K===void 0)K=_;var P=Object.getOwnPropertyDescriptor(q,_);if(!P||("get"in P?!q.__esModule:P.writable||P.configurable))P={enumerable:!0,get:function(){return q[_]}};Object.defineProperty($,K,P)}:function($,q,_,K){if(K===void 0)K=_;$[K]=q[_]}),Fs=iq&&iq.__setModuleDefault||(Object.create?function($,q){Object.defineProperty($,"default",{enumerable:!0,value:q})}:function($,q){$.default=q}),Us=iq&&iq.__importStar||function($){if($&&$.__esModule)return $;var q={};if($!=null){for(var _ in $)if(_!=="default"&&Object.prototype.hasOwnProperty.call($,_))Bs(q,$,_)}return Fs(q,$),q};Object.defineProperty(iq,"__esModule",{value:!0});iq.XHR=void 0;var _A=Us(AT()),KA=Yf(),Qs=_A.default||_A;class PA extends KA.BaseXHR{request($={}){var q;return Object.assign($,{xd:this.xd,cookieJar:(q=this.socket)===null||q===void 0?void 0:q._cookieJar},this.opts),new KA.Request((_)=>new Qs(_),this.uri(),$)}}iq.XHR=PA});var g_=y((QG$,jA)=>{jA.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var VP=y(($Z$,Sw)=>{var{EMPTY_BUFFER:$e}=g_(),kf=Buffer[Symbol.species];function qe($,q){if($.length===0)return $e;if($.length===1)return $[0];let _=Buffer.allocUnsafe(q),K=0;for(let P=0;P<$.length;P++){let w=$[P];_.set(w,K),K+=w.length}if(K<q)return new kf(_.buffer,_.byteOffset,K);return _}function wA($,q,_,K,P){for(let w=0;w<P;w++)_[K+w]=$[w]^q[w&3]}function OA($,q){for(let _=0;_<$.length;_++)$[_]^=q[_&3]}function _e($){if($.length===$.buffer.byteLength)return $.buffer;return $.buffer.slice($.byteOffset,$.byteOffset+$.length)}function Tf($){if(Tf.readOnly=!0,Buffer.isBuffer($))return $;let q;if($ instanceof ArrayBuffer)q=new kf($);else if(ArrayBuffer.isView($))q=new kf($.buffer,$.byteOffset,$.byteLength);else q=Buffer.from($),Tf.readOnly=!1;return q}Sw.exports={concat:qe,mask:wA,toArrayBuffer:_e,toBuffer:Tf,unmask:OA};if(!process.env.WS_NO_BUFFER_UTIL)try{let $=(()=>{throw new Error("Cannot require module "+"bufferutil");})();Sw.exports.mask=function(q,_,K,P,w){if(w<48)wA(q,_,K,P,w);else $.mask(q,_,K,P,w)},Sw.exports.unmask=function(q,_){if(q.length<32)OA(q,_);else $.unmask(q,_)}}catch($){}});var vA=y((qZ$,MA)=>{var zA=Symbol("kDone"),Af=Symbol("kRun");class fA{constructor($){this[zA]=()=>{this.pending--,this[Af]()},this.concurrency=$||1/0,this.jobs=[],this.pending=0}add($){this.jobs.push($),this[Af]()}[Af](){if(this.pending===this.concurrency)return;if(this.jobs.length){let $=this.jobs.shift();this.pending++,$(this[zA])}}}MA.exports=fA});var bP=y((_Z$,TA)=>{var xP=i("zlib"),HA=VP(),Ke=vA(),{kStatusCode:YA}=g_(),Pe=Buffer[Symbol.species],je=Buffer.from([0,0,255,255]),Nw=Symbol("permessage-deflate"),T_=Symbol("total-length"),dP=Symbol("callback"),a_=Symbol("buffers"),Zw=Symbol("error"),Gw;class hA{constructor($,q,_){if(this._maxPayload=_|0,this._options=$||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!q,this._deflate=null,this._inflate=null,this.params=null,!Gw){let K=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Gw=new Ke(K)}}static get extensionName(){return"permessage-deflate"}offer(){let $={};if(this._options.serverNoContextTakeover)$.server_no_context_takeover=!0;if(this._options.clientNoContextTakeover)$.client_no_context_takeover=!0;if(this._options.serverMaxWindowBits)$.server_max_window_bits=this._options.serverMaxWindowBits;if(this._options.clientMaxWindowBits)$.client_max_window_bits=this._options.clientMaxWindowBits;else if(this._options.clientMaxWindowBits==null)$.client_max_window_bits=!0;return $}accept($){return $=this.normalizeParams($),this.params=this._isServer?this.acceptAsServer($):this.acceptAsClient($),this.params}cleanup(){if(this._inflate)this._inflate.close(),this._inflate=null;if(this._deflate){let $=this._deflate[dP];if(this._deflate.close(),this._deflate=null,$)$(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer($){let q=this._options,_=$.find((K)=>{if(q.serverNoContextTakeover===!1&&K.server_no_context_takeover||K.server_max_window_bits&&(q.serverMaxWindowBits===!1||typeof q.serverMaxWindowBits==="number"&&q.serverMaxWindowBits>K.server_max_window_bits)||typeof q.clientMaxWindowBits==="number"&&!K.client_max_window_bits)return!1;return!0});if(!_)throw new Error("None of the extension offers can be accepted");if(q.serverNoContextTakeover)_.server_no_context_takeover=!0;if(q.clientNoContextTakeover)_.client_no_context_takeover=!0;if(typeof q.serverMaxWindowBits==="number")_.server_max_window_bits=q.serverMaxWindowBits;if(typeof q.clientMaxWindowBits==="number")_.client_max_window_bits=q.clientMaxWindowBits;else if(_.client_max_window_bits===!0||q.clientMaxWindowBits===!1)delete _.client_max_window_bits;return _}acceptAsClient($){let q=$[0];if(this._options.clientNoContextTakeover===!1&&q.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!q.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number")q.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits==="number"&&q.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return q}normalizeParams($){return $.forEach((q)=>{Object.keys(q).forEach((_)=>{let K=q[_];if(K.length>1)throw new Error(`Parameter "${_}" must have only a single value`);if(K=K[0],_==="client_max_window_bits"){if(K!==!0){let P=+K;if(!Number.isInteger(P)||P<8||P>15)throw new TypeError(`Invalid value for parameter "${_}": ${K}`);K=P}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${_}": ${K}`)}else if(_==="server_max_window_bits"){let P=+K;if(!Number.isInteger(P)||P<8||P>15)throw new TypeError(`Invalid value for parameter "${_}": ${K}`);K=P}else if(_==="client_no_context_takeover"||_==="server_no_context_takeover"){if(K!==!0)throw new TypeError(`Invalid value for parameter "${_}": ${K}`)}else throw new Error(`Unknown parameter "${_}"`);q[_]=K})}),$}decompress($,q,_){Gw.add((K)=>{this._decompress($,q,(P,w)=>{K(),_(P,w)})})}compress($,q,_){Gw.add((K)=>{this._compress($,q,(P,w)=>{K(),_(P,w)})})}_decompress($,q,_){let K=this._isServer?"client":"server";if(!this._inflate){let P=`${K}_max_window_bits`,w=typeof this.params[P]!=="number"?xP.Z_DEFAULT_WINDOWBITS:this.params[P];this._inflate=xP.createInflateRaw({...this._options.zlibInflateOptions,windowBits:w}),this._inflate[Nw]=this,this._inflate[T_]=0,this._inflate[a_]=[],this._inflate.on("error",Oe),this._inflate.on("data",kA)}if(this._inflate[dP]=_,this._inflate.write($),q)this._inflate.write(je);this._inflate.flush(()=>{let P=this._inflate[Zw];if(P){this._inflate.close(),this._inflate=null,_(P);return}let w=HA.concat(this._inflate[a_],this._inflate[T_]);if(this._inflate._readableState.endEmitted)this._inflate.close(),this._inflate=null;else if(this._inflate[T_]=0,this._inflate[a_]=[],q&&this.params[`${K}_no_context_takeover`])this._inflate.reset();_(null,w)})}_compress($,q,_){let K=this._isServer?"server":"client";if(!this._deflate){let P=`${K}_max_window_bits`,w=typeof this.params[P]!=="number"?xP.Z_DEFAULT_WINDOWBITS:this.params[P];this._deflate=xP.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:w}),this._deflate[T_]=0,this._deflate[a_]=[],this._deflate.on("data",we)}this._deflate[dP]=_,this._deflate.write($),this._deflate.flush(xP.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let P=HA.concat(this._deflate[a_],this._deflate[T_]);if(q)P=new Pe(P.buffer,P.byteOffset,P.length-4);if(this._deflate[dP]=null,this._deflate[T_]=0,this._deflate[a_]=[],q&&this.params[`${K}_no_context_takeover`])this._deflate.reset();_(null,P)})}}TA.exports=hA;function we($){this[a_].push($),this[T_]+=$.length}function kA($){if(this[T_]+=$.length,this[Nw]._maxPayload<1||this[T_]<=this[Nw]._maxPayload){this[a_].push($);return}this[Zw]=new RangeError("Max payload size exceeded"),this[Zw].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Zw][YA]=1009,this.removeListener("data",kA),this.reset()}function Oe($){this[Nw]._inflate=null,$[YA]=1007,this[dP]($)}});var oP=y((KZ$,mw)=>{var{isUtf8:AA}=i("buffer"),ze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function fe($){return $>=1000&&$<=1014&&$!==1004&&$!==1005&&$!==1006||$>=3000&&$<=4999}function Wf($){let q=$.length,_=0;while(_<q)if(($[_]&128)===0)_++;else if(($[_]&224)===192){if(_+1===q||($[_+1]&192)!==128||($[_]&254)===192)return!1;_+=2}else if(($[_]&240)===224){if(_+2>=q||($[_+1]&192)!==128||($[_+2]&192)!==128||$[_]===224&&($[_+1]&224)===128||$[_]===237&&($[_+1]&224)===160)return!1;_+=3}else if(($[_]&248)===240){if(_+3>=q||($[_+1]&192)!==128||($[_+2]&192)!==128||($[_+3]&192)!==128||$[_]===240&&($[_+1]&240)===128||$[_]===244&&$[_+1]>143||$[_]>244)return!1;_+=4}else return!1;return!0}mw.exports={isValidStatusCode:fe,isValidUTF8:Wf,tokenChars:ze};if(AA)mw.exports.isValidUTF8=function($){return $.length<24?Wf($):AA($)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let $=(()=>{throw new Error("Cannot require module "+"utf-8-validate");})();mw.exports.isValidUTF8=function(q){return q.length<32?Wf(q):$(q)}}catch($){}});var Xf=y((PZ$,pA)=>{var{Writable:Me}=i("stream"),WA=bP(),{BINARY_TYPES:ve,EMPTY_BUFFER:JA,kStatusCode:He,kWebSocket:Ye}=g_(),{concat:Jf,toArrayBuffer:he,unmask:ke}=VP(),{isValidStatusCode:Te,isValidUTF8:XA}=oP(),Ew=Buffer[Symbol.species];class DA extends Me{constructor($={}){super();this._allowSynchronousEvents=$.allowSynchronousEvents!==void 0?$.allowSynchronousEvents:!0,this._binaryType=$.binaryType||ve[0],this._extensions=$.extensions||{},this._isServer=!!$.isServer,this._maxPayload=$.maxPayload|0,this._skipUTF8Validation=!!$.skipUTF8Validation,this[Ye]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write($,q,_){if(this._opcode===8&&this._state==0)return _();this._bufferedBytes+=$.length,this._buffers.push($),this.startLoop(_)}consume($){if(this._bufferedBytes-=$,$===this._buffers[0].length)return this._buffers.shift();if($<this._buffers[0].length){let _=this._buffers[0];return this._buffers[0]=new Ew(_.buffer,_.byteOffset+$,_.length-$),new Ew(_.buffer,_.byteOffset,$)}let q=Buffer.allocUnsafe($);do{let _=this._buffers[0],K=q.length-$;if($>=_.length)q.set(this._buffers.shift(),K);else q.set(new Uint8Array(_.buffer,_.byteOffset,$),K),this._buffers[0]=new Ew(_.buffer,_.byteOffset+$,_.length-$);$-=_.length}while($>0);return q}startLoop($){this._loop=!0;do switch(this._state){case 0:this.getInfo($);break;case 1:this.getPayloadLength16($);break;case 2:this.getPayloadLength64($);break;case 3:this.getMask();break;case 4:this.getData($);break;case 5:case 6:this._loop=!1;return}while(this._loop);if(!this._errored)$()}getInfo($){if(this._bufferedBytes<2){this._loop=!1;return}let q=this.consume(2);if((q[0]&48)!==0){let K=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");$(K);return}let _=(q[0]&64)===64;if(_&&!this._extensions[WA.extensionName]){let K=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");$(K);return}if(this._fin=(q[0]&128)===128,this._opcode=q[0]&15,this._payloadLength=q[1]&127,this._opcode===0){if(_){let K=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");$(K);return}if(!this._fragmented){let K=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");$(K);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let K=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");$(K);return}this._compressed=_}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let K=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");$(K);return}if(_){let K=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");$(K);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let K=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");$(K);return}}else{let K=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");$(K);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;if(this._masked=(q[1]&128)===128,this._isServer){if(!this._masked){let K=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");$(K);return}}else if(this._masked){let K=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");$(K);return}if(this._payloadLength===126)this._state=1;else if(this._payloadLength===127)this._state=2;else this.haveLength($)}getPayloadLength16($){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength($)}getPayloadLength64($){if(this._bufferedBytes<8){this._loop=!1;return}let q=this.consume(8),_=q.readUInt32BE(0);if(_>Math.pow(2,21)-1){let K=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");$(K);return}this._payloadLength=_*Math.pow(2,32)+q.readUInt32BE(4),this.haveLength($)}haveLength($){if(this._payloadLength&&this._opcode<8){if(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){let q=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");$(q);return}}if(this._masked)this._state=3;else this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData($){let q=JA;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}if(q=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0)ke(q,this._mask)}if(this._opcode>7){this.controlMessage(q,$);return}if(this._compressed){this._state=5,this.decompress(q,$);return}if(q.length)this._messageLength=this._totalPayloadLength,this._fragments.push(q);this.dataMessage($)}decompress($,q){this._extensions[WA.extensionName].decompress($,this._fin,(K,P)=>{if(K)return q(K);if(P.length){if(this._messageLength+=P.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let w=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");q(w);return}this._fragments.push(P)}if(this.dataMessage(q),this._state===0)this.startLoop(q)})}dataMessage($){if(!this._fin){this._state=0;return}let q=this._messageLength,_=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let K;if(this._binaryType==="nodebuffer")K=Jf(_,q);else if(this._binaryType==="arraybuffer")K=he(Jf(_,q));else K=_;if(this._allowSynchronousEvents)this.emit("message",K,!0),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",K,!0),this._state=0,this.startLoop($)})}else{let K=Jf(_,q);if(!this._skipUTF8Validation&&!XA(K)){let P=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");$(P);return}if(this._state===5||this._allowSynchronousEvents)this.emit("message",K,!1),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",K,!1),this._state=0,this.startLoop($)})}}controlMessage($,q){if(this._opcode===8){if($.length===0)this._loop=!1,this.emit("conclude",1005,JA),this.end();else{let _=$.readUInt16BE(0);if(!Te(_)){let P=this.createError(RangeError,`invalid status code ${_}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");q(P);return}let K=new Ew($.buffer,$.byteOffset+2,$.length-2);if(!this._skipUTF8Validation&&!XA(K)){let P=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");q(P);return}this._loop=!1,this.emit("conclude",_,K),this.end()}this._state=0;return}if(this._allowSynchronousEvents)this.emit(this._opcode===9?"ping":"pong",$),this._state=0;else this._state=6,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",$),this._state=0,this.startLoop(q)})}createError($,q,_,K,P){this._loop=!1,this._errored=!0;let w=new $(_?`Invalid WebSocket frame: ${q}`:q);return Error.captureStackTrace(w,this.createError),w.code=P,w[He]=K,w}}pA.exports=DA});var Df=y((wZ$,GA)=>{var{Duplex:jZ$}=i("stream"),{randomFillSync:Ae}=i("crypto"),yA=bP(),{EMPTY_BUFFER:We}=g_(),{isValidStatusCode:Je}=oP(),{mask:SA,toBuffer:V4}=VP(),kq=Symbol("kByteLength"),Xe=Buffer.alloc(4),nK,x4=8192;class c_{constructor($,q,_){if(this._extensions=q||{},_)this._generateMask=_,this._maskBuffer=Buffer.alloc(4);this._socket=$,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame($,q){let _,K=!1,P=2,w=!1;if(q.mask){if(_=q.maskBuffer||Xe,q.generateMask)q.generateMask(_);else{if(x4===8192){if(nK===void 0)nK=Buffer.alloc(8192);Ae(nK,0,8192),x4=0}_[0]=nK[x4++],_[1]=nK[x4++],_[2]=nK[x4++],_[3]=nK[x4++]}w=(_[0]|_[1]|_[2]|_[3])===0,P=6}let O;if(typeof $==="string")if((!q.mask||w)&&q[kq]!==void 0)O=q[kq];else $=Buffer.from($),O=$.length;else O=$.length,K=q.mask&&q.readOnly&&!w;let f=O;if(O>=65536)P+=8,f=127;else if(O>125)P+=2,f=126;let Y=Buffer.allocUnsafe(K?O+P:P);if(Y[0]=q.fin?q.opcode|128:q.opcode,q.rsv1)Y[0]|=64;if(Y[1]=f,f===126)Y.writeUInt16BE(O,2);else if(f===127)Y[2]=Y[3]=0,Y.writeUIntBE(O,4,6);if(!q.mask)return[Y,$];if(Y[1]|=128,Y[P-4]=_[0],Y[P-3]=_[1],Y[P-2]=_[2],Y[P-1]=_[3],w)return[Y,$];if(K)return SA($,_,Y,P,O),[Y];return SA($,_,$,0,O),[Y,$]}close($,q,_,K){let P;if($===void 0)P=We;else if(typeof $!=="number"||!Je($))throw new TypeError("First argument must be a valid error code number");else if(q===void 0||!q.length)P=Buffer.allocUnsafe(2),P.writeUInt16BE($,0);else{let O=Buffer.byteLength(q);if(O>123)throw new RangeError("The message must not be greater than 123 bytes");if(P=Buffer.allocUnsafe(2+O),P.writeUInt16BE($,0),typeof q==="string")P.write(q,2);else P.set(q,2)}let w={[kq]:P.length,fin:!0,generateMask:this._generateMask,mask:_,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};if(this._deflating)this.enqueue([this.dispatch,P,!1,w,K]);else this.sendFrame(c_.frame(P,w),K)}ping($,q,_){let K,P;if(typeof $==="string")K=Buffer.byteLength($),P=!1;else $=V4($),K=$.length,P=V4.readOnly;if(K>125)throw new RangeError("The data size must not be greater than 125 bytes");let w={[kq]:K,fin:!0,generateMask:this._generateMask,mask:q,maskBuffer:this._maskBuffer,opcode:9,readOnly:P,rsv1:!1};if(this._deflating)this.enqueue([this.dispatch,$,!1,w,_]);else this.sendFrame(c_.frame($,w),_)}pong($,q,_){let K,P;if(typeof $==="string")K=Buffer.byteLength($),P=!1;else $=V4($),K=$.length,P=V4.readOnly;if(K>125)throw new RangeError("The data size must not be greater than 125 bytes");let w={[kq]:K,fin:!0,generateMask:this._generateMask,mask:q,maskBuffer:this._maskBuffer,opcode:10,readOnly:P,rsv1:!1};if(this._deflating)this.enqueue([this.dispatch,$,!1,w,_]);else this.sendFrame(c_.frame($,w),_)}send($,q,_){let K=this._extensions[yA.extensionName],P=q.binary?2:1,w=q.compress,O,f;if(typeof $==="string")O=Buffer.byteLength($),f=!1;else $=V4($),O=$.length,f=V4.readOnly;if(this._firstFragment){if(this._firstFragment=!1,w&&K&&K.params[K._isServer?"server_no_context_takeover":"client_no_context_takeover"])w=O>=K._threshold;this._compress=w}else w=!1,P=0;if(q.fin)this._firstFragment=!0;if(K){let Y={[kq]:O,fin:q.fin,generateMask:this._generateMask,mask:q.mask,maskBuffer:this._maskBuffer,opcode:P,readOnly:f,rsv1:w};if(this._deflating)this.enqueue([this.dispatch,$,this._compress,Y,_]);else this.dispatch($,this._compress,Y,_)}else this.sendFrame(c_.frame($,{[kq]:O,fin:q.fin,generateMask:this._generateMask,mask:q.mask,maskBuffer:this._maskBuffer,opcode:P,readOnly:f,rsv1:!1}),_)}dispatch($,q,_,K){if(!q){this.sendFrame(c_.frame($,_),K);return}let P=this._extensions[yA.extensionName];this._bufferedBytes+=_[kq],this._deflating=!0,P.compress($,_.fin,(w,O)=>{if(this._socket.destroyed){let f=new Error("The socket was closed while data was being compressed");if(typeof K==="function")K(f);for(let Y=0;Y<this._queue.length;Y++){let h=this._queue[Y],k=h[h.length-1];if(typeof k==="function")k(f)}return}this._bufferedBytes-=_[kq],this._deflating=!1,_.readOnly=!1,this.sendFrame(c_.frame(O,_),K),this.dequeue()})}dequeue(){while(!this._deflating&&this._queue.length){let $=this._queue.shift();this._bufferedBytes-=$[3][kq],Reflect.apply($[0],this,$.slice(1))}}enqueue($){this._bufferedBytes+=$[3][kq],this._queue.push($)}sendFrame($,q){if($.length===2)this._socket.cork(),this._socket.write($[0]),this._socket.write($[1],q),this._socket.uncork();else this._socket.write($[0],q)}}GA.exports=c_});var nA=y((OZ$,CA)=>{var{kForOnEventAttribute:iP,kListener:pf}=g_(),ZA=Symbol("kCode"),NA=Symbol("kData"),mA=Symbol("kError"),EA=Symbol("kMessage"),uA=Symbol("kReason"),d4=Symbol("kTarget"),RA=Symbol("kType"),LA=Symbol("kWasClean");class I_{constructor($){this[d4]=null,this[RA]=$}get target(){return this[d4]}get type(){return this[RA]}}Object.defineProperty(I_.prototype,"target",{enumerable:!0});Object.defineProperty(I_.prototype,"type",{enumerable:!0});class b4 extends I_{constructor($,q={}){super($);this[ZA]=q.code===void 0?0:q.code,this[uA]=q.reason===void 0?"":q.reason,this[LA]=q.wasClean===void 0?!1:q.wasClean}get code(){return this[ZA]}get reason(){return this[uA]}get wasClean(){return this[LA]}}Object.defineProperty(b4.prototype,"code",{enumerable:!0});Object.defineProperty(b4.prototype,"reason",{enumerable:!0});Object.defineProperty(b4.prototype,"wasClean",{enumerable:!0});class gP extends I_{constructor($,q={}){super($);this[mA]=q.error===void 0?null:q.error,this[EA]=q.message===void 0?"":q.message}get error(){return this[mA]}get message(){return this[EA]}}Object.defineProperty(gP.prototype,"error",{enumerable:!0});Object.defineProperty(gP.prototype,"message",{enumerable:!0});class Rw extends I_{constructor($,q={}){super($);this[NA]=q.data===void 0?null:q.data}get data(){return this[NA]}}Object.defineProperty(Rw.prototype,"data",{enumerable:!0});var De={addEventListener($,q,_={}){for(let P of this.listeners($))if(!_[iP]&&P[pf]===q&&!P[iP])return;let K;if($==="message")K=function P(w,O){let f=new Rw("message",{data:O?w:w.toString()});f[d4]=this,uw(q,this,f)};else if($==="close")K=function P(w,O){let f=new b4("close",{code:w,reason:O.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});f[d4]=this,uw(q,this,f)};else if($==="error")K=function P(w){let O=new gP("error",{error:w,message:w.message});O[d4]=this,uw(q,this,O)};else if($==="open")K=function P(){let w=new I_("open");w[d4]=this,uw(q,this,w)};else return;if(K[iP]=!!_[iP],K[pf]=q,_.once)this.once($,K);else this.on($,K)},removeEventListener($,q){for(let _ of this.listeners($))if(_[pf]===q&&!_[iP]){this.removeListener($,_);break}}};CA.exports={CloseEvent:b4,ErrorEvent:gP,Event:I_,EventTarget:De,MessageEvent:Rw};function uw($,q,_){if(typeof $==="object"&&$.handleEvent)$.handleEvent.call($,_);else $.call(q,_)}});var yf=y((zZ$,rA)=>{var{tokenChars:aP}=oP();function gq($,q,_){if($[q]===void 0)$[q]=[_];else $[q].push(_)}function pe($){let q=Object.create(null),_=Object.create(null),K=!1,P=!1,w=!1,O,f,Y=-1,h=-1,k=-1,T=0;for(;T<$.length;T++)if(h=$.charCodeAt(T),O===void 0)if(k===-1&&aP[h]===1){if(Y===-1)Y=T}else if(T!==0&&(h===32||h===9)){if(k===-1&&Y!==-1)k=T}else if(h===59||h===44){if(Y===-1)throw new SyntaxError(`Unexpected character at index ${T}`);if(k===-1)k=T;let G=$.slice(Y,k);if(h===44)gq(q,G,_),_=Object.create(null);else O=G;Y=k=-1}else throw new SyntaxError(`Unexpected character at index ${T}`);else if(f===void 0)if(k===-1&&aP[h]===1){if(Y===-1)Y=T}else if(h===32||h===9){if(k===-1&&Y!==-1)k=T}else if(h===59||h===44){if(Y===-1)throw new SyntaxError(`Unexpected character at index ${T}`);if(k===-1)k=T;if(gq(_,$.slice(Y,k),!0),h===44)gq(q,O,_),_=Object.create(null),O=void 0;Y=k=-1}else if(h===61&&Y!==-1&&k===-1)f=$.slice(Y,T),Y=k=-1;else throw new SyntaxError(`Unexpected character at index ${T}`);else if(P){if(aP[h]!==1)throw new SyntaxError(`Unexpected character at index ${T}`);if(Y===-1)Y=T;else if(!K)K=!0;P=!1}else if(w)if(aP[h]===1){if(Y===-1)Y=T}else if(h===34&&Y!==-1)w=!1,k=T;else if(h===92)P=!0;else throw new SyntaxError(`Unexpected character at index ${T}`);else if(h===34&&$.charCodeAt(T-1)===61)w=!0;else if(k===-1&&aP[h]===1){if(Y===-1)Y=T}else if(Y!==-1&&(h===32||h===9)){if(k===-1)k=T}else if(h===59||h===44){if(Y===-1)throw new SyntaxError(`Unexpected character at index ${T}`);if(k===-1)k=T;let G=$.slice(Y,k);if(K)G=G.replace(/\\/g,""),K=!1;if(gq(_,f,G),h===44)gq(q,O,_),_=Object.create(null),O=void 0;f=void 0,Y=k=-1}else throw new SyntaxError(`Unexpected character at index ${T}`);if(Y===-1||w||h===32||h===9)throw new SyntaxError("Unexpected end of input");if(k===-1)k=T;let p=$.slice(Y,k);if(O===void 0)gq(q,p,_);else{if(f===void 0)gq(_,p,!0);else if(K)gq(_,f,p.replace(/\\/g,""));else gq(_,f,p);gq(q,O,_)}return q}function ye($){return Object.keys($).map((q)=>{let _=$[q];if(!Array.isArray(_))_=[_];return _.map((K)=>{return[q].concat(Object.keys(K).map((P)=>{let w=K[P];if(!Array.isArray(w))w=[w];return w.map((O)=>O===!0?P:`${P}=${O}`).join("; ")})).join("; ")}).join(", ")}).join(", ")}rA.exports={format:ye,parse:pe}});var mf=y((vZ$,lA)=>{var Se=i("events"),Ge=i("https"),Ze=i("http"),dA=i("net"),Ne=i("tls"),{randomBytes:me,createHash:Ee}=i("crypto"),{Duplex:fZ$,Readable:MZ$}=i("stream"),{URL:Sf}=i("url"),l_=bP(),ue=Xf(),Re=Df(),{BINARY_TYPES:VA,EMPTY_BUFFER:Lw,GUID:Le,kForOnEventAttribute:Gf,kListener:Ce,kStatusCode:ne,kWebSocket:g6,NOOP:bA}=g_(),{EventTarget:{addEventListener:re,removeEventListener:Ve}}=nA(),{format:xe,parse:de}=yf(),{toBuffer:be}=VP(),oA=Symbol("kAborted"),Zf=[8,13],A_=["CONNECTING","OPEN","CLOSING","CLOSED"],oe=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class A$ extends Se{constructor($,q,_){super();if(this._binaryType=VA[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Lw,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=A$.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,$!==null){if(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,q===void 0)q=[];else if(!Array.isArray(q))if(typeof q==="object"&&q!==null)_=q,q=[];else q=[q];iA(this,$,q,_)}else this._autoPong=_.autoPong,this._isServer=!0}get binaryType(){return this._binaryType}set binaryType($){if(!VA.includes($))return;if(this._binaryType=$,this._receiver)this._receiver._binaryType=$}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket($,q,_){let K=new ue({allowSynchronousEvents:_.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:_.maxPayload,skipUTF8Validation:_.skipUTF8Validation});if(this._sender=new Re($,this._extensions,_.generateMask),this._receiver=K,this._socket=$,K[g6]=this,$[g6]=this,K.on("conclude",ae),K.on("drain",ce),K.on("error",Ie),K.on("message",le),K.on("ping",te),K.on("pong",se),$.setTimeout)$.setTimeout(0);if($.setNoDelay)$.setNoDelay();if(q.length>0)$.unshift(q);$.on("close",aA),$.on("data",nw),$.on("end",cA),$.on("error",IA),this._readyState=A$.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=A$.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[l_.extensionName])this._extensions[l_.extensionName].cleanup();this._receiver.removeAllListeners(),this._readyState=A$.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close($,q){if(this.readyState===A$.CLOSED)return;if(this.readyState===A$.CONNECTING){N8(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===A$.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted))this._socket.end();return}this._readyState=A$.CLOSING,this._sender.close($,q,!this._isServer,(_)=>{if(_)return;if(this._closeFrameSent=!0,this._closeFrameReceived||this._receiver._writableState.errorEmitted)this._socket.end()}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),30000)}pause(){if(this.readyState===A$.CONNECTING||this.readyState===A$.CLOSED)return;this._paused=!0,this._socket.pause()}ping($,q,_){if(this.readyState===A$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof $==="function")_=$,$=q=void 0;else if(typeof q==="function")_=q,q=void 0;if(typeof $==="number")$=$.toString();if(this.readyState!==A$.OPEN){Nf(this,$,_);return}if(q===void 0)q=!this._isServer;this._sender.ping($||Lw,q,_)}pong($,q,_){if(this.readyState===A$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof $==="function")_=$,$=q=void 0;else if(typeof q==="function")_=q,q=void 0;if(typeof $==="number")$=$.toString();if(this.readyState!==A$.OPEN){Nf(this,$,_);return}if(q===void 0)q=!this._isServer;this._sender.pong($||Lw,q,_)}resume(){if(this.readyState===A$.CONNECTING||this.readyState===A$.CLOSED)return;if(this._paused=!1,!this._receiver._writableState.needDrain)this._socket.resume()}send($,q,_){if(this.readyState===A$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof q==="function")_=q,q={};if(typeof $==="number")$=$.toString();if(this.readyState!==A$.OPEN){Nf(this,$,_);return}let K={binary:typeof $!=="string",mask:!this._isServer,compress:!0,fin:!0,...q};if(!this._extensions[l_.extensionName])K.compress=!1;this._sender.send($||Lw,K,_)}terminate(){if(this.readyState===A$.CLOSED)return;if(this.readyState===A$.CONNECTING){N8(this,this._req,"WebSocket was closed before the connection was established");return}if(this._socket)this._readyState=A$.CLOSING,this._socket.destroy()}}Object.defineProperty(A$,"CONNECTING",{enumerable:!0,value:A_.indexOf("CONNECTING")});Object.defineProperty(A$.prototype,"CONNECTING",{enumerable:!0,value:A_.indexOf("CONNECTING")});Object.defineProperty(A$,"OPEN",{enumerable:!0,value:A_.indexOf("OPEN")});Object.defineProperty(A$.prototype,"OPEN",{enumerable:!0,value:A_.indexOf("OPEN")});Object.defineProperty(A$,"CLOSING",{enumerable:!0,value:A_.indexOf("CLOSING")});Object.defineProperty(A$.prototype,"CLOSING",{enumerable:!0,value:A_.indexOf("CLOSING")});Object.defineProperty(A$,"CLOSED",{enumerable:!0,value:A_.indexOf("CLOSED")});Object.defineProperty(A$.prototype,"CLOSED",{enumerable:!0,value:A_.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(($)=>{Object.defineProperty(A$.prototype,$,{enumerable:!0})});["open","error","close","message"].forEach(($)=>{Object.defineProperty(A$.prototype,`on${$}`,{enumerable:!0,get(){for(let q of this.listeners($))if(q[Gf])return q[Ce];return null},set(q){for(let _ of this.listeners($))if(_[Gf]){this.removeListener($,_);break}if(typeof q!=="function")return;this.addEventListener($,q,{[Gf]:!0})}})});A$.prototype.addEventListener=re;A$.prototype.removeEventListener=Ve;lA.exports=A$;function iA($,q,_,K){let P={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Zf[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...K,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if($._autoPong=P.autoPong,!Zf.includes(P.protocolVersion))throw new RangeError(`Unsupported protocol version: ${P.protocolVersion} (supported versions: ${Zf.join(", ")})`);let w;if(q instanceof Sf)w=q;else try{w=new Sf(q)}catch(X){throw new SyntaxError(`Invalid URL: ${q}`)}if(w.protocol==="http:")w.protocol="ws:";else if(w.protocol==="https:")w.protocol="wss:";$._url=w.href;let O=w.protocol==="wss:",f=w.protocol==="ws+unix:",Y;if(w.protocol!=="ws:"&&!O&&!f)Y=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`;else if(f&&!w.pathname)Y="The URL's pathname is empty";else if(w.hash)Y="The URL contains a fragment identifier";if(Y){let X=new SyntaxError(Y);if($._redirects===0)throw X;else{Cw($,X);return}}let h=O?443:80,k=me(16).toString("base64"),T=O?Ge.request:Ze.request,p=new Set,G;if(P.createConnection=P.createConnection||(O?ge:ie),P.defaultPort=P.defaultPort||h,P.port=w.port||h,P.host=w.hostname.startsWith("[")?w.hostname.slice(1,-1):w.hostname,P.headers={...P.headers,"Sec-WebSocket-Version":P.protocolVersion,"Sec-WebSocket-Key":k,Connection:"Upgrade",Upgrade:"websocket"},P.path=w.pathname+w.search,P.timeout=P.handshakeTimeout,P.perMessageDeflate)G=new l_(P.perMessageDeflate!==!0?P.perMessageDeflate:{},!1,P.maxPayload),P.headers["Sec-WebSocket-Extensions"]=xe({[l_.extensionName]:G.offer()});if(_.length){for(let X of _){if(typeof X!=="string"||!oe.test(X)||p.has(X))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(X)}P.headers["Sec-WebSocket-Protocol"]=_.join(",")}if(P.origin)if(P.protocolVersion<13)P.headers["Sec-WebSocket-Origin"]=P.origin;else P.headers.Origin=P.origin;if(w.username||w.password)P.auth=`${w.username}:${w.password}`;if(f){let X=P.path.split(":");P.socketPath=X[0],P.path=X[1]}let Z;if(P.followRedirects){if($._redirects===0){$._originalIpc=f,$._originalSecure=O,$._originalHostOrSocketPath=f?P.socketPath:w.host;let X=K&&K.headers;if(K={...K,headers:{}},X)for(let[C,N]of Object.entries(X))K.headers[C.toLowerCase()]=N}else if($.listenerCount("redirect")===0){let X=f?$._originalIpc?P.socketPath===$._originalHostOrSocketPath:!1:$._originalIpc?!1:w.host===$._originalHostOrSocketPath;if(!X||$._originalSecure&&!O){if(delete P.headers.authorization,delete P.headers.cookie,!X)delete P.headers.host;P.auth=void 0}}if(P.auth&&!K.headers.authorization)K.headers.authorization="Basic "+Buffer.from(P.auth).toString("base64");if(Z=$._req=T(P),$._redirects)$.emit("redirect",$.url,Z)}else Z=$._req=T(P);if(P.timeout)Z.on("timeout",()=>{N8($,Z,"Opening handshake has timed out")});if(Z.on("error",(X)=>{if(Z===null||Z[oA])return;Z=$._req=null,Cw($,X)}),Z.on("response",(X)=>{let C=X.headers.location,N=X.statusCode;if(C&&P.followRedirects&&N>=300&&N<400){if(++$._redirects>P.maxRedirects){N8($,Z,"Maximum redirects exceeded");return}Z.abort();let L;try{L=new Sf(C,q)}catch(m){let E=new SyntaxError(`Invalid URL: ${C}`);Cw($,E);return}iA($,L,_,K)}else if(!$.emit("unexpected-response",Z,X))N8($,Z,`Unexpected server response: ${X.statusCode}`)}),Z.on("upgrade",(X,C,N)=>{if($.emit("upgrade",X),$.readyState!==A$.CONNECTING)return;Z=$._req=null;let L=X.headers.upgrade;if(L===void 0||L.toLowerCase()!=="websocket"){N8($,C,"Invalid Upgrade header");return}let m=Ee("sha1").update(k+Le).digest("base64");if(X.headers["sec-websocket-accept"]!==m){N8($,C,"Invalid Sec-WebSocket-Accept header");return}let E=X.headers["sec-websocket-protocol"],W;if(E!==void 0){if(!p.size)W="Server sent a subprotocol but none was requested";else if(!p.has(E))W="Server sent an invalid subprotocol"}else if(p.size)W="Server sent no subprotocol";if(W){N8($,C,W);return}if(E)$._protocol=E;let V=X.headers["sec-websocket-extensions"];if(V!==void 0){if(!G){N8($,C,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let n;try{n=de(V)}catch(x){N8($,C,"Invalid Sec-WebSocket-Extensions header");return}let b=Object.keys(n);if(b.length!==1||b[0]!==l_.extensionName){N8($,C,"Server indicated an extension that was not requested");return}try{G.accept(n[l_.extensionName])}catch(x){N8($,C,"Invalid Sec-WebSocket-Extensions header");return}$._extensions[l_.extensionName]=G}$.setSocket(C,N,{allowSynchronousEvents:P.allowSynchronousEvents,generateMask:P.generateMask,maxPayload:P.maxPayload,skipUTF8Validation:P.skipUTF8Validation})}),P.finishRequest)P.finishRequest(Z,$);else Z.end()}function Cw($,q){$._readyState=A$.CLOSING,$.emit("error",q),$.emitClose()}function ie($){return $.path=$.socketPath,dA.connect($)}function ge($){if($.path=void 0,!$.servername&&$.servername!=="")$.servername=dA.isIP($.host)?"":$.host;return Ne.connect($)}function N8($,q,_){$._readyState=A$.CLOSING;let K=new Error(_);if(Error.captureStackTrace(K,N8),q.setHeader){if(q[oA]=!0,q.abort(),q.socket&&!q.socket.destroyed)q.socket.destroy();process.nextTick(Cw,$,K)}else q.destroy(K),q.once("error",$.emit.bind($,"error")),q.once("close",$.emitClose.bind($))}function Nf($,q,_){if(q){let K=be(q).length;if($._socket)$._sender._bufferedBytes+=K;else $._bufferedAmount+=K}if(_){let K=new Error(`WebSocket is not open: readyState ${$.readyState} (${A_[$.readyState]})`);process.nextTick(_,K)}}function ae($,q){let _=this[g6];if(_._closeFrameReceived=!0,_._closeMessage=q,_._closeCode=$,_._socket[g6]===void 0)return;if(_._socket.removeListener("data",nw),process.nextTick(gA,_._socket),$===1005)_.close();else _.close($,q)}function ce(){let $=this[g6];if(!$.isPaused)$._socket.resume()}function Ie($){let q=this[g6];if(q._socket[g6]!==void 0)q._socket.removeListener("data",nw),process.nextTick(gA,q._socket),q.close($[ne]);q.emit("error",$)}function xA(){this[g6].emitClose()}function le($,q){this[g6].emit("message",$,q)}function te($){let q=this[g6];if(q._autoPong)q.pong($,!this._isServer,bA);q.emit("ping",$)}function se($){this[g6].emit("pong",$)}function gA($){$.resume()}function aA(){let $=this[g6];this.removeListener("close",aA),this.removeListener("data",nw),this.removeListener("end",cA),$._readyState=A$.CLOSING;let q;if(!this._readableState.endEmitted&&!$._closeFrameReceived&&!$._receiver._writableState.errorEmitted&&(q=$._socket.read())!==null)$._receiver.write(q);if($._receiver.end(),this[g6]=void 0,clearTimeout($._closeTimer),$._receiver._writableState.finished||$._receiver._writableState.errorEmitted)$.emitClose();else $._receiver.on("error",xA),$._receiver.on("finish",xA)}function nw($){if(!this[g6]._receiver.write($))this.pause()}function cA(){let $=this[g6];$._readyState=A$.CLOSING,$._receiver.end(),this.end()}function IA(){let $=this[g6];if(this.removeListener("error",IA),this.on("error",bA),$)$._readyState=A$.CLOSING,this.destroy()}});var BA=y((HZ$,eA)=>{var{Duplex:ee}=i("stream");function tA($){$.emit("close")}function Be(){if(!this.destroyed&&this._writableState.finished)this.destroy()}function sA($){if(this.removeListener("error",sA),this.destroy(),this.listenerCount("error")===0)this.emit("error",$)}function Fe($,q){let _=!0,K=new ee({...q,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return $.on("message",function P(w,O){let f=!O&&K._readableState.objectMode?w.toString():w;if(!K.push(f))$.pause()}),$.once("error",function P(w){if(K.destroyed)return;_=!1,K.destroy(w)}),$.once("close",function P(){if(K.destroyed)return;K.push(null)}),K._destroy=function(P,w){if($.readyState===$.CLOSED){w(P),process.nextTick(tA,K);return}let O=!1;if($.once("error",function f(Y){O=!0,w(Y)}),$.once("close",function f(){if(!O)w(P);process.nextTick(tA,K)}),_)$.terminate()},K._final=function(P){if($.readyState===$.CONNECTING){$.once("open",function w(){K._final(P)});return}if($._socket===null)return;if($._socket._writableState.finished){if(P(),K._readableState.endEmitted)K.destroy()}else $._socket.once("finish",function w(){P()}),$.close()},K._read=function(){if($.isPaused)$.resume()},K._write=function(P,w,O){if($.readyState===$.CONNECTING){$.once("open",function f(){K._write(P,w,O)});return}$.send(P,O)},K.on("end",Be),K.on("error",sA),K}eA.exports=Fe});var UA=y((YZ$,FA)=>{var{tokenChars:Ue}=oP();function Qe($){let q=new Set,_=-1,K=-1,P=0;for(P;P<$.length;P++){let O=$.charCodeAt(P);if(K===-1&&Ue[O]===1){if(_===-1)_=P}else if(P!==0&&(O===32||O===9)){if(K===-1&&_!==-1)K=P}else if(O===44){if(_===-1)throw new SyntaxError(`Unexpected character at index ${P}`);if(K===-1)K=P;let f=$.slice(_,K);if(q.has(f))throw new SyntaxError(`The "${f}" subprotocol is duplicated`);q.add(f),_=K=-1}else throw new SyntaxError(`Unexpected character at index ${P}`)}if(_===-1||K!==-1)throw new SyntaxError("Unexpected end of input");let w=$.slice(_,P);if(q.has(w))throw new SyntaxError(`The "${w}" subprotocol is duplicated`);return q.add(w),q}FA.exports={parse:Qe}});var KW=y((kZ$,_W)=>{var $B=i("events"),rw=i("http"),{Duplex:hZ$}=i("stream"),{createHash:qB}=i("crypto"),QA=yf(),rK=bP(),_B=UA(),KB=mf(),{GUID:PB,kWebSocket:jB}=g_(),wB=/^[+/0-9A-Za-z]{22}==$/;class qW extends $B{constructor($,q){super();if($={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:KB,...$},$.port==null&&!$.server&&!$.noServer||$.port!=null&&($.server||$.noServer)||$.server&&$.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if($.port!=null)this._server=rw.createServer((_,K)=>{let P=rw.STATUS_CODES[426];K.writeHead(426,{"Content-Length":P.length,"Content-Type":"text/plain"}),K.end(P)}),this._server.listen($.port,$.host,$.backlog,q);else if($.server)this._server=$.server;if(this._server){let _=this.emit.bind(this,"connection");this._removeListeners=OB(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(K,P,w)=>{this.handleUpgrade(K,P,w,_)}})}if($.perMessageDeflate===!0)$.perMessageDeflate={};if($.clientTracking)this.clients=new Set,this._shouldEmitClose=!1;this.options=$,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');if(!this._server)return null;return this._server.address()}close($){if(this._state===2){if($)this.once("close",()=>{$(new Error("The server is not running"))});process.nextTick(cP,this);return}if($)this.once("close",$);if(this._state===1)return;if(this._state=1,this.options.noServer||this.options.server){if(this._server)this._removeListeners(),this._removeListeners=this._server=null;if(this.clients)if(!this.clients.size)process.nextTick(cP,this);else this._shouldEmitClose=!0;else process.nextTick(cP,this)}else{let q=this._server;this._removeListeners(),this._removeListeners=this._server=null,q.close(()=>{cP(this)})}}shouldHandle($){if(this.options.path){let q=$.url.indexOf("?");if((q!==-1?$.url.slice(0,q):$.url)!==this.options.path)return!1}return!0}handleUpgrade($,q,_,K){q.on("error",$W);let P=$.headers["sec-websocket-key"],w=$.headers.upgrade,O=+$.headers["sec-websocket-version"];if($.method!=="GET"){VK(this,$,q,405,"Invalid HTTP method");return}if(w===void 0||w.toLowerCase()!=="websocket"){VK(this,$,q,400,"Invalid Upgrade header");return}if(P===void 0||!wB.test(P)){VK(this,$,q,400,"Missing or invalid Sec-WebSocket-Key header");return}if(O!==8&&O!==13){VK(this,$,q,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle($)){IP(q,400);return}let f=$.headers["sec-websocket-protocol"],Y=new Set;if(f!==void 0)try{Y=_B.parse(f)}catch(T){VK(this,$,q,400,"Invalid Sec-WebSocket-Protocol header");return}let h=$.headers["sec-websocket-extensions"],k={};if(this.options.perMessageDeflate&&h!==void 0){let T=new rK(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let p=QA.parse(h);if(p[rK.extensionName])T.accept(p[rK.extensionName]),k[rK.extensionName]=T}catch(p){VK(this,$,q,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let T={origin:$.headers[`${O===8?"sec-websocket-origin":"origin"}`],secure:!!($.socket.authorized||$.socket.encrypted),req:$};if(this.options.verifyClient.length===2){this.options.verifyClient(T,(p,G,Z,X)=>{if(!p)return IP(q,G||401,Z,X);this.completeUpgrade(k,P,Y,$,q,_,K)});return}if(!this.options.verifyClient(T))return IP(q,401)}this.completeUpgrade(k,P,Y,$,q,_,K)}completeUpgrade($,q,_,K,P,w,O){if(!P.readable||!P.writable)return P.destroy();if(P[jB])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return IP(P,503);let Y=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${qB("sha1").update(q+PB).digest("base64")}`],h=new this.options.WebSocket(null,void 0,this.options);if(_.size){let k=this.options.handleProtocols?this.options.handleProtocols(_,K):_.values().next().value;if(k)Y.push(`Sec-WebSocket-Protocol: ${k}`),h._protocol=k}if($[rK.extensionName]){let k=$[rK.extensionName].params,T=QA.format({[rK.extensionName]:[k]});Y.push(`Sec-WebSocket-Extensions: ${T}`),h._extensions=$}if(this.emit("headers",Y,K),P.write(Y.concat(`\r
`).join(`\r
`)),P.removeListener("error",$W),h.setSocket(P,w,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients)this.clients.add(h),h.on("close",()=>{if(this.clients.delete(h),this._shouldEmitClose&&!this.clients.size)process.nextTick(cP,this)});O(h,K)}}_W.exports=qW;function OB($,q){for(let _ of Object.keys(q))$.on(_,q[_]);return function _(){for(let K of Object.keys(q))$.removeListener(K,q[K])}}function cP($){$._state=2,$.emit("close")}function $W(){this.destroy()}function IP($,q,_,K){_=_||rw.STATUS_CODES[q],K={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(_),...K},$.once("finish",$.destroy),$.end(`HTTP/1.1 ${q} ${rw.STATUS_CODES[q]}\r
`+Object.keys(K).map((P)=>`${P}: ${K[P]}`).join(`\r
`)+`\r
\r
`+_)}function VK($,q,_,K,P){if($.listenerCount("wsClientError")){let w=new Error(P);Error.captureStackTrace(w,VK),$.emit("wsClientError",w,_,q)}else IP(_,K,P)}});var jW=y((TZ$,PW)=>{var W_=mf();W_.createWebSocketStream=BA();W_.Server=KW();W_.Receiver=Xf();W_.Sender=Df();W_.WebSocket=W_;W_.WebSocketServer=W_.Server;PW.exports=W_});var Lf=y((t_)=>{var zB=t_&&t_.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(t_,"__esModule",{value:!0});t_.WS=t_.BaseWS=void 0;var fB=rP(),wW=RK(),MB=R4(),uf=uK(),vB=zB(o8()),HB=vB.default("engine.io-client:websocket"),OW=typeof navigator!=="undefined"&&typeof navigator.product==="string"&&navigator.product.toLowerCase()==="reactnative";class Rf extends fB.Transport{get name(){return"websocket"}doOpen(){let $=this.uri(),q=this.opts.protocols,_=OW?{}:wW.pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");if(this.opts.extraHeaders)_.headers=this.opts.extraHeaders;try{this.ws=this.createSocket($,q,_)}catch(K){return this.emitReserved("error",K)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{if(this.opts.autoUnref)this.ws._socket.unref();this.onOpen()},this.ws.onclose=($)=>this.onClose({description:"websocket connection closed",context:$}),this.ws.onmessage=($)=>this.onData($.data),this.ws.onerror=($)=>this.onError("websocket error",$)}write($){this.writable=!1;for(let q=0;q<$.length;q++){let _=$[q],K=q===$.length-1;MB.encodePacket(_,this.supportsBinary,(P)=>{try{this.doWrite(_,P)}catch(w){HB("websocket closed before onclose event")}if(K)uf.nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){if(typeof this.ws!=="undefined")this.ws.onerror=()=>{},this.ws.close(),this.ws=null}uri(){let $=this.opts.secure?"wss":"ws",q=this.query||{};if(this.opts.timestampRequests)q[this.opts.timestampParam]=wW.randomString();if(!this.supportsBinary)q.b64=1;return this.createUri($,q)}}t_.BaseWS=Rf;var Ef=uf.globalThisShim.WebSocket||uf.globalThisShim.MozWebSocket;class zW extends Rf{createSocket($,q,_){return!OW?q?new Ef($,q):new Ef($):new Ef($,q,_)}doWrite($,q){this.ws.send(q)}}t_.WS=zW});var Cf=y((MW)=>{Object.defineProperty(MW,"__esModule",{value:!0});MW.WS=void 0;var YB=jW(),hB=Lf();class fW extends hB.BaseWS{createSocket($,q,_){var K;if((K=this.socket)===null||K===void 0?void 0:K._cookieJar){_.headers=_.headers||{},_.headers.cookie=typeof _.headers.cookie==="string"?[_.headers.cookie]:_.headers.cookie||[];for(let[P,w]of this.socket._cookieJar.cookies)_.headers.cookie.push(`${P}=${w.value}`)}return new YB.WebSocket($,q,_)}doWrite($,q){let _={};if($.options)_.compress=$.options.compress;if(this.opts.perMessageDeflate){if((typeof q==="string"?Buffer.byteLength(q):q.length)<this.opts.perMessageDeflate.threshold)_.compress=!1}this.ws.send(q,_)}}MW.WS=fW});var nf=y((o4)=>{var kB=o4&&o4.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(o4,"__esModule",{value:!0});o4.WT=void 0;var TB=rP(),AB=uK(),HW=R4(),WB=kB(o8()),lP=WB.default("engine.io-client:webtransport");class YW extends TB.Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch($){return this.emitReserved("error",$)}this._transport.closed.then(()=>{lP("transport closed gracefully"),this.onClose()}).catch(($)=>{lP("transport closed due to %s",$),this.onError("webtransport error",$)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(($)=>{let q=HW.createPacketDecoderStream(Number.MAX_SAFE_INTEGER,this.socket.binaryType),_=$.readable.pipeThrough(q).getReader(),K=HW.createPacketEncoderStream();K.readable.pipeTo($.writable),this._writer=K.writable.getWriter();let P=()=>{_.read().then(({done:O,value:f})=>{if(O){lP("session is closed");return}lP("received chunk: %o",f),this.onPacket(f),P()}).catch((O)=>{lP("an error occurred while reading: %s",O)})};P();let w={type:"open"};if(this.query.sid)w.data=`{"sid":"${this.query.sid}"}`;this._writer.write(w).then(()=>this.onOpen())})})}write($){this.writable=!1;for(let q=0;q<$.length;q++){let _=$[q],K=q===$.length-1;this._writer.write(_).then(()=>{if(K)AB.nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var $;($=this._transport)===null||$===void 0||$.close()}}o4.WT=YW});var rf=y((hW)=>{Object.defineProperty(hW,"__esModule",{value:!0});hW.transports=void 0;var JB=hf(),XB=Cf(),DB=nf();hW.transports={websocket:XB.WS,webtransport:DB.WT,polling:JB.XHR}});var Vf=y((TW)=>{Object.defineProperty(TW,"__esModule",{value:!0});TW.parse=SB;var pB=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,yB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function SB($){if($.length>8000)throw"URI too long";let q=$,_=$.indexOf("["),K=$.indexOf("]");if(_!=-1&&K!=-1)$=$.substring(0,_)+$.substring(_,K).replace(/:/g,";")+$.substring(K,$.length);let P=pB.exec($||""),w={},O=14;while(O--)w[yB[O]]=P[O]||"";if(_!=-1&&K!=-1)w.source=q,w.host=w.host.substring(1,w.host.length-1).replace(/;/g,":"),w.authority=w.authority.replace("[","").replace("]","").replace(/;/g,":"),w.ipv6uri=!0;return w.pathNames=GB(w,w.path),w.queryKey=ZB(w,w.query),w}function GB($,q){let _=/\/{2,9}/g,K=q.replace(_,"/").split("/");if(q.slice(0,1)=="/"||q.length===0)K.splice(0,1);if(q.slice(-1)=="/")K.splice(K.length-1,1);return K}function ZB($,q){let _={};return q.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(K,P,w){if(P)_[P]=w}),_}});var of=y((aq)=>{var mB=aq&&aq.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(aq,"__esModule",{value:!0});aq.Socket=aq.SocketWithUpgrade=aq.SocketWithoutUpgrade=void 0;var EB=rf(),AW=RK(),uB=wf(),WW=Vf(),RB=EK(),JW=R4(),xf=uK(),LB=mB(o8()),o$=LB.default("engine.io-client:socket"),df=typeof addEventListener==="function"&&typeof removeEventListener==="function",tP=[];if(df)addEventListener("offline",()=>{o$("closing %d connection(s) because the network was lost",tP.length),tP.forEach(($)=>$())},!1);class J_ extends RB.Emitter{constructor($,q){super();if(this.binaryType=xf.defaultBinaryType,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,$&&typeof $==="object")q=$,$=null;if($){let _=WW.parse($);if(q.hostname=_.host,q.secure=_.protocol==="https"||_.protocol==="wss",q.port=_.port,_.query)q.query=_.query}else if(q.host)q.hostname=WW.parse(q.host).host;if(AW.installTimerFunctions(this,q),this.secure=q.secure!=null?q.secure:typeof location!=="undefined"&&location.protocol==="https:",q.hostname&&!q.port)q.port=this.secure?"443":"80";if(this.hostname=q.hostname||(typeof location!=="undefined"?location.hostname:"localhost"),this.port=q.port||(typeof location!=="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},q.transports.forEach((_)=>{let K=_.prototype.name;this.transports.push(K),this._transportsByName[K]=_}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},q),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query==="string")this.opts.query=uB.decode(this.opts.query);if(df){if(this.opts.closeOnBeforeunload)this._beforeunloadEventListener=()=>{if(this.transport)this.transport.removeAllListeners(),this.transport.close()},addEventListener("beforeunload",this._beforeunloadEventListener,!1);if(this.hostname!=="localhost")o$("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tP.push(this._offlineEventListener)}if(this.opts.withCredentials)this._cookieJar=xf.createCookieJar();this._open()}createTransport($){o$('creating transport "%s"',$);let q=Object.assign({},this.opts.query);if(q.EIO=JW.protocol,q.transport=$,this.id)q.sid=this.id;let _=Object.assign({},this.opts,{query:q,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[$]);return o$("options: %j",_),new this._transportsByName[$](_)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let $=this.opts.rememberUpgrade&&J_.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let q=this.createTransport($);q.open(),this.setTransport(q)}setTransport($){if(o$("setting transport %s",$.name),this.transport)o$("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners();this.transport=$,$.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(q)=>this._onClose("transport close",q))}onOpen(){o$("socket open"),this.readyState="open",J_.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket($){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(o$('socket receive: type "%s", data "%s"',$.type,$.data),this.emitReserved("packet",$),this.emitReserved("heartbeat"),$.type){case"open":this.onHandshake(JSON.parse($.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let q=new Error("server error");q.code=$.data,this._onError(q);break;case"message":this.emitReserved("data",$.data),this.emitReserved("message",$.data);break}else o$('packet received with socket readyState "%s"',this.readyState)}onHandshake($){if(this.emitReserved("handshake",$),this.id=$.sid,this.transport.query.sid=$.sid,this._pingInterval=$.pingInterval,this._pingTimeout=$.pingTimeout,this._maxPayload=$.maxPayload,this.onOpen(),this.readyState==="closed")return;this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let $=this._pingInterval+this._pingTimeout;if(this._pingTimeoutTime=Date.now()+$,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},$),this.opts.autoUnref)this._pingTimeoutTimer.unref()}_onDrain(){if(this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0)this.emitReserved("drain");else this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let $=this._getWritablePackets();o$("flushing %d packets in socket",$.length),this.transport.send($),this._prevBufferLen=$.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let q=1;for(let _=0;_<this.writeBuffer.length;_++){let K=this.writeBuffer[_].data;if(K)q+=AW.byteLength(K);if(_>0&&q>this._maxPayload)return o$("only send %d out of %d packets",_,this.writeBuffer.length),this.writeBuffer.slice(0,_);q+=2}return o$("payload size is %d (max: %d)",q,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let $=Date.now()>this._pingTimeoutTime;if($)o$("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,xf.nextTick(()=>{this._onClose("ping timeout")},this.setTimeoutFn);return $}write($,q,_){return this._sendPacket("message",$,q,_),this}send($,q,_){return this._sendPacket("message",$,q,_),this}_sendPacket($,q,_,K){if(typeof q==="function")K=q,q=void 0;if(typeof _==="function")K=_,_=null;if(this.readyState==="closing"||this.readyState==="closed")return;_=_||{},_.compress=_.compress!==!1;let P={type:$,data:q,options:_};if(this.emitReserved("packetCreate",P),this.writeBuffer.push(P),K)this.once("flush",K);this.flush()}close(){let $=()=>{this._onClose("forced close"),o$("socket closing - telling transport to close"),this.transport.close()},q=()=>{this.off("upgrade",q),this.off("upgradeError",q),$()},_=()=>{this.once("upgrade",q),this.once("upgradeError",q)};if(this.readyState==="opening"||this.readyState==="open")if(this.readyState="closing",this.writeBuffer.length)this.once("drain",()=>{if(this.upgrading)_();else $()});else if(this.upgrading)_();else $();return this}_onError($){if(o$("socket error %j",$),J_.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return o$("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",$),this._onClose("transport error",$)}_onClose($,q){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(o$('socket close with reason: "%s"',$),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),df){if(this._beforeunloadEventListener)removeEventListener("beforeunload",this._beforeunloadEventListener,!1);if(this._offlineEventListener){let _=tP.indexOf(this._offlineEventListener);if(_!==-1)o$("removing listener for the 'offline' event"),tP.splice(_,1)}}this.readyState="closed",this.id=null,this.emitReserved("close",$,q),this.writeBuffer=[],this._prevBufferLen=0}}}aq.SocketWithoutUpgrade=J_;J_.protocol=JW.protocol;class bf extends J_{constructor(){super(...arguments);this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade){o$("starting upgrade probes");for(let $=0;$<this._upgrades.length;$++)this._probe(this._upgrades[$])}}_probe($){o$('probing transport "%s"',$);let q=this.createTransport($),_=!1;J_.priorWebsocketSuccess=!1;let K=()=>{if(_)return;o$('probe transport "%s" opened',$),q.send([{type:"ping",data:"probe"}]),q.once("packet",(k)=>{if(_)return;if(k.type==="pong"&&k.data==="probe"){if(o$('probe transport "%s" pong',$),this.upgrading=!0,this.emitReserved("upgrading",q),!q)return;J_.priorWebsocketSuccess=q.name==="websocket",o$('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{if(_)return;if(this.readyState==="closed")return;o$("changing transport and sending upgrade packet"),h(),this.setTransport(q),q.send([{type:"upgrade"}]),this.emitReserved("upgrade",q),q=null,this.upgrading=!1,this.flush()})}else{o$('probe transport "%s" failed',$);let T=new Error("probe error");T.transport=q.name,this.emitReserved("upgradeError",T)}})};function P(){if(_)return;_=!0,h(),q.close(),q=null}let w=(k)=>{let T=new Error("probe error: "+k);T.transport=q.name,P(),o$('probe transport "%s" failed because of error: %s',$,k),this.emitReserved("upgradeError",T)};function O(){w("transport closed")}function f(){w("socket closed")}function Y(k){if(q&&k.name!==q.name)o$('"%s" works - aborting "%s"',k.name,q.name),P()}let h=()=>{q.removeListener("open",K),q.removeListener("error",w),q.removeListener("close",O),this.off("close",f),this.off("upgrading",Y)};if(q.once("open",K),q.once("error",w),q.once("close",O),this.once("close",f),this.once("upgrading",Y),this._upgrades.indexOf("webtransport")!==-1&&$!=="webtransport")this.setTimeoutFn(()=>{if(!_)q.open()},200);else q.open()}onHandshake($){this._upgrades=this._filterUpgrades($.upgrades),super.onHandshake($)}_filterUpgrades($){let q=[];for(let _=0;_<$.length;_++)if(~this.transports.indexOf($[_]))q.push($[_]);return q}}aq.SocketWithUpgrade=bf;class XW extends bf{constructor($,q={}){let _=typeof $==="object"?$:q;if(!_.transports||_.transports&&typeof _.transports[0]==="string")_.transports=(_.transports||["polling","websocket","webtransport"]).map((K)=>EB.transports[K]).filter((K)=>!!K);super($,_)}}aq.Socket=XW});var SW=y((pW)=>{Object.defineProperty(pW,"__esModule",{value:!0});pW.Fetch=void 0;var CB=Mf();class DW extends CB.Polling{doPoll(){this._fetch().then(($)=>{if(!$.ok)return this.onError("fetch read error",$.status,$);$.text().then((q)=>this.onData(q))}).catch(($)=>{this.onError("fetch read error",$)})}doWrite($,q){this._fetch($).then((_)=>{if(!_.ok)return this.onError("fetch write error",_.status,_);q()}).catch((_)=>{this.onError("fetch write error",_)})}_fetch($){var q;let _=$!==void 0,K=new Headers(this.opts.extraHeaders);if(_)K.set("content-type","text/plain;charset=UTF-8");return(q=this.socket._cookieJar)===null||q===void 0||q.appendCookies(K),fetch(this.uri(),{method:_?"POST":"GET",body:_?$:null,headers:K,credentials:this.opts.withCredentials?"include":"omit"}).then((P)=>{var w;return(w=this.socket._cookieJar)===null||w===void 0||w.parseCookies(P.headers.getSetCookie()),P})}}pW.Fetch=DW});var Vw=y((u6)=>{Object.defineProperty(u6,"__esModule",{value:!0});u6.WebTransport=u6.WebSocket=u6.NodeWebSocket=u6.XHR=u6.NodeXHR=u6.Fetch=u6.nextTick=u6.parse=u6.installTimerFunctions=u6.transports=u6.TransportError=u6.Transport=u6.protocol=u6.SocketWithUpgrade=u6.SocketWithoutUpgrade=u6.Socket=void 0;var GW=of();Object.defineProperty(u6,"Socket",{enumerable:!0,get:function(){return GW.Socket}});var ZW=of();Object.defineProperty(u6,"SocketWithoutUpgrade",{enumerable:!0,get:function(){return ZW.SocketWithoutUpgrade}});Object.defineProperty(u6,"SocketWithUpgrade",{enumerable:!0,get:function(){return ZW.SocketWithUpgrade}});u6.protocol=GW.Socket.protocol;var NW=rP();Object.defineProperty(u6,"Transport",{enumerable:!0,get:function(){return NW.Transport}});Object.defineProperty(u6,"TransportError",{enumerable:!0,get:function(){return NW.TransportError}});var nB=rf();Object.defineProperty(u6,"transports",{enumerable:!0,get:function(){return nB.transports}});var rB=RK();Object.defineProperty(u6,"installTimerFunctions",{enumerable:!0,get:function(){return rB.installTimerFunctions}});var VB=Vf();Object.defineProperty(u6,"parse",{enumerable:!0,get:function(){return VB.parse}});var xB=uK();Object.defineProperty(u6,"nextTick",{enumerable:!0,get:function(){return xB.nextTick}});var dB=SW();Object.defineProperty(u6,"Fetch",{enumerable:!0,get:function(){return dB.Fetch}});var bB=hf();Object.defineProperty(u6,"NodeXHR",{enumerable:!0,get:function(){return bB.XHR}});var oB=Yf();Object.defineProperty(u6,"XHR",{enumerable:!0,get:function(){return oB.XHR}});var iB=Cf();Object.defineProperty(u6,"NodeWebSocket",{enumerable:!0,get:function(){return iB.WS}});var gB=Lf();Object.defineProperty(u6,"WebSocket",{enumerable:!0,get:function(){return gB.WS}});var aB=nf();Object.defineProperty(u6,"WebTransport",{enumerable:!0,get:function(){return aB.WT}})});var EW=y((sP)=>{var lB=sP&&sP.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(sP,"__esModule",{value:!0});sP.url=eB;var tB=Vw(),sB=lB(o8()),mW=sB.default("socket.io-client:url");function eB($,q="",_){let K=$;if(_=_||typeof location!=="undefined"&&location,$==null)$=_.protocol+"//"+_.host;if(typeof $==="string"){if($.charAt(0)==="/")if($.charAt(1)==="/")$=_.protocol+$;else $=_.host+$;if(!/^(https?|wss?):\/\//.test($))if(mW("protocol-less url %s",$),typeof _!=="undefined")$=_.protocol+"//"+$;else $="https://"+$;mW("parse %s",$),K=tB.parse($)}if(!K.port){if(/^(http|ws)$/.test(K.protocol))K.port="80";else if(/^(http|ws)s$/.test(K.protocol))K.port="443"}K.path=K.path||"/";let w=K.host.indexOf(":")!==-1?"["+K.host+"]":K.host;return K.id=K.protocol+"://"+w+":"+K.port+q,K.href=K.protocol+"://"+w+(_&&_.port===K.port?"":":"+K.port),K}});var gf=y((LW)=>{Object.defineProperty(LW,"__esModule",{value:!0});LW.hasBinary=LW.isBinary=void 0;var BB=typeof ArrayBuffer==="function",FB=($)=>{return typeof ArrayBuffer.isView==="function"?ArrayBuffer.isView($):$.buffer instanceof ArrayBuffer},uW=Object.prototype.toString,UB=typeof Blob==="function"||typeof Blob!=="undefined"&&uW.call(Blob)==="[object BlobConstructor]",QB=typeof File==="function"||typeof File!=="undefined"&&uW.call(File)==="[object FileConstructor]";function RW($){return BB&&($ instanceof ArrayBuffer||FB($))||UB&&$ instanceof Blob||QB&&$ instanceof File}LW.isBinary=RW;function xw($,q){if(!$||typeof $!=="object")return!1;if(Array.isArray($)){for(let _=0,K=$.length;_<K;_++)if(xw($[_]))return!0;return!1}if(RW($))return!0;if($.toJSON&&typeof $.toJSON==="function"&&arguments.length===1)return xw($.toJSON(),!0);for(let _ in $)if(Object.prototype.hasOwnProperty.call($,_)&&xw($[_]))return!0;return!1}LW.hasBinary=xw});var VW=y((nW)=>{Object.defineProperty(nW,"__esModule",{value:!0});nW.reconstructPacket=nW.deconstructPacket=void 0;var qF=gf();function _F($){let q=[],_=$.data,K=$;return K.data=af(_,q),K.attachments=q.length,{packet:K,buffers:q}}nW.deconstructPacket=_F;function af($,q){if(!$)return $;if(qF.isBinary($)){let _={_placeholder:!0,num:q.length};return q.push($),_}else if(Array.isArray($)){let _=new Array($.length);for(let K=0;K<$.length;K++)_[K]=af($[K],q);return _}else if(typeof $==="object"&&!($ instanceof Date)){let _={};for(let K in $)if(Object.prototype.hasOwnProperty.call($,K))_[K]=af($[K],q);return _}return $}function KF($,q){return $.data=cf($.data,q),delete $.attachments,$}nW.reconstructPacket=KF;function cf($,q){if(!$)return $;if($&&$._placeholder===!0)if(typeof $.num==="number"&&$.num>=0&&$.num<q.length)return q[$.num];else throw new Error("illegal attachments");else if(Array.isArray($))for(let _=0;_<$.length;_++)$[_]=cf($[_],q);else if(typeof $==="object"){for(let _ in $)if(Object.prototype.hasOwnProperty.call($,_))$[_]=cf($[_],q)}return $}});var dw=y((aW)=>{Object.defineProperty(aW,"__esModule",{value:!0});aW.Decoder=aW.Encoder=aW.PacketType=aW.protocol=void 0;var jF=EK(),bW=VW(),oW=gf(),wF=o8(),If=wF.default("socket.io-parser"),OF=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];aW.protocol=5;var M6;(function($){$[$.CONNECT=0]="CONNECT",$[$.DISCONNECT=1]="DISCONNECT",$[$.EVENT=2]="EVENT",$[$.ACK=3]="ACK",$[$.CONNECT_ERROR=4]="CONNECT_ERROR",$[$.BINARY_EVENT=5]="BINARY_EVENT",$[$.BINARY_ACK=6]="BINARY_ACK"})(M6=aW.PacketType||(aW.PacketType={}));class iW{constructor($){this.replacer=$}encode($){if(If("encoding packet %j",$),$.type===M6.EVENT||$.type===M6.ACK){if(oW.hasBinary($))return this.encodeAsBinary({type:$.type===M6.EVENT?M6.BINARY_EVENT:M6.BINARY_ACK,nsp:$.nsp,data:$.data,id:$.id})}return[this.encodeAsString($)]}encodeAsString($){let q=""+$.type;if($.type===M6.BINARY_EVENT||$.type===M6.BINARY_ACK)q+=$.attachments+"-";if($.nsp&&$.nsp!=="/")q+=$.nsp+",";if($.id!=null)q+=$.id;if($.data!=null)q+=JSON.stringify($.data,this.replacer);return If("encoded %j as %s",$,q),q}encodeAsBinary($){let q=bW.deconstructPacket($),_=this.encodeAsString(q.packet),K=q.buffers;return K.unshift(_),K}}aW.Encoder=iW;function xW($){return Object.prototype.toString.call($)==="[object Object]"}class lf extends jF.Emitter{constructor($){super();this.reviver=$}add($){let q;if(typeof $==="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");q=this.decodeString($);let _=q.type===M6.BINARY_EVENT;if(_||q.type===M6.BINARY_ACK){if(q.type=_?M6.EVENT:M6.ACK,this.reconstructor=new gW(q),q.attachments===0)super.emitReserved("decoded",q)}else super.emitReserved("decoded",q)}else if(oW.isBinary($)||$.base64){if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");else if(q=this.reconstructor.takeBinaryData($),q)this.reconstructor=null,super.emitReserved("decoded",q)}else throw new Error("Unknown type: "+$)}decodeString($){let q=0,_={type:Number($.charAt(0))};if(M6[_.type]===void 0)throw new Error("unknown packet type "+_.type);if(_.type===M6.BINARY_EVENT||_.type===M6.BINARY_ACK){let P=q+1;while($.charAt(++q)!=="-"&&q!=$.length);let w=$.substring(P,q);if(w!=Number(w)||$.charAt(q)!=="-")throw new Error("Illegal attachments");_.attachments=Number(w)}if($.charAt(q+1)==="/"){let P=q+1;while(++q){if($.charAt(q)===",")break;if(q===$.length)break}_.nsp=$.substring(P,q)}else _.nsp="/";let K=$.charAt(q+1);if(K!==""&&Number(K)==K){let P=q+1;while(++q){let w=$.charAt(q);if(w==null||Number(w)!=w){--q;break}if(q===$.length)break}_.id=Number($.substring(P,q+1))}if($.charAt(++q)){let P=this.tryParse($.substr(q));if(lf.isPayloadValid(_.type,P))_.data=P;else throw new Error("invalid payload")}return If("decoded %s as %j",$,_),_}tryParse($){try{return JSON.parse($,this.reviver)}catch(q){return!1}}static isPayloadValid($,q){switch($){case M6.CONNECT:return xW(q);case M6.DISCONNECT:return q===void 0;case M6.CONNECT_ERROR:return typeof q==="string"||xW(q);case M6.EVENT:case M6.BINARY_EVENT:return Array.isArray(q)&&(typeof q[0]==="number"||typeof q[0]==="string"&&OF.indexOf(q[0])===-1);case M6.ACK:case M6.BINARY_ACK:return Array.isArray(q)}}destroy(){if(this.reconstructor)this.reconstructor.finishedReconstruction(),this.reconstructor=null}}aW.Decoder=lf;class gW{constructor($){this.packet=$,this.buffers=[],this.reconPack=$}takeBinaryData($){if(this.buffers.push($),this.buffers.length===this.reconPack.attachments){let q=bW.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),q}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}});var tf=y((IW)=>{Object.defineProperty(IW,"__esModule",{value:!0});IW.on=MF;function MF($,q,_){return $.on(q,_),function K(){$.off(q,_)}}});var sf=y((i4)=>{var HF=i4&&i4.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(i4,"__esModule",{value:!0});i4.Socket=void 0;var Tq=dw(),bw=tf(),YF=EK(),hF=HF(o8()),W6=hF.default("socket.io-client:socket"),kF=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class lW extends YF.Emitter{constructor($,q,_){super();if(this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=$,this.nsp=q,_&&_.auth)this.auth=_.auth;if(this._opts=Object.assign({},_),this.io._autoConnect)this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let $=this.io;this.subs=[bw.on($,"open",this.onopen.bind(this)),bw.on($,"packet",this.onpacket.bind(this)),bw.on($,"error",this.onerror.bind(this)),bw.on($,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){if(this.connected)return this;if(this.subEvents(),!this.io._reconnecting)this.io.open();if(this.io._readyState==="open")this.onopen();return this}open(){return this.connect()}send(...$){return $.unshift("message"),this.emit.apply(this,$),this}emit($,...q){var _,K,P;if(kF.hasOwnProperty($))throw new Error('"'+$.toString()+'" is a reserved event name');if(q.unshift($),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(q),this;let w={type:Tq.PacketType.EVENT,data:q};if(w.options={},w.options.compress=this.flags.compress!==!1,typeof q[q.length-1]==="function"){let h=this.ids++;W6("emitting packet with ack id %d",h);let k=q.pop();this._registerAckCallback(h,k),w.id=h}let O=(K=(_=this.io.engine)===null||_===void 0?void 0:_.transport)===null||K===void 0?void 0:K.writable,f=this.connected&&!((P=this.io.engine)===null||P===void 0?void 0:P._hasPingExpired());if(this.flags.volatile&&!O)W6("discard packet as the transport is not currently writable");else if(f)this.notifyOutgoingListeners(w),this.packet(w);else this.sendBuffer.push(w);return this.flags={},this}_registerAckCallback($,q){var _;let K=(_=this.flags.timeout)!==null&&_!==void 0?_:this._opts.ackTimeout;if(K===void 0){this.acks[$]=q;return}let P=this.io.setTimeoutFn(()=>{delete this.acks[$];for(let O=0;O<this.sendBuffer.length;O++)if(this.sendBuffer[O].id===$)W6("removing packet with ack id %d from the buffer",$),this.sendBuffer.splice(O,1);W6("event with ack id %d has timed out after %d ms",$,K),q.call(this,new Error("operation has timed out"))},K),w=(...O)=>{this.io.clearTimeoutFn(P),q.apply(this,O)};w.withError=!0,this.acks[$]=w}emitWithAck($,...q){return new Promise((_,K)=>{let P=(w,O)=>{return w?K(w):_(O)};P.withError=!0,q.push(P),this.emit($,...q)})}_addToQueue($){let q;if(typeof $[$.length-1]==="function")q=$.pop();let _={id:this._queueSeq++,tryCount:0,pending:!1,args:$,flags:Object.assign({fromQueue:!0},this.flags)};$.push((K,...P)=>{if(_!==this._queue[0])return;if(K!==null){if(_.tryCount>this._opts.retries){if(W6("packet [%d] is discarded after %d tries",_.id,_.tryCount),this._queue.shift(),q)q(K)}}else if(W6("packet [%d] was successfully sent",_.id),this._queue.shift(),q)q(null,...P);return _.pending=!1,this._drainQueue()}),this._queue.push(_),this._drainQueue()}_drainQueue($=!1){if(W6("draining queue"),!this.connected||this._queue.length===0)return;let q=this._queue[0];if(q.pending&&!$){W6("packet [%d] has already been sent and is waiting for an ack",q.id);return}q.pending=!0,q.tryCount++,W6("sending packet [%d] (try n%d)",q.id,q.tryCount),this.flags=q.flags,this.emit.apply(this,q.args)}packet($){$.nsp=this.nsp,this.io._packet($)}onopen(){if(W6("transport is open - connecting"),typeof this.auth=="function")this.auth(($)=>{this._sendConnectPacket($)});else this._sendConnectPacket(this.auth)}_sendConnectPacket($){this.packet({type:Tq.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},$):$})}onerror($){if(!this.connected)this.emitReserved("connect_error",$)}onclose($,q){W6("close (%s)",$),this.connected=!1,delete this.id,this.emitReserved("disconnect",$,q),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(($)=>{if(!this.sendBuffer.some((_)=>String(_.id)===$)){let _=this.acks[$];if(delete this.acks[$],_.withError)_.call(this,new Error("socket has been disconnected"))}})}onpacket($){if($.nsp!==this.nsp)return;switch($.type){case Tq.PacketType.CONNECT:if($.data&&$.data.sid)this.onconnect($.data.sid,$.data.pid);else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tq.PacketType.EVENT:case Tq.PacketType.BINARY_EVENT:this.onevent($);break;case Tq.PacketType.ACK:case Tq.PacketType.BINARY_ACK:this.onack($);break;case Tq.PacketType.DISCONNECT:this.ondisconnect();break;case Tq.PacketType.CONNECT_ERROR:this.destroy();let _=new Error($.data.message);_.data=$.data.data,this.emitReserved("connect_error",_);break}}onevent($){let q=$.data||[];if(W6("emitting event %j",q),$.id!=null)W6("attaching ack callback to event"),q.push(this.ack($.id));if(this.connected)this.emitEvent(q);else this.receiveBuffer.push(Object.freeze(q))}emitEvent($){if(this._anyListeners&&this._anyListeners.length){let q=this._anyListeners.slice();for(let _ of q)_.apply(this,$)}if(super.emit.apply(this,$),this._pid&&$.length&&typeof $[$.length-1]==="string")this._lastOffset=$[$.length-1]}ack($){let q=this,_=!1;return function(...K){if(_)return;_=!0,W6("sending ack %j",K),q.packet({type:Tq.PacketType.ACK,id:$,data:K})}}onack($){let q=this.acks[$.id];if(typeof q!=="function"){W6("bad ack %s",$.id);return}if(delete this.acks[$.id],W6("calling ack %s with %j",$.id,$.data),q.withError)$.data.unshift(null);q.apply(this,$.data)}onconnect($,q){W6("socket connected with id %s",$),this.id=$,this.recovered=q&&this._pid===q,this._pid=q,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(($)=>this.emitEvent($)),this.receiveBuffer=[],this.sendBuffer.forEach(($)=>{this.notifyOutgoingListeners($),this.packet($)}),this.sendBuffer=[]}ondisconnect(){W6("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){if(this.subs)this.subs.forEach(($)=>$()),this.subs=void 0;this.io._destroy(this)}disconnect(){if(this.connected)W6("performing disconnect (%s)",this.nsp),this.packet({type:Tq.PacketType.DISCONNECT});if(this.destroy(),this.connected)this.onclose("io client disconnect");return this}close(){return this.disconnect()}compress($){return this.flags.compress=$,this}get volatile(){return this.flags.volatile=!0,this}timeout($){return this.flags.timeout=$,this}onAny($){return this._anyListeners=this._anyListeners||[],this._anyListeners.push($),this}prependAny($){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift($),this}offAny($){if(!this._anyListeners)return this;if($){let q=this._anyListeners;for(let _=0;_<q.length;_++)if($===q[_])return q.splice(_,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing($){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push($),this}prependAnyOutgoing($){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift($),this}offAnyOutgoing($){if(!this._anyOutgoingListeners)return this;if($){let q=this._anyOutgoingListeners;for(let _=0;_<q.length;_++)if($===q[_])return q.splice(_,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners($){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let q=this._anyOutgoingListeners.slice();for(let _ of q)_.apply(this,$.data)}}}i4.Socket=lW});var sW=y((tW)=>{Object.defineProperty(tW,"__esModule",{value:!0});tW.Backoff=g4;function g4($){$=$||{},this.ms=$.min||100,this.max=$.max||1e4,this.factor=$.factor||2,this.jitter=$.jitter>0&&$.jitter<=1?$.jitter:0,this.attempts=0}g4.prototype.duration=function(){var $=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var q=Math.random(),_=Math.floor(q*this.jitter*$);$=(Math.floor(q*10)&1)==0?$-_:$+_}return Math.min($,this.max)|0};g4.prototype.reset=function(){this.attempts=0};g4.prototype.setMin=function($){this.ms=$};g4.prototype.setMax=function($){this.max=$};g4.prototype.setJitter=function($){this.jitter=$}});var BW=y((i8)=>{var AF=i8&&i8.__createBinding||(Object.create?function($,q,_,K){if(K===void 0)K=_;var P=Object.getOwnPropertyDescriptor(q,_);if(!P||("get"in P?!q.__esModule:P.writable||P.configurable))P={enumerable:!0,get:function(){return q[_]}};Object.defineProperty($,K,P)}:function($,q,_,K){if(K===void 0)K=_;$[K]=q[_]}),WF=i8&&i8.__setModuleDefault||(Object.create?function($,q){Object.defineProperty($,"default",{enumerable:!0,value:q})}:function($,q){$.default=q}),JF=i8&&i8.__importStar||function($){if($&&$.__esModule)return $;var q={};if($!=null){for(var _ in $)if(_!=="default"&&Object.prototype.hasOwnProperty.call($,_))AF(q,$,_)}return WF(q,$),q},XF=i8&&i8.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(i8,"__esModule",{value:!0});i8.Manager=void 0;var ef=Vw(),DF=sf(),pF=JF(dw()),xK=tf(),yF=sW(),SF=EK(),GF=XF(o8()),R6=GF.default("socket.io-client:manager");class eW extends SF.Emitter{constructor($,q){var _;super();if(this.nsps={},this.subs=[],$&&typeof $==="object")q=$,$=void 0;q=q||{},q.path=q.path||"/socket.io",this.opts=q,ef.installTimerFunctions(this,q),this.reconnection(q.reconnection!==!1),this.reconnectionAttempts(q.reconnectionAttempts||1/0),this.reconnectionDelay(q.reconnectionDelay||1000),this.reconnectionDelayMax(q.reconnectionDelayMax||5000),this.randomizationFactor((_=q.randomizationFactor)!==null&&_!==void 0?_:0.5),this.backoff=new yF.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(q.timeout==null?20000:q.timeout),this._readyState="closed",this.uri=$;let K=q.parser||pF;if(this.encoder=new K.Encoder,this.decoder=new K.Decoder,this._autoConnect=q.autoConnect!==!1,this._autoConnect)this.open()}reconnection($){if(!arguments.length)return this._reconnection;if(this._reconnection=!!$,!$)this.skipReconnect=!0;return this}reconnectionAttempts($){if($===void 0)return this._reconnectionAttempts;return this._reconnectionAttempts=$,this}reconnectionDelay($){var q;if($===void 0)return this._reconnectionDelay;return this._reconnectionDelay=$,(q=this.backoff)===null||q===void 0||q.setMin($),this}randomizationFactor($){var q;if($===void 0)return this._randomizationFactor;return this._randomizationFactor=$,(q=this.backoff)===null||q===void 0||q.setJitter($),this}reconnectionDelayMax($){var q;if($===void 0)return this._reconnectionDelayMax;return this._reconnectionDelayMax=$,(q=this.backoff)===null||q===void 0||q.setMax($),this}timeout($){if(!arguments.length)return this._timeout;return this._timeout=$,this}maybeReconnectOnOpen(){if(!this._reconnecting&&this._reconnection&&this.backoff.attempts===0)this.reconnect()}open($){if(R6("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;R6("opening %s",this.uri),this.engine=new ef.Socket(this.uri,this.opts);let q=this.engine,_=this;this._readyState="opening",this.skipReconnect=!1;let K=xK.on(q,"open",function(){_.onopen(),$&&$()}),P=(O)=>{if(R6("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",O),$)$(O);else this.maybeReconnectOnOpen()},w=xK.on(q,"error",P);if(this._timeout!==!1){let O=this._timeout;R6("connect attempt will timeout after %d",O);let f=this.setTimeoutFn(()=>{R6("connect attempt timed out after %d",O),K(),P(new Error("timeout")),q.close()},O);if(this.opts.autoUnref)f.unref();this.subs.push(()=>{this.clearTimeoutFn(f)})}return this.subs.push(K),this.subs.push(w),this}connect($){return this.open($)}onopen(){R6("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let $=this.engine;this.subs.push(xK.on($,"ping",this.onping.bind(this)),xK.on($,"data",this.ondata.bind(this)),xK.on($,"error",this.onerror.bind(this)),xK.on($,"close",this.onclose.bind(this)),xK.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata($){try{this.decoder.add($)}catch(q){this.onclose("parse error",q)}}ondecoded($){ef.nextTick(()=>{this.emitReserved("packet",$)},this.setTimeoutFn)}onerror($){R6("error",$),this.emitReserved("error",$)}socket($,q){let _=this.nsps[$];if(!_)_=new DF.Socket(this,$,q),this.nsps[$]=_;else if(this._autoConnect&&!_.active)_.connect();return _}_destroy($){let q=Object.keys(this.nsps);for(let _ of q)if(this.nsps[_].active){R6("socket %s is still active, skipping close",_);return}this._close()}_packet($){R6("writing packet %j",$);let q=this.encoder.encode($);for(let _=0;_<q.length;_++)this.engine.write(q[_],$.options)}cleanup(){R6("cleanup"),this.subs.forEach(($)=>$()),this.subs.length=0,this.decoder.destroy()}_close(){R6("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose($,q){var _;if(R6("closed due to %s",$),this.cleanup(),(_=this.engine)===null||_===void 0||_.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",$,q),this._reconnection&&!this.skipReconnect)this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let $=this;if(this.backoff.attempts>=this._reconnectionAttempts)R6("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let q=this.backoff.duration();R6("will wait %dms before reconnect attempt",q),this._reconnecting=!0;let _=this.setTimeoutFn(()=>{if($.skipReconnect)return;if(R6("attempting reconnect"),this.emitReserved("reconnect_attempt",$.backoff.attempts),$.skipReconnect)return;$.open((K)=>{if(K)R6("reconnect attempt error"),$._reconnecting=!1,$.reconnect(),this.emitReserved("reconnect_error",K);else R6("reconnect success"),$.onreconnect()})},q);if(this.opts.autoUnref)_.unref();this.subs.push(()=>{this.clearTimeoutFn(_)})}}onreconnect(){let $=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",$)}}i8.Manager=eW});var $J=y((e$,QW)=>{var ZF=e$&&e$.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(e$,"__esModule",{value:!0});e$.WebTransport=e$.WebSocket=e$.NodeWebSocket=e$.XHR=e$.NodeXHR=e$.Fetch=e$.Socket=e$.Manager=e$.protocol=void 0;e$.io=dK;e$.connect=dK;e$.default=dK;var NF=EW(),ow=BW();Object.defineProperty(e$,"Manager",{enumerable:!0,get:function(){return ow.Manager}});var UW=sf();Object.defineProperty(e$,"Socket",{enumerable:!0,get:function(){return UW.Socket}});var mF=ZF(o8()),FW=mF.default("socket.io-client"),eP={};function dK($,q){if(typeof $==="object")q=$,$=void 0;q=q||{};let _=NF.url($,q.path||"/socket.io"),K=_.source,P=_.id,w=_.path,O=eP[P]&&w in eP[P].nsps,f=q.forceNew||q["force new connection"]||q.multiplex===!1||O,Y;if(f)FW("ignoring socket cache for %s",K),Y=new ow.Manager(K,q);else{if(!eP[P])FW("new io instance for %s",K),eP[P]=new ow.Manager(K,q);Y=eP[P]}if(_.query&&!q.query)q.query=_.queryKey;return Y.socket(_.path,q)}Object.assign(dK,{Manager:ow.Manager,Socket:UW.Socket,io:dK,connect:dK});var EF=dw();Object.defineProperty(e$,"protocol",{enumerable:!0,get:function(){return EF.protocol}});var a4=Vw();Object.defineProperty(e$,"Fetch",{enumerable:!0,get:function(){return a4.Fetch}});Object.defineProperty(e$,"NodeXHR",{enumerable:!0,get:function(){return a4.NodeXHR}});Object.defineProperty(e$,"XHR",{enumerable:!0,get:function(){return a4.XHR}});Object.defineProperty(e$,"NodeWebSocket",{enumerable:!0,get:function(){return a4.NodeWebSocket}});Object.defineProperty(e$,"WebSocket",{enumerable:!0,get:function(){return a4.WebSocket}});Object.defineProperty(e$,"WebTransport",{enumerable:!0,get:function(){return a4.WebTransport}});QW.exports=dK});var Bf=y((tZ$,qJ)=>{var{io:uF}=$J();async function RF({wellId:$,serverAddress:q,token:_,onConnect:K,onDisconnect:P,onSocketError:w}){let O=uF(q,{autoConnect:!0,path:"/secure-ws",transports:["websocket"],auth:{token:_},query:{wellId:$}});O.on("connect",()=>{if(K)K(O)}),O.on("disconnect",async()=>{if(P)P(O)}),O.on("connect_error",(f)=>{if(w)w(O,f)}),O.on("error",(f)=>{if(w)w(O,f)})}async function LF($,q){return new Promise((_,K)=>{$.emit("producer-last-masterlog",q,(P)=>{if(P&&P.MaxId!==void 0)_(P.MaxId);else K(new Error("Failed to retrieve MaxId for Master Log"))})})}async function CF($,q){return new Promise((_,K)=>{$.emit("producer-last-comment",q,(P)=>{if(P&&P.MaxId!==void 0)_(P.MaxId);else K(new Error("Failed to retrieve MaxId for Comment"))})})}async function nF($,q){return new Promise((_,K)=>{$.emit("producer-last-comment-deleted",q,(P)=>{if(P&&P.MaxId!==void 0)_(P.MaxId);else K(new Error("Failed to retrieve MaxId for Comment"))})})}qJ.exports={initSocket:RF,getLastCommentDeletedId:nF,getLastMasterLogId:LF,getLastCommentId:CF}});var KJ=y((sZ$,_J)=>{var rF=i("zlib");function VF($){return new Promise((q,_)=>{rF.brotliCompress(Buffer.from(JSON.stringify($)),(K,P)=>{if(K)_(K);else q(P)})})}_J.exports={compressData:VF}});var Ff=y((eZ$,PJ)=>{function xF($){_.debug=_,_.default=_,_.coerce=Y,_.disable=O,_.enable=P,_.enabled=f,_.humanize=Jw(),_.destroy=h,Object.keys($).forEach((k)=>{_[k]=$[k]}),_.names=[],_.skips=[],_.formatters={};function q(k){let T=0;for(let p=0;p<k.length;p++)T=(T<<5)-T+k.charCodeAt(p),T|=0;return _.colors[Math.abs(T)%_.colors.length]}_.selectColor=q;function _(k){let T,p=null,G,Z;function X(...C){if(!X.enabled)return;let N=X,L=Number(new Date),m=L-(T||L);if(N.diff=m,N.prev=T,N.curr=L,T=L,C[0]=_.coerce(C[0]),typeof C[0]!=="string")C.unshift("%O");let E=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(V,n)=>{if(V==="%%")return"%";E++;let b=_.formatters[n];if(typeof b==="function"){let x=C[E];V=b.call(N,x),C.splice(E,1),E--}return V}),_.formatArgs.call(N,C),(N.log||_.log).apply(N,C)}if(X.namespace=k,X.useColors=_.useColors(),X.color=_.selectColor(k),X.extend=K,X.destroy=_.destroy,Object.defineProperty(X,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(p!==null)return p;if(G!==_.namespaces)G=_.namespaces,Z=_.enabled(k);return Z},set:(C)=>{p=C}}),typeof _.init==="function")_.init(X);return X}function K(k,T){let p=_(this.namespace+(typeof T==="undefined"?":":T)+k);return p.log=this.log,p}function P(k){_.save(k),_.namespaces=k,_.names=[],_.skips=[];let T=(typeof k==="string"?k:"").trim().replace(" ",",").split(",").filter(Boolean);for(let p of T)if(p[0]==="-")_.skips.push(p.slice(1));else _.names.push(p)}function w(k,T){let p=0,G=0,Z=-1,X=0;while(p<k.length)if(G<T.length&&(T[G]===k[p]||T[G]==="*"))if(T[G]==="*")Z=G,X=p,G++;else p++,G++;else if(Z!==-1)G=Z+1,X++,p=X;else return!1;while(G<T.length&&T[G]==="*")G++;return G===T.length}function O(){let k=[..._.names,..._.skips.map((T)=>"-"+T)].join(",");return _.enable(""),k}function f(k){for(let T of _.skips)if(w(k,T))return!1;for(let T of _.names)if(w(k,T))return!0;return!1}function Y(k){if(k instanceof Error)return k.stack||k.message;return k}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return _.enable(_.load()),_}PJ.exports=xF});var wJ=y((jJ,gw)=>{jJ.formatArgs=bF;jJ.save=oF;jJ.load=iF;jJ.useColors=dF;jJ.storage=gF();jJ.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();jJ.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function dF(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bF($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+gw.exports.humanize(this.diff),!this.useColors)return;let q="color: "+this.color;$.splice(1,0,q,"color: inherit");let _=0,K=0;$[0].replace(/%[a-zA-Z%]/g,(P)=>{if(P==="%%")return;if(_++,P==="%c")K=_}),$.splice(K,0,q)}jJ.log=console.debug||console.log||(()=>{});function oF($){try{if($)jJ.storage.setItem("debug",$);else jJ.storage.removeItem("debug")}catch(q){}}function iF(){let $;try{$=jJ.storage.getItem("debug")}catch(q){}if(!$&&typeof process!=="undefined"&&"env"in process)$=process.env.DEBUG;return $}function gF(){try{return localStorage}catch($){}}gw.exports=Ff()(jJ);var{formatters:aF}=gw.exports;aF.j=function($){try{return JSON.stringify($)}catch(q){return"[UnexpectedJSONParseError]: "+q.message}}});var MJ=y((zJ,cw)=>{var FF=i("tty"),aw=i("util");zJ.init=PU;zJ.log=qU;zJ.formatArgs=QF;zJ.save=_U;zJ.load=KU;zJ.useColors=UF;zJ.destroy=aw.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");zJ.colors=[6,2,3,4,5,1];try{let $=(()=>{throw new Error("Cannot require module "+"supports-color");})();if($&&($.stderr||$).level>=2)zJ.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}zJ.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,q)=>{let _=q.substring(6).toLowerCase().replace(/_([a-z])/g,(P,w)=>{return w.toUpperCase()}),K=process.env[q];if(/^(yes|on|true|enabled)$/i.test(K))K=!0;else if(/^(no|off|false|disabled)$/i.test(K))K=!1;else if(K==="null")K=null;else K=Number(K);return $[_]=K,$},{});function UF(){return"colors"in zJ.inspectOpts?Boolean(zJ.inspectOpts.colors):FF.isatty(process.stderr.fd)}function QF($){let{namespace:q,useColors:_}=this;if(_){let K=this.color,P="\x1B[3"+(K<8?K:"8;5;"+K),w=`  ${P};1m${q} \x1B[0m`;$[0]=w+$[0].split(`
`).join(`
`+w),$.push(P+"m+"+cw.exports.humanize(this.diff)+"\x1B[0m")}else $[0]=$U()+q+" "+$[0]}function $U(){if(zJ.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function qU(...$){return process.stderr.write(aw.formatWithOptions(zJ.inspectOpts,...$)+`
`)}function _U($){if($)process.env.DEBUG=$;else delete process.env.DEBUG}function KU(){return process.env.DEBUG}function PU($){$.inspectOpts={};let q=Object.keys(zJ.inspectOpts);for(let _=0;_<q.length;_++)$.inspectOpts[q[_]]=zJ.inspectOpts[q[_]]}cw.exports=Ff()(zJ);var{formatters:OJ}=cw.exports;OJ.o=function($){return this.inspectOpts.colors=this.useColors,aw.inspect($,this.inspectOpts).split(`
`).map((q)=>q.trim()).join(" ")};OJ.O=function($){return this.inspectOpts.colors=this.useColors,aw.inspect($,this.inspectOpts)}});var Aq=y((UZ$,Uf)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)Uf.exports=wJ();else Uf.exports=MJ()});var Qf=y((vJ)=>{Object.defineProperty(vJ,"__esModule",{value:!0});var s_;(function($){$[$.key=0]="key",$[$.value=1]="value"})(s_||(s_={}));var HU=Object.freeze({key:{terminator:"=",quotes:{}},value:{terminator:";",quotes:{'"':'"',"'":"'","{":"}"}}});function YU($,q=HU){let _={},K=s_.key,P=!1,w=!1,O=!1,f="",Y="",h="",k=0;function T(){P=!0}function p(){w=!0}function G(){P=!1,w=!1,O=!1,f="",Y=""}function Z(){return K===s_.key?q.key:q.value}function X(E){return Z().terminator===E}function C(E){return Object.keys(Z().quotes).some((W)=>E===W)}function N(E){return O&&E===Z().quotes[f]}function L(E){Y+=E}function m(){if(!O)Y=Y.trim();switch(K){case s_.key:h=Y.toLowerCase(),K=s_.value;break;case s_.value:K=s_.key,_[h]=Y,h="";break}G()}while(k<$.length){let E=$.charAt(k);if(!w)if(!P){if(E.trim())if(T(),C(E))O=!0,f=E;else L(E)}else if(O&&N(E)){let W=$.charAt(k+1);if(E===W)L(E),k++;else p()}else if(!O&&X(E)){let W=$.charAt(k+1);if(E===W)L(E),k++;else m()}else L(E);else if(X(E))m();else if(E.trim())throw new Error("Malformed connection string");k++}if(O&&!w)throw new Error("Connection string terminated unexpectedly");else m();return _}vJ.default=YU});var YJ=y((Wq)=>{var kU=Wq&&Wq.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(Wq,"__esModule",{value:!0});Wq.SCHEMA=Wq.SchemaTypes=void 0;var TU=kU(Qf()),h$;(function($){$[$.BOOL=0]="BOOL",$[$.STRING=1]="STRING",$[$.NUMBER=2]="NUMBER"})(h$=Wq.SchemaTypes||(Wq.SchemaTypes={}));Wq.SCHEMA={"Application Name":{type:h$.STRING,aliases:["App"],validator($){return typeof $==="string"&&$.length<=128}},ApplicationIntent:{type:h$.STRING,allowedValues:["ReadOnly","ReadWrite"],default:"ReadWrite"},"Asynchronous Processing":{type:h$.BOOL,default:!1,aliases:["Async"]},AttachDBFilename:{type:h$.STRING,aliases:["Extended Properties","Initial File Name"]},Authentication:{type:h$.STRING,allowedValues:["Active Directory Integrated","Active Directory Password","Sql Password"]},"Column Encryption Setting":{type:h$.STRING},"Connection Timeout":{type:h$.NUMBER,aliases:["Connect Timeout","Timeout"],default:15},"Connection Lifetime":{type:h$.NUMBER,aliases:["Load Balance Timeout"],default:0},ConnectRetryCount:{type:h$.NUMBER,default:1,validator($){return $>0&&$<=255}},ConnectRetryInterval:{type:h$.NUMBER,default:10},"Context Connection":{type:h$.BOOL,default:!1},"Current Language":{aliases:["Language"],type:h$.STRING,validator($){return typeof $==="string"&&$.length<=128}},"Data Source":{aliases:["Addr","Address","Server","Network Address"],type:h$.STRING},Encrypt:{type:h$.BOOL,default:!1},Enlist:{type:h$.BOOL,default:!0},"Failover Partner":{type:h$.STRING},"Initial Catalog":{type:h$.STRING,aliases:["Database"],validator($){return typeof $==="string"&&$.length<=128}},"Integrated Security":{type:h$.BOOL,aliases:["Trusted_Connection"],coerce($){return $==="sspi"||null}},"Max Pool Size":{type:h$.NUMBER,default:100,validator($){return $>=1}},"Min Pool Size":{type:h$.NUMBER,default:0,validator($){return $>=0}},MultipleActiveResultSets:{type:h$.BOOL,default:!1},MultiSubnetFailover:{type:h$.BOOL,default:!1},"Network Library":{type:h$.STRING,aliases:["Network","Net"],allowedValues:["dbnmpntw","dbmsrpcn","dbmsadsn","dbmsgnet","dbmslpcn","dbmsspxn","dbmssocn","Dbmsvinn"]},"Packet Size":{type:h$.NUMBER,default:8000,validator($){return $>=512&&$<=32768}},Password:{type:h$.STRING,aliases:["PWD"],validator($){return typeof $==="string"&&$.length<=128}},"Persist Security Info":{type:h$.BOOL,aliases:["PersistSecurityInfo"],default:!1},PoolBlockingPeriod:{type:h$.NUMBER,default:0,coerce($){if(typeof $!=="string")return null;switch($.toLowerCase()){case"alwaysblock":return 1;case"auto":return 0;case"neverblock":return 2}return null}},Pooling:{type:h$.BOOL,default:!0},Replication:{type:h$.BOOL,default:!1},"Transaction Binding":{type:h$.STRING,allowedValues:["Implicit Unbind","Explicit Unbind"],default:"Implicit Unbind"},TransparentNetworkIPResolution:{type:h$.BOOL,default:!0},TrustServerCertificate:{type:h$.BOOL,default:!1},"Type System Version":{type:h$.STRING,allowedValues:["SQL Server 2012","SQL Server 2008","SQL Server 2005","Latest"]},"User ID":{type:h$.STRING,aliases:["UID"],validator($){return typeof $==="string"&&$.length<=128}},"User Instance":{type:h$.BOOL,default:!1},"Workstation ID":{type:h$.STRING,aliases:["WSID"],validator($){return typeof $==="string"&&$.length<=128}}};function AU($){if($.trim()==="")return h$.STRING;let q=parseInt($,10);if(!Number.isNaN(q)&&q.toString()===$)return h$.NUMBER;if(["true","false","yes","no"].includes($.toLowerCase()))return h$.BOOL;return h$.STRING}function HJ($,q,_){if(_){let K=_($);if(K!==null)return K}switch(q){case h$.BOOL:if(["true","yes","1"].includes($.toLowerCase()))return!0;if(["false","no","0"].includes($.toLowerCase()))return!1;return $;case h$.NUMBER:return parseInt($,10)}return $}function WU($,q,_){let K=!0;if(_)K=_($);if(K)K=(q===null||q===void 0?void 0:q.includes($))||!1;return K}function JU($,q=!1,_=!1,K=!1,P=Wq.SCHEMA){let w=Object.entries(P).reduce((O,[f,Y])=>{var h;return Object.assign(O,{[f.toLowerCase()]:Y}),((h=Y.aliases)===null||h===void 0?void 0:h.reduce((k,T)=>{return Object.assign(k,{[T.toLowerCase()]:{...Y,canonical:f.toLowerCase()}})},O))||O},{});return Object.entries(TU.default($)).reduce((O,[f,Y])=>{if(!Object.prototype.hasOwnProperty.call(w,f))return Object.assign(O,{[f]:HJ(Y,AU(Y))});let h=HJ(Y,w[f].type,w[f].coerce);if(K&&!WU(h,w[f].allowedValues,w[f].validator))h=w[f].default;let k=q?w[f].canonical||f:f;return Object.assign(O,{[k]:h})},{})}Wq.default=JU});var TJ=y((hJ)=>{Object.defineProperty(hJ,"__esModule",{value:!0});hJ.buildConnectionString=void 0;function XU($){if($[0]!=="{")return!1;for(let q=1;q<$.length;q++)if($[q]==="}")if(q+1===$.length)return!0;else if($[q+1]!=="}")return!1;else q++;return!1}function DU($){var q;return!XU($)&&!!((q=$.match(/\[|]|{|}|\|\(|\)|,|;|\?|\*|=|!|@/))===null||q===void 0?void 0:q.length)}function pU($,q){if(q===null||q===void 0)return[$,""];switch(typeof q){case"boolean":return[$,q?"Yes":"No"];default:{let _=q.toString();if(DU(_))return[$,`{${_.replace(/}/g,"}}")}}`];return[$,_]}}}function yU($){return Object.entries($).map(([q,_])=>{return pU(q.trim(),_).join("=")}).join(";")}hJ.buildConnectionString=yU});var WJ=y((m8)=>{var SU=m8&&m8.__createBinding||(Object.create?function($,q,_,K){if(K===void 0)K=_;var P=Object.getOwnPropertyDescriptor(q,_);if(!P||("get"in P?!q.__esModule:P.writable||P.configurable))P={enumerable:!0,get:function(){return q[_]}};Object.defineProperty($,K,P)}:function($,q,_,K){if(K===void 0)K=_;$[K]=q[_]}),GU=m8&&m8.__exportStar||function($,q){for(var _ in $)if(_!=="default"&&!Object.prototype.hasOwnProperty.call(q,_))SU(q,$,_)},AJ=m8&&m8.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(m8,"__esModule",{value:!0});m8.parseSqlConnectionString=m8.parseConnectionString=void 0;var ZU=AJ(Qf());m8.parseConnectionString=ZU.default;var NU=AJ(YJ());m8.parseSqlConnectionString=NU.default;GU(TJ(),m8)});var $M=y((XJ)=>{Object.defineProperty(XJ,"__esModule",{value:!0});class JJ extends Error{}XJ.TimeoutError=JJ});var yJ=y((pJ)=>{Object.defineProperty(pJ,"__esModule",{value:!0});class DJ{constructor($){this._value=$.value,this._error=$.error}value(){return this._value}reason(){return this._error}isRejected(){return!!this._error}isFulfilled(){return!!this._value}}pJ.PromiseInspection=DJ});var Iw=y((ZJ)=>{Object.defineProperty(ZJ,"__esModule",{value:!0});var SJ=yJ();function uU(){let $=null,q=null;return{promise:new Promise((K,P)=>{$=K,q=P}),resolve:$,reject:q}}ZJ.defer=uU;function RU(){return Date.now()}ZJ.now=RU;function LU($,q){return Math.abs(q-$)}ZJ.duration=LU;function CU($){if(typeof $==="undefined")return!0;return GJ($)}ZJ.checkOptionalTime=CU;function GJ($){return typeof $==="number"&&$===Math.round($)&&$>0}ZJ.checkRequiredTime=GJ;function nU($){return new Promise((q)=>setTimeout(q,$))}ZJ.delay=nU;function rU($){return $.then((q)=>{return new SJ.PromiseInspection({value:q})}).catch((q)=>{return new SJ.PromiseInspection({error:q})})}ZJ.reflect=rU;function VU($){try{let q=$();return Promise.resolve(q)}catch(q){return Promise.reject(q)}}ZJ.tryPromise=VU});var EJ=y((mJ)=>{Object.defineProperty(mJ,"__esModule",{value:!0});var lw=$M(),IU=Iw();class NJ{constructor($){this.timeoutMillis=$,this.deferred=IU.defer(),this.possibleTimeoutCause=null,this.isRejected=!1,this.promise=lU(this.deferred.promise,$).catch((q)=>{if(q instanceof lw.TimeoutError)if(this.possibleTimeoutCause)q=new lw.TimeoutError(this.possibleTimeoutCause.message);else q=new lw.TimeoutError("operation timed out for an unknown reason");return this.isRejected=!0,Promise.reject(q)})}abort(){this.reject(new Error("aborted"))}reject($){this.deferred.reject($)}resolve($){this.deferred.resolve($)}}mJ.PendingOperation=NJ;function lU($,q){return new Promise((_,K)=>{let P=setTimeout(()=>K(new lw.TimeoutError),q);$.then((w)=>{clearTimeout(P),_(w)}).catch((w)=>{clearTimeout(P),K(w)})})}});var LJ=y((RJ)=>{Object.defineProperty(RJ,"__esModule",{value:!0});var uJ=Iw();class qM{constructor($){this.resource=$,this.resource=$,this.timestamp=uJ.now(),this.deferred=uJ.defer()}get promise(){return this.deferred.promise}resolve(){return this.deferred.resolve(void 0),new qM(this.resource)}}RJ.Resource=qM});var VJ=y((rJ)=>{Object.defineProperty(rJ,"__esModule",{value:!0});var tw=EJ(),eU=LJ(),j8=Iw(),BU=i("events"),CJ=i("timers");class nJ{constructor($){if(this.destroyed=!1,this.emitter=new BU.EventEmitter,$=$||{},!$.create)throw new Error("Tarn: opt.create function most be provided");if(!$.destroy)throw new Error("Tarn: opt.destroy function most be provided");if(typeof $.min!=="number"||$.min<0||$.min!==Math.round($.min))throw new Error("Tarn: opt.min must be an integer >= 0");if(typeof $.max!=="number"||$.max<=0||$.max!==Math.round($.max))throw new Error("Tarn: opt.max must be an integer > 0");if($.min>$.max)throw new Error("Tarn: opt.max is smaller than opt.min");if(!j8.checkOptionalTime($.acquireTimeoutMillis))throw new Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify($.acquireTimeoutMillis));if(!j8.checkOptionalTime($.createTimeoutMillis))throw new Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify($.createTimeoutMillis));if(!j8.checkOptionalTime($.destroyTimeoutMillis))throw new Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify($.destroyTimeoutMillis));if(!j8.checkOptionalTime($.idleTimeoutMillis))throw new Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify($.idleTimeoutMillis));if(!j8.checkOptionalTime($.reapIntervalMillis))throw new Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify($.reapIntervalMillis));if(!j8.checkOptionalTime($.createRetryIntervalMillis))throw new Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify($.createRetryIntervalMillis));let q={create:!0,validate:!0,destroy:!0,log:!0,min:!0,max:!0,acquireTimeoutMillis:!0,createTimeoutMillis:!0,destroyTimeoutMillis:!0,idleTimeoutMillis:!0,reapIntervalMillis:!0,createRetryIntervalMillis:!0,propagateCreateError:!0};for(let _ of Object.keys($))if(!q[_])throw new Error(`Tarn: unsupported option opt.${_}`);this.creator=$.create,this.destroyer=$.destroy,this.validate=typeof $.validate==="function"?$.validate:()=>!0,this.log=$.log||(()=>{}),this.acquireTimeoutMillis=$.acquireTimeoutMillis||30000,this.createTimeoutMillis=$.createTimeoutMillis||30000,this.destroyTimeoutMillis=$.destroyTimeoutMillis||5000,this.idleTimeoutMillis=$.idleTimeoutMillis||30000,this.reapIntervalMillis=$.reapIntervalMillis||1000,this.createRetryIntervalMillis=$.createRetryIntervalMillis||200,this.propagateCreateError=!!$.propagateCreateError,this.min=$.min,this.max=$.max,this.used=[],this.free=[],this.pendingCreates=[],this.pendingAcquires=[],this.pendingDestroys=[],this.pendingValidations=[],this.destroyed=!1,this.interval=null,this.eventId=1}numUsed(){return this.used.length}numFree(){return this.free.length}numPendingAcquires(){return this.pendingAcquires.length}numPendingValidations(){return this.pendingValidations.length}numPendingCreates(){return this.pendingCreates.length}acquire(){let $=this.eventId++;this._executeEventHandlers("acquireRequest",$);let q=new tw.PendingOperation(this.acquireTimeoutMillis);return this.pendingAcquires.push(q),q.promise=q.promise.then((_)=>{return this._executeEventHandlers("acquireSuccess",$,_),_}).catch((_)=>{return this._executeEventHandlers("acquireFail",$,_),c4(this.pendingAcquires,q),Promise.reject(_)}),this._tryAcquireOrCreate(),q}release($){this._executeEventHandlers("release",$);for(let q=0,_=this.used.length;q<_;++q){let K=this.used[q];if(K.resource===$)return this.used.splice(q,1),this.free.push(K.resolve()),this._tryAcquireOrCreate(),!0}return!1}isEmpty(){return[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingValidations(),this.numPendingCreates()].reduce(($,q)=>$+q)===0}check(){let $=j8.now(),q=[],_=this.min-this.used.length,K=this.free.length-_,P=0;if(this.free.forEach((w)=>{if(j8.duration($,w.timestamp)>=this.idleTimeoutMillis&&P<K)P++,this._destroy(w.resource);else q.push(w)}),this.free=q,this.isEmpty())this._stopReaping()}destroy(){let $=this.eventId++;return this._executeEventHandlers("poolDestroyRequest",$),this._stopReaping(),this.destroyed=!0,j8.reflect(Promise.all(this.pendingCreates.map((q)=>j8.reflect(q.promise))).then(()=>{return new Promise((q,_)=>{if(this.numPendingValidations()===0){q();return}let K=setInterval(()=>{if(this.numPendingValidations()===0)CJ.clearInterval(K),q()},100)})}).then(()=>{return Promise.all(this.used.map((q)=>j8.reflect(q.promise)))}).then(()=>{return Promise.all(this.pendingAcquires.map((q)=>{return q.abort(),j8.reflect(q.promise)}))}).then(()=>{return Promise.all(this.free.map((q)=>j8.reflect(this._destroy(q.resource))))}).then(()=>{return Promise.all(this.pendingDestroys.map((q)=>q.promise))}).then(()=>{this.free=[],this.pendingAcquires=[]})).then((q)=>{return this._executeEventHandlers("poolDestroySuccess",$),this.emitter.removeAllListeners(),q})}on($,q){this.emitter.on($,q)}removeListener($,q){this.emitter.removeListener($,q)}removeAllListeners($){this.emitter.removeAllListeners($)}_tryAcquireOrCreate(){if(this.destroyed)return;if(this._hasFreeResources())this._doAcquire();else if(this._shouldCreateMoreResources())this._doCreate()}_hasFreeResources(){return this.free.length>0}_doAcquire(){while(this._canAcquire()){let $=this.pendingAcquires.shift(),q=this.free.pop();if(q===void 0||$===void 0)throw this.log("Tarn: this.free was empty while trying to acquire resource","warn"),new Error("Internal error, should never happen. this.free was empty while trying to acquire resource");this.pendingValidations.push($),this.used.push(q);let _=new tw.PendingOperation(this.acquireTimeoutMillis);$.promise.catch((K)=>{_.abort()}),_.promise.catch((K)=>{return this.log("Tarn: resource validator threw an exception "+K.stack,"warn"),!1}).then((K)=>{try{if(K&&!$.isRejected)this._startReaping(),$.resolve(q.resource);else{if(c4(this.used,q),!K)this._destroy(q.resource),setTimeout(()=>{this._tryAcquireOrCreate()},0);else this.free.push(q);if(!$.isRejected)this.pendingAcquires.unshift($)}}finally{c4(this.pendingValidations,$)}}),this._validateResource(q.resource).then((K)=>{_.resolve(K)}).catch((K)=>{_.reject(K)})}}_canAcquire(){return this.free.length>0&&this.pendingAcquires.length>0}_validateResource($){try{return Promise.resolve(this.validate($))}catch(q){return Promise.reject(q)}}_shouldCreateMoreResources(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}_doCreate(){let $=this.pendingAcquires.slice();this._create().promise.then(()=>{return this._tryAcquireOrCreate(),null}).catch((_)=>{if(this.propagateCreateError&&this.pendingAcquires.length!==0)this.pendingAcquires[0].reject(_);$.forEach((K)=>{K.possibleTimeoutCause=_}),j8.delay(this.createRetryIntervalMillis).then(()=>this._tryAcquireOrCreate())})}_create(){let $=this.eventId++;this._executeEventHandlers("createRequest",$);let q=new tw.PendingOperation(this.createTimeoutMillis);return q.promise=q.promise.catch((_)=>{if(c4(this.pendingCreates,q))this._executeEventHandlers("createFail",$,_);throw _}),this.pendingCreates.push(q),FU(this.creator).then((_)=>{if(q.isRejected)return this.destroyer(_),null;return c4(this.pendingCreates,q),this.free.push(new eU.Resource(_)),q.resolve(_),this._executeEventHandlers("createSuccess",$,_),null}).catch((_)=>{if(q.isRejected)return null;if(c4(this.pendingCreates,q))this._executeEventHandlers("createFail",$,_);return q.reject(_),null}),q}_destroy($){let q=this.eventId++;this._executeEventHandlers("destroyRequest",q,$);let _=new tw.PendingOperation(this.destroyTimeoutMillis);return Promise.resolve().then(()=>this.destroyer($)).then(()=>{_.resolve($)}).catch((P)=>{_.reject(P)}),this.pendingDestroys.push(_),_.promise.then((P)=>{return this._executeEventHandlers("destroySuccess",q,$),P}).catch((P)=>this._logDestroyerError(q,$,P)).then((P)=>{let w=this.pendingDestroys.findIndex((O)=>O===_);return this.pendingDestroys.splice(w,1),P})}_logDestroyerError($,q,_){this._executeEventHandlers("destroyFail",$,q,_),this.log("Tarn: resource destroyer threw an exception "+_.stack,"warn")}_startReaping(){if(!this.interval)this._executeEventHandlers("startReaping"),this.interval=setInterval(()=>this.check(),this.reapIntervalMillis)}_stopReaping(){if(this.interval!==null)this._executeEventHandlers("stopReaping"),CJ.clearInterval(this.interval);this.interval=null}_executeEventHandlers($,...q){this.emitter.listeners($).forEach((K)=>{try{K(...q)}catch(P){this.log(`Tarn: event handler "${$}" threw an exception ${P.stack}`,"warn")}})}}rJ.Pool=nJ;function c4($,q){let _=$.indexOf(q);if(_===-1)return!1;else return $.splice(_,1),!0}function FU($){return new Promise((q,_)=>{let K=(P,w)=>{if(P)_(P);else q(w)};j8.tryPromise(()=>$(K)).then((P)=>{if(P)q(P)}).catch((P)=>{_(P)})})}});var iJ=y((bJ,oJ)=>{Object.defineProperty(bJ,"__esModule",{value:!0});var xJ=VJ();bJ.Pool=xJ.Pool;var dJ=$M();bJ.TimeoutError=dJ.TimeoutError;oJ.exports={Pool:xJ.Pool,TimeoutError:dJ.TimeoutError}});var cq=y((fN$,aJ)=>{var sw=new WeakMap,gJ={Connection:1,ConnectionPool:1,Request:1,Transaction:1,PreparedStatement:1};aJ.exports={objectHasProperty:($,q)=>Object.prototype.hasOwnProperty.call($,q),INCREMENT:gJ,IDS:{get:sw.get.bind(sw),add:($,q,_)=>{if(_)return sw.set($,_);sw.set($,gJ[q]++)}}}});var I4=y((MN$,IJ)=>{class cJ extends Error{constructor($,q){if($ instanceof Error){super($.message);this.code=$.code||q,Error.captureStackTrace(this,this.constructor),Object.defineProperty(this,"originalError",{enumerable:!0,value:$})}else{super($);this.code=q}this.name="MSSQLError"}}IJ.exports=cJ});var ew=y((vN$,tJ)=>{var qQ=I4();class lJ extends qQ{constructor($,q){super($,q);this.name="ConnectionError"}}tJ.exports=lJ});var e_=y((PQ,l4)=>{var _Q=cq().objectHasProperty,KQ=Symbol.for("nodejs.util.inspect.custom"),f$={VarChar($){return{type:f$.VarChar,length:$}},NVarChar($){return{type:f$.NVarChar,length:$}},Text(){return{type:f$.Text}},Int(){return{type:f$.Int}},BigInt(){return{type:f$.BigInt}},TinyInt(){return{type:f$.TinyInt}},SmallInt(){return{type:f$.SmallInt}},Bit(){return{type:f$.Bit}},Float(){return{type:f$.Float}},Numeric($,q){return{type:f$.Numeric,precision:$,scale:q}},Decimal($,q){return{type:f$.Decimal,precision:$,scale:q}},Real(){return{type:f$.Real}},Date(){return{type:f$.Date}},DateTime(){return{type:f$.DateTime}},DateTime2($){return{type:f$.DateTime2,scale:$}},DateTimeOffset($){return{type:f$.DateTimeOffset,scale:$}},SmallDateTime(){return{type:f$.SmallDateTime}},Time($){return{type:f$.Time,scale:$}},UniqueIdentifier(){return{type:f$.UniqueIdentifier}},SmallMoney(){return{type:f$.SmallMoney}},Money(){return{type:f$.Money}},Binary($){return{type:f$.Binary,length:$}},VarBinary($){return{type:f$.VarBinary,length:$}},Image(){return{type:f$.Image}},Xml(){return{type:f$.Xml}},Char($){return{type:f$.Char,length:$}},NChar($){return{type:f$.NChar,length:$}},NText(){return{type:f$.NText}},TVP($){return{type:f$.TVP,tvpType:$}},UDT(){return{type:f$.UDT}},Geography(){return{type:f$.Geography}},Geometry(){return{type:f$.Geometry}},Variant(){return{type:f$.Variant}}};PQ.TYPES=f$;PQ.DECLARATIONS={};var BP=function($,q){if(q==null)q=2;if($=String($),$.length<q)for(let _=1;_<=q-$.length;_++)$=`0${$}`;return $};for(let $ in f$)if(_Q(f$,$)){let q=f$[$];q.declaration=$.toLowerCase(),PQ.DECLARATIONS[q.declaration]=q,((_,K)=>{K[KQ]=()=>`[sql.${_}]`})($,q)}PQ.declare=($,q)=>{switch($){case f$.VarChar:case f$.VarBinary:return`${$.declaration} (${q.length>8000?"MAX":q.length==null?"MAX":q.length})`;case f$.NVarChar:return`${$.declaration} (${q.length>4000?"MAX":q.length==null?"MAX":q.length})`;case f$.Char:case f$.NChar:case f$.Binary:return`${$.declaration} (${q.length==null?1:q.length})`;case f$.Decimal:case f$.Numeric:return`${$.declaration} (${q.precision==null?18:q.precision}, ${q.scale==null?0:q.scale})`;case f$.Time:case f$.DateTime2:case f$.DateTimeOffset:return`${$.declaration} (${q.scale==null?7:q.scale})`;case f$.TVP:return`${q.tvpType} readonly`;default:return $.declaration}};PQ.cast=($,q,_)=>{if($==null)return null;switch(typeof $){case"string":return`N'${$.replace(/'/g,"''")}'`;case"number":case"bigint":return $;case"boolean":return $?1:0;case"object":if($ instanceof Date){let K=$.getUTCMilliseconds()/1000;if($.nanosecondDelta!=null)K+=$.nanosecondDelta;let P=_.scale==null?7:_.scale;if(P>0)K=String(K).substr(1,P+1);else K="";return`N'${$.getUTCFullYear()}-${BP($.getUTCMonth()+1)}-${BP($.getUTCDate())} ${BP($.getUTCHours())}:${BP($.getUTCMinutes())}:${BP($.getUTCSeconds())}${K}'`}else if(Buffer.isBuffer($))return`0x${$.toString("hex")}`;return null;default:return null}}});var Bw=y((HN$,BJ)=>{var X_=e_().TYPES,zQ=e_().declare,eJ=cq().objectHasProperty;function t4($){if($){let q=t4.parseName($);this.name=q.name,this.schema=q.schema,this.database=q.database,this.path=(this.database?`[${this.database}].`:"")+(this.schema?`[${this.schema}].`:"")+`[${this.name}]`,this.temporary=this.name.charAt(0)==="#"}this.columns=[],this.rows=[],Object.defineProperty(this.columns,"add",{value(q,_,K){if(_==null)throw new Error("Column data type is not defined.");if(_ instanceof Function)_=_();return K=K||{},_.name=q,["nullable","primary","identity","readOnly","length"].forEach((P)=>{if(eJ(K,P))_[P]=K[P]}),this.push(_)}}),Object.defineProperty(this.rows,"add",{value(){return this.push(Array.prototype.slice.call(arguments))}}),Object.defineProperty(this.rows,"clear",{value(){return this.splice(0,this.length)}})}t4.prototype._makeBulk=function $(){for(let q=0;q<this.columns.length;q++){let _=this.columns[q];switch(_.type){case X_.Date:case X_.DateTime:case X_.DateTime2:for(let K=0;K<this.rows.length;K++){let P=this.rows[K][q];if(typeof P==="string"||typeof P==="number"){let w=new Date(P);if(isNaN(w.getDate()))throw new TypeError("Invalid date value passed to bulk rows");this.rows[K][q]=w}}break;case X_.Xml:_.type=X_.NVarChar(65535).type;break;case X_.UDT:case X_.Geography:case X_.Geometry:_.type=X_.VarBinary(65535).type;break;default:break}}return this};t4.prototype.declare=function $(){let q=this.columns.filter((P)=>P.primary===!0).map((P)=>`[${P.name}]`),_=this.columns.map((P)=>{let w=[`[${P.name}] ${zQ(P.type,P)}`];if(P.nullable===!0)w.push("null");else if(P.nullable===!1)w.push("not null");if(P.primary===!0&&q.length===1)w.push("primary key");return w.join(" ")}),K=q.length>1?`, constraint [PK_${this.temporary?this.name.substr(1):this.name}] primary key (${q.join(", ")})`:"";return`create table ${this.path} (${_.join(", ")}${K})`};t4.fromRecordset=function $(q,_){let K=new this(_);for(let P in q.columns)if(eJ(q.columns,P)){let w=q.columns[P];K.columns.add(P,{type:w.type,length:w.length,scale:w.scale,precision:w.precision},{nullable:w.nullable,identity:w.identity,readOnly:w.readOnly})}if(K.columns.length===1&&K.columns[0].name==="JSON_F52E2B61-18A1-11d1-B105-00805F49916B")for(let P=0;P<q.length;P++)K.rows.add(JSON.stringify(q[P]));else for(let P=0;P<q.length;P++)K.rows.add.apply(K.rows,K.columns.map((w)=>q[P][w.name]));return K};t4.parseName=function $(q){let _=q.length,K=-1,P="",w=!1,O=[];while(++K<_){let f=q.charAt(K);if(f==="[")if(w)P+=f;else w=!0;else if(f==="]")if(w)w=!1;else throw new Error("Invalid table name.");else if(f===".")if(w)P+=f;else O.push(P),P="";else P+=f}if(P)O.push(P);switch(O.length){case 1:return{name:O[0],schema:null,database:null};case 2:return{name:O[1],schema:O[0],database:null};case 3:return{name:O[2],schema:O[1],database:O[0]};default:throw new Error("Invalid table name.")}};BJ.exports=t4});var D_=y((YN$,Fw)=>{var a6=e_().TYPES,fQ=Bw(),FJ=Promise,MQ={},Jq=[];Jq.register=function($,q){for(let _=0;_<this.length;_++)if(this[_].js===$){this.splice(_,1);break}return this.push({js:$,sql:q}),null};Jq.register(String,a6.NVarChar);Jq.register(Number,a6.Int);Jq.register(Boolean,a6.Bit);Jq.register(Date,a6.DateTime);Jq.register(Buffer,a6.VarBinary);Jq.register(fQ,a6.TVP);var vQ=function($){if($===null||$===void 0)return a6.NVarChar;switch(typeof $){case"string":for(let q of Array.from(Jq))if(q.js===String)return q.sql;return a6.NVarChar;case"number":if($%1===0)if($<-2147483648||$>2147483647)return a6.BigInt;else return a6.Int;else return a6.Float;case"bigint":if($<-2147483648n||$>2147483647n)return a6.BigInt;else return a6.Int;case"boolean":for(let q of Array.from(Jq))if(q.js===Boolean)return q.sql;return a6.Bit;case"object":for(let q of Array.from(Jq))if($ instanceof q.js)return q.sql;return a6.NVarChar;default:return a6.NVarChar}};Fw.exports={driver:MQ,getTypeByValue:vQ,map:Jq};Object.defineProperty(Fw.exports,"Promise",{get:()=>{return FJ},set:($)=>{FJ=$}});Object.defineProperty(Fw.exports,"valueHandler",{enumerable:!0,value:new Map,writable:!1,configurable:!1})});var QJ=y((hN$,UJ)=>{UJ.exports=HQ;function s4($){if($ instanceof Buffer)return Buffer.from($);return new $.constructor($.buffer.slice(),$.byteOffset,$.length)}function HQ($){if($=$||{},$.circles)return YQ($);let q=new Map;if(q.set(Date,(O)=>new Date(O)),q.set(Map,(O,f)=>new Map(K(Array.from(O),f))),q.set(Set,(O,f)=>new Set(K(Array.from(O),f))),$.constructorHandlers)for(let O of $.constructorHandlers)q.set(O[0],O[1]);let _=null;return $.proto?w:P;function K(O,f){let Y=Object.keys(O),h=new Array(Y.length);for(let k=0;k<Y.length;k++){let T=Y[k],p=O[T];if(typeof p!=="object"||p===null)h[T]=p;else if(p.constructor!==Object&&(_=q.get(p.constructor)))h[T]=_(p,f);else if(ArrayBuffer.isView(p))h[T]=s4(p);else h[T]=f(p)}return h}function P(O){if(typeof O!=="object"||O===null)return O;if(Array.isArray(O))return K(O,P);if(O.constructor!==Object&&(_=q.get(O.constructor)))return _(O,P);let f={};for(let Y in O){if(Object.hasOwnProperty.call(O,Y)===!1)continue;let h=O[Y];if(typeof h!=="object"||h===null)f[Y]=h;else if(h.constructor!==Object&&(_=q.get(h.constructor)))f[Y]=_(h,P);else if(ArrayBuffer.isView(h))f[Y]=s4(h);else f[Y]=P(h)}return f}function w(O){if(typeof O!=="object"||O===null)return O;if(Array.isArray(O))return K(O,w);if(O.constructor!==Object&&(_=q.get(O.constructor)))return _(O,w);let f={};for(let Y in O){let h=O[Y];if(typeof h!=="object"||h===null)f[Y]=h;else if(h.constructor!==Object&&(_=q.get(h.constructor)))f[Y]=_(h,w);else if(ArrayBuffer.isView(h))f[Y]=s4(h);else f[Y]=w(h)}return f}}function YQ($){let q=[],_=[],K=new Map;if(K.set(Date,(Y)=>new Date(Y)),K.set(Map,(Y,h)=>new Map(w(Array.from(Y),h))),K.set(Set,(Y,h)=>new Set(w(Array.from(Y),h))),$.constructorHandlers)for(let Y of $.constructorHandlers)K.set(Y[0],Y[1]);let P=null;return $.proto?f:O;function w(Y,h){let k=Object.keys(Y),T=new Array(k.length);for(let p=0;p<k.length;p++){let G=k[p],Z=Y[G];if(typeof Z!=="object"||Z===null)T[G]=Z;else if(Z.constructor!==Object&&(P=K.get(Z.constructor)))T[G]=P(Z,h);else if(ArrayBuffer.isView(Z))T[G]=s4(Z);else{let X=q.indexOf(Z);if(X!==-1)T[G]=_[X];else T[G]=h(Z)}}return T}function O(Y){if(typeof Y!=="object"||Y===null)return Y;if(Array.isArray(Y))return w(Y,O);if(Y.constructor!==Object&&(P=K.get(Y.constructor)))return P(Y,O);let h={};q.push(Y),_.push(h);for(let k in Y){if(Object.hasOwnProperty.call(Y,k)===!1)continue;let T=Y[k];if(typeof T!=="object"||T===null)h[k]=T;else if(T.constructor!==Object&&(P=K.get(T.constructor)))h[k]=P(T,O);else if(ArrayBuffer.isView(T))h[k]=s4(T);else{let p=q.indexOf(T);if(p!==-1)h[k]=_[p];else h[k]=O(T)}}return q.pop(),_.pop(),h}function f(Y){if(typeof Y!=="object"||Y===null)return Y;if(Array.isArray(Y))return w(Y,f);if(Y.constructor!==Object&&(P=K.get(Y.constructor)))return P(Y,f);let h={};q.push(Y),_.push(h);for(let k in Y){let T=Y[k];if(typeof T!=="object"||T===null)h[k]=T;else if(T.constructor!==Object&&(P=K.get(T.constructor)))h[k]=P(T,f);else if(ArrayBuffer.isView(T))h[k]=s4(T);else{let p=q.indexOf(T);if(p!==-1)h[k]=_[p];else h[k]=f(T)}}return q.pop(),_.pop(),h}}});var qX=y((kN$,$X)=>{$X.exports=QJ()()});var PX=y((TN$,KX)=>{var hQ=I4();class _X extends hQ{constructor($,q){super($,q);this.name="PreparedStatementError"}}KX.exports=_X});var _M=y((AN$,wX)=>{var kQ=I4();class jX extends kQ{constructor($,q){super($,q);if($ instanceof Error)if($.info)this.number=$.info.number||$.code,this.lineNumber=$.info.lineNumber,this.state=$.info.state||$.sqlstate,this.class=$.info.class,this.serverName=$.info.serverName,this.procName=$.info.procName;else this.number=$.code,this.lineNumber=$.lineNumber,this.state=$.sqlstate,this.class=$.severity,this.serverName=$.serverName,this.procName=$.procName;this.name="RequestError";let _=/^\[Microsoft\]\[SQL Server Native Client 11\.0\](?:\[SQL Server\])?([\s\S]*)$/.exec(this.message);if(_)this.message=_[1]}}wX.exports=jX});var KM=y((WN$,zX)=>{var TQ=I4();class OX extends TQ{constructor($,q){super($,q);this.name="TransactionError"}}zX.exports=OX});var e4=y((JN$,fX)=>{var AQ=ew(),WQ=I4(),JQ=PX(),XQ=_M(),DQ=KM();fX.exports={ConnectionError:AQ,MSSQLError:WQ,PreparedStatementError:JQ,RequestError:XQ,TransactionError:DQ}});var jM=y((XN$,vX)=>{var{EventEmitter:pQ}=i("node:events"),B_=Aq()("mssql:base"),{parseSqlConnectionString:yQ}=WJ(),SQ=iJ(),{IDS:p_}=cq(),PM=ew(),Xq=D_(),GQ=qX(),{MSSQLError:ZQ}=e4();class MX extends pQ{constructor($,q){super();if(p_.add(this,"ConnectionPool"),B_("pool(%d): created",p_.get(this)),this._connectStack=[],this._closeStack=[],this._connected=!1,this._connecting=!1,this._healthy=!1,typeof $==="string")try{this.config=this.constructor.parseConnectionString($)}catch(K){if(typeof q==="function")return setImmediate(q,K);throw K}else this.config=GQ($);this.config.port=this.config.port||1433,this.config.options=this.config.options||{},this.config.stream=this.config.stream||!1,this.config.parseJSON=this.config.parseJSON||!1,this.config.arrayRowMode=this.config.arrayRowMode||!1,this.config.validateConnection="validateConnection"in this.config?this.config.validateConnection:!0;let _=/^(.*)\\(.*)$/.exec(this.config.server);if(_)this.config.server=_[1],this.config.options.instanceName=_[2];if(typeof this.config.options.useColumnNames!=="undefined"&&this.config.options.useColumnNames!==!0){let K=new ZQ("Invalid options `useColumnNames`, use `arrayRowMode` instead");if(typeof q==="function")return setImmediate(q,K);throw K}if(typeof q==="function")this.connect(q)}get connected(){return this._connected}get connecting(){return this._connecting}get healthy(){return this._healthy}static parseConnectionString($){return this._parseConnectionString($)}static _parseAuthenticationType($,q){switch($.toLowerCase()){case"active directory integrated":if(q.includes("token"))return"azure-active-directory-access-token";else if(["client id","client secret","tenant id"].every((_)=>q.includes(_)))return"azure-active-directory-service-principal-secret";else if(["client id","msi endpoint","msi secret"].every((_)=>q.includes(_)))return"azure-active-directory-msi-app-service";else if(["client id","msi endpoint"].every((_)=>q.includes(_)))return"azure-active-directory-msi-vm";return"azure-active-directory-default";case"active directory password":return"azure-active-directory-password";case"ntlm":return"ntlm";default:return"default"}}static _parseConnectionString($){let q=yQ($,!0,!0);return Object.entries(q).reduce((_,[K,P])=>{switch(K){case"application name":break;case"applicationintent":Object.assign(_.options,{readOnlyIntent:P==="readonly"});break;case"asynchronous processing":break;case"attachdbfilename":break;case"authentication":Object.assign(_,{authentication_type:this._parseAuthenticationType(P,Object.keys(q))});break;case"column encryption setting":break;case"connection timeout":Object.assign(_,{connectionTimeout:P*1000});break;case"connection lifetime":break;case"connectretrycount":break;case"connectretryinterval":Object.assign(_.options,{connectionRetryInterval:P*1000});break;case"context connection":break;case"client id":Object.assign(_,{clientId:P});break;case"client secret":Object.assign(_,{clientSecret:P});break;case"current language":Object.assign(_.options,{language:P});break;case"data source":{let w=P,O,f=1433;if(/^np:/i.test(w))throw new Error("Connection via Named Pipes is not supported.");if(/^tcp:/i.test(w))w=w.substr(4);let Y=/^(.*)\\(.*)$/.exec(w);if(Y)w=Y[1].trim(),O=Y[2].trim();let h=/^(.*),(.*)$/.exec(w);if(h)w=h[1].trim(),f=parseInt(h[2].trim(),10);else{let k=/^(.*),(.*)$/.exec(O);if(k)O=k[1].trim(),f=parseInt(k[2].trim(),10)}if(w==="."||w==="(.)"||w.toLowerCase()==="(localdb)"||w.toLowerCase()==="(local)")w="localhost";if(Object.assign(_,{port:f,server:w}),O)Object.assign(_.options,{instanceName:O});break}case"encrypt":Object.assign(_.options,{encrypt:!!P});break;case"enlist":break;case"failover partner":break;case"initial catalog":Object.assign(_,{database:P});break;case"integrated security":break;case"max pool size":Object.assign(_.pool,{max:P});break;case"min pool size":Object.assign(_.pool,{min:P});break;case"msi endpoint":Object.assign(_,{msiEndpoint:P});break;case"msi secret":Object.assign(_,{msiSecret:P});break;case"multipleactiveresultsets":break;case"multisubnetfailover":Object.assign(_.options,{multiSubnetFailover:P});break;case"network library":break;case"packet size":Object.assign(_.options,{packetSize:P});break;case"password":Object.assign(_,{password:P});break;case"persist security info":break;case"poolblockingperiod":break;case"pooling":break;case"replication":break;case"tenant id":Object.assign(_,{tenantId:P});break;case"token":Object.assign(_,{token:P});break;case"transaction binding":Object.assign(_.options,{enableImplicitTransactions:P.toLowerCase()==="implicit unbind"});break;case"transparentnetworkipresolution":break;case"trustservercertificate":Object.assign(_.options,{trustServerCertificate:P});break;case"type system version":break;case"user id":{let w=P,O,f=/^(.*)\\(.*)$/.exec(w);if(f)O=f[1],w=f[2];if(O)Object.assign(_,{domain:O});if(w)Object.assign(_,{user:w});break}case"user instance":break;case"workstation id":Object.assign(_.options,{workstationId:P});break;case"request timeout":Object.assign(_,{requestTimeout:parseInt(P,10)});break;case"stream":Object.assign(_,{stream:!!P});break;case"useutc":Object.assign(_.options,{useUTC:!!P});break;case"parsejson":Object.assign(_,{parseJSON:!!P});break}return _},{options:{},pool:{}})}acquire($,q){let _=Xq.Promise.resolve(this._acquire()).catch((K)=>{throw this.emit("error",K),K});if(typeof q==="function")return _.then((K)=>q(null,K,this.config)).catch(q),this;return _}_acquire(){if(!this.pool)return Xq.Promise.reject(new PM("Connection not yet open.","ENOTOPEN"));else if(this.pool.destroyed)return Xq.Promise.reject(new PM("Connection is closing","ENOTOPEN"));return this.pool.acquire().promise}release($){if(B_("connection(%d): released",p_.get($)),this.pool)this.pool.release($);return this}connect($){if(typeof $==="function")return this._connect($),this;return new Xq.Promise((q,_)=>{return this._connect((K)=>{if(K)return _(K);q(this)})})}_connect($){if(this._connected)return B_("pool(%d): already connected, executing connect callback immediately",p_.get(this)),setImmediate($,null,this);if(this._connectStack.push($),this._connecting)return;this._connecting=!0,B_("pool(%d): connecting",p_.get(this)),this._poolCreate().then((q)=>{return B_("pool(%d): connected",p_.get(this)),this._healthy=!0,this._poolDestroy(q).then(()=>{this.pool=new SQ.Pool(Object.assign({create:()=>this._poolCreate().then((_)=>{return this._healthy=!0,_}).catch((_)=>{if(this.pool.numUsed()+this.pool.numFree()<=0)this._healthy=!1;throw _}),validate:this._poolValidate.bind(this),destroy:this._poolDestroy.bind(this),max:10,min:0,idleTimeoutMillis:30000,propagateCreateError:!0},this.config.pool)),this._connecting=!1,this._connected=!0})}).then(()=>{this._connectStack.forEach((q)=>{setImmediate(q,null,this)})}).catch((q)=>{this._connecting=!1,this._connectStack.forEach((_)=>{setImmediate(_,q)})}).then(()=>{this._connectStack=[]})}get size(){return this.pool.numFree()+this.pool.numUsed()+this.pool.numPendingCreates()}get available(){return this.pool.numFree()}get pending(){return this.pool.numPendingAcquires()}get borrowed(){return this.pool.numUsed()}close($){if(typeof $==="function")return this._close($),this;return new Xq.Promise((q,_)=>{this._close((K)=>{if(K)return _(K);q(this)})})}_close($){if(this._connecting)B_("pool(%d): close called while connecting",p_.get(this)),setImmediate($,new PM("Cannot close a pool while it is connecting"));if(!this.pool)return B_("pool(%d): already closed, executing close callback immediately",p_.get(this)),setImmediate($,null);if(this._closeStack.push($),this.pool.destroyed)return;this._connecting=this._connected=this._healthy=!1,this.pool.destroy().then(()=>{B_("pool(%d): pool closed, removing pool reference and executing close callbacks",p_.get(this)),this.pool=null,this._closeStack.forEach((q)=>{setImmediate(q,null)})}).catch((q)=>{this.pool=null,this._closeStack.forEach((_)=>{setImmediate(_,q)})}).then(()=>{this._closeStack=[]})}request(){return new Xq.driver.Request(this)}transaction(){return new Xq.driver.Transaction(this)}query(){if(typeof arguments[0]==="string")return new Xq.driver.Request(this).query(arguments[0],arguments[1]);let $=Array.prototype.slice.call(arguments),q=$.shift();return new Xq.driver.Request(this)._template(q,$,"query")}batch(){if(typeof arguments[0]==="string")return new Xq.driver.Request(this).batch(arguments[0],arguments[1]);let $=Array.prototype.slice.call(arguments),q=$.shift();return new Xq.driver.Request(this)._template(q,$,"batch")}}vX.exports=MX});var FP=y((DN$,wM)=>{var oK=D_(),$6=null,L6={};function NQ($,q){if(!$6){$6=new oK.driver.ConnectionPool($);for(let P in L6)for(let w=0,O=L6[P].length;w<O;w++)$6.on(P,L6[P][w]);let _=$6.close,K=function(P){for(let w in L6)for(let O=0,f=L6[w].length;O<f;O++)this.removeListener(w,L6[w][O]);return this.on("error",(w)=>{if(L6.error)for(let O=0,f=L6.error.length;O<f;O++)L6.error[O].call(this,w)}),$6=null,_.call(this,P)};$6.close=K.bind($6)}if(typeof q==="function")return $6.connect((_,K)=>{if(_)$6=null;q(_,K)});return $6.connect().catch((_)=>{return $6=null,oK.Promise.reject(_)})}function mQ($){if($6){let q=$6;return $6=null,q.close($)}if(typeof $==="function")return setImmediate($),null;return new oK.Promise((q)=>{q($6)})}function EQ($,q){if(!L6[$])L6[$]=[];if(L6[$].push(q),$6)$6.on($,q);return $6}function HX($,q){if(!L6[$])return $6;let _=L6[$].indexOf(q);if(_===-1)return $6;if(L6[$].splice(_,1),L6[$].length===0)L6[$]=void 0;if($6)$6.removeListener($,q);return $6}function uQ(){if(typeof arguments[0]==="string")return new oK.driver.Request().query(arguments[0],arguments[1]);let $=Array.prototype.slice.call(arguments),q=$.shift();return new oK.driver.Request()._template(q,$,"query")}function RQ(){if(typeof arguments[0]==="string")return new oK.driver.Request().batch(arguments[0],arguments[1]);let $=Array.prototype.slice.call(arguments),q=$.shift();return new oK.driver.Request()._template(q,$,"batch")}wM.exports={batch:RQ,close:mQ,connect:NQ,off:HX,on:EQ,query:uQ,removeListener:HX};Object.defineProperty(wM.exports,"pool",{get:()=>{return $6},set:()=>{}})});var TX=y((pN$,kX)=>{var UP=Aq()("mssql:base"),{EventEmitter:LQ}=i("node:events"),{IDS:B4,objectHasProperty:Uw}=cq(),CQ=FP(),{TransactionError:YX,PreparedStatementError:y_}=e4(),F4=D_(),{TYPES:QP,declare:nQ}=e_();class hX extends LQ{constructor($){super();B4.add(this,"PreparedStatement"),UP("ps(%d): created",B4.get(this)),this.parent=$||CQ.pool,this._handle=0,this.prepared=!1,this.parameters={}}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire($,q){if(!this._acquiredConnection)return setImmediate(q,new y_("Statement is not prepared. Call prepare() first.","ENOTPREPARED")),this;if(this._activeRequest)return setImmediate(q,new YX("Can't acquire connection for the request. There is another request in progress.","EREQINPROG")),this;return this._activeRequest=$,setImmediate(q,null,this._acquiredConnection,this._acquiredConfig),this}release($){if($===this._acquiredConnection)this._activeRequest=null;return this}input($,q){if(/--| |\/\*|\*\/|'/.test($))throw new y_(`SQL injection warning for param '${$}'`,"EINJECT");if(arguments.length<2)throw new y_("Invalid number of arguments. 2 arguments expected.","EARGS");if(q instanceof Function)q=q();if(Uw(this.parameters,$))throw new y_(`The parameter name ${$} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[$]={name:$,type:q.type,io:1,length:q.length,scale:q.scale,precision:q.precision,tvpType:q.tvpType},this}replaceInput($,q,_){return delete this.parameters[$],this.input($,q,_)}output($,q){if(/--| |\/\*|\*\/|'/.test($))throw new y_(`SQL injection warning for param '${$}'`,"EINJECT");if(arguments.length<2)throw new y_("Invalid number of arguments. 2 arguments expected.","EARGS");if(q instanceof Function)q=q();if(Uw(this.parameters,$))throw new y_(`The parameter name ${$} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[$]={name:$,type:q.type,io:2,length:q.length,scale:q.scale,precision:q.precision},this}replaceOutput($,q){return delete this.parameters[$],this.output($,q)}prepare($,q){if(typeof q==="function")return this._prepare($,q),this;return new F4.Promise((_,K)=>{this._prepare($,(P)=>{if(P)return K(P);_(this)})})}_prepare($,q){if(UP("ps(%d): prepare",B4.get(this)),typeof $==="function")q=$,$=void 0;if(this.prepared)return setImmediate(q,new y_("Statement is already prepared.","EALREADYPREPARED"));this.statement=$||this.statement,this.parent.acquire(this,(_,K,P)=>{if(_)return q(_);this._acquiredConnection=K,this._acquiredConfig=P;let w=new F4.driver.Request(this);w.stream=!1,w.output("handle",QP.Int),w.input("params",QP.NVarChar,(()=>{let O=[];for(let f in this.parameters){if(!Uw(this.parameters,f))continue;let Y=this.parameters[f];O.push(`@${f} ${nQ(Y.type,Y)}${Y.io===2?" output":""}`)}return O})().join(",")),w.input("stmt",QP.NVarChar,this.statement),w.execute("sp_prepare",(O,f)=>{if(O)return this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,q(O);UP("ps(%d): prepared",B4.get(this)),this._handle=f.output.handle,this.prepared=!0,q(null)})})}execute($,q){if(this.stream||typeof q==="function")return this._execute($,q);return new F4.Promise((_,K)=>{this._execute($,(P,w)=>{if(P)return K(P);_(w)})})}_execute($,q){let _=new F4.driver.Request(this);_.stream=this.stream,_.arrayRowMode=this.arrayRowMode,_.input("handle",QP.Int,this._handle);for(let K in this.parameters){if(!Uw(this.parameters,K))continue;let P=this.parameters[K];_.parameters[K]={name:K,type:P.type,io:P.io,value:$[K],length:P.length,scale:P.scale,precision:P.precision}}return _.execute("sp_execute",(K,P)=>{if(K)return q(K);q(null,P)}),_}unprepare($){if(typeof $==="function")return this._unprepare($),this;return new F4.Promise((q,_)=>{this._unprepare((K)=>{if(K)return _(K);q()})})}_unprepare($){if(UP("ps(%d): unprepare",B4.get(this)),!this.prepared)return setImmediate($,new y_("Statement is not prepared. Call prepare() first.","ENOTPREPARED"));if(this._activeRequest)return setImmediate($,new YX("Can't unprepare the statement. There is a request in progress.","EREQINPROG"));let q=new F4.driver.Request(this);q.stream=!1,q.input("handle",QP.Int,this._handle),q.execute("sp_unprepare",(_)=>{if(_)return $(_);return this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,this._handle=0,this.prepared=!1,UP("ps(%d): unprepared",B4.get(this)),$(null)})}}kX.exports=hX});var OM=y((yN$,XX)=>{var rQ=Aq()("mssql:base"),{EventEmitter:VQ}=i("node:events"),{Readable:xQ}=i("node:stream"),{IDS:AX,objectHasProperty:WX}=cq(),dQ=FP(),{RequestError:Iq,ConnectionError:Qw}=e4(),{TYPES:$O}=e_(),$j=D_();class JX extends VQ{constructor($){super();AX.add(this,"Request"),rQ("request(%d): created",AX.get(this)),this.canceled=!1,this._paused=!1,this.parent=$||dQ.pool,this.parameters={},this.stream=null,this.arrayRowMode=null}get paused(){return this._paused}template(){let $=Array.prototype.slice.call(arguments),q=$.shift();return this._template(q,$)}_template($,q,_){let K=[$[0]];for(let P=0;P<q.length;P++){let w=q[P];if(Array.isArray(w)){for(let O=0;O<w.length;O++)if(this.input(`param${P+1}_${O}`,w[O]),K.push(`@param${P+1}_${O}`),O<w.length-1)K.push(", ");K.push($[P+1])}else this.input(`param${P+1}`,w),K.push(`@param${P+1}`,$[P+1])}if(_)return this[_](K.join(""));else return K.join("")}input($,q,_){if(/--| |\/\*|\*\/|'/.test($))throw new Iq(`SQL injection warning for param '${$}'`,"EINJECT");if(arguments.length<2)throw new Iq("Invalid number of arguments. At least 2 arguments expected.","EARGS");else if(arguments.length===2)_=q,q=$j.getTypeByValue(_);if(_&&typeof _.valueOf==="function"&&!(_ instanceof Date))_=_.valueOf();if(_===void 0)_=null;if(typeof _==="number"&&isNaN(_))_=null;if(q instanceof Function)q=q();if(WX(this.parameters,$))throw new Iq(`The parameter name ${$} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[$]={name:$,type:q.type,io:1,value:_,length:q.length,scale:q.scale,precision:q.precision,tvpType:q.tvpType},this}replaceInput($,q,_){return delete this.parameters[$],this.input($,q,_)}output($,q,_){if(!q)q=$O.NVarChar;if(/--| |\/\*|\*\/|'/.test($))throw new Iq(`SQL injection warning for param '${$}'`,"EINJECT");if(q===$O.Text||q===$O.NText||q===$O.Image)throw new Iq("Deprecated types (Text, NText, Image) are not supported as OUTPUT parameters.","EDEPRECATED");if(_&&typeof _.valueOf==="function"&&!(_ instanceof Date))_=_.valueOf();if(_===void 0)_=null;if(typeof _==="number"&&isNaN(_))_=null;if(q instanceof Function)q=q();if(WX(this.parameters,$))throw new Iq(`The parameter name ${$} has already been declared. Parameter names must be unique`,"EDUPEPARAM");return this.parameters[$]={name:$,type:q.type,io:2,value:_,length:q.length,scale:q.scale,precision:q.precision},this}replaceOutput($,q,_){return delete this.parameters[$],this.output($,q,_)}batch($,q){if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;if(this.rowsAffected=0,typeof q==="function")return this._batch($,(_,K,P,w)=>{if(this.stream){if(_)this.emit("error",_);_=null,this.emit("done",{output:P,rowsAffected:w})}if(_)return q(_);q(null,{recordsets:K,recordset:K&&K[0],output:P,rowsAffected:w})}),this;if(typeof $==="object"){let _=Array.prototype.slice.call(arguments),K=_.shift();$=this._template(K,_)}return new $j.Promise((_,K)=>{this._batch($,(P,w,O,f)=>{if(this.stream){if(P)this.emit("error",P);P=null,this.emit("done",{output:O,rowsAffected:f})}if(P)return K(P);_({recordsets:w,recordset:w&&w[0],output:O,rowsAffected:f})})})}_batch($,q){if(!this.parent)return setImmediate(q,new Iq("No connection is specified for that request.","ENOCONN"));if(!this.parent.connected)return setImmediate(q,new Qw("Connection is closed.","ECONNCLOSED"));this.canceled=!1,setImmediate(q)}bulk($,q,_){if(typeof q==="function")_=q,q={};else if(typeof q==="undefined")q={};if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;if(this.stream||typeof _==="function")return this._bulk($,q,(K,P)=>{if(this.stream){if(K)this.emit("error",K);return this.emit("done",{rowsAffected:P})}if(K)return _(K);_(null,{rowsAffected:P})}),this;return new $j.Promise((K,P)=>{this._bulk($,q,(w,O)=>{if(w)return P(w);K({rowsAffected:O})})})}_bulk($,q,_){if(!this.parent)return setImmediate(_,new Iq("No connection is specified for that request.","ENOCONN"));if(!this.parent.connected)return setImmediate(_,new Qw("Connection is closed.","ECONNCLOSED"));this.canceled=!1,setImmediate(_)}toReadableStream($={}){this.stream=!0,this.pause();let q=new xQ({...$,objectMode:!0,read:()=>{this.resume()}});return this.on("row",(_)=>{if(!q.push(_))this.pause()}),this.on("error",(_)=>{q.emit("error",_)}),this.on("done",()=>{q.push(null)}),q}pipe($){return this.toReadableStream().pipe($)}query($,q){if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;if(this.rowsAffected=0,typeof q==="function")return this._query($,(_,K,P,w,O)=>{if(this.stream){if(_)this.emit("error",_);_=null,this.emit("done",{output:P,rowsAffected:w})}if(_)return q(_);let f={recordsets:K,recordset:K&&K[0],output:P,rowsAffected:w};if(this.arrayRowMode)f.columns=O;q(null,f)}),this;if(typeof $==="object"){let _=Array.prototype.slice.call(arguments),K=_.shift();$=this._template(K,_)}return new $j.Promise((_,K)=>{this._query($,(P,w,O,f,Y)=>{if(this.stream){if(P)this.emit("error",P);P=null,this.emit("done",{output:O,rowsAffected:f})}if(P)return K(P);let h={recordsets:w,recordset:w&&w[0],output:O,rowsAffected:f};if(this.arrayRowMode)h.columns=Y;_(h)})})}_query($,q){if(!this.parent)return setImmediate(q,new Iq("No connection is specified for that request.","ENOCONN"));if(!this.parent.connected)return setImmediate(q,new Qw("Connection is closed.","ECONNCLOSED"));this.canceled=!1,setImmediate(q)}execute($,q){if(this.stream===null&&this.parent)this.stream=this.parent.config.stream;if(this.arrayRowMode===null&&this.parent)this.arrayRowMode=this.parent.config.arrayRowMode;if(this.rowsAffected=0,typeof q==="function")return this._execute($,(_,K,P,w,O,f)=>{if(this.stream){if(_)this.emit("error",_);_=null,this.emit("done",{output:P,rowsAffected:O,returnValue:w})}if(_)return q(_);let Y={recordsets:K,recordset:K&&K[0],output:P,rowsAffected:O,returnValue:w};if(this.arrayRowMode)Y.columns=f;q(null,Y)}),this;return new $j.Promise((_,K)=>{this._execute($,(P,w,O,f,Y,h)=>{if(this.stream){if(P)this.emit("error",P);P=null,this.emit("done",{output:O,rowsAffected:Y,returnValue:f})}if(P)return K(P);let k={recordsets:w,recordset:w&&w[0],output:O,rowsAffected:Y,returnValue:f};if(this.arrayRowMode)k.columns=h;_(k)})})}_execute($,q){if(!this.parent)return setImmediate(q,new Iq("No connection is specified for that request.","ENOCONN"));if(!this.parent.connected)return setImmediate(q,new Qw("Connection is closed.","ECONNCLOSED"));this.canceled=!1,setImmediate(q)}cancel(){return this._cancel(),!0}_cancel(){this.canceled=!0}pause(){if(this.stream)return this._pause(),!0;return!1}_pause(){this._paused=!0}resume(){if(this.stream)return this._resume(),!0;return!1}_resume(){this._paused=!1}_setCurrentRequest($){if(this._currentRequest=$,this._paused)this.pause();return this}}XX.exports=JX});var zM=y((SN$,DX)=>{DX.exports={READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5}});var MM=y((GN$,yX)=>{var bQ=Aq()("mssql:base"),{EventEmitter:oQ}=i("node:events"),{IDS:pX}=cq(),iQ=FP(),{TransactionError:lq}=e4(),qO=D_(),fM=zM();class _O extends oQ{constructor($){super();pX.add(this,"Transaction"),bQ("transaction(%d): created",pX.get(this)),this.parent=$||iQ.pool,this.isolationLevel=_O.defaultIsolationLevel,this.name=""}get config(){return this.parent.config}get connected(){return this.parent.connected}acquire($,q){if(!this._acquiredConnection)return setImmediate(q,new lq("Transaction has not begun. Call begin() first.","ENOTBEGUN")),this;if(this._activeRequest)return setImmediate(q,new lq("Can't acquire connection for the request. There is another request in progress.","EREQINPROG")),this;return this._activeRequest=$,setImmediate(q,null,this._acquiredConnection,this._acquiredConfig),this}release($){if($===this._acquiredConnection)this._activeRequest=null;return this}begin($,q){if($ instanceof Function)q=$,$=void 0;if(typeof q==="function")return this._begin($,(_)=>{if(!_)this.emit("begin");q(_)}),this;return new qO.Promise((_,K)=>{this._begin($,(P)=>{if(P)return K(P);this.emit("begin"),_(this)})})}_begin($,q){if(this._acquiredConnection)return setImmediate(q,new lq("Transaction has already begun.","EALREADYBEGUN"));if(this._aborted=!1,this._rollbackRequested=!1,$)if(Object.keys(fM).some((_)=>{return fM[_]===$}))this.isolationLevel=$;else throw new lq("Invalid isolation level.");setImmediate(q)}commit($){if(typeof $==="function")return this._commit((q)=>{if(!q)this.emit("commit");$(q)}),this;return new qO.Promise((q,_)=>{this._commit((K)=>{if(K)return _(K);this.emit("commit"),q()})})}_commit($){if(this._aborted)return setImmediate($,new lq("Transaction has been aborted.","EABORT"));if(!this._acquiredConnection)return setImmediate($,new lq("Transaction has not begun. Call begin() first.","ENOTBEGUN"));if(this._activeRequest)return setImmediate($,new lq("Can't commit transaction. There is a request in progress.","EREQINPROG"));setImmediate($)}request(){return new qO.driver.Request(this)}rollback($){if(typeof $==="function")return this._rollback((q)=>{if(!q)this.emit("rollback",this._aborted);$(q)}),this;return new qO.Promise((q,_)=>{return this._rollback((K)=>{if(K)return _(K);this.emit("rollback",this._aborted),q()})})}_rollback($){if(this._aborted)return setImmediate($,new lq("Transaction has been aborted.","EABORT"));if(!this._acquiredConnection)return setImmediate($,new lq("Transaction has not begun. Call begin() first.","ENOTBEGUN"));if(this._activeRequest)return setImmediate($,new lq("Can't rollback transaction. There is a request in progress.","EREQINPROG"));this._rollbackRequested=!0,setImmediate($)}}_O.defaultIsolationLevel=fM.READ_COMMITTED;yX.exports=_O});var EX=y((ZN$,Q4)=>{var gQ=jM(),aQ=TX(),cQ=OM(),IQ=MM(),{ConnectionError:SX,TransactionError:GX,RequestError:ZX,PreparedStatementError:NX,MSSQLError:mX}=e4(),U4=D_(),lQ=Bw(),tQ=zM(),{TYPES:vM}=e_(),{connect:sQ,close:eQ,on:BQ,off:FQ,removeListener:UQ,query:QQ,batch:$$$}=FP();Q4.exports={ConnectionPool:gQ,Transaction:IQ,Request:cQ,PreparedStatement:aQ,ConnectionError:SX,TransactionError:GX,RequestError:ZX,PreparedStatementError:NX,MSSQLError:mX,driver:U4.driver,exports:{ConnectionError:SX,TransactionError:GX,RequestError:ZX,PreparedStatementError:NX,MSSQLError:mX,Table:lQ,ISOLATION_LEVEL:tQ,TYPES:vM,MAX:65535,map:U4.map,getTypeByValue:U4.getTypeByValue,connect:sQ,close:eQ,on:BQ,removeListener:UQ,off:FQ,query:QQ,batch:$$$}};Object.defineProperty(Q4.exports,"Promise",{enumerable:!0,get:()=>{return U4.Promise},set:($)=>{U4.Promise=$}});Object.defineProperty(Q4.exports,"valueHandler",{enumerable:!0,value:U4.valueHandler,writable:!1,configurable:!1});for(let $ in vM){let q=vM[$];Q4.exports.exports[$]=q,Q4.exports.exports[$.toUpperCase()]=q}});var k8=y((LX,CX)=>{Object.defineProperty(LX,"__esModule",{value:!0});LX.default=void 0;var q$$=4294967296,uX=1/q$$,_$$=Buffer.from([254,255,255,255,255,255,255,255]),RX=Buffer.alloc(0);class HM{constructor($,q,_){this.initialSize=$,this.encoding=q||"ucs2",this.doubleSizeGrowth=_||!1,this.buffer=Buffer.alloc(this.initialSize,0),this.compositeBuffer=RX,this.position=0}get data(){return this.newBuffer(0),this.compositeBuffer}copyFrom($){let q=$.length;this.makeRoomFor(q),$.copy(this.buffer,this.position),this.position+=q}makeRoomFor($){if(this.buffer.length-this.position<$)if(this.doubleSizeGrowth){let q=Math.max(128,this.buffer.length*2);while(q<$)q*=2;this.newBuffer(q)}else this.newBuffer($)}newBuffer($){let q=this.buffer.slice(0,this.position);this.compositeBuffer=Buffer.concat([this.compositeBuffer,q]),this.buffer=$===0?RX:Buffer.alloc($,0),this.position=0}writeUInt8($){this.makeRoomFor(1),this.buffer.writeUInt8($,this.position),this.position+=1}writeUInt16LE($){this.makeRoomFor(2),this.buffer.writeUInt16LE($,this.position),this.position+=2}writeUShort($){this.writeUInt16LE($)}writeUInt16BE($){this.makeRoomFor(2),this.buffer.writeUInt16BE($,this.position),this.position+=2}writeUInt24LE($){this.makeRoomFor(3),this.buffer[this.position+2]=$>>>16&255,this.buffer[this.position+1]=$>>>8&255,this.buffer[this.position]=$&255,this.position+=3}writeUInt32LE($){this.makeRoomFor(4),this.buffer.writeUInt32LE($,this.position),this.position+=4}writeBigInt64LE($){this.makeRoomFor(8),this.buffer.writeBigInt64LE($,this.position),this.position+=8}writeInt64LE($){this.writeBigInt64LE(BigInt($))}writeUInt64LE($){this.writeBigUInt64LE(BigInt($))}writeBigUInt64LE($){this.makeRoomFor(8),this.buffer.writeBigUInt64LE($,this.position),this.position+=8}writeUInt32BE($){this.makeRoomFor(4),this.buffer.writeUInt32BE($,this.position),this.position+=4}writeUInt40LE($){this.writeInt32LE($&-1),this.writeUInt8(Math.floor($*uX))}writeInt8($){this.makeRoomFor(1),this.buffer.writeInt8($,this.position),this.position+=1}writeInt16LE($){this.makeRoomFor(2),this.buffer.writeInt16LE($,this.position),this.position+=2}writeInt16BE($){this.makeRoomFor(2),this.buffer.writeInt16BE($,this.position),this.position+=2}writeInt32LE($){this.makeRoomFor(4),this.buffer.writeInt32LE($,this.position),this.position+=4}writeInt32BE($){this.makeRoomFor(4),this.buffer.writeInt32BE($,this.position),this.position+=4}writeFloatLE($){this.makeRoomFor(4),this.buffer.writeFloatLE($,this.position),this.position+=4}writeDoubleLE($){this.makeRoomFor(8),this.buffer.writeDoubleLE($,this.position),this.position+=8}writeString($,q){if(q==null)q=this.encoding;let _=Buffer.byteLength($,q);this.makeRoomFor(_),this.buffer.write($,this.position,q),this.position+=_}writeBVarchar($,q){this.writeUInt8($.length),this.writeString($,q)}writeUsVarchar($,q){this.writeUInt16LE($.length),this.writeString($,q)}writeUsVarbyte($,q){if(q==null)q=this.encoding;let _;if($ instanceof Buffer)_=$.length;else $=$.toString(),_=Buffer.byteLength($,q);if(this.writeUInt16LE(_),$ instanceof Buffer)this.writeBuffer($);else this.makeRoomFor(_),this.buffer.write($,this.position,q),this.position+=_}writePLPBody($,q){if(q==null)q=this.encoding;let _;if($ instanceof Buffer)_=$.length;else $=$.toString(),_=Buffer.byteLength($,q);if(this.writeBuffer(_$$),_>0)if(this.writeUInt32LE(_),$ instanceof Buffer)this.writeBuffer($);else this.makeRoomFor(_),this.buffer.write($,this.position,q),this.position+=_;this.writeUInt32LE(0)}writeBuffer($){let q=$.length;this.makeRoomFor(q),$.copy(this.buffer,this.position),this.position+=q}writeMoney($){this.writeInt32LE(Math.floor($*uX)),this.writeInt32LE($&-1)}}var NN$=LX.default=HM;CX.exports=HM});var c6=y((OD)=>{Object.defineProperty(OD,"__esModule",{value:!0});OD.Token=OD.TYPE=OD.SSPIToken=OD.RowToken=OD.RoutingEnvChangeToken=OD.RollbackTransactionEnvChangeToken=OD.ReturnValueToken=OD.ReturnStatusToken=OD.ResetConnectionEnvChangeToken=OD.PacketSizeEnvChangeToken=OD.OrderToken=OD.NBCRowToken=OD.LoginAckToken=OD.LanguageEnvChangeToken=OD.InfoMessageToken=OD.FedAuthInfoToken=OD.FeatureExtAckToken=OD.ErrorMessageToken=OD.DoneToken=OD.DoneProcToken=OD.DoneInProcToken=OD.DatabaseMirroringPartnerEnvChangeToken=OD.DatabaseEnvChangeToken=OD.CommitTransactionEnvChangeToken=OD.CollationChangeToken=OD.ColMetadataToken=OD.CharsetEnvChangeToken=OD.BeginTransactionEnvChangeToken=void 0;var mN$=OD.TYPE={ALTMETADATA:136,ALTROW:211,COLMETADATA:129,COLINFO:165,DONE:253,DONEPROC:254,DONEINPROC:255,ENVCHANGE:227,ERROR:170,FEATUREEXTACK:174,FEDAUTHINFO:238,INFO:171,LOGINACK:173,NBCROW:210,OFFSET:120,ORDER:169,RETURNSTATUS:121,RETURNVALUE:172,ROW:209,SSPI:237,TABNAME:164};class d${constructor($,q){this.name=$,this.handlerName=q}}OD.Token=d$;class rX extends d${constructor($){super("COLMETADATA","onColMetadata");this.columns=$}}OD.ColMetadataToken=rX;class VX extends d${constructor({more:$,sqlError:q,attention:_,serverError:K,rowCount:P,curCmd:w}){super("DONE","onDone");this.more=$,this.sqlError=q,this.attention=_,this.serverError=K,this.rowCount=P,this.curCmd=w}}OD.DoneToken=VX;class xX extends d${constructor({more:$,sqlError:q,attention:_,serverError:K,rowCount:P,curCmd:w}){super("DONEINPROC","onDoneInProc");this.more=$,this.sqlError=q,this.attention=_,this.serverError=K,this.rowCount=P,this.curCmd=w}}OD.DoneInProcToken=xX;class dX extends d${constructor({more:$,sqlError:q,attention:_,serverError:K,rowCount:P,curCmd:w}){super("DONEPROC","onDoneProc");this.more=$,this.sqlError=q,this.attention=_,this.serverError=K,this.rowCount=P,this.curCmd=w}}OD.DoneProcToken=dX;class bX extends d${constructor($,q){super("ENVCHANGE","onDatabaseChange");this.type="DATABASE",this.newValue=$,this.oldValue=q}}OD.DatabaseEnvChangeToken=bX;class oX extends d${constructor($,q){super("ENVCHANGE","onLanguageChange");this.type="LANGUAGE",this.newValue=$,this.oldValue=q}}OD.LanguageEnvChangeToken=oX;class iX extends d${constructor($,q){super("ENVCHANGE","onCharsetChange");this.type="CHARSET",this.newValue=$,this.oldValue=q}}OD.CharsetEnvChangeToken=iX;class gX extends d${constructor($,q){super("ENVCHANGE","onPacketSizeChange");this.type="PACKET_SIZE",this.newValue=$,this.oldValue=q}}OD.PacketSizeEnvChangeToken=gX;class aX extends d${constructor($,q){super("ENVCHANGE","onBeginTransaction");this.type="BEGIN_TXN",this.newValue=$,this.oldValue=q}}OD.BeginTransactionEnvChangeToken=aX;class cX extends d${constructor($,q){super("ENVCHANGE","onCommitTransaction");this.type="COMMIT_TXN",this.newValue=$,this.oldValue=q}}OD.CommitTransactionEnvChangeToken=cX;class IX extends d${constructor($,q){super("ENVCHANGE","onRollbackTransaction");this.type="ROLLBACK_TXN",this.newValue=$,this.oldValue=q}}OD.RollbackTransactionEnvChangeToken=IX;class lX extends d${constructor($,q){super("ENVCHANGE","onDatabaseMirroringPartner");this.type="DATABASE_MIRRORING_PARTNER",this.newValue=$,this.oldValue=q}}OD.DatabaseMirroringPartnerEnvChangeToken=lX;class tX extends d${constructor($,q){super("ENVCHANGE","onResetConnection");this.type="RESET_CONNECTION",this.newValue=$,this.oldValue=q}}OD.ResetConnectionEnvChangeToken=tX;class sX extends d${constructor($,q){super("ENVCHANGE","onSqlCollationChange");this.type="SQL_COLLATION",this.newValue=$,this.oldValue=q}}OD.CollationChangeToken=sX;class eX extends d${constructor($,q){super("ENVCHANGE","onRoutingChange");this.type="ROUTING_CHANGE",this.newValue=$,this.oldValue=q}}OD.RoutingEnvChangeToken=eX;class BX extends d${constructor($,q){super("FEATUREEXTACK","onFeatureExtAck");this.fedAuth=$,this.utf8Support=q}}OD.FeatureExtAckToken=BX;class FX extends d${constructor($,q){super("FEDAUTHINFO","onFedAuthInfo");this.spn=$,this.stsurl=q}}OD.FedAuthInfoToken=FX;class UX extends d${constructor({number:$,state:q,class:_,message:K,serverName:P,procName:w,lineNumber:O}){super("INFO","onInfoMessage");this.number=$,this.state=q,this.class=_,this.message=K,this.serverName=P,this.procName=w,this.lineNumber=O}}OD.InfoMessageToken=UX;class QX extends d${constructor({number:$,state:q,class:_,message:K,serverName:P,procName:w,lineNumber:O}){super("ERROR","onErrorMessage");this.number=$,this.state=q,this.class=_,this.message=K,this.serverName=P,this.procName=w,this.lineNumber=O}}OD.ErrorMessageToken=QX;class $D extends d${constructor({interface:$,tdsVersion:q,progName:_,progVersion:K}){super("LOGINACK","onLoginAck");this.interface=$,this.tdsVersion=q,this.progName=_,this.progVersion=K}}OD.LoginAckToken=$D;class qD extends d${constructor($){super("NBCROW","onRow");this.columns=$}}OD.NBCRowToken=qD;class _D extends d${constructor($){super("ORDER","onOrder");this.orderColumns=$}}OD.OrderToken=_D;class KD extends d${constructor($){super("RETURNSTATUS","onReturnStatus");this.value=$}}OD.ReturnStatusToken=KD;class PD extends d${constructor({paramOrdinal:$,paramName:q,metadata:_,value:K}){super("RETURNVALUE","onReturnValue");this.paramOrdinal=$,this.paramName=q,this.metadata=_,this.value=K}}OD.ReturnValueToken=PD;class jD extends d${constructor($){super("ROW","onRow");this.columns=$}}OD.RowToken=jD;class wD extends d${constructor($,q){super("SSPICHALLENGE","onSSPI");this.ntlmpacket=$,this.ntlmpacketBuffer=q}}OD.SSPIToken=wD});var TM=y((vD,HD)=>{Object.defineProperty(vD,"__esModule",{value:!0});vD.default=void 0;var u$$=i("events"),fD=L$$(k8()),R$$=i("stream"),hM=c6();function L$$($){return $&&$.__esModule?$:{default:$}}var YM={nullable:1,caseSen:2,updateableReadWrite:4,updateableUnknown:8,identity:16,computed:32,fixedLenCLRType:256,sparseColumnSet:1024,hidden:8192,key:16384,nullableUnknown:32768},C$$={FINAL:0,MORE:1,ERROR:2,INXACT:4,COUNT:16,ATTN:32,SRVERROR:256},n$$=Buffer.from([hM.TYPE.ROW]),r$$=Buffer.from([16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),V$$=Buffer.from([0]);class MD extends R$$.Transform{constructor($){super({writableObjectMode:!0});this.bulkLoad=$,this.mainOptions=$.options,this.columns=$.columns,this.columnMetadataWritten=!1}_transform($,q,_){if(!this.columnMetadataWritten)this.push(this.bulkLoad.getColMetaData()),this.columnMetadataWritten=!0;this.push(n$$);for(let K=0;K<this.columns.length;K++){let P=this.columns[K],w=Array.isArray($)?$[K]:$[P.objName];if(!this.bulkLoad.firstRowWritten)try{w=P.type.validate(w,P.collation)}catch(f){return _(f)}let O={length:P.length,scale:P.scale,precision:P.precision,value:w};if(P.type.name==="Text"||P.type.name==="Image"||P.type.name==="NText"){if(w==null){this.push(V$$);continue}this.push(r$$)}try{this.push(P.type.generateParameterLength(O,this.mainOptions));for(let f of P.type.generateParameterData(O,this.mainOptions))this.push(f)}catch(f){return _(f)}}process.nextTick(_)}_flush($){this.push(this.bulkLoad.createDoneToken()),process.nextTick($)}}class kM extends u$$.EventEmitter{constructor($,q,_,{checkConstraints:K=!1,fireTriggers:P=!1,keepNulls:w=!1,lockTable:O=!1,order:f={}},Y){if(typeof K!=="boolean")throw new TypeError('The "options.checkConstraints" property must be of type boolean.');if(typeof P!=="boolean")throw new TypeError('The "options.fireTriggers" property must be of type boolean.');if(typeof w!=="boolean")throw new TypeError('The "options.keepNulls" property must be of type boolean.');if(typeof O!=="boolean")throw new TypeError('The "options.lockTable" property must be of type boolean.');if(typeof f!=="object"||f===null)throw new TypeError('The "options.order" property must be of type object.');for(let[h,k]of Object.entries(f))if(k!=="ASC"&&k!=="DESC")throw new TypeError('The value of the "'+h+'" key in the "options.order" object must be either "ASC" or "DESC".');super();this.error=void 0,this.canceled=!1,this.executionStarted=!1,this.collation=q,this.table=$,this.options=_,this.callback=Y,this.columns=[],this.columnsByName={},this.firstRowWritten=!1,this.streamingMode=!1,this.rowToPacketTransform=new MD(this),this.bulkOptions={checkConstraints:K,fireTriggers:P,keepNulls:w,lockTable:O,order:f}}addColumn($,q,{output:_=!1,length:K,precision:P,scale:w,objName:O=$,nullable:f=!0}){if(this.firstRowWritten)throw new Error("Columns cannot be added to bulk insert after the first row has been written.");if(this.executionStarted)throw new Error("Columns cannot be added to bulk insert after execution has started.");let Y={type:q,name:$,value:null,output:_,length:K,precision:P,scale:w,objName:O,nullable:f,collation:this.collation};if((q.id&48)===32){if(Y.length==null&&q.resolveLength)Y.length=q.resolveLength(Y)}if(q.resolvePrecision&&Y.precision==null)Y.precision=q.resolvePrecision(Y);if(q.resolveScale&&Y.scale==null)Y.scale=q.resolveScale(Y);this.columns.push(Y),this.columnsByName[$]=Y}getOptionsSql(){let $=[];if(this.bulkOptions.checkConstraints)$.push("CHECK_CONSTRAINTS");if(this.bulkOptions.fireTriggers)$.push("FIRE_TRIGGERS");if(this.bulkOptions.keepNulls)$.push("KEEP_NULLS");if(this.bulkOptions.lockTable)$.push("TABLOCK");if(this.bulkOptions.order){let q=[];for(let[_,K]of Object.entries(this.bulkOptions.order))q.push(`${_} ${K}`);if(q.length)$.push(`ORDER (${q.join(", ")})`)}if($.length>0)return` WITH (${$.join(",")})`;else return""}getBulkInsertSql(){let $="insert bulk "+this.table+"(";for(let q=0,_=this.columns.length;q<_;q++){let K=this.columns[q];if(q!==0)$+=", ";$+="["+K.name+"] "+K.type.declaration(K)}return $+=")",$+=this.getOptionsSql(),$}getTableCreationSql(){let $="CREATE TABLE "+this.table+`(
`;for(let q=0,_=this.columns.length;q<_;q++){let K=this.columns[q];if(q!==0)$+=`,
`;if($+="["+K.name+"] "+K.type.declaration(K),K.nullable!==void 0)$+=" "+(K.nullable?"NULL":"NOT NULL")}return $+=`
)`,$}getColMetaData(){let $=new fD.default(100,null,!0);$.writeUInt8(hM.TYPE.COLMETADATA),$.writeUInt16LE(this.columns.length);for(let q=0,_=this.columns.length;q<_;q++){let K=this.columns[q];if(this.options.tdsVersion<"7_2")$.writeUInt16LE(0);else $.writeUInt32LE(0);let P=YM.updateableReadWrite;if(K.nullable)P|=YM.nullable;else if(K.nullable===void 0&&this.options.tdsVersion>="7_2")P|=YM.nullableUnknown;if($.writeUInt16LE(P),$.writeBuffer(K.type.generateTypeInfo(K,this.options)),K.type.hasTableName)$.writeUsVarchar(this.table,"ucs2");$.writeBVarchar(K.name,"ucs2")}return $.data}setTimeout($){this.timeout=$}createDoneToken(){let $=new fD.default(this.options.tdsVersion<"7_2"?9:13);$.writeUInt8(hM.TYPE.DONE);let q=C$$.FINAL;if($.writeUInt16LE(q),$.writeUInt16LE(0),$.writeUInt32LE(0),this.options.tdsVersion>="7_2")$.writeUInt32LE(0);return $.data}cancel(){if(this.canceled)return;this.canceled=!0,this.emit("cancel")}}var uN$=vD.default=kM;HD.exports=kM});var iK=y((RN$,jO)=>{var hD,kD,TD,AD,WD,JD,XD,DD,pD,yD,SD,GD,ZD,KO,AM,ND,mD,ED,$7,uD,RD,LD,CD,nD,rD,VD,xD,dD,PO,bD,oD,iD;(function($){var q=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd)define("tslib",["exports"],function(K){$(_(q,_(K)))});else if(typeof jO==="object"&&typeof RN$==="object")$(_(q,_(RN$)));else $(_(q));function _(K,P){if(K!==q)if(typeof Object.create==="function")Object.defineProperty(K,"__esModule",{value:!0});else K.__esModule=!0;return function(w,O){return K[w]=P?P(w,O):O}}})(function($){var q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,O){w.__proto__=O}||function(w,O){for(var f in O)if(Object.prototype.hasOwnProperty.call(O,f))w[f]=O[f]};hD=function(w,O){if(typeof O!=="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");q(w,O);function f(){this.constructor=w}w.prototype=O===null?Object.create(O):(f.prototype=O.prototype,new f)},kD=Object.assign||function(w){for(var O,f=1,Y=arguments.length;f<Y;f++){O=arguments[f];for(var h in O)if(Object.prototype.hasOwnProperty.call(O,h))w[h]=O[h]}return w},TD=function(w,O){var f={};for(var Y in w)if(Object.prototype.hasOwnProperty.call(w,Y)&&O.indexOf(Y)<0)f[Y]=w[Y];if(w!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var h=0,Y=Object.getOwnPropertySymbols(w);h<Y.length;h++)if(O.indexOf(Y[h])<0&&Object.prototype.propertyIsEnumerable.call(w,Y[h]))f[Y[h]]=w[Y[h]]}return f},AD=function(w,O,f,Y){var h=arguments.length,k=h<3?O:Y===null?Y=Object.getOwnPropertyDescriptor(O,f):Y,T;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")k=Reflect.decorate(w,O,f,Y);else for(var p=w.length-1;p>=0;p--)if(T=w[p])k=(h<3?T(k):h>3?T(O,f,k):T(O,f))||k;return h>3&&k&&Object.defineProperty(O,f,k),k},WD=function(w,O){return function(f,Y){O(f,Y,w)}},JD=function(w,O,f,Y,h,k){function T(V){if(V!==void 0&&typeof V!=="function")throw new TypeError("Function expected");return V}var p=Y.kind,G=p==="getter"?"get":p==="setter"?"set":"value",Z=!O&&w?Y.static?w:w.prototype:null,X=O||(Z?Object.getOwnPropertyDescriptor(Z,Y.name):{}),C,N=!1;for(var L=f.length-1;L>=0;L--){var m={};for(var E in Y)m[E]=E==="access"?{}:Y[E];for(var E in Y.access)m.access[E]=Y.access[E];m.addInitializer=function(V){if(N)throw new TypeError("Cannot add initializers after decoration has completed");k.push(T(V||null))};var W=f[L](p==="accessor"?{get:X.get,set:X.set}:X[G],m);if(p==="accessor"){if(W===void 0)continue;if(W===null||typeof W!=="object")throw new TypeError("Object expected");if(C=T(W.get))X.get=C;if(C=T(W.set))X.set=C;if(C=T(W.init))h.unshift(C)}else if(C=T(W))if(p==="field")h.unshift(C);else X[G]=C}if(Z)Object.defineProperty(Z,Y.name,X);N=!0},XD=function(w,O,f){var Y=arguments.length>2;for(var h=0;h<O.length;h++)f=Y?O[h].call(w,f):O[h].call(w);return Y?f:void 0},DD=function(w){return typeof w==="symbol"?w:"".concat(w)},pD=function(w,O,f){if(typeof O==="symbol")O=O.description?"[".concat(O.description,"]"):"";return Object.defineProperty(w,"name",{configurable:!0,value:f?"".concat(f," ",O):O})},yD=function(w,O){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(w,O)},SD=function(w,O,f,Y){function h(k){return k instanceof f?k:new f(function(T){T(k)})}return new(f||(f=Promise))(function(k,T){function p(X){try{Z(Y.next(X))}catch(C){T(C)}}function G(X){try{Z(Y.throw(X))}catch(C){T(C)}}function Z(X){X.done?k(X.value):h(X.value).then(p,G)}Z((Y=Y.apply(w,O||[])).next())})},GD=function(w,O){var f={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},Y,h,k,T=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return T.next=p(0),T.throw=p(1),T.return=p(2),typeof Symbol==="function"&&(T[Symbol.iterator]=function(){return this}),T;function p(Z){return function(X){return G([Z,X])}}function G(Z){if(Y)throw new TypeError("Generator is already executing.");while(T&&(T=0,Z[0]&&(f=0)),f)try{if(Y=1,h&&(k=Z[0]&2?h.return:Z[0]?h.throw||((k=h.return)&&k.call(h),0):h.next)&&!(k=k.call(h,Z[1])).done)return k;if(h=0,k)Z=[Z[0]&2,k.value];switch(Z[0]){case 0:case 1:k=Z;break;case 4:return f.label++,{value:Z[1],done:!1};case 5:f.label++,h=Z[1],Z=[0];continue;case 7:Z=f.ops.pop(),f.trys.pop();continue;default:if((k=f.trys,!(k=k.length>0&&k[k.length-1]))&&(Z[0]===6||Z[0]===2)){f=0;continue}if(Z[0]===3&&(!k||Z[1]>k[0]&&Z[1]<k[3])){f.label=Z[1];break}if(Z[0]===6&&f.label<k[1]){f.label=k[1],k=Z;break}if(k&&f.label<k[2]){f.label=k[2],f.ops.push(Z);break}if(k[2])f.ops.pop();f.trys.pop();continue}Z=O.call(w,f)}catch(X){Z=[6,X],h=0}finally{Y=k=0}if(Z[0]&5)throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}},ZD=function(w,O){for(var f in w)if(f!=="default"&&!Object.prototype.hasOwnProperty.call(O,f))PO(O,w,f)},PO=Object.create?function(w,O,f,Y){if(Y===void 0)Y=f;var h=Object.getOwnPropertyDescriptor(O,f);if(!h||("get"in h?!O.__esModule:h.writable||h.configurable))h={enumerable:!0,get:function(){return O[f]}};Object.defineProperty(w,Y,h)}:function(w,O,f,Y){if(Y===void 0)Y=f;w[Y]=O[f]},KO=function(w){var O=typeof Symbol==="function"&&Symbol.iterator,f=O&&w[O],Y=0;if(f)return f.call(w);if(w&&typeof w.length==="number")return{next:function(){if(w&&Y>=w.length)w=void 0;return{value:w&&w[Y++],done:!w}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")},AM=function(w,O){var f=typeof Symbol==="function"&&w[Symbol.iterator];if(!f)return w;var Y=f.call(w),h,k=[],T;try{while((O===void 0||O-- >0)&&!(h=Y.next()).done)k.push(h.value)}catch(p){T={error:p}}finally{try{if(h&&!h.done&&(f=Y.return))f.call(Y)}finally{if(T)throw T.error}}return k},ND=function(){for(var w=[],O=0;O<arguments.length;O++)w=w.concat(AM(arguments[O]));return w},mD=function(){for(var w=0,O=0,f=arguments.length;O<f;O++)w+=arguments[O].length;for(var Y=Array(w),h=0,O=0;O<f;O++)for(var k=arguments[O],T=0,p=k.length;T<p;T++,h++)Y[h]=k[T];return Y},ED=function(w,O,f){if(f||arguments.length===2){for(var Y=0,h=O.length,k;Y<h;Y++)if(k||!(Y in O)){if(!k)k=Array.prototype.slice.call(O,0,Y);k[Y]=O[Y]}}return w.concat(k||Array.prototype.slice.call(O))},$7=function(w){return this instanceof $7?(this.v=w,this):new $7(w)},uD=function(w,O,f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y=f.apply(w,O||[]),h,k=[];return h=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",T),h[Symbol.asyncIterator]=function(){return this},h;function T(L){return function(m){return Promise.resolve(m).then(L,C)}}function p(L,m){if(Y[L]){if(h[L]=function(E){return new Promise(function(W,V){k.push([L,E,W,V])>1||G(L,E)})},m)h[L]=m(h[L])}}function G(L,m){try{Z(Y[L](m))}catch(E){N(k[0][3],E)}}function Z(L){L.value instanceof $7?Promise.resolve(L.value.v).then(X,C):N(k[0][2],L)}function X(L){G("next",L)}function C(L){G("throw",L)}function N(L,m){if(L(m),k.shift(),k.length)G(k[0][0],k[0][1])}},RD=function(w){var O,f;return O={},Y("next"),Y("throw",function(h){throw h}),Y("return"),O[Symbol.iterator]=function(){return this},O;function Y(h,k){O[h]=w[h]?function(T){return(f=!f)?{value:$7(w[h](T)),done:!1}:k?k(T):T}:k}},LD=function(w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var O=w[Symbol.asyncIterator],f;return O?O.call(w):(w=typeof KO==="function"?KO(w):w[Symbol.iterator](),f={},Y("next"),Y("throw"),Y("return"),f[Symbol.asyncIterator]=function(){return this},f);function Y(k){f[k]=w[k]&&function(T){return new Promise(function(p,G){T=w[k](T),h(p,G,T.done,T.value)})}}function h(k,T,p,G){Promise.resolve(G).then(function(Z){k({value:Z,done:p})},T)}},CD=function(w,O){if(Object.defineProperty)Object.defineProperty(w,"raw",{value:O});else w.raw=O;return w};var _=Object.create?function(w,O){Object.defineProperty(w,"default",{enumerable:!0,value:O})}:function(w,O){w.default=O},K=function(w){return K=Object.getOwnPropertyNames||function(O){var f=[];for(var Y in O)if(Object.prototype.hasOwnProperty.call(O,Y))f[f.length]=Y;return f},K(w)};nD=function(w){if(w&&w.__esModule)return w;var O={};if(w!=null){for(var f=K(w),Y=0;Y<f.length;Y++)if(f[Y]!=="default")PO(O,w,f[Y])}return _(O,w),O},rD=function(w){return w&&w.__esModule?w:{default:w}},VD=function(w,O,f,Y){if(f==="a"&&!Y)throw new TypeError("Private accessor was defined without a getter");if(typeof O==="function"?w!==O||!Y:!O.has(w))throw new TypeError("Cannot read private member from an object whose class did not declare it");return f==="m"?Y:f==="a"?Y.call(w):Y?Y.value:O.get(w)},xD=function(w,O,f,Y,h){if(Y==="m")throw new TypeError("Private method is not writable");if(Y==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof O==="function"?w!==O||!h:!O.has(w))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Y==="a"?h.call(w,f):h?h.value=f:O.set(w,f),f},dD=function(w,O){if(O===null||typeof O!=="object"&&typeof O!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof w==="function"?O===w:w.has(O)},bD=function(w,O,f){if(O!==null&&O!==void 0){if(typeof O!=="object"&&typeof O!=="function")throw new TypeError("Object expected.");var Y,h;if(f){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");Y=O[Symbol.asyncDispose]}if(Y===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");if(Y=O[Symbol.dispose],f)h=Y}if(typeof Y!=="function")throw new TypeError("Object not disposable.");if(h)Y=function(){try{h.call(this)}catch(k){return Promise.reject(k)}};w.stack.push({value:O,dispose:Y,async:f})}else if(f)w.stack.push({async:!0});return O};var P=typeof SuppressedError==="function"?SuppressedError:function(w,O,f){var Y=new Error(f);return Y.name="SuppressedError",Y.error=w,Y.suppressed=O,Y};oD=function(w){function O(k){w.error=w.hasError?new P(k,w.error,"An error was suppressed during disposal."):k,w.hasError=!0}var f,Y=0;function h(){while(f=w.stack.pop())try{if(!f.async&&Y===1)return Y=0,w.stack.push(f),Promise.resolve().then(h);if(f.dispose){var k=f.dispose.call(f.value);if(f.async)return Y|=2,Promise.resolve(k).then(h,function(T){return O(T),h()})}else Y|=1}catch(T){O(T)}if(Y===1)return w.hasError?Promise.reject(w.error):Promise.resolve();if(w.hasError)throw w.error}return h()},iD=function(w,O){if(typeof w==="string"&&/^\.\.?\//.test(w))return w.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(f,Y,h,k,T){return Y?O?".jsx":".js":h&&(!k||!T)?f:h+k+"."+T.toLowerCase()+"js"});return w},$("__extends",hD),$("__assign",kD),$("__rest",TD),$("__decorate",AD),$("__param",WD),$("__esDecorate",JD),$("__runInitializers",XD),$("__propKey",DD),$("__setFunctionName",pD),$("__metadata",yD),$("__awaiter",SD),$("__generator",GD),$("__exportStar",ZD),$("__createBinding",PO),$("__values",KO),$("__read",AM),$("__spread",ND),$("__spreadArrays",mD),$("__spreadArray",ED),$("__await",$7),$("__asyncGenerator",uD),$("__asyncDelegator",RD),$("__asyncValues",LD),$("__makeTemplateObject",CD),$("__importStar",nD),$("__importDefault",rD),$("__classPrivateFieldGet",VD),$("__classPrivateFieldSet",xD),$("__classPrivateFieldIn",dD),$("__addDisposableResource",bD),$("__disposeResources",oD),$("__rewriteRelativeImportExtension",iD)})});var cD=y((aD)=>{Object.defineProperty(aD,"__esModule",{value:!0});aD.log=o$$;var gD=iK(),x$$=i("node:os"),d$$=gD.__importDefault(i("node:util")),b$$=gD.__importStar(i("node:process"));function o$$($,...q){b$$.stderr.write(`${d$$.default.format($,...q)}${x$$.EOL}`)}});var BD=y((eD)=>{Object.defineProperty(eD,"__esModule",{value:!0});var g$$=cD(),ID=typeof process!=="undefined"&&process.env&&process.env.DEBUG||void 0,lD,WM=[],JM=[],wO=[];if(ID)XM(ID);var tD=Object.assign(($)=>{return sD($)},{enable:XM,enabled:DM,disable:a$$,log:g$$.log});function XM($){lD=$,WM=[],JM=[];let q=/\*/g,_=$.split(",").map((K)=>K.trim().replace(q,".*?"));for(let K of _)if(K.startsWith("-"))JM.push(new RegExp(`^${K.substr(1)}$`));else WM.push(new RegExp(`^${K}$`));for(let K of wO)K.enabled=DM(K.namespace)}function DM($){if($.endsWith("*"))return!0;for(let q of JM)if(q.test($))return!1;for(let q of WM)if(q.test($))return!0;return!1}function a$$(){let $=lD||"";return XM(""),$}function sD($){let q=Object.assign(_,{enabled:DM($),destroy:c$$,log:tD.log,namespace:$,extend:I$$});function _(...K){if(!q.enabled)return;if(K.length>0)K[0]=`${$} ${K[0]}`;q.log(...K)}return wO.push(q),q}function c$$(){let $=wO.indexOf(this);if($>=0)return wO.splice($,1),!0;return!1}function I$$($){let q=sD(`${this.namespace}:${$}`);return q.log=this.log,q}eD.default=tD});var Kj=y((Kp)=>{Object.defineProperty(Kp,"__esModule",{value:!0});Kp.AzureLogger=void 0;Kp.setLogLevel=QD;Kp.getLogLevel=s$$;Kp.createClientLogger=e$$;var t$$=iK(),qj=t$$.__importDefault(BD()),UD=new Set,OO=typeof process!=="undefined"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,fO;Kp.AzureLogger=qj.default("azure");Kp.AzureLogger.log=(...$)=>{qj.default.log(...$)};var pM=["verbose","info","warning","error"];if(OO)if(_p(OO))QD(OO);else console.error(`AZURE_LOG_LEVEL set to unknown log level '${OO}'; logging is not enabled. Acceptable values: ${pM.join(", ")}.`);function QD($){if($&&!_p($))throw new Error(`Unknown log level '${$}'. Acceptable values: ${pM.join(",")}`);fO=$;let q=[];for(let _ of UD)if(qp(_))q.push(_.namespace);qj.default.enable(q.join(","))}function s$$(){return fO}var FD={verbose:400,info:300,warning:200,error:100};function e$$($){let q=Kp.AzureLogger.extend($);return $p(Kp.AzureLogger,q),{error:zO(q,"error"),warning:zO(q,"warning"),info:zO(q,"info"),verbose:zO(q,"verbose")}}function $p($,q){q.log=(..._)=>{$.log(..._)}}function zO($,q){let _=Object.assign($.extend(q),{level:q});if($p($,_),qp(_)){let K=qj.default.disable();qj.default.enable(K+","+_.namespace)}return UD.add(_),_}function qp($){return Boolean(fO&&FD[$.level]<=FD[fO])}function _p($){return pM.includes($)}});var yM=y((Pp)=>{Object.defineProperty(Pp,"__esModule",{value:!0});Pp.decodeStringToString=Pp.decodeString=Pp.encodeByteArray=Pp.encodeString=void 0;function Q$$($){return Buffer.from($).toString("base64")}Pp.encodeString=Q$$;function $6$($){return($ instanceof Buffer?$:Buffer.from($.buffer)).toString("base64")}Pp.encodeByteArray=$6$;function q6$($){return Buffer.from($,"base64")}Pp.decodeString=q6$;function _6$($){return Buffer.from($,"base64").toString()}Pp.decodeStringToString=_6$});var Pj=y((wp)=>{Object.defineProperty(wp,"__esModule",{value:!0});wp.XML_CHARKEY=wp.XML_ATTRKEY=void 0;wp.XML_ATTRKEY="$";wp.XML_CHARKEY="_"});var SM=y((fp)=>{Object.defineProperty(fp,"__esModule",{value:!0});fp.flattenResponse=fp.isValidUuid=fp.isDuration=fp.isPrimitiveBody=void 0;function zp($,q){return q!=="Composite"&&q!=="Dictionary"&&(typeof $==="string"||typeof $==="number"||typeof $==="boolean"||(q===null||q===void 0?void 0:q.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))!==null||$===void 0||$===null)}fp.isPrimitiveBody=zp;var O6$=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function z6$($){return O6$.test($)}fp.isDuration=z6$;var f6$=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function M6$($){return f6$.test($)}fp.isValidUuid=M6$;function v6$($){let q=Object.assign(Object.assign({},$.headers),$.body);if($.hasNullableType&&Object.getOwnPropertyNames(q).length===0)return $.shouldWrapBody?{body:null}:null;else return $.shouldWrapBody?Object.assign(Object.assign({},$.headers),{body:$.body}):q}function H6$($,q){var _,K;let P=$.parsedHeaders;if($.request.method==="HEAD")return Object.assign(Object.assign({},P),{body:$.parsedBody});let w=q&&q.bodyMapper,O=Boolean(w===null||w===void 0?void 0:w.nullable),f=w===null||w===void 0?void 0:w.type.name;if(f==="Stream")return Object.assign(Object.assign({},P),{blobBody:$.blobBody,readableStreamBody:$.readableStreamBody});let Y=f==="Composite"&&w.type.modelProperties||{},h=Object.keys(Y).some((k)=>Y[k].serializedName==="");if(f==="Sequence"||h){let k=(_=$.parsedBody)!==null&&_!==void 0?_:[];for(let T of Object.keys(Y))if(Y[T].serializedName)k[T]=(K=$.parsedBody)===null||K===void 0?void 0:K[T];if(P)for(let T of Object.keys(P))k[T]=P[T];return O&&!$.parsedBody&&!P&&Object.getOwnPropertyNames(Y).length===0?null:k}return v6$({body:$.parsedBody,headers:P,hasNullableType:O,shouldWrapBody:zp($.parsedBody,f)})}fp.flattenResponse=H6$});var jj=y((Wp)=>{Object.defineProperty(Wp,"__esModule",{value:!0});Wp.MapperTypeNames=Wp.createSerializer=void 0;var T6$=iK(),vO=T6$.__importStar(yM()),G6=Pj(),Hp=SM();class Yp{constructor($={},q=!1){this.modelMappers=$,this.isXML=q}validateConstraints($,q,_){let K=(P,w)=>{throw new Error(`"${_}" with value "${q}" should satisfy the constraint "${P}": ${w}.`)};if($.constraints&&q!==void 0&&q!==null){let{ExclusiveMaximum:P,ExclusiveMinimum:w,InclusiveMaximum:O,InclusiveMinimum:f,MaxItems:Y,MaxLength:h,MinItems:k,MinLength:T,MultipleOf:p,Pattern:G,UniqueItems:Z}=$.constraints;if(P!==void 0&&q>=P)K("ExclusiveMaximum",P);if(w!==void 0&&q<=w)K("ExclusiveMinimum",w);if(O!==void 0&&q>O)K("InclusiveMaximum",O);if(f!==void 0&&q<f)K("InclusiveMinimum",f);if(Y!==void 0&&q.length>Y)K("MaxItems",Y);if(h!==void 0&&q.length>h)K("MaxLength",h);if(k!==void 0&&q.length<k)K("MinItems",k);if(T!==void 0&&q.length<T)K("MinLength",T);if(p!==void 0&&q%p!==0)K("MultipleOf",p);if(G){let X=typeof G==="string"?new RegExp(G):G;if(typeof q!=="string"||q.match(X)===null)K("Pattern",G)}if(Z&&q.some((X,C,N)=>N.indexOf(X)!==C))K("UniqueItems",Z)}}serialize($,q,_,K={xml:{}}){var P,w,O;let f={xml:{rootName:(P=K.xml.rootName)!==null&&P!==void 0?P:"",includeRoot:(w=K.xml.includeRoot)!==null&&w!==void 0?w:!1,xmlCharKey:(O=K.xml.xmlCharKey)!==null&&O!==void 0?O:G6.XML_CHARKEY}},Y={},h=$.type.name;if(!_)_=$.serializedName;if(h.match(/^Sequence$/i)!==null)Y=[];if($.isConstant)q=$.defaultValue;let{required:k,nullable:T}=$;if(k&&T&&q===void 0)throw new Error(`${_} cannot be undefined.`);if(k&&!T&&(q===void 0||q===null))throw new Error(`${_} cannot be null or undefined.`);if(!k&&T===!1&&q===null)throw new Error(`${_} cannot be null.`);if(q===void 0||q===null)Y=q;else if(h.match(/^any$/i)!==null)Y=q;else if(h.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null)Y=y6$(h,_,q);else if(h.match(/^Enum$/i)!==null)Y=S6$(_,$.type.allowedValues,q);else if(h.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null)Y=N6$(h,q,_);else if(h.match(/^ByteArray$/i)!==null)Y=G6$(_,q);else if(h.match(/^Base64Url$/i)!==null)Y=Z6$(_,q);else if(h.match(/^Sequence$/i)!==null)Y=m6$(this,$,q,_,Boolean(this.isXML),f);else if(h.match(/^Dictionary$/i)!==null)Y=E6$(this,$,q,_,Boolean(this.isXML),f);else if(h.match(/^Composite$/i)!==null)Y=R6$(this,$,q,_,Boolean(this.isXML),f);return Y}deserialize($,q,_,K={xml:{}}){var P,w,O,f;let Y={xml:{rootName:(P=K.xml.rootName)!==null&&P!==void 0?P:"",includeRoot:(w=K.xml.includeRoot)!==null&&w!==void 0?w:!1,xmlCharKey:(O=K.xml.xmlCharKey)!==null&&O!==void 0?O:G6.XML_CHARKEY},ignoreUnknownProperties:(f=K.ignoreUnknownProperties)!==null&&f!==void 0?f:!1};if(q===void 0||q===null){if(this.isXML&&$.type.name==="Sequence"&&!$.xmlIsWrapped)q=[];if($.defaultValue!==void 0)q=$.defaultValue;return q}let h,k=$.type.name;if(!_)_=$.serializedName;if(k.match(/^Composite$/i)!==null)h=C6$(this,$,q,_,Y);else{if(this.isXML){let T=Y.xml.xmlCharKey;if(q[G6.XML_ATTRKEY]!==void 0&&q[T]!==void 0)q=q[T]}if(k.match(/^Number$/i)!==null){if(h=parseFloat(q),isNaN(h))h=q}else if(k.match(/^Boolean$/i)!==null)if(q==="true")h=!0;else if(q==="false")h=!1;else h=q;else if(k.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null)h=q;else if(k.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null)h=new Date(q);else if(k.match(/^UnixTime$/i)!==null)h=p6$(q);else if(k.match(/^ByteArray$/i)!==null)h=vO.decodeString(q);else if(k.match(/^Base64Url$/i)!==null)h=X6$(q);else if(k.match(/^Sequence$/i)!==null)h=r6$(this,$,q,_,Y);else if(k.match(/^Dictionary$/i)!==null)h=n6$(this,$,q,_,Y)}if($.isConstant)h=$.defaultValue;return h}}function A6$($={},q=!1){return new Yp($,q)}Wp.createSerializer=A6$;function W6$($,q){let _=$.length;while(_-1>=0&&$[_-1]===q)--_;return $.substr(0,_)}function J6$($){if(!$)return;if(!($ instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");let q=vO.encodeByteArray($);return W6$(q,"=").replace(/\+/g,"-").replace(/\//g,"_")}function X6$($){if(!$)return;if($&&typeof $.valueOf()!=="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return $=$.replace(/-/g,"+").replace(/_/g,"/"),vO.decodeString($)}function GM($){let q=[],_="";if($){let K=$.split(".");for(let P of K)if(P.charAt(P.length-1)==="\\")_+=P.substr(0,P.length-1)+".";else _+=P,q.push(_),_=""}return q}function D6$($){if(!$)return;if(typeof $.valueOf()==="string")$=new Date($);return Math.floor($.getTime()/1000)}function p6$($){if(!$)return;return new Date($*1000)}function y6$($,q,_){if(_!==null&&_!==void 0){if($.match(/^Number$/i)!==null){if(typeof _!=="number")throw new Error(`${q} with value ${_} must be of type number.`)}else if($.match(/^String$/i)!==null){if(typeof _.valueOf()!=="string")throw new Error(`${q} with value "${_}" must be of type string.`)}else if($.match(/^Uuid$/i)!==null){if(!(typeof _.valueOf()==="string"&&Hp.isValidUuid(_)))throw new Error(`${q} with value "${_}" must be of type string and a valid uuid.`)}else if($.match(/^Boolean$/i)!==null){if(typeof _!=="boolean")throw new Error(`${q} with value ${_} must be of type boolean.`)}else if($.match(/^Stream$/i)!==null){let K=typeof _;if(K!=="string"&&typeof _.pipe!=="function"&&typeof _.tee!=="function"&&!(_ instanceof ArrayBuffer)&&!ArrayBuffer.isView(_)&&!((typeof Blob==="function"||typeof Blob==="object")&&_ instanceof Blob)&&K!=="function")throw new Error(`${q} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return _}function S6$($,q,_){if(!q)throw new Error(`Please provide a set of allowedValues to validate ${$} as an Enum Type.`);if(!q.some((P)=>{if(typeof P.valueOf()==="string")return P.toLowerCase()===_.toLowerCase();return P===_}))throw new Error(`${_} is not a valid value for ${$}. The valid values are: ${JSON.stringify(q)}.`);return _}function G6$($,q){if(q!==void 0&&q!==null){if(!(q instanceof Uint8Array))throw new Error(`${$} must be of type Uint8Array.`);q=vO.encodeByteArray(q)}return q}function Z6$($,q){if(q!==void 0&&q!==null){if(!(q instanceof Uint8Array))throw new Error(`${$} must be of type Uint8Array.`);q=J6$(q)}return q}function N6$($,q,_){if(q!==void 0&&q!==null){if($.match(/^Date$/i)!==null){if(!(q instanceof Date||typeof q.valueOf()==="string"&&!isNaN(Date.parse(q))))throw new Error(`${_} must be an instanceof Date or a string in ISO8601 format.`);q=q instanceof Date?q.toISOString().substring(0,10):new Date(q).toISOString().substring(0,10)}else if($.match(/^DateTime$/i)!==null){if(!(q instanceof Date||typeof q.valueOf()==="string"&&!isNaN(Date.parse(q))))throw new Error(`${_} must be an instanceof Date or a string in ISO8601 format.`);q=q instanceof Date?q.toISOString():new Date(q).toISOString()}else if($.match(/^DateTimeRfc1123$/i)!==null){if(!(q instanceof Date||typeof q.valueOf()==="string"&&!isNaN(Date.parse(q))))throw new Error(`${_} must be an instanceof Date or a string in RFC-1123 format.`);q=q instanceof Date?q.toUTCString():new Date(q).toUTCString()}else if($.match(/^UnixTime$/i)!==null){if(!(q instanceof Date||typeof q.valueOf()==="string"&&!isNaN(Date.parse(q))))throw new Error(`${_} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);q=D6$(q)}else if($.match(/^TimeSpan$/i)!==null){if(!Hp.isDuration(q))throw new Error(`${_} must be a string in ISO 8601 format. Instead was "${q}".`)}}return q}function m6$($,q,_,K,P,w){var O;if(!Array.isArray(_))throw new Error(`${K} must be of type Array.`);let f=q.type.element;if(!f||typeof f!=="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${K}.`);if(f.type.name==="Composite"&&f.type.className)f=(O=$.modelMappers[f.type.className])!==null&&O!==void 0?O:f;let Y=[];for(let h=0;h<_.length;h++){let k=$.serialize(f,_[h],K,w);if(P&&f.xmlNamespace){let T=f.xmlNamespacePrefix?`xmlns:${f.xmlNamespacePrefix}`:"xmlns";if(f.type.name==="Composite")Y[h]=Object.assign({},k),Y[h][G6.XML_ATTRKEY]={[T]:f.xmlNamespace};else Y[h]={},Y[h][w.xml.xmlCharKey]=k,Y[h][G6.XML_ATTRKEY]={[T]:f.xmlNamespace}}else Y[h]=k}return Y}function E6$($,q,_,K,P,w){if(typeof _!=="object")throw new Error(`${K} must be of type object.`);let O=q.type.value;if(!O||typeof O!=="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${K}.`);let f={};for(let Y of Object.keys(_)){let h=$.serialize(O,_[Y],K,w);f[Y]=Tp(O,h,P,w)}if(P&&q.xmlNamespace){let Y=q.xmlNamespacePrefix?`xmlns:${q.xmlNamespacePrefix}`:"xmlns",h=f;return h[G6.XML_ATTRKEY]={[Y]:q.xmlNamespace},h}return f}function u6$($,q,_){let K=q.type.additionalProperties;if(!K&&q.type.className){let P=hp($,q,_);return P===null||P===void 0?void 0:P.type.additionalProperties}return K}function hp($,q,_){let K=q.type.className;if(!K)throw new Error(`Class name for model "${_}" is not provided in the mapper "${JSON.stringify(q,void 0,2)}".`);return $.modelMappers[K]}function kp($,q,_){let K=q.type.modelProperties;if(!K){let P=hp($,q,_);if(!P)throw new Error(`mapper() cannot be null or undefined for model "${q.type.className}".`);if(K=P===null||P===void 0?void 0:P.type.modelProperties,!K)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(P)}" of type "${q.type.className}" for object "${_}".`)}return K}function R6$($,q,_,K,P,w){if(MO($,q))q=Ap($,q,_,"clientName");if(_!==void 0&&_!==null){let O={},f=kp($,q,K);for(let h of Object.keys(f)){let k=f[h];if(k.readOnly)continue;let T,p=O;if($.isXML)if(k.xmlIsWrapped)T=k.xmlName;else T=k.xmlElementName||k.xmlName;else{let G=GM(k.serializedName);T=G.pop();for(let Z of G){let X=p[Z];if((X===void 0||X===null)&&(_[h]!==void 0&&_[h]!==null||k.defaultValue!==void 0))p[Z]={};p=p[Z]}}if(p!==void 0&&p!==null){if(P&&q.xmlNamespace){let N=q.xmlNamespacePrefix?`xmlns:${q.xmlNamespacePrefix}`:"xmlns";p[G6.XML_ATTRKEY]=Object.assign(Object.assign({},p[G6.XML_ATTRKEY]),{[N]:q.xmlNamespace})}let G=k.serializedName!==""?K+"."+k.serializedName:K,Z=_[h],X=MO($,q);if(X&&X.clientName===h&&(Z===void 0||Z===null))Z=q.serializedName;let C=$.serialize(k,Z,G,w);if(C!==void 0&&T!==void 0&&T!==null){let N=Tp(k,C,P,w);if(P&&k.xmlIsAttribute)p[G6.XML_ATTRKEY]=p[G6.XML_ATTRKEY]||{},p[G6.XML_ATTRKEY][T]=C;else if(P&&k.xmlIsWrapped)p[T]={[k.xmlElementName]:N};else p[T]=N}}}let Y=u6$($,q,K);if(Y){let h=Object.keys(f);for(let k in _)if(h.every((p)=>p!==k))O[k]=$.serialize(Y,_[k],K+'["'+k+'"]',w)}return O}return _}function Tp($,q,_,K){if(!_||!$.xmlNamespace)return q;let w={[$.xmlNamespacePrefix?`xmlns:${$.xmlNamespacePrefix}`:"xmlns"]:$.xmlNamespace};if(["Composite"].includes($.type.name))if(q[G6.XML_ATTRKEY])return q;else{let f=Object.assign({},q);return f[G6.XML_ATTRKEY]=w,f}let O={};return O[K.xml.xmlCharKey]=q,O[G6.XML_ATTRKEY]=w,O}function L6$($,q){return[G6.XML_ATTRKEY,q.xml.xmlCharKey].includes($)}function C6$($,q,_,K,P){var w,O;let f=(w=P.xml.xmlCharKey)!==null&&w!==void 0?w:G6.XML_CHARKEY;if(MO($,q))q=Ap($,q,_,"serializedName");let Y=kp($,q,K),h={},k=[];for(let p of Object.keys(Y)){let G=Y[p],Z=GM(Y[p].serializedName);k.push(Z[0]);let{serializedName:X,xmlName:C,xmlElementName:N}=G,L=K;if(X!==""&&X!==void 0)L=K+"."+X;let m=G.headerCollectionPrefix;if(m){let E={};for(let W of Object.keys(_)){if(W.startsWith(m))E[W.substring(m.length)]=$.deserialize(G.type.value,_[W],L,P);k.push(W)}h[p]=E}else if($.isXML)if(G.xmlIsAttribute&&_[G6.XML_ATTRKEY])h[p]=$.deserialize(G,_[G6.XML_ATTRKEY][C],L,P);else if(G.xmlIsMsText){if(_[f]!==void 0)h[p]=_[f];else if(typeof _==="string")h[p]=_}else{let E=N||C||X;if(G.xmlIsWrapped){let W=_[C],V=(O=W===null||W===void 0?void 0:W[N])!==null&&O!==void 0?O:[];h[p]=$.deserialize(G,V,L,P),k.push(C)}else{let W=_[E];h[p]=$.deserialize(G,W,L,P),k.push(E)}}else{let E,W=_,V=0;for(let x of Z){if(!W)break;V++,W=W[x]}if(W===null&&V<Z.length)W=void 0;E=W;let n=q.type.polymorphicDiscriminator;if(n&&p===n.clientName&&(E===void 0||E===null))E=q.serializedName;let b;if(Array.isArray(_[p])&&Y[p].serializedName===""){E=_[p];let x=$.deserialize(G,E,L,P);for(let[g,s]of Object.entries(h))if(!Object.prototype.hasOwnProperty.call(x,g))x[g]=s;h=x}else if(E!==void 0||G.defaultValue!==void 0)b=$.deserialize(G,E,L,P),h[p]=b}}let T=q.type.additionalProperties;if(T){let p=(G)=>{for(let Z in Y)if(GM(Y[Z].serializedName)[0]===G)return!1;return!0};for(let G in _)if(p(G))h[G]=$.deserialize(T,_[G],K+'["'+G+'"]',P)}else if(_&&!P.ignoreUnknownProperties){for(let p of Object.keys(_))if(h[p]===void 0&&!k.includes(p)&&!L6$(p,P))h[p]=_[p]}return h}function n6$($,q,_,K,P){let w=q.type.value;if(!w||typeof w!=="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${K}`);if(_){let O={};for(let f of Object.keys(_))O[f]=$.deserialize(w,_[f],K,P);return O}return _}function r6$($,q,_,K,P){var w;let O=q.type.element;if(!O||typeof O!=="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${K}`);if(_){if(!Array.isArray(_))_=[_];if(O.type.name==="Composite"&&O.type.className)O=(w=$.modelMappers[O.type.className])!==null&&w!==void 0?w:O;let f=[];for(let Y=0;Y<_.length;Y++)f[Y]=$.deserialize(O,_[Y],`${K}[${Y}]`,P);return f}return _}function V6$($,q,_){let K=[_];while(K.length){let P=K.shift(),w=q===P?q:P+"."+q;if(Object.prototype.hasOwnProperty.call($,w))return $[w];else for(let[O,f]of Object.entries($))if(O.startsWith(P+".")&&f.type.uberParent===P&&f.type.className)K.push(f.type.className)}return}function Ap($,q,_,K){var P;let w=MO($,q);if(w){let O=w[K];if(O){if(K==="serializedName")O=O.replace(/\\/gi,"");let f=_[O],Y=(P=q.type.uberParent)!==null&&P!==void 0?P:q.type.className;if(typeof f==="string"&&Y){let h=V6$($.modelMappers.discriminators,f,Y);if(h)q=h}}}return q}function MO($,q){return q.type.polymorphicDiscriminator||vp($,q.type.uberParent)||vp($,q.type.className)}function vp($,q){return q&&$.modelMappers[q]&&$.modelMappers[q].type.polymorphicDiscriminator}Wp.MapperTypeNames={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"}});var ZM=y((Dp)=>{Object.defineProperty(Dp,"__esModule",{value:!0});Dp.createEmptyPipeline=d6$;var Xp=new Set(["Deserialize","Serialize","Retry","Sign"]);class HO{constructor($){var q;this._policies=[],this._policies=(q=$===null||$===void 0?void 0:$.slice(0))!==null&&q!==void 0?q:[],this._orderedPolicies=void 0}addPolicy($,q={}){if(q.phase&&q.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(q.phase&&!Xp.has(q.phase))throw new Error(`Invalid phase name: ${q.phase}`);if(q.afterPhase&&!Xp.has(q.afterPhase))throw new Error(`Invalid afterPhase name: ${q.afterPhase}`);this._policies.push({policy:$,options:q}),this._orderedPolicies=void 0}removePolicy($){let q=[];return this._policies=this._policies.filter((_)=>{if($.name&&_.policy.name===$.name||$.phase&&_.options.phase===$.phase)return q.push(_.policy),!1;else return!0}),this._orderedPolicies=void 0,q}sendRequest($,q){return this.getOrderedPolicies().reduceRight((P,w)=>{return(O)=>{return w.sendRequest(O,P)}},(P)=>$.sendRequest(P))(q)}getOrderedPolicies(){if(!this._orderedPolicies)this._orderedPolicies=this.orderPolicies();return this._orderedPolicies}clone(){return new HO(this._policies)}static create(){return new HO}orderPolicies(){let $=[],q=new Map;function _(G){return{name:G,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let K=_("Serialize"),P=_("None"),w=_("Deserialize"),O=_("Retry"),f=_("Sign"),Y=[K,P,w,O,f];function h(G){if(G==="Retry")return O;else if(G==="Serialize")return K;else if(G==="Deserialize")return w;else if(G==="Sign")return f;else return P}for(let G of this._policies){let{policy:Z,options:X}=G,C=Z.name;if(q.has(C))throw new Error("Duplicate policy names not allowed in pipeline");let N={policy:Z,dependsOn:new Set,dependants:new Set};if(X.afterPhase)N.afterPhase=h(X.afterPhase),N.afterPhase.hasAfterPolicies=!0;q.set(C,N),h(X.phase).policies.add(N)}for(let G of this._policies){let{policy:Z,options:X}=G,C=Z.name,N=q.get(C);if(!N)throw new Error(`Missing node for policy ${C}`);if(X.afterPolicies)for(let L of X.afterPolicies){let m=q.get(L);if(m)N.dependsOn.add(m),m.dependants.add(N)}if(X.beforePolicies)for(let L of X.beforePolicies){let m=q.get(L);if(m)m.dependsOn.add(N),N.dependants.add(m)}}function k(G){G.hasRun=!0;for(let Z of G.policies){if(Z.afterPhase&&(!Z.afterPhase.hasRun||Z.afterPhase.policies.size))continue;if(Z.dependsOn.size===0){$.push(Z.policy);for(let X of Z.dependants)X.dependsOn.delete(Z);q.delete(Z.policy.name),G.policies.delete(Z)}}}function T(){for(let G of Y){if(k(G),G.policies.size>0&&G!==P){if(!P.hasRun)k(P);return}if(G.hasAfterPolicies)k(P)}}let p=0;while(q.size>0){p++;let G=$.length;if(T(),$.length<=G&&p>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return $}}function d6$(){return HO.create()}});var gK=y((pp)=>{Object.defineProperty(pp,"__esModule",{value:!0});pp.logger=void 0;var o6$=Kj();pp.logger=o6$.createClientLogger("core-rest-pipeline")});var Np=y((Gp)=>{Object.defineProperty(Gp,"__esModule",{value:!0});Gp.AbortError=void 0;class Sp extends Error{constructor($){super($);this.name="AbortError"}}Gp.AbortError=Sp});var q7=y((NM)=>{Object.defineProperty(NM,"__esModule",{value:!0});NM.AbortError=void 0;var i6$=Np();Object.defineProperty(NM,"AbortError",{enumerable:!0,get:function(){return i6$.AbortError}})});var mM=y((mp)=>{Object.defineProperty(mp,"__esModule",{value:!0});mp.createAbortablePromise=c6$;var a6$=q7();function c6$($,q){let{cleanupBeforeAbort:_,abortSignal:K,abortErrorMsg:P}=q!==null&&q!==void 0?q:{};return new Promise((w,O)=>{function f(){O(new a6$.AbortError(P!==null&&P!==void 0?P:"The operation was aborted."))}function Y(){K===null||K===void 0||K.removeEventListener("abort",h)}function h(){_===null||_===void 0||_(),Y(),f()}if(K===null||K===void 0?void 0:K.aborted)return f();try{$((k)=>{Y(),w(k)},(k)=>{Y(),O(k)})}catch(k){O(k)}K===null||K===void 0||K.addEventListener("abort",h)})}});var EM=y((Ep)=>{Object.defineProperty(Ep,"__esModule",{value:!0});Ep.getRandomIntegerInclusive=l6$;function l6$($,q){return $=Math.ceil($),q=Math.floor(q),Math.floor(Math.random()*(q-$+1))+$}});var Rp=y((up)=>{Object.defineProperty(up,"__esModule",{value:!0});up.delay=F6$;up.calculateRetryDelay=U6$;var s6$=mM(),e6$=EM(),B6$="The delay was aborted.";function F6$($,q){let _,{abortSignal:K,abortErrorMsg:P}=q!==null&&q!==void 0?q:{};return s6$.createAbortablePromise((w)=>{_=setTimeout(w,$)},{cleanupBeforeAbort:()=>clearTimeout(_),abortSignal:K,abortErrorMsg:P!==null&&P!==void 0?P:B6$})}function U6$($,q){let _=q.retryDelayInMs*Math.pow(2,$),K=Math.min(q.maxRetryDelayInMs,_);return{retryAfterInMs:K/2+e6$.getRandomIntegerInclusive(0,K/2)}}});var Cp=y((Lp)=>{Object.defineProperty(Lp,"__esModule",{value:!0});Lp.cancelablePromiseRace=q8$;async function q8$($,q){var _,K;let P=new AbortController;function w(){P.abort()}(_=q===null||q===void 0?void 0:q.abortSignal)===null||_===void 0||_.addEventListener("abort",w);try{return await Promise.race($.map((O)=>O({abortSignal:P.signal})))}finally{P.abort(),(K=q===null||q===void 0?void 0:q.abortSignal)===null||K===void 0||K.removeEventListener("abort",w)}}});var uM=y((np)=>{Object.defineProperty(np,"__esModule",{value:!0});np.isObject=K8$;function K8$($){return typeof $==="object"&&$!==null&&!Array.isArray($)&&!($ instanceof RegExp)&&!($ instanceof Date)}});var xp=y((Vp)=>{Object.defineProperty(Vp,"__esModule",{value:!0});Vp.isError=rp;Vp.getErrorMessage=w8$;var j8$=uM();function rp($){if(j8$.isObject($)){let q=typeof $.name==="string",_=typeof $.message==="string";return q&&_}return!1}function w8$($){if(rp($))return $.message;else{let q;try{if(typeof $==="object"&&$)q=JSON.stringify($);else q=String($)}catch(_){q="[unable to stringify input]"}return`Unknown error ${q}`}}});var op=y((bp)=>{Object.defineProperty(bp,"__esModule",{value:!0});bp.computeSha256Hmac=f8$;bp.computeSha256Hash=M8$;var dp=i("crypto");async function f8$($,q,_){let K=Buffer.from($,"base64");return dp.createHmac("sha256",K).update(q).digest(_)}async function M8$($,q){return dp.createHash("sha256").update($).digest(q)}});var ap=y((gp)=>{Object.defineProperty(gp,"__esModule",{value:!0});gp.isDefined=RM;gp.isObjectWithProperties=Y8$;gp.objectHasProperty=ip;function RM($){return typeof $!=="undefined"&&$!==null}function Y8$($,q){if(!RM($)||typeof $!=="object")return!1;for(let _ of q)if(!ip($,_))return!1;return!0}function ip($,q){return RM($)&&typeof $==="object"&&q in $}});var Ip=y((cp)=>{var LM;Object.defineProperty(cp,"__esModule",{value:!0});cp.randomUUID=J8$;var A8$=i("crypto"),W8$=typeof((LM=globalThis===null||globalThis===void 0?void 0:globalThis.crypto)===null||LM===void 0?void 0:LM.randomUUID)==="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):A8$.randomUUID;function J8$(){return W8$()}});var Bp=y((lp)=>{var CM,nM,rM,VM;Object.defineProperty(lp,"__esModule",{value:!0});lp.isReactNative=lp.isNodeRuntime=lp.isNode=lp.isNodeLike=lp.isBun=lp.isDeno=lp.isWebWorker=lp.isBrowser=void 0;lp.isBrowser=typeof window!=="undefined"&&typeof window.document!=="undefined";lp.isWebWorker=typeof self==="object"&&typeof(self===null||self===void 0?void 0:self.importScripts)==="function"&&(((CM=self.constructor)===null||CM===void 0?void 0:CM.name)==="DedicatedWorkerGlobalScope"||((nM=self.constructor)===null||nM===void 0?void 0:nM.name)==="ServiceWorkerGlobalScope"||((rM=self.constructor)===null||rM===void 0?void 0:rM.name)==="SharedWorkerGlobalScope");lp.isDeno=typeof Deno!=="undefined"&&typeof Deno.version!=="undefined"&&typeof Deno.version.deno!=="undefined";lp.isBun=typeof Bun!=="undefined"&&typeof Bun.version!=="undefined";lp.isNodeLike=typeof globalThis.process!=="undefined"&&Boolean(globalThis.process.version)&&Boolean((VM=globalThis.process.versions)===null||VM===void 0?void 0:VM.node);lp.isNode=lp.isNodeLike;lp.isNodeRuntime=lp.isNodeLike&&!lp.isBun&&!lp.isDeno;lp.isReactNative=typeof navigator!=="undefined"&&(navigator===null||navigator===void 0?void 0:navigator.product)==="ReactNative"});var Up=y((Fp)=>{Object.defineProperty(Fp,"__esModule",{value:!0});Fp.uint8ArrayToString=G8$;Fp.stringToUint8Array=Z8$;function G8$($,q){return Buffer.from($).toString(q)}function Z8$($,q){return Buffer.from($,q)}});var T8=y((a$)=>{Object.defineProperty(a$,"__esModule",{value:!0});a$.stringToUint8Array=a$.uint8ArrayToString=a$.isWebWorker=a$.isReactNative=a$.isDeno=a$.isNodeRuntime=a$.isNodeLike=a$.isNode=a$.isBun=a$.isBrowser=a$.randomUUID=a$.objectHasProperty=a$.isObjectWithProperties=a$.isDefined=a$.computeSha256Hmac=a$.computeSha256Hash=a$.getErrorMessage=a$.isError=a$.isObject=a$.getRandomIntegerInclusive=a$.createAbortablePromise=a$.cancelablePromiseRace=a$.calculateRetryDelay=a$.delay=void 0;var Qp=Rp();Object.defineProperty(a$,"delay",{enumerable:!0,get:function(){return Qp.delay}});Object.defineProperty(a$,"calculateRetryDelay",{enumerable:!0,get:function(){return Qp.calculateRetryDelay}});var E8$=Cp();Object.defineProperty(a$,"cancelablePromiseRace",{enumerable:!0,get:function(){return E8$.cancelablePromiseRace}});var u8$=mM();Object.defineProperty(a$,"createAbortablePromise",{enumerable:!0,get:function(){return u8$.createAbortablePromise}});var R8$=EM();Object.defineProperty(a$,"getRandomIntegerInclusive",{enumerable:!0,get:function(){return R8$.getRandomIntegerInclusive}});var L8$=uM();Object.defineProperty(a$,"isObject",{enumerable:!0,get:function(){return L8$.isObject}});var $y=xp();Object.defineProperty(a$,"isError",{enumerable:!0,get:function(){return $y.isError}});Object.defineProperty(a$,"getErrorMessage",{enumerable:!0,get:function(){return $y.getErrorMessage}});var qy=op();Object.defineProperty(a$,"computeSha256Hash",{enumerable:!0,get:function(){return qy.computeSha256Hash}});Object.defineProperty(a$,"computeSha256Hmac",{enumerable:!0,get:function(){return qy.computeSha256Hmac}});var dM=ap();Object.defineProperty(a$,"isDefined",{enumerable:!0,get:function(){return dM.isDefined}});Object.defineProperty(a$,"isObjectWithProperties",{enumerable:!0,get:function(){return dM.isObjectWithProperties}});Object.defineProperty(a$,"objectHasProperty",{enumerable:!0,get:function(){return dM.objectHasProperty}});var C8$=Ip();Object.defineProperty(a$,"randomUUID",{enumerable:!0,get:function(){return C8$.randomUUID}});var F_=Bp();Object.defineProperty(a$,"isBrowser",{enumerable:!0,get:function(){return F_.isBrowser}});Object.defineProperty(a$,"isBun",{enumerable:!0,get:function(){return F_.isBun}});Object.defineProperty(a$,"isNode",{enumerable:!0,get:function(){return F_.isNode}});Object.defineProperty(a$,"isNodeLike",{enumerable:!0,get:function(){return F_.isNodeLike}});Object.defineProperty(a$,"isNodeRuntime",{enumerable:!0,get:function(){return F_.isNodeRuntime}});Object.defineProperty(a$,"isDeno",{enumerable:!0,get:function(){return F_.isDeno}});Object.defineProperty(a$,"isReactNative",{enumerable:!0,get:function(){return F_.isReactNative}});Object.defineProperty(a$,"isWebWorker",{enumerable:!0,get:function(){return F_.isWebWorker}});var _y=Up();Object.defineProperty(a$,"uint8ArrayToString",{enumerable:!0,get:function(){return _y.uint8ArrayToString}});Object.defineProperty(a$,"stringToUint8Array",{enumerable:!0,get:function(){return _y.stringToUint8Array}})});var YO=y((Py)=>{Object.defineProperty(Py,"__esModule",{value:!0});Py.Sanitizer=void 0;var r8$=T8(),bM="REDACTED",V8$=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],x8$=["api-version"];class Ky{constructor({additionalAllowedHeaderNames:$=[],additionalAllowedQueryParameters:q=[]}={}){$=V8$.concat($),q=x8$.concat(q),this.allowedHeaderNames=new Set($.map((_)=>_.toLowerCase())),this.allowedQueryParameters=new Set(q.map((_)=>_.toLowerCase()))}sanitize($){let q=new Set;return JSON.stringify($,(_,K)=>{if(K instanceof Error)return Object.assign(Object.assign({},K),{name:K.name,message:K.message});if(_==="headers")return this.sanitizeHeaders(K);else if(_==="url")return this.sanitizeUrl(K);else if(_==="query")return this.sanitizeQuery(K);else if(_==="body")return;else if(_==="response")return;else if(_==="operationSpec")return;else if(Array.isArray(K)||r8$.isObject(K)){if(q.has(K))return"[Circular]";q.add(K)}return K},2)}sanitizeUrl($){if(typeof $!=="string"||$===null||$==="")return $;let q=new URL($);if(!q.search)return $;for(let[_]of q.searchParams)if(!this.allowedQueryParameters.has(_.toLowerCase()))q.searchParams.set(_,bM);return q.toString()}sanitizeHeaders($){let q={};for(let _ of Object.keys($))if(this.allowedHeaderNames.has(_.toLowerCase()))q[_]=$[_];else q[_]=bM;return q}sanitizeQuery($){if(typeof $!=="object"||$===null)return $;let q={};for(let _ of Object.keys($))if(this.allowedQueryParameters.has(_.toLowerCase()))q[_]=$[_];else q[_]=bM;return q}}Py.Sanitizer=Ky});var iM=y((wy)=>{Object.defineProperty(wy,"__esModule",{value:!0});wy.logPolicyName=void 0;wy.logPolicy=o8$;var d8$=gK(),b8$=YO();wy.logPolicyName="logPolicy";function o8$($={}){var q;let _=(q=$.logger)!==null&&q!==void 0?q:d8$.logger.info,K=new b8$.Sanitizer({additionalAllowedHeaderNames:$.additionalAllowedHeaderNames,additionalAllowedQueryParameters:$.additionalAllowedQueryParameters});return{name:wy.logPolicyName,async sendRequest(P,w){if(!_.enabled)return w(P);_(`Request: ${K.sanitize(P)}`);let O=await w(P);return _(`Response status code: ${O.status}`),_(`Headers: ${K.sanitize(O.headers)}`),O}}}});var aM=y((fy)=>{Object.defineProperty(fy,"__esModule",{value:!0});fy.redirectPolicyName=void 0;fy.redirectPolicy=g8$;fy.redirectPolicyName="redirectPolicy";var Oy=["GET","HEAD"];function g8$($={}){let{maxRetries:q=20}=$;return{name:fy.redirectPolicyName,async sendRequest(_,K){let P=await K(_);return zy(K,P,q)}}}async function zy($,q,_,K=0){let{request:P,status:w,headers:O}=q,f=O.get("location");if(f&&(w===300||w===301&&Oy.includes(P.method)||w===302&&Oy.includes(P.method)||w===303&&P.method==="POST"||w===307)&&K<_){let Y=new URL(f,P.url);if(P.url=Y.toString(),w===303)P.method="GET",P.headers.delete("Content-Length"),delete P.body;P.headers.delete("Authorization");let h=await $(P);return zy($,h,_,K+1)}return q}});var Hy=y((vy)=>{Object.defineProperty(vy,"__esModule",{value:!0});vy.getHeaderName=c8$;vy.setPlatformSpecificData=I8$;var My=iK(),cM=My.__importStar(i("node:os")),IM=My.__importStar(i("node:process"));function c8$(){return"User-Agent"}async function I8$($){if(IM&&IM.versions){let q=IM.versions;if(q.bun)$.set("Bun",q.bun);else if(q.deno)$.set("Deno",q.deno);else if(q.node)$.set("Node",q.node)}$.set("OS",`(${cM.arch()}-${cM.type()}-${cM.release()})`)}});var U_=y((Yy)=>{Object.defineProperty(Yy,"__esModule",{value:!0});Yy.DEFAULT_RETRY_POLICY_COUNT=Yy.SDK_VERSION=void 0;Yy.SDK_VERSION="1.18.2";Yy.DEFAULT_RETRY_POLICY_COUNT=3});var lM=y((Ty)=>{Object.defineProperty(Ty,"__esModule",{value:!0});Ty.getUserAgentHeaderName=F8$;Ty.getUserAgentValue=U8$;var ky=Hy(),e8$=U_();function B8$($){let q=[];for(let[_,K]of $){let P=K?`${_}/${K}`:_;q.push(P)}return q.join(" ")}function F8$(){return ky.getHeaderName()}async function U8$($){let q=new Map;q.set("core-rest-pipeline",e8$.SDK_VERSION),await ky.setPlatformSpecificData(q);let _=B8$(q);return $?`${$} ${_}`:_}});var sM=y((Jy)=>{Object.defineProperty(Jy,"__esModule",{value:!0});Jy.userAgentPolicyName=void 0;Jy.userAgentPolicy=qq$;var Wy=lM(),Ay=Wy.getUserAgentHeaderName();Jy.userAgentPolicyName="userAgentPolicy";function qq$($={}){let q=Wy.getUserAgentValue($.userAgentPrefix);return{name:Jy.userAgentPolicyName,async sendRequest(_,K){if(!_.headers.has(Ay))_.headers.set(Ay,await q);return K(_)}}}});var hO=y((py)=>{Object.defineProperty(py,"__esModule",{value:!0});py.isNodeReadableStream=Xy;py.isWebReadableStream=Dy;py.isReadableStream=Kq$;py.isBlob=Pq$;function Xy($){return Boolean($&&typeof $.pipe==="function")}function Dy($){return Boolean($&&typeof $.getReader==="function"&&typeof $.tee==="function")}function Kq$($){return Xy($)||Dy($)}function Pq$($){return typeof $.stream==="function"}});var eM=y((Sy)=>{Object.defineProperty(Sy,"__esModule",{value:!0});Sy.getRawContent=Hq$;Sy.createFileFromStream=Yq$;Sy.createFile=hq$;var fq$=T8(),Mq$=hO(),yy={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},kO=Symbol("rawContent");function vq$($){return typeof $[kO]==="function"}function Hq$($){if(vq$($))return $[kO]();else return $.stream()}function Yq$($,q,_={}){var K,P,w,O;return Object.assign(Object.assign({},yy),{type:(K=_.type)!==null&&K!==void 0?K:"",lastModified:(P=_.lastModified)!==null&&P!==void 0?P:new Date().getTime(),webkitRelativePath:(w=_.webkitRelativePath)!==null&&w!==void 0?w:"",size:(O=_.size)!==null&&O!==void 0?O:-1,name:q,stream:()=>{let f=$();if(Mq$.isNodeReadableStream(f))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return f},[kO]:$})}function hq$($,q,_={}){var K,P,w;if(fq$.isNodeLike)return Object.assign(Object.assign({},yy),{type:(K=_.type)!==null&&K!==void 0?K:"",lastModified:(P=_.lastModified)!==null&&P!==void 0?P:new Date().getTime(),webkitRelativePath:(w=_.webkitRelativePath)!==null&&w!==void 0?w:"",size:$.byteLength,name:q,arrayBuffer:async()=>$.buffer,stream:()=>new Blob([$]).stream(),[kO]:()=>$});else return new File([$],q,_)}});var my=y((Ny)=>{Object.defineProperty(Ny,"__esModule",{value:!0});Ny.concat=pq$;var S_=iK(),BM=i("node:stream"),Wq$=hO(),Jq$=eM();function Gy(){return S_.__asyncGenerator(this,arguments,function*$(){let q=this.getReader();try{while(!0){let{done:_,value:K}=yield S_.__await(q.read());if(_)return yield S_.__await(void 0);yield yield S_.__await(K)}}finally{q.releaseLock()}})}function Xq$($){if(!$[Symbol.asyncIterator])$[Symbol.asyncIterator]=Gy.bind($);if(!$.values)$.values=Gy.bind($)}function Dq$($){if($ instanceof ReadableStream)return Xq$($),BM.Readable.fromWeb($);else return $}function Zy($){if($ instanceof Uint8Array)return BM.Readable.from(Buffer.from($));else if(Wq$.isBlob($))return Zy(Jq$.getRawContent($));else return Dq$($)}async function pq$($){return function(){let q=$.map((_)=>typeof _==="function"?_():_).map(Zy);return BM.Readable.from(function(){return S_.__asyncGenerator(this,arguments,function*(){var _,K,P,w;for(let h of q)try{for(var O=!0,f=(K=void 0,S_.__asyncValues(h)),Y;Y=yield S_.__await(f.next()),_=Y.done,!_;O=!0){w=Y.value,O=!1;let k=w;yield yield S_.__await(k)}}catch(k){K={error:k}}finally{try{if(!O&&!_&&(P=f.return))yield S_.__await(P.call(f))}finally{if(K)throw K.error}}})}())}}});var UM=y((Ey)=>{Object.defineProperty(Ey,"__esModule",{value:!0});Ey.multipartPolicyName=void 0;Ey.multipartPolicy=nq$;var aK=T8(),Sq$=my(),Gq$=hO();function Zq$(){return`----AzSDKFormBoundary${aK.randomUUID()}`}function Nq$($){let q="";for(let[_,K]of $)q+=`${_}: ${K}\r
`;return q}function mq$($){if($ instanceof Uint8Array)return $.byteLength;else if(Gq$.isBlob($))return $.size===-1?void 0:$.size;else return}function Eq$($){let q=0;for(let _ of $){let K=mq$(_);if(K===void 0)return;else q+=K}return q}async function uq$($,q,_){let K=[aK.stringToUint8Array(`--${_}`,"utf-8"),...q.flatMap((w)=>[aK.stringToUint8Array(`\r
`,"utf-8"),aK.stringToUint8Array(Nq$(w.headers),"utf-8"),aK.stringToUint8Array(`\r
`,"utf-8"),w.body,aK.stringToUint8Array(`\r
--${_}`,"utf-8")]),aK.stringToUint8Array(`--\r
\r
`,"utf-8")],P=Eq$(K);if(P)$.headers.set("Content-Length",P);$.body=await Sq$.concat(K)}Ey.multipartPolicyName="multipartPolicy";var Rq$=70,Lq$=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function Cq$($){if($.length>Rq$)throw new Error(`Multipart boundary "${$}" exceeds maximum length of 70 characters`);if(Array.from($).some((q)=>!Lq$.has(q)))throw new Error(`Multipart boundary "${$}" contains invalid characters`)}function nq$(){return{name:Ey.multipartPolicyName,async sendRequest($,q){var _;if(!$.multipartBody)return q($);if($.body)throw new Error("multipartBody and regular body cannot be set at the same time");let K=$.multipartBody.boundary,P=(_=$.headers.get("Content-Type"))!==null&&_!==void 0?_:"multipart/mixed",w=P.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!w)throw new Error(`Got multipart request body, but content-type header was not multipart: ${P}`);let[,O,f]=w;if(f&&K&&f!==K)throw new Error(`Multipart boundary was specified as ${f} in the header, but got ${K} in the request body`);if(K!==null&&K!==void 0||(K=f),K)Cq$(K);else K=Zq$();return $.headers.set("Content-Type",`${O}; boundary=${K}`),await uq$($,$.multipartBody.parts,K),$.multipartBody=void 0,q($)}}}});var $v=y((uy)=>{Object.defineProperty(uy,"__esModule",{value:!0});uy.decompressResponsePolicyName=void 0;uy.decompressResponsePolicy=Vq$;uy.decompressResponsePolicyName="decompressResponsePolicy";function Vq$(){return{name:uy.decompressResponsePolicyName,async sendRequest($,q){if($.method!=="HEAD")$.headers.set("Accept-Encoding","gzip,deflate");return q($)}}}});var TO=y((Ry)=>{Object.defineProperty(Ry,"__esModule",{value:!0});Ry.delay=oq$;Ry.parseHeaderValueAsNumber=iq$;var dq$=q7(),bq$="The operation was aborted.";function oq$($,q,_){return new Promise((K,P)=>{let w=void 0,O=void 0,f=()=>{return P(new dq$.AbortError((_===null||_===void 0?void 0:_.abortErrorMsg)?_===null||_===void 0?void 0:_.abortErrorMsg:bq$))},Y=()=>{if((_===null||_===void 0?void 0:_.abortSignal)&&O)_.abortSignal.removeEventListener("abort",O)};if(O=()=>{if(w)clearTimeout(w);return Y(),f()},(_===null||_===void 0?void 0:_.abortSignal)&&_.abortSignal.aborted)return f();if(w=setTimeout(()=>{Y(),K(q)},$),_===null||_===void 0?void 0:_.abortSignal)_.abortSignal.addEventListener("abort",O)})}function iq$($,q){let _=$.headers.get(q);if(!_)return;let K=Number(_);if(Number.isNaN(K))return;return K}});var AO=y((Cy)=>{Object.defineProperty(Cy,"__esModule",{value:!0});Cy.isThrottlingRetryResponse=lq$;Cy.throttlingRetryStrategy=tq$;var cq$=TO(),qv="Retry-After",Iq$=["retry-after-ms","x-ms-retry-after-ms",qv];function Ly($){if(!($&&[429,503].includes($.status)))return;try{for(let P of Iq$){let w=cq$.parseHeaderValueAsNumber($,P);if(w===0||w)return w*(P===qv?1000:1)}let q=$.headers.get(qv);if(!q)return;let K=Date.parse(q)-Date.now();return Number.isFinite(K)?Math.max(0,K):void 0}catch(q){return}}function lq$($){return Number.isFinite(Ly($))}function tq$(){return{name:"throttlingRetryStrategy",retry({response:$}){let q=Ly($);if(!Number.isFinite(q))return{skipStrategy:!0};return{retryAfterInMs:q}}}}});var WO=y((Vy)=>{Object.defineProperty(Vy,"__esModule",{value:!0});Vy.exponentialRetryStrategy=$_$;Vy.isExponentialRetryResponse=ny;Vy.isSystemError=ry;var Bq$=T8(),Fq$=AO(),Uq$=1000,Qq$=64000;function $_$($={}){var q,_;let K=(q=$.retryDelayInMs)!==null&&q!==void 0?q:Uq$,P=(_=$.maxRetryDelayInMs)!==null&&_!==void 0?_:Qq$;return{name:"exponentialRetryStrategy",retry({retryCount:w,response:O,responseError:f}){let Y=ry(f),h=Y&&$.ignoreSystemErrors,k=ny(O),T=k&&$.ignoreHttpStatusCodes;if(O&&(Fq$.isThrottlingRetryResponse(O)||!k)||T||h)return{skipStrategy:!0};if(f&&!Y&&!k)return{errorToThrow:f};return Bq$.calculateRetryDelay(w,{retryDelayInMs:K,maxRetryDelayInMs:P})}}}function ny($){return Boolean($&&$.status!==void 0&&($.status>=500||$.status===408)&&$.status!==501&&$.status!==505)}function ry($){if(!$)return!1;return $.code==="ETIMEDOUT"||$.code==="ESOCKETTIMEDOUT"||$.code==="ECONNREFUSED"||$.code==="ECONNRESET"||$.code==="ENOENT"||$.code==="ENOTFOUND"}});var _7=y((by)=>{Object.defineProperty(by,"__esModule",{value:!0});by.retryPolicy=z_$;var P_$=TO(),j_$=Kj(),w_$=q7(),xy=U_(),dy=j_$.createClientLogger("core-rest-pipeline retryPolicy"),O_$="retryPolicy";function z_$($,q={maxRetries:xy.DEFAULT_RETRY_POLICY_COUNT}){let _=q.logger||dy;return{name:O_$,async sendRequest(K,P){var w,O;let f,Y,h=-1;$:while(!0){h+=1,f=void 0,Y=void 0;try{_.info(`Retry ${h}: Attempting to send request`,K.requestId),f=await P(K),_.info(`Retry ${h}: Received a response from request`,K.requestId)}catch(k){if(_.error(`Retry ${h}: Received an error from request`,K.requestId),Y=k,!k||Y.name!=="RestError")throw k;f=Y.response}if((w=K.abortSignal)===null||w===void 0?void 0:w.aborted)throw _.error(`Retry ${h}: Request aborted.`),new w_$.AbortError;if(h>=((O=q.maxRetries)!==null&&O!==void 0?O:xy.DEFAULT_RETRY_POLICY_COUNT))if(_.info(`Retry ${h}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),Y)throw Y;else if(f)return f;else throw new Error("Maximum retries reached with no response or error to throw");_.info(`Retry ${h}: Processing ${$.length} retry strategies.`);q:for(let k of $){let T=k.logger||dy;T.info(`Retry ${h}: Processing retry strategy ${k.name}.`);let p=k.retry({retryCount:h,response:f,responseError:Y});if(p.skipStrategy){T.info(`Retry ${h}: Skipped.`);continue q}let{errorToThrow:G,retryAfterInMs:Z,redirectTo:X}=p;if(G)throw T.error(`Retry ${h}: Retry strategy ${k.name} throws error:`,G),G;if(Z||Z===0){T.info(`Retry ${h}: Retry strategy ${k.name} retries after ${Z}`),await P_$.delay(Z,void 0,{abortSignal:K.abortSignal});continue $}if(X){T.info(`Retry ${h}: Retry strategy ${k.name} redirects to ${X}`),K.url=X;continue $}}if(Y)throw _.info("None of the retry strategies could work with the received error. Throwing it."),Y;if(f)return _.info("None of the retry strategies could work with the received response. Returning it."),f}}}}});var Kv=y((oy)=>{Object.defineProperty(oy,"__esModule",{value:!0});oy.defaultRetryPolicyName=void 0;oy.defaultRetryPolicy=h_$;var M_$=WO(),v_$=AO(),H_$=_7(),Y_$=U_();oy.defaultRetryPolicyName="defaultRetryPolicy";function h_$($={}){var q;return{name:oy.defaultRetryPolicyName,sendRequest:H_$.retryPolicy([v_$.throttlingRetryStrategy(),M_$.exponentialRetryStrategy($)],{maxRetries:(q=$.maxRetries)!==null&&q!==void 0?q:Y_$.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var wj=y((gy)=>{Object.defineProperty(gy,"__esModule",{value:!0});gy.createHttpHeaders=A_$;function JO($){return $.toLowerCase()}function*T_$($){for(let q of $.values())yield[q.name,q.value]}class iy{constructor($){if(this._headersMap=new Map,$)for(let q of Object.keys($))this.set(q,$[q])}set($,q){this._headersMap.set(JO($),{name:$,value:String(q).trim()})}get($){var q;return(q=this._headersMap.get(JO($)))===null||q===void 0?void 0:q.value}has($){return this._headersMap.has(JO($))}delete($){this._headersMap.delete(JO($))}toJSON($={}){let q={};if($.preserveCase)for(let _ of this._headersMap.values())q[_.name]=_.value;else for(let[_,K]of this._headersMap)q[_]=K.value;return q}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return T_$(this._headersMap)}}function A_$($){return new iy($)}});var jv=y((Iy)=>{Object.defineProperty(Iy,"__esModule",{value:!0});Iy.formDataPolicyName=void 0;Iy.formDataPolicy=X_$;var cy=T8(),ay=wj();Iy.formDataPolicyName="formDataPolicy";function J_$($){var q;let _={};for(let[K,P]of $.entries())(q=_[K])!==null&&q!==void 0||(_[K]=[]),_[K].push(P);return _}function X_$(){return{name:Iy.formDataPolicyName,async sendRequest($,q){if(cy.isNodeLike&&typeof FormData!=="undefined"&&$.body instanceof FormData)$.formData=J_$($.body),$.body=void 0;if($.formData){let _=$.headers.get("Content-Type");if(_&&_.indexOf("application/x-www-form-urlencoded")!==-1)$.body=D_$($.formData);else await p_$($.formData,$);$.formData=void 0}return q($)}}}function D_$($){let q=new URLSearchParams;for(let[_,K]of Object.entries($))if(Array.isArray(K))for(let P of K)q.append(_,P.toString());else q.append(_,K.toString());return q.toString()}async function p_$($,q){let _=q.headers.get("Content-Type");if(_&&!_.startsWith("multipart/form-data"))return;q.headers.set("Content-Type",_!==null&&_!==void 0?_:"multipart/form-data");let K=[];for(let[P,w]of Object.entries($))for(let O of Array.isArray(w)?w:[w])if(typeof O==="string")K.push({headers:ay.createHttpHeaders({"Content-Disposition":`form-data; name="${P}"`}),body:cy.stringToUint8Array(O,"utf-8")});else if(O===void 0||O===null||typeof O!=="object")throw new Error(`Unexpected value for key ${P}: ${O}. Value should be serialized to string first.`);else{let f=O.name||"blob",Y=ay.createHttpHeaders();Y.set("Content-Disposition",`form-data; name="${P}"; filename="${f}"`),Y.set("Content-Type",O.type||"application/octet-stream"),K.push({headers:Y,body:O})}q.multipartBody={parts:K}}});var sy=y((A8)=>{var S_$=A8&&A8.__createBinding||(Object.create?function($,q,_,K){if(K===void 0)K=_;var P=Object.getOwnPropertyDescriptor(q,_);if(!P||("get"in P?!q.__esModule:P.writable||P.configurable))P={enumerable:!0,get:function(){return q[_]}};Object.defineProperty($,K,P)}:function($,q,_,K){if(K===void 0)K=_;$[K]=q[_]}),G_$=A8&&A8.__setModuleDefault||(Object.create?function($,q){Object.defineProperty($,"default",{enumerable:!0,value:q})}:function($,q){$.default=q}),ly=A8&&A8.__importStar||function($){if($&&$.__esModule)return $;var q={};if($!=null){for(var _ in $)if(_!=="default"&&Object.prototype.hasOwnProperty.call($,_))S_$(q,$,_)}return G_$(q,$),q};Object.defineProperty(A8,"__esModule",{value:!0});A8.req=A8.json=A8.toBuffer=void 0;var Z_$=ly(i("http")),N_$=ly(i("https"));async function ty($){let q=0,_=[];for await(let K of $)q+=K.length,_.push(K);return Buffer.concat(_,q)}A8.toBuffer=ty;async function m_$($){let _=(await ty($)).toString("utf8");try{return JSON.parse(_)}catch(K){let P=K;throw P.message+=` (input: ${_})`,P}}A8.json=m_$;function E_$($,q={}){let K=((typeof $==="string"?$:$.href).startsWith("https:")?N_$:Z_$).request($,q),P=new Promise((w,O)=>{K.once("response",w).once("error",O).end()});return K.then=P.then.bind(P),K}A8.req=E_$});var wv=y((E8)=>{var By=E8&&E8.__createBinding||(Object.create?function($,q,_,K){if(K===void 0)K=_;var P=Object.getOwnPropertyDescriptor(q,_);if(!P||("get"in P?!q.__esModule:P.writable||P.configurable))P={enumerable:!0,get:function(){return q[_]}};Object.defineProperty($,K,P)}:function($,q,_,K){if(K===void 0)K=_;$[K]=q[_]}),u_$=E8&&E8.__setModuleDefault||(Object.create?function($,q){Object.defineProperty($,"default",{enumerable:!0,value:q})}:function($,q){$.default=q}),Fy=E8&&E8.__importStar||function($){if($&&$.__esModule)return $;var q={};if($!=null){for(var _ in $)if(_!=="default"&&Object.prototype.hasOwnProperty.call($,_))By(q,$,_)}return u_$(q,$),q},R_$=E8&&E8.__exportStar||function($,q){for(var _ in $)if(_!=="default"&&!Object.prototype.hasOwnProperty.call(q,_))By(q,$,_)};Object.defineProperty(E8,"__esModule",{value:!0});E8.Agent=void 0;var L_$=Fy(i("net")),ey=Fy(i("http")),C_$=i("https");R_$(sy(),E8);var tq=Symbol("AgentBaseInternalState");class Uy extends ey.Agent{constructor($){super($);this[tq]={}}isSecureEndpoint($){if($){if(typeof $.secureEndpoint==="boolean")return $.secureEndpoint;if(typeof $.protocol==="string")return $.protocol==="https:"}let{stack:q}=new Error;if(typeof q!=="string")return!1;return q.split(`
`).some((_)=>_.indexOf("(https.js:")!==-1||_.indexOf("node:https:")!==-1)}incrementSockets($){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;if(!this.sockets[$])this.sockets[$]=[];let q=new L_$.Socket({writable:!1});return this.sockets[$].push(q),this.totalSocketCount++,q}decrementSockets($,q){if(!this.sockets[$]||q===null)return;let _=this.sockets[$],K=_.indexOf(q);if(K!==-1){if(_.splice(K,1),this.totalSocketCount--,_.length===0)delete this.sockets[$]}}getName($){if(typeof $.secureEndpoint==="boolean"?$.secureEndpoint:this.isSecureEndpoint($))return C_$.Agent.prototype.getName.call(this,$);return super.getName($)}createSocket($,q,_){let K={...q,secureEndpoint:this.isSecureEndpoint(q)},P=this.getName(K),w=this.incrementSockets(P);Promise.resolve().then(()=>this.connect($,K)).then((O)=>{if(this.decrementSockets(P,w),O instanceof ey.Agent)try{return O.addRequest($,K)}catch(f){return _(f)}this[tq].currentSocket=O,super.createSocket($,q,_)},(O)=>{this.decrementSockets(P,w),_(O)})}createConnection(){let $=this[tq].currentSocket;if(this[tq].currentSocket=void 0,!$)throw new Error("No socket was returned in the `connect()` function");return $}get defaultPort(){return this[tq].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort($){if(this[tq])this[tq].defaultPort=$}get protocol(){return this[tq].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol($){if(this[tq])this[tq].protocol=$}}E8.Agent=Uy});var Qy=y((K7)=>{var n_$=K7&&K7.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(K7,"__esModule",{value:!0});K7.parseProxyResponse=void 0;var r_$=n_$(Aq()),XO=r_$.default("https-proxy-agent:parse-proxy-response");function V_$($){return new Promise((q,_)=>{let K=0,P=[];function w(){let k=$.read();if(k)h(k);else $.once("readable",w)}function O(){$.removeListener("end",f),$.removeListener("error",Y),$.removeListener("readable",w)}function f(){O(),XO("onend"),_(new Error("Proxy connection ended before receiving CONNECT response"))}function Y(k){O(),XO("onerror %o",k),_(k)}function h(k){P.push(k),K+=k.length;let T=Buffer.concat(P,K),p=T.indexOf(`\r
\r
`);if(p===-1){XO("have not received end of HTTP headers yet..."),w();return}let G=T.slice(0,p).toString("ascii").split(`\r
`),Z=G.shift();if(!Z)return $.destroy(),_(new Error("No header received from proxy CONNECT response"));let X=Z.split(" "),C=+X[1],N=X.slice(2).join(" "),L={};for(let m of G){if(!m)continue;let E=m.indexOf(":");if(E===-1)return $.destroy(),_(new Error(`Invalid header from proxy CONNECT response: "${m}"`));let W=m.slice(0,E).toLowerCase(),V=m.slice(E+1).trimStart(),n=L[W];if(typeof n==="string")L[W]=[n,V];else if(Array.isArray(n))n.push(V);else L[W]=V}XO("got proxy server response: %o %o",Z,L),O(),q({connect:{statusCode:C,statusText:N,headers:L},buffered:T})}$.on("error",Y),$.on("end",f),w()})}K7.parseProxyResponse=V_$});var jS=y((g8)=>{var x_$=g8&&g8.__createBinding||(Object.create?function($,q,_,K){if(K===void 0)K=_;var P=Object.getOwnPropertyDescriptor(q,_);if(!P||("get"in P?!q.__esModule:P.writable||P.configurable))P={enumerable:!0,get:function(){return q[_]}};Object.defineProperty($,K,P)}:function($,q,_,K){if(K===void 0)K=_;$[K]=q[_]}),d_$=g8&&g8.__setModuleDefault||(Object.create?function($,q){Object.defineProperty($,"default",{enumerable:!0,value:q})}:function($,q){$.default=q}),KS=g8&&g8.__importStar||function($){if($&&$.__esModule)return $;var q={};if($!=null){for(var _ in $)if(_!=="default"&&Object.prototype.hasOwnProperty.call($,_))x_$(q,$,_)}return d_$(q,$),q},PS=g8&&g8.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(g8,"__esModule",{value:!0});g8.HttpsProxyAgent=void 0;var DO=KS(i("net")),$S=KS(i("tls")),b_$=PS(i("assert")),o_$=PS(Aq()),i_$=wv(),g_$=i("url"),a_$=Qy(),Oj=o_$.default("https-proxy-agent"),qS=($)=>{if($.servername===void 0&&$.host&&!DO.isIP($.host))return{...$,servername:$.host};return $};class Ov extends i_$.Agent{constructor($,q){super(q);this.options={path:void 0},this.proxy=typeof $==="string"?new g_$.URL($):$,this.proxyHeaders=q?.headers??{},Oj("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let _=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),K=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...q?_S(q,"headers"):null,host:_,port:K}}async connect($,q){let{proxy:_}=this;if(!q.host)throw new TypeError('No "host" provided');let K;if(_.protocol==="https:")Oj("Creating `tls.Socket`: %o",this.connectOpts),K=$S.connect(qS(this.connectOpts));else Oj("Creating `net.Socket`: %o",this.connectOpts),K=DO.connect(this.connectOpts);let P=typeof this.proxyHeaders==="function"?this.proxyHeaders():{...this.proxyHeaders},w=DO.isIPv6(q.host)?`[${q.host}]`:q.host,O=`CONNECT ${w}:${q.port} HTTP/1.1\r
`;if(_.username||_.password){let T=`${decodeURIComponent(_.username)}:${decodeURIComponent(_.password)}`;P["Proxy-Authorization"]=`Basic ${Buffer.from(T).toString("base64")}`}if(P.Host=`${w}:${q.port}`,!P["Proxy-Connection"])P["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close";for(let T of Object.keys(P))O+=`${T}: ${P[T]}\r
`;let f=a_$.parseProxyResponse(K);K.write(`${O}\r
`);let{connect:Y,buffered:h}=await f;if($.emit("proxyConnect",Y),this.emit("proxyConnect",Y,$),Y.statusCode===200){if($.once("socket",c_$),q.secureEndpoint)return Oj("Upgrading socket connection to TLS"),$S.connect({..._S(qS(q),"host","path","port"),socket:K});return K}K.destroy();let k=new DO.Socket({writable:!1});return k.readable=!0,$.once("socket",(T)=>{Oj("Replaying proxy buffer for failed request"),b_$.default(T.listenerCount("data")>0),T.push(h),T.push(null)}),k}}Ov.protocols=["http","https"];g8.HttpsProxyAgent=Ov;function c_$($){$.resume()}function _S($,...q){let _={},K;for(K in $)if(!q.includes(K))_[K]=$[K];return _}});var zS=y((a8)=>{var I_$=a8&&a8.__createBinding||(Object.create?function($,q,_,K){if(K===void 0)K=_;var P=Object.getOwnPropertyDescriptor(q,_);if(!P||("get"in P?!q.__esModule:P.writable||P.configurable))P={enumerable:!0,get:function(){return q[_]}};Object.defineProperty($,K,P)}:function($,q,_,K){if(K===void 0)K=_;$[K]=q[_]}),l_$=a8&&a8.__setModuleDefault||(Object.create?function($,q){Object.defineProperty($,"default",{enumerable:!0,value:q})}:function($,q){$.default=q}),OS=a8&&a8.__importStar||function($){if($&&$.__esModule)return $;var q={};if($!=null){for(var _ in $)if(_!=="default"&&Object.prototype.hasOwnProperty.call($,_))I_$(q,$,_)}return l_$(q,$),q},t_$=a8&&a8.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(a8,"__esModule",{value:!0});a8.HttpProxyAgent=void 0;var s_$=OS(i("net")),e_$=OS(i("tls")),B_$=t_$(Aq()),F_$=i("events"),U_$=wv(),wS=i("url"),P7=B_$.default("http-proxy-agent");class zv extends U_$.Agent{constructor($,q){super(q);this.proxy=typeof $==="string"?new wS.URL($):$,this.proxyHeaders=q?.headers??{},P7("Creating new HttpProxyAgent instance: %o",this.proxy.href);let _=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),K=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...q?Q_$(q,"headers"):null,host:_,port:K}}addRequest($,q){$._header=null,this.setRequestProps($,q),super.addRequest($,q)}setRequestProps($,q){let{proxy:_}=this,K=q.secureEndpoint?"https:":"http:",P=$.getHeader("host")||"localhost",w=`${K}//${P}`,O=new wS.URL($.path,w);if(q.port!==80)O.port=String(q.port);$.path=String(O);let f=typeof this.proxyHeaders==="function"?this.proxyHeaders():{...this.proxyHeaders};if(_.username||_.password){let Y=`${decodeURIComponent(_.username)}:${decodeURIComponent(_.password)}`;f["Proxy-Authorization"]=`Basic ${Buffer.from(Y).toString("base64")}`}if(!f["Proxy-Connection"])f["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close";for(let Y of Object.keys(f)){let h=f[Y];if(h)$.setHeader(Y,h)}}async connect($,q){if($._header=null,!$.path.includes("://"))this.setRequestProps($,q);let _,K;if(P7("Regenerating stored HTTP header string for request"),$._implicitHeader(),$.outputData&&$.outputData.length>0)P7("Patching connection write() output buffer with updated header"),_=$.outputData[0].data,K=_.indexOf(`\r
\r
`)+4,$.outputData[0].data=$._header+_.substring(K),P7("Output buffer: %o",$.outputData[0].data);let P;if(this.proxy.protocol==="https:")P7("Creating `tls.Socket`: %o",this.connectOpts),P=e_$.connect(this.connectOpts);else P7("Creating `net.Socket`: %o",this.connectOpts),P=s_$.connect(this.connectOpts);return await F_$.once(P,"connect"),P}}zv.protocols=["http","https"];a8.HttpProxyAgent=zv;function Q_$($,...q){let _={},K;for(K in $)if(!q.includes(K))_[K]=$[K];return _}});var fv=y((hS)=>{Object.defineProperty(hS,"__esModule",{value:!0});hS.globalNoProxyList=hS.proxyPolicyName=void 0;hS.loadNoProxy=YS;hS.getDefaultProxySettings=fK$;hS.proxyPolicy=vK$;var $K$=jS(),qK$=zS(),_K$=gK(),KK$="HTTPS_PROXY",PK$="HTTP_PROXY",jK$="ALL_PROXY",wK$="NO_PROXY";hS.proxyPolicyName="proxyPolicy";hS.globalNoProxyList=[];var vS=!1,OK$=new Map;function pO($){if(process.env[$])return process.env[$];else if(process.env[$.toLowerCase()])return process.env[$.toLowerCase()];return}function HS(){if(!process)return;let $=pO(KK$),q=pO(jK$),_=pO(PK$);return $||q||_}function zK$($,q,_){if(q.length===0)return!1;let K=new URL($).hostname;if(_===null||_===void 0?void 0:_.has(K))return _.get(K);let P=!1;for(let w of q)if(w[0]==="."){if(K.endsWith(w))P=!0;else if(K.length===w.length-1&&K===w.slice(1))P=!0}else if(K===w)P=!0;return _===null||_===void 0||_.set(K,P),P}function YS(){let $=pO(wK$);if(vS=!0,$)return $.split(",").map((q)=>q.trim()).filter((q)=>q.length);return[]}function fK$($){if(!$){if($=HS(),!$)return}let q=new URL($);return{host:(q.protocol?q.protocol+"//":"")+q.hostname,port:Number.parseInt(q.port||"80"),username:q.username,password:q.password}}function MK$(){let $=HS();return $?new URL($):void 0}function fS($){let q;try{q=new URL($.host)}catch(_){throw new Error(`Expecting a valid host string in proxy settings, but found "${$.host}".`)}if(q.port=String($.port),$.username)q.username=$.username;if($.password)q.password=$.password;return q}function MS($,q,_){if($.agent)return;let P=new URL($.url).protocol!=="https:";if($.tlsSettings)_K$.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let w=$.headers.toJSON();if(P){if(!q.httpProxyAgent)q.httpProxyAgent=new qK$.HttpProxyAgent(_,{headers:w});$.agent=q.httpProxyAgent}else{if(!q.httpsProxyAgent)q.httpsProxyAgent=new $K$.HttpsProxyAgent(_,{headers:w});$.agent=q.httpsProxyAgent}}function vK$($,q){if(!vS)hS.globalNoProxyList.push(...YS());let _=$?fS($):MK$(),K={};return{name:hS.proxyPolicyName,async sendRequest(P,w){var O;if(!P.proxySettings&&_&&!zK$(P.url,(O=q===null||q===void 0?void 0:q.customNoProxyList)!==null&&O!==void 0?O:hS.globalNoProxyList,(q===null||q===void 0?void 0:q.customNoProxyList)?void 0:OK$))MS(P,K,_);else if(P.proxySettings)MS(P,K,fS(P.proxySettings));return w(P)}}}});var vv=y((TS)=>{Object.defineProperty(TS,"__esModule",{value:!0});TS.setClientRequestIdPolicyName=void 0;TS.setClientRequestIdPolicy=kK$;TS.setClientRequestIdPolicyName="setClientRequestIdPolicy";function kK$($="x-ms-client-request-id"){return{name:TS.setClientRequestIdPolicyName,async sendRequest(q,_){if(!q.headers.has($))q.headers.set($,q.requestId);return _(q)}}}});var Yv=y((AS)=>{Object.defineProperty(AS,"__esModule",{value:!0});AS.tlsPolicyName=void 0;AS.tlsPolicy=AK$;AS.tlsPolicyName="tlsPolicy";function AK$($){return{name:AS.tlsPolicyName,sendRequest:async(q,_)=>{if(!q.tlsSettings)q.tlsSettings=$;return _(q)}}}});var kv=y((WS)=>{Object.defineProperty(WS,"__esModule",{value:!0});WS.TracingContextImpl=WS.knownContextKeys=void 0;WS.createTracingContext=JK$;WS.knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function JK$($={}){let q=new j7($.parentContext);if($.span)q=q.setValue(WS.knownContextKeys.span,$.span);if($.namespace)q=q.setValue(WS.knownContextKeys.namespace,$.namespace);return q}class j7{constructor($){this._contextMap=$ instanceof j7?new Map($._contextMap):new Map}setValue($,q){let _=new j7(this);return _._contextMap.set($,q),_}getValue($){return this._contextMap.get($)}deleteValue($){let q=new j7(this);return q._contextMap.delete($),q}}WS.TracingContextImpl=j7});var pS=y((XS)=>{Object.defineProperty(XS,"__esModule",{value:!0});XS.state=void 0;XS.state={instrumenterImplementation:void 0}});var Tv=y((GS)=>{Object.defineProperty(GS,"__esModule",{value:!0});GS.createDefaultTracingSpan=yS;GS.createDefaultInstrumenter=SS;GS.useInstrumenter=pK$;GS.getInstrumenter=yK$;var DK$=kv(),SO=pS();function yS(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function SS(){return{createRequestHeaders:()=>{return{}},parseTraceparentHeader:()=>{return},startSpan:($,q)=>{return{span:yS(),tracingContext:DK$.createTracingContext({parentContext:q.tracingContext})}},withContext($,q,..._){return q(..._)}}}function pK$($){SO.state.instrumenterImplementation=$}function yK$(){if(!SO.state.instrumenterImplementation)SO.state.instrumenterImplementation=SS();return SO.state.instrumenterImplementation}});var NS=y((ZS)=>{Object.defineProperty(ZS,"__esModule",{value:!0});ZS.createTracingClient=mK$;var GO=Tv(),Av=kv();function mK$($){let{namespace:q,packageName:_,packageVersion:K}=$;function P(h,k,T){var p;let G=GO.getInstrumenter().startSpan(h,Object.assign(Object.assign({},T),{packageName:_,packageVersion:K,tracingContext:(p=k===null||k===void 0?void 0:k.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),Z=G.tracingContext,X=G.span;if(!Z.getValue(Av.knownContextKeys.namespace))Z=Z.setValue(Av.knownContextKeys.namespace,q);X.setAttribute("az.namespace",Z.getValue(Av.knownContextKeys.namespace));let C=Object.assign({},k,{tracingOptions:Object.assign(Object.assign({},k===null||k===void 0?void 0:k.tracingOptions),{tracingContext:Z})});return{span:X,updatedOptions:C}}async function w(h,k,T,p){let{span:G,updatedOptions:Z}=P(h,k,p);try{let X=await O(Z.tracingOptions.tracingContext,()=>Promise.resolve(T(Z,G)));return G.setStatus({status:"success"}),X}catch(X){throw G.setStatus({status:"error",error:X}),X}finally{G.end()}}function O(h,k,...T){return GO.getInstrumenter().withContext(h,k,...T)}function f(h){return GO.getInstrumenter().parseTraceparentHeader(h)}function Y(h){return GO.getInstrumenter().createRequestHeaders(h)}return{startSpan:P,withSpan:w,withContext:O,parseTraceparentHeader:f,createRequestHeaders:Y}}});var Wv=y((ZO)=>{Object.defineProperty(ZO,"__esModule",{value:!0});ZO.createTracingClient=ZO.useInstrumenter=void 0;var uK$=Tv();Object.defineProperty(ZO,"useInstrumenter",{enumerable:!0,get:function(){return uK$.useInstrumenter}});var RK$=NS();Object.defineProperty(ZO,"createTracingClient",{enumerable:!0,get:function(){return RK$.createTracingClient}})});var uS=y((mS)=>{Object.defineProperty(mS,"__esModule",{value:!0});mS.custom=void 0;var CK$=i("node:util");mS.custom=CK$.inspect.custom});var zj=y((RS)=>{Object.defineProperty(RS,"__esModule",{value:!0});RS.RestError=void 0;RS.isRestError=dK$;var nK$=T8(),rK$=uS(),VK$=YO(),xK$=new VK$.Sanitizer;class w7 extends Error{constructor($,q={}){super($);this.name="RestError",this.code=q.code,this.statusCode=q.statusCode,Object.defineProperty(this,"request",{value:q.request,enumerable:!1}),Object.defineProperty(this,"response",{value:q.response,enumerable:!1}),Object.setPrototypeOf(this,w7.prototype)}[rK$.custom](){return`RestError: ${this.message} 
 ${xK$.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`}}RS.RestError=w7;w7.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";w7.PARSE_ERROR="PARSE_ERROR";function dK$($){if($ instanceof w7)return!0;return nK$.isError($)&&$.name==="RestError"}});var Xv=y((CS)=>{Object.defineProperty(CS,"__esModule",{value:!0});CS.tracingPolicyName=void 0;CS.tracingPolicy=IK$;var oK$=Wv(),iK$=U_(),gK$=lM(),NO=gK(),fj=T8(),aK$=zj(),cK$=YO();CS.tracingPolicyName="tracingPolicy";function IK$($={}){let q=gK$.getUserAgentValue($.userAgentPrefix),_=new cK$.Sanitizer({additionalAllowedQueryParameters:$.additionalAllowedQueryParameters}),K=lK$();return{name:CS.tracingPolicyName,async sendRequest(P,w){var O;if(!K)return w(P);let f=await q,Y={"http.url":_.sanitizeUrl(P.url),"http.method":P.method,"http.user_agent":f,requestId:P.requestId};if(f)Y["http.user_agent"]=f;let{span:h,tracingContext:k}=(O=tK$(K,P,Y))!==null&&O!==void 0?O:{};if(!h||!k)return w(P);try{let T=await K.withContext(k,w,P);return eK$(h,T),T}catch(T){throw sK$(h,T),T}}}}function lK$(){try{return oK$.createTracingClient({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:iK$.SDK_VERSION})}catch($){NO.logger.warning(`Error when creating the TracingClient: ${fj.getErrorMessage($)}`);return}}function tK$($,q,_){try{let{span:K,updatedOptions:P}=$.startSpan(`HTTP ${q.method}`,{tracingOptions:q.tracingOptions},{spanKind:"client",spanAttributes:_});if(!K.isRecording()){K.end();return}let w=$.createRequestHeaders(P.tracingOptions.tracingContext);for(let[O,f]of Object.entries(w))q.headers.set(O,f);return{span:K,tracingContext:P.tracingOptions.tracingContext}}catch(K){NO.logger.warning(`Skipping creating a tracing span due to an error: ${fj.getErrorMessage(K)}`);return}}function sK$($,q){try{if($.setStatus({status:"error",error:fj.isError(q)?q:void 0}),aK$.isRestError(q)&&q.statusCode)$.setAttribute("http.status_code",q.statusCode);$.end()}catch(_){NO.logger.warning(`Skipping tracing span processing due to an error: ${fj.getErrorMessage(_)}`)}}function eK$($,q){try{$.setAttribute("http.status_code",q.status);let _=q.headers.get("x-ms-request-id");if(_)$.setAttribute("serviceRequestId",_);if(q.status>=400)$.setStatus({status:"error"});$.end()}catch(_){NO.logger.warning(`Skipping tracing span processing due to an error: ${fj.getErrorMessage(_)}`)}}});var xS=y((VS)=>{Object.defineProperty(VS,"__esModule",{value:!0});VS.createPipelineFromOptions=z4$;var FK$=iM(),UK$=ZM(),QK$=aM(),$4$=sM(),nS=UM(),q4$=$v(),_4$=Kv(),K4$=jv(),rS=T8(),P4$=fv(),j4$=vv(),w4$=Yv(),O4$=Xv();function z4$($){var q;let _=UK$.createEmptyPipeline();if(rS.isNodeLike){if($.tlsOptions)_.addPolicy(w4$.tlsPolicy($.tlsOptions));_.addPolicy(P4$.proxyPolicy($.proxyOptions)),_.addPolicy(q4$.decompressResponsePolicy())}if(_.addPolicy(K4$.formDataPolicy(),{beforePolicies:[nS.multipartPolicyName]}),_.addPolicy($4$.userAgentPolicy($.userAgentOptions)),_.addPolicy(j4$.setClientRequestIdPolicy((q=$.telemetryOptions)===null||q===void 0?void 0:q.clientRequestIdHeaderName)),_.addPolicy(nS.multipartPolicy(),{afterPhase:"Deserialize"}),_.addPolicy(_4$.defaultRetryPolicy($.retryOptions),{phase:"Retry"}),_.addPolicy(O4$.tracingPolicy(Object.assign(Object.assign({},$.userAgentOptions),$.loggingOptions)),{afterPhase:"Retry"}),rS.isNodeLike)_.addPolicy(QK$.redirectPolicy($.redirectOptions),{afterPhase:"Retry"});return _.addPolicy(FK$.logPolicy($.loggingOptions),{afterPhase:"Sign"}),_}});var IS=y((cS)=>{Object.defineProperty(cS,"__esModule",{value:!0});cS.getBodyLength=aS;cS.createNodeHttpClient=T4$;var Sv=iK(),Dv=Sv.__importStar(i("node:http")),pv=Sv.__importStar(i("node:https")),dS=Sv.__importStar(i("node:zlib")),M4$=i("node:stream"),bS=q7(),v4$=wj(),Hj=zj(),Mj=gK(),H4$={};function vj($){return $&&typeof $.pipe==="function"}function oS($){if($.readable===!1)return Promise.resolve();return new Promise((q)=>{let _=()=>{q(),$.removeListener("close",_),$.removeListener("end",_),$.removeListener("error",_)};$.on("close",_),$.on("end",_),$.on("error",_)})}function iS($){return $&&typeof $.byteLength==="number"}class yv extends M4$.Transform{_transform($,q,_){this.push($),this.loadedBytes+=$.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),_()}catch(K){_(K)}}constructor($){super();this.loadedBytes=0,this.progressCallback=$}}class gS{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest($){var q,_,K;let P=new AbortController,w;if($.abortSignal){if($.abortSignal.aborted)throw new bS.AbortError("The operation was aborted.");w=(k)=>{if(k.type==="abort")P.abort()},$.abortSignal.addEventListener("abort",w)}if($.timeout>0)setTimeout(()=>{P.abort()},$.timeout);let O=$.headers.get("Accept-Encoding"),f=(O===null||O===void 0?void 0:O.includes("gzip"))||(O===null||O===void 0?void 0:O.includes("deflate")),Y=typeof $.body==="function"?$.body():$.body;if(Y&&!$.headers.has("Content-Length")){let k=aS(Y);if(k!==null)$.headers.set("Content-Length",k)}let h;try{if(Y&&$.onUploadProgress){let X=$.onUploadProgress,C=new yv(X);if(C.on("error",(N)=>{Mj.logger.error("Error in upload progress",N)}),vj(Y))Y.pipe(C);else C.end(Y);Y=C}let k=await this.makeRequest($,P,Y),T=Y4$(k),G={status:(q=k.statusCode)!==null&&q!==void 0?q:0,headers:T,request:$};if($.method==="HEAD")return k.resume(),G;h=f?h4$(k,T):k;let Z=$.onDownloadProgress;if(Z){let X=new yv(Z);X.on("error",(C)=>{Mj.logger.error("Error in download progress",C)}),h.pipe(X),h=X}if(((_=$.streamResponseStatusCodes)===null||_===void 0?void 0:_.has(Number.POSITIVE_INFINITY))||((K=$.streamResponseStatusCodes)===null||K===void 0?void 0:K.has(G.status)))G.readableStreamBody=h;else G.bodyAsText=await k4$(h);return G}finally{if($.abortSignal&&w){let k=Promise.resolve();if(vj(Y))k=oS(Y);let T=Promise.resolve();if(vj(h))T=oS(h);Promise.all([k,T]).then(()=>{var p;if(w)(p=$.abortSignal)===null||p===void 0||p.removeEventListener("abort",w)}).catch((p)=>{Mj.logger.warning("Error when cleaning up abortListener on httpRequest",p)})}}}makeRequest($,q,_){var K;let P=new URL($.url),w=P.protocol!=="https:";if(w&&!$.allowInsecureConnection)throw new Error(`Cannot connect to ${$.url} while allowInsecureConnection is false.`);let f={agent:(K=$.agent)!==null&&K!==void 0?K:this.getOrCreateAgent($,w),hostname:P.hostname,path:`${P.pathname}${P.search}`,port:P.port,method:$.method,headers:$.headers.toJSON({preserveCase:!0})};return new Promise((Y,h)=>{let k=w?Dv.request(f,Y):pv.request(f,Y);if(k.once("error",(T)=>{var p;h(new Hj.RestError(T.message,{code:(p=T.code)!==null&&p!==void 0?p:Hj.RestError.REQUEST_SEND_ERROR,request:$}))}),q.signal.addEventListener("abort",()=>{let T=new bS.AbortError("The operation was aborted.");k.destroy(T),h(T)}),_&&vj(_))_.pipe(k);else if(_)if(typeof _==="string"||Buffer.isBuffer(_))k.end(_);else if(iS(_))k.end(ArrayBuffer.isView(_)?Buffer.from(_.buffer):Buffer.from(_));else Mj.logger.error("Unrecognized body type",_),h(new Hj.RestError("Unrecognized body type"));else k.end()})}getOrCreateAgent($,q){var _;let K=$.disableKeepAlive;if(q){if(K)return Dv.globalAgent;if(!this.cachedHttpAgent)this.cachedHttpAgent=new Dv.Agent({keepAlive:!0});return this.cachedHttpAgent}else{if(K&&!$.tlsSettings)return pv.globalAgent;let P=(_=$.tlsSettings)!==null&&_!==void 0?_:H4$,w=this.cachedHttpsAgents.get(P);if(w&&w.options.keepAlive===!K)return w;return Mj.logger.info("No cached TLS Agent exist, creating a new Agent"),w=new pv.Agent(Object.assign({keepAlive:!K},P)),this.cachedHttpsAgents.set(P,w),w}}}function Y4$($){let q=v4$.createHttpHeaders();for(let _ of Object.keys($.headers)){let K=$.headers[_];if(Array.isArray(K)){if(K.length>0)q.set(_,K[0])}else if(K)q.set(_,K)}return q}function h4$($,q){let _=q.get("Content-Encoding");if(_==="gzip"){let K=dS.createGunzip();return $.pipe(K),K}else if(_==="deflate"){let K=dS.createInflate();return $.pipe(K),K}return $}function k4$($){return new Promise((q,_)=>{let K=[];$.on("data",(P)=>{if(Buffer.isBuffer(P))K.push(P);else K.push(Buffer.from(P))}),$.on("end",()=>{q(Buffer.concat(K).toString("utf8"))}),$.on("error",(P)=>{if(P&&(P===null||P===void 0?void 0:P.name)==="AbortError")_(P);else _(new Hj.RestError(`Error reading response as text: ${P.message}`,{code:Hj.RestError.PARSE_ERROR}))})})}function aS($){if(!$)return 0;else if(Buffer.isBuffer($))return $.length;else if(vj($))return null;else if(iS($))return $.byteLength;else if(typeof $==="string")return Buffer.from($).length;else return null}function T4$(){return new gS}});var tS=y((lS)=>{Object.defineProperty(lS,"__esModule",{value:!0});lS.createDefaultHttpClient=X4$;var J4$=IS();function X4$(){return J4$.createNodeHttpClient()}});var BS=y((eS)=>{Object.defineProperty(eS,"__esModule",{value:!0});eS.createPipelineRequest=S4$;var p4$=wj(),y4$=T8();class sS{constructor($){var q,_,K,P,w,O,f;this.url=$.url,this.body=$.body,this.headers=(q=$.headers)!==null&&q!==void 0?q:p4$.createHttpHeaders(),this.method=(_=$.method)!==null&&_!==void 0?_:"GET",this.timeout=(K=$.timeout)!==null&&K!==void 0?K:0,this.multipartBody=$.multipartBody,this.formData=$.formData,this.disableKeepAlive=(P=$.disableKeepAlive)!==null&&P!==void 0?P:!1,this.proxySettings=$.proxySettings,this.streamResponseStatusCodes=$.streamResponseStatusCodes,this.withCredentials=(w=$.withCredentials)!==null&&w!==void 0?w:!1,this.abortSignal=$.abortSignal,this.tracingOptions=$.tracingOptions,this.onUploadProgress=$.onUploadProgress,this.onDownloadProgress=$.onDownloadProgress,this.requestId=$.requestId||y4$.randomUUID(),this.allowInsecureConnection=(O=$.allowInsecureConnection)!==null&&O!==void 0?O:!1,this.enableBrowserStreams=(f=$.enableBrowserStreams)!==null&&f!==void 0?f:!1}}function S4$($){return new sS($)}});var QS=y((FS)=>{Object.defineProperty(FS,"__esModule",{value:!0});FS.exponentialRetryPolicyName=void 0;FS.exponentialRetryPolicy=E4$;var Z4$=WO(),N4$=_7(),m4$=U_();FS.exponentialRetryPolicyName="exponentialRetryPolicy";function E4$($={}){var q;return N4$.retryPolicy([Z4$.exponentialRetryStrategy(Object.assign(Object.assign({},$),{ignoreSystemErrors:!0}))],{maxRetries:(q=$.maxRetries)!==null&&q!==void 0?q:m4$.DEFAULT_RETRY_POLICY_COUNT})}});var qG=y(($G)=>{Object.defineProperty($G,"__esModule",{value:!0});$G.systemErrorRetryPolicyName=void 0;$G.systemErrorRetryPolicy=n4$;var R4$=WO(),L4$=_7(),C4$=U_();$G.systemErrorRetryPolicyName="systemErrorRetryPolicy";function n4$($={}){var q;return{name:$G.systemErrorRetryPolicyName,sendRequest:L4$.retryPolicy([R4$.exponentialRetryStrategy(Object.assign(Object.assign({},$),{ignoreHttpStatusCodes:!0}))],{maxRetries:(q=$.maxRetries)!==null&&q!==void 0?q:C4$.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var KG=y((_G)=>{Object.defineProperty(_G,"__esModule",{value:!0});_G.throttlingRetryPolicyName=void 0;_G.throttlingRetryPolicy=b4$;var V4$=AO(),x4$=_7(),d4$=U_();_G.throttlingRetryPolicyName="throttlingRetryPolicy";function b4$($={}){var q;return{name:_G.throttlingRetryPolicyName,sendRequest:x4$.retryPolicy([V4$.throttlingRetryStrategy()],{maxRetries:(q=$.maxRetries)!==null&&q!==void 0?q:d4$.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var mv=y((PG)=>{Object.defineProperty(PG,"__esModule",{value:!0});PG.DEFAULT_CYCLER_OPTIONS=void 0;PG.createTokenCycler=a4$;var i4$=TO();PG.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1000,retryIntervalInMs:3000,refreshWindowInMs:120000};async function g4$($,q,_){async function K(){if(Date.now()<_)try{return await $()}catch(w){return null}else{let w=await $();if(w===null)throw new Error("Failed to refresh access token.");return w}}let P=await K();while(P===null)await i4$.delay(q),P=await K();return P}function a4$($,q){let _=null,K=null,P,w=Object.assign(Object.assign({},PG.DEFAULT_CYCLER_OPTIONS),q),O={get isRefreshing(){return _!==null},get shouldRefresh(){var Y;if(O.isRefreshing)return!1;if((K===null||K===void 0?void 0:K.refreshAfterTimestamp)&&K.refreshAfterTimestamp<Date.now())return!0;return((Y=K===null||K===void 0?void 0:K.expiresOnTimestamp)!==null&&Y!==void 0?Y:0)-w.refreshWindowInMs<Date.now()},get mustRefresh(){return K===null||K.expiresOnTimestamp-w.forcedRefreshWindowInMs<Date.now()}};function f(Y,h){var k;if(!O.isRefreshing)_=g4$(()=>$.getToken(Y,h),w.retryIntervalInMs,(k=K===null||K===void 0?void 0:K.expiresOnTimestamp)!==null&&k!==void 0?k:Date.now()).then((p)=>{return _=null,K=p,P=h.tenantId,K}).catch((p)=>{throw _=null,K=null,P=void 0,p});return _}return async(Y,h)=>{let k=Boolean(h.claims),T=P!==h.tenantId;if(k)K=null;if(T||k||O.mustRefresh)return f(Y,h);if(O.shouldRefresh)f(Y,h);return K}}});var MG=y((fG)=>{Object.defineProperty(fG,"__esModule",{value:!0});fG.bearerTokenAuthenticationPolicyName=void 0;fG.bearerTokenAuthenticationPolicy=e4$;fG.parseChallenges=zG;var I4$=mv(),l4$=gK(),t4$=zj();fG.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy";async function mO($,q){try{return[await q($),void 0]}catch(_){if(t4$.isRestError(_)&&_.response)return[_.response,_];else throw _}}async function s4$($){let{scopes:q,getAccessToken:_,request:K}=$,P={abortSignal:K.abortSignal,tracingOptions:K.tracingOptions,enableCae:!0},w=await _(q,P);if(w)$.request.headers.set("Authorization",`Bearer ${w.token}`)}function jG($){return $.status===401&&$.headers.has("WWW-Authenticate")}async function wG($,q){var _;let{scopes:K}=$,P=await $.getAccessToken(K,{enableCae:!0,claims:q});if(!P)return!1;return $.request.headers.set("Authorization",`${(_=P.tokenType)!==null&&_!==void 0?_:"Bearer"} ${P.token}`),!0}function e4$($){var q,_,K;let{credential:P,scopes:w,challengeCallbacks:O}=$,f=$.logger||l4$.logger,Y={authorizeRequest:(_=(q=O===null||O===void 0?void 0:O.authorizeRequest)===null||q===void 0?void 0:q.bind(O))!==null&&_!==void 0?_:s4$,authorizeRequestOnChallenge:(K=O===null||O===void 0?void 0:O.authorizeRequestOnChallenge)===null||K===void 0?void 0:K.bind(O)},h=P?I4$.createTokenCycler(P):()=>Promise.resolve(null);return{name:fG.bearerTokenAuthenticationPolicyName,async sendRequest(k,T){if(!k.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await Y.authorizeRequest({scopes:Array.isArray(w)?w:[w],request:k,getAccessToken:h,logger:f});let p,G,Z;if([p,G]=await mO(k,T),jG(p)){let X=OG(p.headers.get("WWW-Authenticate"));if(X){let C;try{C=atob(X)}catch(N){return f.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${X}`),p}if(Z=await wG({scopes:Array.isArray(w)?w:[w],response:p,request:k,getAccessToken:h,logger:f},C),Z)[p,G]=await mO(k,T)}else if(Y.authorizeRequestOnChallenge){if(Z=await Y.authorizeRequestOnChallenge({scopes:Array.isArray(w)?w:[w],request:k,response:p,getAccessToken:h,logger:f}),Z)[p,G]=await mO(k,T);if(jG(p)){if(X=OG(p.headers.get("WWW-Authenticate")),X){let C;try{C=atob(X)}catch(N){return f.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${X}`),p}if(Z=await wG({scopes:Array.isArray(w)?w:[w],response:p,request:k,getAccessToken:h,logger:f},C),Z)[p,G]=await mO(k,T)}}}}if(G)throw G;else return p}}}function zG($){let q=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,_=/(\w+)="([^"]*)"/g,K=[],P;while((P=q.exec($))!==null){let w=P[1],O=P[2],f={},Y;while((Y=_.exec(O))!==null)f[Y[1]]=Y[2];K.push({scheme:w,params:f})}return K}function OG($){var q;if(!$)return;return(q=zG($).find((K)=>K.scheme==="Bearer"&&K.params.claims&&K.params.error==="insufficient_claims"))===null||q===void 0?void 0:q.params.claims}});var HG=y((vG)=>{Object.defineProperty(vG,"__esModule",{value:!0});vG.ndJsonPolicyName=void 0;vG.ndJsonPolicy=U4$;vG.ndJsonPolicyName="ndJsonPolicy";function U4$(){return{name:vG.ndJsonPolicyName,async sendRequest($,q){if(typeof $.body==="string"&&$.body.startsWith("[")){let _=JSON.parse($.body);if(Array.isArray(_))$.body=_.map((K)=>JSON.stringify(K)+`
`).join("")}return q($)}}}});var kG=y((hG)=>{Object.defineProperty(hG,"__esModule",{value:!0});hG.auxiliaryAuthenticationHeaderPolicyName=void 0;hG.auxiliaryAuthenticationHeaderPolicy=K7$;var $7$=mv(),q7$=gK();hG.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";var YG="x-ms-authorization-auxiliary";async function _7$($){var q,_;let{scopes:K,getAccessToken:P,request:w}=$,O={abortSignal:w.abortSignal,tracingOptions:w.tracingOptions};return(_=(q=await P(K,O))===null||q===void 0?void 0:q.token)!==null&&_!==void 0?_:""}function K7$($){let{credentials:q,scopes:_}=$,K=$.logger||q7$.logger,P=new WeakMap;return{name:hG.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(w,O){if(!w.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!q||q.length===0)return K.info(`${hG.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),O(w);let f=[];for(let h of q){let k=P.get(h);if(!k)k=$7$.createTokenCycler(h),P.set(h,k);f.push(_7$({scopes:Array.isArray(_)?_:[_],request:w,getAccessToken:k,logger:K}))}let Y=(await Promise.all(f)).filter((h)=>Boolean(h));if(Y.length===0)return K.warning(`None of the auxiliary tokens are valid. ${YG} header will not be set.`),O(w);return w.headers.set(YG,Y.map((h)=>`Bearer ${h}`).join(", ")),O(w)}}}});var O7=y((M$)=>{Object.defineProperty(M$,"__esModule",{value:!0});M$.createFileFromStream=M$.createFile=M$.auxiliaryAuthenticationHeaderPolicyName=M$.auxiliaryAuthenticationHeaderPolicy=M$.ndJsonPolicyName=M$.ndJsonPolicy=M$.bearerTokenAuthenticationPolicyName=M$.bearerTokenAuthenticationPolicy=M$.formDataPolicyName=M$.formDataPolicy=M$.tlsPolicyName=M$.tlsPolicy=M$.userAgentPolicyName=M$.userAgentPolicy=M$.defaultRetryPolicy=M$.tracingPolicyName=M$.tracingPolicy=M$.retryPolicy=M$.throttlingRetryPolicyName=M$.throttlingRetryPolicy=M$.systemErrorRetryPolicyName=M$.systemErrorRetryPolicy=M$.redirectPolicyName=M$.redirectPolicy=M$.getDefaultProxySettings=M$.proxyPolicyName=M$.proxyPolicy=M$.multipartPolicyName=M$.multipartPolicy=M$.logPolicyName=M$.logPolicy=M$.setClientRequestIdPolicyName=M$.setClientRequestIdPolicy=M$.exponentialRetryPolicyName=M$.exponentialRetryPolicy=M$.decompressResponsePolicyName=M$.decompressResponsePolicy=M$.isRestError=M$.RestError=M$.createPipelineRequest=M$.createHttpHeaders=M$.createDefaultHttpClient=M$.createPipelineFromOptions=M$.createEmptyPipeline=void 0;var j7$=ZM();Object.defineProperty(M$,"createEmptyPipeline",{enumerable:!0,get:function(){return j7$.createEmptyPipeline}});var w7$=xS();Object.defineProperty(M$,"createPipelineFromOptions",{enumerable:!0,get:function(){return w7$.createPipelineFromOptions}});var O7$=tS();Object.defineProperty(M$,"createDefaultHttpClient",{enumerable:!0,get:function(){return O7$.createDefaultHttpClient}});var z7$=wj();Object.defineProperty(M$,"createHttpHeaders",{enumerable:!0,get:function(){return z7$.createHttpHeaders}});var f7$=BS();Object.defineProperty(M$,"createPipelineRequest",{enumerable:!0,get:function(){return f7$.createPipelineRequest}});var TG=zj();Object.defineProperty(M$,"RestError",{enumerable:!0,get:function(){return TG.RestError}});Object.defineProperty(M$,"isRestError",{enumerable:!0,get:function(){return TG.isRestError}});var AG=$v();Object.defineProperty(M$,"decompressResponsePolicy",{enumerable:!0,get:function(){return AG.decompressResponsePolicy}});Object.defineProperty(M$,"decompressResponsePolicyName",{enumerable:!0,get:function(){return AG.decompressResponsePolicyName}});var WG=QS();Object.defineProperty(M$,"exponentialRetryPolicy",{enumerable:!0,get:function(){return WG.exponentialRetryPolicy}});Object.defineProperty(M$,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return WG.exponentialRetryPolicyName}});var JG=vv();Object.defineProperty(M$,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return JG.setClientRequestIdPolicy}});Object.defineProperty(M$,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return JG.setClientRequestIdPolicyName}});var XG=iM();Object.defineProperty(M$,"logPolicy",{enumerable:!0,get:function(){return XG.logPolicy}});Object.defineProperty(M$,"logPolicyName",{enumerable:!0,get:function(){return XG.logPolicyName}});var DG=UM();Object.defineProperty(M$,"multipartPolicy",{enumerable:!0,get:function(){return DG.multipartPolicy}});Object.defineProperty(M$,"multipartPolicyName",{enumerable:!0,get:function(){return DG.multipartPolicyName}});var Rv=fv();Object.defineProperty(M$,"proxyPolicy",{enumerable:!0,get:function(){return Rv.proxyPolicy}});Object.defineProperty(M$,"proxyPolicyName",{enumerable:!0,get:function(){return Rv.proxyPolicyName}});Object.defineProperty(M$,"getDefaultProxySettings",{enumerable:!0,get:function(){return Rv.getDefaultProxySettings}});var pG=aM();Object.defineProperty(M$,"redirectPolicy",{enumerable:!0,get:function(){return pG.redirectPolicy}});Object.defineProperty(M$,"redirectPolicyName",{enumerable:!0,get:function(){return pG.redirectPolicyName}});var yG=qG();Object.defineProperty(M$,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return yG.systemErrorRetryPolicy}});Object.defineProperty(M$,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return yG.systemErrorRetryPolicyName}});var SG=KG();Object.defineProperty(M$,"throttlingRetryPolicy",{enumerable:!0,get:function(){return SG.throttlingRetryPolicy}});Object.defineProperty(M$,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return SG.throttlingRetryPolicyName}});var M7$=_7();Object.defineProperty(M$,"retryPolicy",{enumerable:!0,get:function(){return M7$.retryPolicy}});var GG=Xv();Object.defineProperty(M$,"tracingPolicy",{enumerable:!0,get:function(){return GG.tracingPolicy}});Object.defineProperty(M$,"tracingPolicyName",{enumerable:!0,get:function(){return GG.tracingPolicyName}});var v7$=Kv();Object.defineProperty(M$,"defaultRetryPolicy",{enumerable:!0,get:function(){return v7$.defaultRetryPolicy}});var ZG=sM();Object.defineProperty(M$,"userAgentPolicy",{enumerable:!0,get:function(){return ZG.userAgentPolicy}});Object.defineProperty(M$,"userAgentPolicyName",{enumerable:!0,get:function(){return ZG.userAgentPolicyName}});var NG=Yv();Object.defineProperty(M$,"tlsPolicy",{enumerable:!0,get:function(){return NG.tlsPolicy}});Object.defineProperty(M$,"tlsPolicyName",{enumerable:!0,get:function(){return NG.tlsPolicyName}});var mG=jv();Object.defineProperty(M$,"formDataPolicy",{enumerable:!0,get:function(){return mG.formDataPolicy}});Object.defineProperty(M$,"formDataPolicyName",{enumerable:!0,get:function(){return mG.formDataPolicyName}});var EG=MG();Object.defineProperty(M$,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return EG.bearerTokenAuthenticationPolicy}});Object.defineProperty(M$,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return EG.bearerTokenAuthenticationPolicyName}});var uG=HG();Object.defineProperty(M$,"ndJsonPolicy",{enumerable:!0,get:function(){return uG.ndJsonPolicy}});Object.defineProperty(M$,"ndJsonPolicyName",{enumerable:!0,get:function(){return uG.ndJsonPolicyName}});var RG=kG();Object.defineProperty(M$,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return RG.auxiliaryAuthenticationHeaderPolicy}});Object.defineProperty(M$,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return RG.auxiliaryAuthenticationHeaderPolicyName}});var LG=eM();Object.defineProperty(M$,"createFile",{enumerable:!0,get:function(){return LG.createFile}});Object.defineProperty(M$,"createFileFromStream",{enumerable:!0,get:function(){return LG.createFileFromStream}})});var rG=y((CG)=>{Object.defineProperty(CG,"__esModule",{value:!0});CG.state=void 0;CG.state={operationRequestMap:new WeakMap}});var Yj=y((iG)=>{Object.defineProperty(iG,"__esModule",{value:!0});iG.getOperationRequestInfo=iG.getOperationArgumentValueFromParameter=void 0;var VG=rG();function dG($,q,_){let{parameterPath:K,mapper:P}=q,w;if(typeof K==="string")K=[K];if(Array.isArray(K)){if(K.length>0)if(P.isConstant)w=P.defaultValue;else{let O=xG($,K);if(!O.propertyFound&&_)O=xG(_,K);let f=!1;if(!O.propertyFound)f=P.required||K[0]==="options"&&K.length===2;w=f?P.defaultValue:O.propertyValue}}else{if(P.required)w={};for(let O in K){let f=P.type.modelProperties[O],Y=K[O],h=dG($,{parameterPath:Y,mapper:f},_);if(h!==void 0){if(!w)w={};w[O]=h}}}return w}iG.getOperationArgumentValueFromParameter=dG;function xG($,q){let _={propertyFound:!1},K=0;for(;K<q.length;++K){let P=q[K];if($&&P in $)$=$[P];else break}if(K===q.length)_.propertyValue=$,_.propertyFound=!0;return _}var bG=Symbol.for("@azure/core-client original request");function Y7$($){return bG in $}function oG($){if(Y7$($))return oG($[bG]);let q=VG.state.operationRequestMap.get($);if(!q)q={},VG.state.operationRequestMap.set($,q);return q}iG.getOperationRequestInfo=oG});var Cv=y((cG)=>{Object.defineProperty(cG,"__esModule",{value:!0});cG.deserializationPolicy=cG.deserializationPolicyName=void 0;var k7$=Pj(),uO=O7(),aG=jj(),Lv=Yj(),T7$=["application/json","text/json"],A7$=["application/xml","application/atom+xml"];cG.deserializationPolicyName="deserializationPolicy";function W7$($={}){var q,_,K,P,w,O,f;let Y=(_=(q=$.expectedContentTypes)===null||q===void 0?void 0:q.json)!==null&&_!==void 0?_:T7$,h=(P=(K=$.expectedContentTypes)===null||K===void 0?void 0:K.xml)!==null&&P!==void 0?P:A7$,k=$.parseXML,T=$.serializerOptions,p={xml:{rootName:(w=T===null||T===void 0?void 0:T.xml.rootName)!==null&&w!==void 0?w:"",includeRoot:(O=T===null||T===void 0?void 0:T.xml.includeRoot)!==null&&O!==void 0?O:!1,xmlCharKey:(f=T===null||T===void 0?void 0:T.xml.xmlCharKey)!==null&&f!==void 0?f:k7$.XML_CHARKEY}};return{name:cG.deserializationPolicyName,async sendRequest(G,Z){let X=await Z(G);return D7$(Y,h,X,p,k)}}}cG.deserializationPolicy=W7$;function J7$($){let q,_=$.request,K=Lv.getOperationRequestInfo(_),P=K===null||K===void 0?void 0:K.operationSpec;if(P)if(!(K===null||K===void 0?void 0:K.operationResponseGetter))q=P.responses[$.status];else q=K===null||K===void 0?void 0:K.operationResponseGetter(P,$);return q}function X7$($){let q=$.request,_=Lv.getOperationRequestInfo(q),K=_===null||_===void 0?void 0:_.shouldDeserialize,P;if(K===void 0)P=!0;else if(typeof K==="boolean")P=K;else P=K($);return P}async function D7$($,q,_,K,P){let w=await S7$($,q,_,K,P);if(!X7$(w))return w;let O=Lv.getOperationRequestInfo(w.request),f=O===null||O===void 0?void 0:O.operationSpec;if(!f||!f.responses)return w;let Y=J7$(w),{error:h,shouldReturnResponse:k}=y7$(w,f,Y,K);if(h)throw h;else if(k)return w;if(Y){if(Y.bodyMapper){let T=w.parsedBody;if(f.isXML&&Y.bodyMapper.type.name===aG.MapperTypeNames.Sequence)T=typeof T==="object"?T[Y.bodyMapper.xmlElementName]:[];try{w.parsedBody=f.serializer.deserialize(Y.bodyMapper,T,"operationRes.parsedBody",K)}catch(p){throw new uO.RestError(`Error ${p} occurred in deserializing the responseBody - ${w.bodyAsText}`,{statusCode:w.status,request:w.request,response:w})}}else if(f.httpMethod==="HEAD")w.parsedBody=_.status>=200&&_.status<300;if(Y.headersMapper)w.parsedHeaders=f.serializer.deserialize(Y.headersMapper,w.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0})}return w}function p7$($){let q=Object.keys($.responses);return q.length===0||q.length===1&&q[0]==="default"}function y7$($,q,_,K){var P;let w=200<=$.status&&$.status<300;if(p7$(q)?w:!!_)if(_){if(!_.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let f=_!==null&&_!==void 0?_:q.responses.default,Y=((P=$.request.streamResponseStatusCodes)===null||P===void 0?void 0:P.has($.status))?`Unexpected status code: ${$.status}`:$.bodyAsText,h=new uO.RestError(Y,{statusCode:$.status,request:$.request,response:$});if(!f)throw h;let{bodyMapper:k,headersMapper:T}=f;try{if($.parsedBody){let p=$.parsedBody,G;if(k){let X=p;if(q.isXML&&k.type.name===aG.MapperTypeNames.Sequence){X=[];let C=k.xmlElementName;if(typeof p==="object"&&C)X=p[C]}G=q.serializer.deserialize(k,X,"error.response.parsedBody",K)}let Z=p.error||G||p;if(h.code=Z.code,Z.message)h.message=Z.message;if(k)h.response.parsedBody=G}if($.headers&&T)h.response.parsedHeaders=q.serializer.deserialize(T,$.headers.toJSON(),"operationRes.parsedHeaders")}catch(p){h.message=`Error "${p.message}" occurred in deserializing the responseBody - "${$.bodyAsText}" for the default response.`}return{error:h,shouldReturnResponse:!1}}async function S7$($,q,_,K,P){var w;if(!((w=_.request.streamResponseStatusCodes)===null||w===void 0?void 0:w.has(_.status))&&_.bodyAsText){let O=_.bodyAsText,f=_.headers.get("Content-Type")||"",Y=!f?[]:f.split(";").map((h)=>h.toLowerCase());try{if(Y.length===0||Y.some((h)=>$.indexOf(h)!==-1))return _.parsedBody=JSON.parse(O),_;else if(Y.some((h)=>q.indexOf(h)!==-1)){if(!P)throw new Error("Parsing XML not supported.");let h=await P(O,K.xml);return _.parsedBody=h,_}}catch(h){let k=`Error "${h}" occurred while parsing the response body - ${_.bodyAsText}.`,T=h.code||uO.RestError.PARSE_ERROR;throw new uO.RestError(k,{code:T,statusCode:_.status,request:_.request,response:_})}}return _}});var RO=y((tG)=>{Object.defineProperty(tG,"__esModule",{value:!0});tG.getPathStringFromParameter=tG.getStreamingResponseStatusCodes=void 0;var G7$=jj();function Z7$($){let q=new Set;for(let _ in $.responses){let K=$.responses[_];if(K.bodyMapper&&K.bodyMapper.type.name===G7$.MapperTypeNames.Stream)q.add(Number(_))}return q}tG.getStreamingResponseStatusCodes=Z7$;function N7$($){let{parameterPath:q,mapper:_}=$,K;if(typeof q==="string")K=q;else if(Array.isArray(q))K=q.join(".");else K=_.serializedName;return K}tG.getPathStringFromParameter=N7$});var Vv=y((FG)=>{Object.defineProperty(FG,"__esModule",{value:!0});FG.serializeRequestBody=FG.serializeHeaders=FG.serializationPolicy=FG.serializationPolicyName=void 0;var rv=Pj(),LO=Yj(),nv=jj(),hj=RO();FG.serializationPolicyName="serializationPolicy";function E7$($={}){let q=$.stringifyXML;return{name:FG.serializationPolicyName,async sendRequest(_,K){let P=LO.getOperationRequestInfo(_),w=P===null||P===void 0?void 0:P.operationSpec,O=P===null||P===void 0?void 0:P.operationArguments;if(w&&O)eG(_,O,w),BG(_,O,w,q);return K(_)}}}FG.serializationPolicy=E7$;function eG($,q,_){var K,P;if(_.headerParameters)for(let O of _.headerParameters){let f=LO.getOperationArgumentValueFromParameter(q,O);if(f!==null&&f!==void 0||O.mapper.required){f=_.serializer.serialize(O.mapper,f,hj.getPathStringFromParameter(O));let Y=O.mapper.headerCollectionPrefix;if(Y)for(let h of Object.keys(f))$.headers.set(Y+h,f[h]);else $.headers.set(O.mapper.serializedName||hj.getPathStringFromParameter(O),f)}}let w=(P=(K=q.options)===null||K===void 0?void 0:K.requestOptions)===null||P===void 0?void 0:P.customHeaders;if(w)for(let O of Object.keys(w))$.headers.set(O,w[O])}FG.serializeHeaders=eG;function BG($,q,_,K=function(){throw new Error("XML serialization unsupported!")}){var P,w,O,f,Y;let h=(P=q.options)===null||P===void 0?void 0:P.serializerOptions,k={xml:{rootName:(w=h===null||h===void 0?void 0:h.xml.rootName)!==null&&w!==void 0?w:"",includeRoot:(O=h===null||h===void 0?void 0:h.xml.includeRoot)!==null&&O!==void 0?O:!1,xmlCharKey:(f=h===null||h===void 0?void 0:h.xml.xmlCharKey)!==null&&f!==void 0?f:rv.XML_CHARKEY}},T=k.xml.xmlCharKey;if(_.requestBody&&_.requestBody.mapper){$.body=LO.getOperationArgumentValueFromParameter(q,_.requestBody);let p=_.requestBody.mapper,{required:G,serializedName:Z,xmlName:X,xmlElementName:C,xmlNamespace:N,xmlNamespacePrefix:L,nullable:m}=p,E=p.type.name;try{if($.body!==void 0&&$.body!==null||m&&$.body===null||G){let W=hj.getPathStringFromParameter(_.requestBody);$.body=_.serializer.serialize(p,$.body,W,k);let V=E===nv.MapperTypeNames.Stream;if(_.isXML){let n=L?`xmlns:${L}`:"xmlns",b=u7$(N,n,E,$.body,k);if(E===nv.MapperTypeNames.Sequence)$.body=K(R7$(b,C||X||Z,n,N),{rootName:X||Z,xmlCharKey:T});else if(!V)$.body=K(b,{rootName:X||Z,xmlCharKey:T})}else if(E===nv.MapperTypeNames.String&&(((Y=_.contentType)===null||Y===void 0?void 0:Y.match("text/plain"))||_.mediaType==="text"))return;else if(!V)$.body=JSON.stringify($.body)}}catch(W){throw new Error(`Error "${W.message}" occurred in serializing the payload - ${JSON.stringify(Z,void 0,"  ")}.`)}}else if(_.formDataParameters&&_.formDataParameters.length>0){$.formData={};for(let p of _.formDataParameters){let G=LO.getOperationArgumentValueFromParameter(q,p);if(G!==void 0&&G!==null){let Z=p.mapper.serializedName||hj.getPathStringFromParameter(p);$.formData[Z]=_.serializer.serialize(p.mapper,G,hj.getPathStringFromParameter(p),k)}}}}FG.serializeRequestBody=BG;function u7$($,q,_,K,P){if($&&!["Composite","Sequence","Dictionary"].includes(_)){let w={};return w[P.xml.xmlCharKey]=K,w[rv.XML_ATTRKEY]={[q]:$},w}return K}function R7$($,q,_,K){if(!Array.isArray($))$=[$];if(!_||!K)return{[q]:$};let P={[q]:$};return P[rv.XML_ATTRKEY]={[_]:K},P}});var xv=y((qZ)=>{Object.defineProperty(qZ,"__esModule",{value:!0});qZ.createClientPipeline=void 0;var n7$=Cv(),$Z=O7(),r7$=Vv();function V7$($={}){let q=$Z.createPipelineFromOptions($!==null&&$!==void 0?$:{});if($.credentialOptions)q.addPolicy($Z.bearerTokenAuthenticationPolicy({credential:$.credentialOptions.credential,scopes:$.credentialOptions.credentialScopes}));return q.addPolicy(r7$.serializationPolicy($.serializationOptions),{phase:"Serialize"}),q.addPolicy(n7$.deserializationPolicy($.deserializationOptions),{phase:"Deserialize"}),q}qZ.createClientPipeline=V7$});var jZ=y((KZ)=>{Object.defineProperty(KZ,"__esModule",{value:!0});KZ.getCachedDefaultHttpClient=void 0;var x7$=O7(),dv;function d7$(){if(!dv)dv=x7$.createDefaultHttpClient();return dv}KZ.getCachedDefaultHttpClient=d7$});var vZ=y((fZ)=>{Object.defineProperty(fZ,"__esModule",{value:!0});fZ.appendQueryParams=fZ.getRequestUrl=void 0;var OZ=Yj(),bv=RO(),b7$={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function o7$($,q,_,K){let P=i7$(q,_,K),w=!1,O=wZ($,P);if(q.path){let h=wZ(q.path,P);if(q.path==="/{nextLink}"&&h.startsWith("/"))h=h.substring(1);if(g7$(h))O=h,w=!0;else O=a7$(O,h)}let{queryParams:f,sequenceParams:Y}=c7$(q,_,K);return O=zZ(O,f,Y,w),O}fZ.getRequestUrl=o7$;function wZ($,q){let _=$;for(let[K,P]of q)_=_.split(K).join(P);return _}function i7$($,q,_){var K;let P=new Map;if((K=$.urlParameters)===null||K===void 0?void 0:K.length)for(let w of $.urlParameters){let O=OZ.getOperationArgumentValueFromParameter(q,w,_),f=bv.getPathStringFromParameter(w);if(O=$.serializer.serialize(w.mapper,O,f),!w.skipEncoding)O=encodeURIComponent(O);P.set(`{${w.mapper.serializedName||f}}`,O)}return P}function g7$($){return $.includes("://")}function a7$($,q){if(!q)return $;let _=new URL($),K=_.pathname;if(!K.endsWith("/"))K=`${K}/`;if(q.startsWith("/"))q=q.substring(1);let P=q.indexOf("?");if(P!==-1){let w=q.substring(0,P),O=q.substring(P+1);if(K=K+w,O)_.search=_.search?`${_.search}&${O}`:O}else K=K+q;return _.pathname=K,_.toString()}function c7$($,q,_){var K;let P=new Map,w=new Set;if((K=$.queryParameters)===null||K===void 0?void 0:K.length)for(let O of $.queryParameters){if(O.mapper.type.name==="Sequence"&&O.mapper.serializedName)w.add(O.mapper.serializedName);let f=OZ.getOperationArgumentValueFromParameter(q,O,_);if(f!==void 0&&f!==null||O.mapper.required){f=$.serializer.serialize(O.mapper,f,bv.getPathStringFromParameter(O));let Y=O.collectionFormat?b7$[O.collectionFormat]:"";if(Array.isArray(f))f=f.map((h)=>{if(h===null||h===void 0)return"";return h});if(O.collectionFormat==="Multi"&&f.length===0)continue;else if(Array.isArray(f)&&(O.collectionFormat==="SSV"||O.collectionFormat==="TSV"))f=f.join(Y);if(!O.skipEncoding)if(Array.isArray(f))f=f.map((h)=>{return encodeURIComponent(h)});else f=encodeURIComponent(f);if(Array.isArray(f)&&(O.collectionFormat==="CSV"||O.collectionFormat==="Pipes"))f=f.join(Y);P.set(O.mapper.serializedName||bv.getPathStringFromParameter(O),f)}}return{queryParams:P,sequenceParams:w}}function I7$($){let q=new Map;if(!$||$[0]!=="?")return q;$=$.slice(1);let _=$.split("&");for(let K of _){let[P,w]=K.split("=",2),O=q.get(P);if(O)if(Array.isArray(O))O.push(w);else q.set(P,[O,w]);else q.set(P,w)}return q}function zZ($,q,_,K=!1){if(q.size===0)return $;let P=new URL($),w=I7$(P.search);for(let[f,Y]of q){let h=w.get(f);if(Array.isArray(h))if(Array.isArray(Y)){h.push(...Y);let k=new Set(h);w.set(f,Array.from(k))}else h.push(Y);else if(h){if(Array.isArray(Y))Y.unshift(h);else if(_.has(f))w.set(f,[h,Y]);if(!K)w.set(f,Y)}else w.set(f,Y)}let O=[];for(let[f,Y]of w)if(typeof Y==="string")O.push(`${f}=${Y}`);else if(Array.isArray(Y))for(let h of Y)O.push(`${f}=${h}`);else O.push(`${f}=${Y}`);return P.search=O.length?`?${O.join("&")}`:"",P.toString()}fZ.appendQueryParams=zZ});var ov=y((HZ)=>{Object.defineProperty(HZ,"__esModule",{value:!0});HZ.logger=void 0;var t7$=Kj();HZ.logger=t7$.createClientLogger("core-client")});var WZ=y((TZ)=>{Object.defineProperty(TZ,"__esModule",{value:!0});TZ.ServiceClient=void 0;var s7$=O7(),e7$=xv(),hZ=SM(),B7$=jZ(),F7$=Yj(),U7$=vZ(),Q7$=RO(),$P$=ov();class kZ{constructor($={}){var q,_;if(this._requestContentType=$.requestContentType,this._endpoint=(q=$.endpoint)!==null&&q!==void 0?q:$.baseUri,$.baseUri)$P$.logger.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead.");if(this._allowInsecureConnection=$.allowInsecureConnection,this._httpClient=$.httpClient||B7$.getCachedDefaultHttpClient(),this.pipeline=$.pipeline||qP$($),(_=$.additionalPolicies)===null||_===void 0?void 0:_.length)for(let{policy:K,position:P}of $.additionalPolicies){let w=P==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(K,{afterPhase:w})}}async sendRequest($){return this.pipeline.sendRequest(this._httpClient,$)}async sendOperationRequest($,q){let _=q.baseUrl||this._endpoint;if(!_)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let K=U7$.getRequestUrl(_,q,$,this),P=s7$.createPipelineRequest({url:K});P.method=q.httpMethod;let w=F7$.getOperationRequestInfo(P);w.operationSpec=q,w.operationArguments=$;let O=q.contentType||this._requestContentType;if(O&&q.requestBody)P.headers.set("Content-Type",O);let f=$.options;if(f){let Y=f.requestOptions;if(Y){if(Y.timeout)P.timeout=Y.timeout;if(Y.onUploadProgress)P.onUploadProgress=Y.onUploadProgress;if(Y.onDownloadProgress)P.onDownloadProgress=Y.onDownloadProgress;if(Y.shouldDeserialize!==void 0)w.shouldDeserialize=Y.shouldDeserialize;if(Y.allowInsecureConnection)P.allowInsecureConnection=!0}if(f.abortSignal)P.abortSignal=f.abortSignal;if(f.tracingOptions)P.tracingOptions=f.tracingOptions}if(this._allowInsecureConnection)P.allowInsecureConnection=!0;if(P.streamResponseStatusCodes===void 0)P.streamResponseStatusCodes=Q7$.getStreamingResponseStatusCodes(q);try{let Y=await this.sendRequest(P),h=hZ.flattenResponse(Y,q.responses[Y.status]);if(f===null||f===void 0?void 0:f.onResponse)f.onResponse(Y,h);return h}catch(Y){if(typeof Y==="object"&&(Y===null||Y===void 0?void 0:Y.response)){let h=Y.response,k=hZ.flattenResponse(h,q.responses[Y.statusCode]||q.responses.default);if(Y.details=k,f===null||f===void 0?void 0:f.onResponse)f.onResponse(h,k,Y)}throw Y}}}TZ.ServiceClient=kZ;function qP$($){let q=_P$($),_=$.credential&&q?{credentialScopes:q,credential:$.credential}:void 0;return e7$.createClientPipeline(Object.assign(Object.assign({},$),{credentialOptions:_}))}function _P$($){if($.credentialScopes)return $.credentialScopes;if($.endpoint)return`${$.endpoint}/.default`;if($.baseUri)return`${$.baseUri}/.default`;if($.credential&&!$.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy");return}});var pZ=y((XZ)=>{Object.defineProperty(XZ,"__esModule",{value:!0});XZ.authorizeRequestOnClaimChallenge=XZ.parseCAEChallenge=void 0;var KP$=ov(),PP$=yM();function JZ($){return`, ${$.trim()}`.split(", Bearer ").filter((_)=>_).map((_)=>{return`${_.trim()}, `.split('", ').filter((w)=>w).map((w)=>(([O,f])=>({[O]:f}))(w.trim().split('="'))).reduce((w,O)=>Object.assign(Object.assign({},w),O),{})})}XZ.parseCAEChallenge=JZ;async function jP$($){let{scopes:q,response:_}=$,K=$.logger||KP$.logger,P=_.headers.get("WWW-Authenticate");if(!P)return K.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let O=(JZ(P)||[]).find((Y)=>Y.claims);if(!O)return K.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let f=await $.getAccessToken(O.scope?[O.scope]:q,{claims:PP$.decodeStringToString(O.claims)});if(!f)return!1;return $.request.headers.set("Authorization",`Bearer ${f.token}`),!0}XZ.authorizeRequestOnClaimChallenge=jP$});var ZZ=y((SZ)=>{Object.defineProperty(SZ,"__esModule",{value:!0});SZ.authorizeRequestOnTenantChallenge=void 0;var yZ={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function OP$($){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test($)}var zP$=async($)=>{let q=YP$($.request),_=vP$($.response);if(_){let K=HP$(_),P=MP$($,K),w=fP$(K);if(!w)return!1;let O=await $.getAccessToken(P,Object.assign(Object.assign({},q),{tenantId:w}));if(!O)return!1;return $.request.headers.set(yZ.HeaderConstants.AUTHORIZATION,`Bearer ${O.token}`),!0}return!1};SZ.authorizeRequestOnTenantChallenge=zP$;function fP$($){let K=new URL($.authorization_uri).pathname.split("/")[1];if(K&&OP$(K))return K;return}function MP$($,q){if(!q.resource_id)return $.scopes;let _=new URL(q.resource_id);_.pathname=yZ.DefaultScope;let K=_.toString();if(K==="https://disk.azure.com/.default")K="https://disk.azure.com//.default";return[K]}function vP$($){let q=$.headers.get("WWW-Authenticate");if($.status===401&&q)return q;return}function HP$($){return`${$.slice(7).trim()} `.split(" ").filter((P)=>P).map((P)=>(([w,O])=>({[w]:O}))(P.trim().split("="))).reduce((P,w)=>Object.assign(Object.assign({},P),w),{})}function YP$($){return{abortSignal:$.abortSignal,requestOptions:{timeout:$.timeout},tracingOptions:$.tracingOptions}}});var RZ=y((W8)=>{Object.defineProperty(W8,"__esModule",{value:!0});W8.authorizeRequestOnTenantChallenge=W8.authorizeRequestOnClaimChallenge=W8.serializationPolicyName=W8.serializationPolicy=W8.deserializationPolicyName=W8.deserializationPolicy=W8.XML_CHARKEY=W8.XML_ATTRKEY=W8.createClientPipeline=W8.ServiceClient=W8.MapperTypeNames=W8.createSerializer=void 0;var NZ=jj();Object.defineProperty(W8,"createSerializer",{enumerable:!0,get:function(){return NZ.createSerializer}});Object.defineProperty(W8,"MapperTypeNames",{enumerable:!0,get:function(){return NZ.MapperTypeNames}});var hP$=WZ();Object.defineProperty(W8,"ServiceClient",{enumerable:!0,get:function(){return hP$.ServiceClient}});var kP$=xv();Object.defineProperty(W8,"createClientPipeline",{enumerable:!0,get:function(){return kP$.createClientPipeline}});var mZ=Pj();Object.defineProperty(W8,"XML_ATTRKEY",{enumerable:!0,get:function(){return mZ.XML_ATTRKEY}});Object.defineProperty(W8,"XML_CHARKEY",{enumerable:!0,get:function(){return mZ.XML_CHARKEY}});var EZ=Cv();Object.defineProperty(W8,"deserializationPolicy",{enumerable:!0,get:function(){return EZ.deserializationPolicy}});Object.defineProperty(W8,"deserializationPolicyName",{enumerable:!0,get:function(){return EZ.deserializationPolicyName}});var uZ=Vv();Object.defineProperty(W8,"serializationPolicy",{enumerable:!0,get:function(){return uZ.serializationPolicy}});Object.defineProperty(W8,"serializationPolicyName",{enumerable:!0,get:function(){return uZ.serializationPolicyName}});var TP$=pZ();Object.defineProperty(W8,"authorizeRequestOnClaimChallenge",{enumerable:!0,get:function(){return TP$.authorizeRequestOnClaimChallenge}});var AP$=ZZ();Object.defineProperty(W8,"authorizeRequestOnTenantChallenge",{enumerable:!0,get:function(){return AP$.authorizeRequestOnTenantChallenge}})});var iv=y((LZ)=>{Object.defineProperty(LZ,"__esModule",{value:!0});LZ.default=DP$;var JP$=XP$(i("crypto"));function XP$($){return $&&$.__esModule?$:{default:$}}var nO=new Uint8Array(256),CO=nO.length;function DP$(){if(CO>nO.length-16)JP$.default.randomFillSync(nO),CO=0;return nO.slice(CO,CO+=16)}});var rZ=y((CZ)=>{Object.defineProperty(CZ,"__esModule",{value:!0});CZ.default=void 0;var yP$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;CZ.default=yP$});var kj=y((VZ)=>{Object.defineProperty(VZ,"__esModule",{value:!0});VZ.default=void 0;var SP$=GP$(rZ());function GP$($){return $&&$.__esModule?$:{default:$}}function ZP$($){return typeof $==="string"&&SP$.default.test($)}var NP$=ZP$;VZ.default=NP$});var Tj=y((dZ)=>{Object.defineProperty(dZ,"__esModule",{value:!0});dZ.default=void 0;var mP$=EP$(kj());function EP$($){return $&&$.__esModule?$:{default:$}}var C6=[];for(let $=0;$<256;++$)C6.push(($+256).toString(16).substr(1));function uP$($,q=0){let _=(C6[$[q+0]]+C6[$[q+1]]+C6[$[q+2]]+C6[$[q+3]]+"-"+C6[$[q+4]]+C6[$[q+5]]+"-"+C6[$[q+6]]+C6[$[q+7]]+"-"+C6[$[q+8]]+C6[$[q+9]]+"-"+C6[$[q+10]]+C6[$[q+11]]+C6[$[q+12]]+C6[$[q+13]]+C6[$[q+14]]+C6[$[q+15]]).toLowerCase();if(!mP$.default(_))throw TypeError("Stringified UUID is invalid");return _}var RP$=uP$;dZ.default=RP$});var cZ=y((gZ)=>{Object.defineProperty(gZ,"__esModule",{value:!0});gZ.default=void 0;var LP$=iZ(iv()),CP$=iZ(Tj());function iZ($){return $&&$.__esModule?$:{default:$}}var oZ,gv,av=0,cv=0;function nP$($,q,_){let K=q&&_||0,P=q||new Array(16);$=$||{};let w=$.node||oZ,O=$.clockseq!==void 0?$.clockseq:gv;if(w==null||O==null){let p=$.random||($.rng||LP$.default)();if(w==null)w=oZ=[p[0]|1,p[1],p[2],p[3],p[4],p[5]];if(O==null)O=gv=(p[6]<<8|p[7])&16383}let f=$.msecs!==void 0?$.msecs:Date.now(),Y=$.nsecs!==void 0?$.nsecs:cv+1,h=f-av+(Y-cv)/1e4;if(h<0&&$.clockseq===void 0)O=O+1&16383;if((h<0||f>av)&&$.nsecs===void 0)Y=0;if(Y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");av=f,cv=Y,gv=O,f+=12219292800000;let k=((f&268435455)*1e4+Y)%4294967296;P[K++]=k>>>24&255,P[K++]=k>>>16&255,P[K++]=k>>>8&255,P[K++]=k&255;let T=f/4294967296*1e4&268435455;P[K++]=T>>>8&255,P[K++]=T&255,P[K++]=T>>>24&15|16,P[K++]=T>>>16&255,P[K++]=O>>>8|128,P[K++]=O&255;for(let p=0;p<6;++p)P[K+p]=w[p];return q||CP$.default(P)}var rP$=nP$;gZ.default=rP$});var Iv=y((IZ)=>{Object.defineProperty(IZ,"__esModule",{value:!0});IZ.default=void 0;var VP$=xP$(kj());function xP$($){return $&&$.__esModule?$:{default:$}}function dP$($){if(!VP$.default($))throw TypeError("Invalid UUID");let q,_=new Uint8Array(16);return _[0]=(q=parseInt($.slice(0,8),16))>>>24,_[1]=q>>>16&255,_[2]=q>>>8&255,_[3]=q&255,_[4]=(q=parseInt($.slice(9,13),16))>>>8,_[5]=q&255,_[6]=(q=parseInt($.slice(14,18),16))>>>8,_[7]=q&255,_[8]=(q=parseInt($.slice(19,23),16))>>>8,_[9]=q&255,_[10]=(q=parseInt($.slice(24,36),16))/1099511627776&255,_[11]=q/4294967296&255,_[12]=q>>>24&255,_[13]=q>>>16&255,_[14]=q>>>8&255,_[15]=q&255,_}var bP$=dP$;IZ.default=bP$});var lv=y((BZ)=>{Object.defineProperty(BZ,"__esModule",{value:!0});BZ.default=aP$;BZ.URL=BZ.DNS=void 0;var oP$=tZ(Tj()),iP$=tZ(Iv());function tZ($){return $&&$.__esModule?$:{default:$}}function gP$($){$=unescape(encodeURIComponent($));let q=[];for(let _=0;_<$.length;++_)q.push($.charCodeAt(_));return q}var sZ="6ba7b810-9dad-11d1-80b4-00c04fd430c8";BZ.DNS=sZ;var eZ="6ba7b811-9dad-11d1-80b4-00c04fd430c8";BZ.URL=eZ;function aP$($,q,_){function K(P,w,O,f){if(typeof P==="string")P=gP$(P);if(typeof w==="string")w=iP$.default(w);if(w.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let Y=new Uint8Array(16+P.length);if(Y.set(w),Y.set(P,w.length),Y=_(Y),Y[6]=Y[6]&15|q,Y[8]=Y[8]&63|128,O){f=f||0;for(let h=0;h<16;++h)O[f+h]=Y[h];return O}return oP$.default(Y)}try{K.name=$}catch(P){}return K.DNS=sZ,K.URL=eZ,K}});var $N=y((UZ)=>{Object.defineProperty(UZ,"__esModule",{value:!0});UZ.default=void 0;var lP$=tP$(i("crypto"));function tP$($){return $&&$.__esModule?$:{default:$}}function sP$($){if(Array.isArray($))$=Buffer.from($);else if(typeof $==="string")$=Buffer.from($,"utf8");return lP$.default.createHash("md5").update($).digest()}var eP$=sP$;UZ.default=eP$});var PN=y((_N)=>{Object.defineProperty(_N,"__esModule",{value:!0});_N.default=void 0;var BP$=qN(lv()),FP$=qN($N());function qN($){return $&&$.__esModule?$:{default:$}}var UP$=BP$.default("v3",48,FP$.default),QP$=UP$;_N.default=QP$});var zN=y((wN)=>{Object.defineProperty(wN,"__esModule",{value:!0});wN.default=void 0;var $j$=jN(iv()),qj$=jN(Tj());function jN($){return $&&$.__esModule?$:{default:$}}function _j$($,q,_){$=$||{};let K=$.random||($.rng||$j$.default)();if(K[6]=K[6]&15|64,K[8]=K[8]&63|128,q){_=_||0;for(let P=0;P<16;++P)q[_+P]=K[P];return q}return qj$.default(K)}var Kj$=_j$;wN.default=Kj$});var vN=y((fN)=>{Object.defineProperty(fN,"__esModule",{value:!0});fN.default=void 0;var Pj$=jj$(i("crypto"));function jj$($){return $&&$.__esModule?$:{default:$}}function wj$($){if(Array.isArray($))$=Buffer.from($);else if(typeof $==="string")$=Buffer.from($,"utf8");return Pj$.default.createHash("sha1").update($).digest()}var Oj$=wj$;fN.default=Oj$});var kN=y((YN)=>{Object.defineProperty(YN,"__esModule",{value:!0});YN.default=void 0;var zj$=HN(lv()),fj$=HN(vN());function HN($){return $&&$.__esModule?$:{default:$}}var Mj$=zj$.default("v5",80,fj$.default),vj$=Mj$;YN.default=vj$});var WN=y((TN)=>{Object.defineProperty(TN,"__esModule",{value:!0});TN.default=void 0;var Hj$="00000000-0000-0000-0000-000000000000";TN.default=Hj$});var DN=y((JN)=>{Object.defineProperty(JN,"__esModule",{value:!0});JN.default=void 0;var Yj$=hj$(kj());function hj$($){return $&&$.__esModule?$:{default:$}}function kj$($){if(!Yj$.default($))throw TypeError("Invalid UUID");return parseInt($.substr(14,1),16)}var Tj$=kj$;JN.default=Tj$});var pN=y((Dq)=>{Object.defineProperty(Dq,"__esModule",{value:!0});Object.defineProperty(Dq,"v1",{enumerable:!0,get:function(){return Aj$.default}});Object.defineProperty(Dq,"v3",{enumerable:!0,get:function(){return Wj$.default}});Object.defineProperty(Dq,"v4",{enumerable:!0,get:function(){return Jj$.default}});Object.defineProperty(Dq,"v5",{enumerable:!0,get:function(){return Xj$.default}});Object.defineProperty(Dq,"NIL",{enumerable:!0,get:function(){return Dj$.default}});Object.defineProperty(Dq,"version",{enumerable:!0,get:function(){return pj$.default}});Object.defineProperty(Dq,"validate",{enumerable:!0,get:function(){return yj$.default}});Object.defineProperty(Dq,"stringify",{enumerable:!0,get:function(){return Sj$.default}});Object.defineProperty(Dq,"parse",{enumerable:!0,get:function(){return Gj$.default}});var Aj$=G_(cZ()),Wj$=G_(PN()),Jj$=G_(zN()),Xj$=G_(kN()),Dj$=G_(WN()),pj$=G_(DN()),yj$=G_(kj()),Sj$=G_(Tj()),Gj$=G_(Iv());function G_($){return $&&$.__esModule?$:{default:$}}});var IK=y((tv,SN)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var rO=i("buffer"),sq=rO.Buffer;function yN($,q){for(var _ in $)q[_]=$[_]}if(sq.from&&sq.alloc&&sq.allocUnsafe&&sq.allocUnsafeSlow)SN.exports=rO;else yN(rO,tv),tv.Buffer=cK;function cK($,q,_){return sq($,q,_)}cK.prototype=Object.create(sq.prototype);yN(sq,cK);cK.from=function($,q,_){if(typeof $==="number")throw new TypeError("Argument must not be a number");return sq($,q,_)};cK.alloc=function($,q,_){if(typeof $!=="number")throw new TypeError("Argument must be a number");var K=sq($);if(q!==void 0)if(typeof _==="string")K.fill(q,_);else K.fill(q);else K.fill(0);return K};cK.allocUnsafe=function($){if(typeof $!=="number")throw new TypeError("Argument must be a number");return sq($)};cK.allocUnsafeSlow=function($){if(typeof $!=="number")throw new TypeError("Argument must be a number");return rO.SlowBuffer($)}});var sv=y((lu$,GN)=>{var VO=IK().Buffer,Zj$=i("stream"),Nj$=i("util");function xO($){if(this.buffer=null,this.writable=!0,this.readable=!0,!$)return this.buffer=VO.alloc(0),this;if(typeof $.pipe==="function")return this.buffer=VO.alloc(0),$.pipe(this),this;if($.length||typeof $==="object")return this.buffer=$,this.writable=!1,process.nextTick(function(){this.emit("end",$),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof $+")")}Nj$.inherits(xO,Zj$);xO.prototype.write=function $(q){this.buffer=VO.concat([this.buffer,VO.from(q)]),this.emit("data",q)};xO.prototype.end=function $(q){if(q)this.write(q);this.emit("end",q),this.emit("close"),this.writable=!1,this.readable=!1};GN.exports=xO});var NN=y((tu$,ZN)=>{var Aj=i("buffer").Buffer,ev=i("buffer").SlowBuffer;ZN.exports=dO;function dO($,q){if(!Aj.isBuffer($)||!Aj.isBuffer(q))return!1;if($.length!==q.length)return!1;var _=0;for(var K=0;K<$.length;K++)_|=$[K]^q[K];return _===0}dO.install=function(){Aj.prototype.equal=ev.prototype.equal=function $(q){return dO(this,q)}};var mj$=Aj.prototype.equal,Ej$=ev.prototype.equal;dO.restore=function(){Aj.prototype.equal=mj$,ev.prototype.equal=Ej$}});var EN=y((su$,mN)=>{function Bv($){var q=($/8|0)+($%8===0?0:1);return q}var uj$={ES256:Bv(256),ES384:Bv(384),ES512:Bv(521)};function Rj$($){var q=uj$[$];if(q)return q;throw new Error('Unknown algorithm "'+$+'"')}mN.exports=Rj$});var VN=y((eu$,rN)=>{var bO=IK().Buffer,RN=EN(),oO=128,LN=0,Lj$=32,Cj$=16,nj$=2,CN=Cj$|Lj$|LN<<6,iO=nj$|LN<<6;function rj$($){return $.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nN($){if(bO.isBuffer($))return $;else if(typeof $==="string")return bO.from($,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Vj$($,q){$=nN($);var _=RN(q),K=_+1,P=$.length,w=0;if($[w++]!==CN)throw new Error('Could not find expected "seq"');var O=$[w++];if(O===(oO|1))O=$[w++];if(P-w<O)throw new Error('"seq" specified length of "'+O+'", only "'+(P-w)+'" remaining');if($[w++]!==iO)throw new Error('Could not find expected "int" for "r"');var f=$[w++];if(P-w-2<f)throw new Error('"r" specified length of "'+f+'", only "'+(P-w-2)+'" available');if(K<f)throw new Error('"r" specified length of "'+f+'", max of "'+K+'" is acceptable');var Y=w;if(w+=f,$[w++]!==iO)throw new Error('Could not find expected "int" for "s"');var h=$[w++];if(P-w!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(P-w)+'"');if(K<h)throw new Error('"s" specified length of "'+h+'", max of "'+K+'" is acceptable');var k=w;if(w+=h,w!==P)throw new Error('Expected to consume entire buffer, but "'+(P-w)+'" bytes remain');var T=_-f,p=_-h,G=bO.allocUnsafe(T+f+p+h);for(w=0;w<T;++w)G[w]=0;$.copy(G,w,Y+Math.max(-T,0),Y+f),w=_;for(var Z=w;w<Z+p;++w)G[w]=0;return $.copy(G,w,k+Math.max(-p,0),k+h),G=G.toString("base64"),G=rj$(G),G}function uN($,q,_){var K=0;while(q+K<_&&$[q+K]===0)++K;var P=$[q+K]>=oO;if(P)--K;return K}function xj$($,q){$=nN($);var _=RN(q),K=$.length;if(K!==_*2)throw new TypeError('"'+q+'" signatures must be "'+_*2+'" bytes, saw "'+K+'"');var P=uN($,0,_),w=uN($,_,$.length),O=_-P,f=_-w,Y=2+O+1+1+f,h=Y<oO,k=bO.allocUnsafe((h?2:3)+Y),T=0;if(k[T++]=CN,h)k[T++]=Y;else k[T++]=oO|1,k[T++]=Y&255;if(k[T++]=iO,k[T++]=O,P<0)k[T++]=0,T+=$.copy(k,T,0,_);else T+=$.copy(k,T,P,_);if(k[T++]=iO,k[T++]=f,w<0)k[T++]=0,$.copy(k,T,_);else $.copy(k,T,_+w);return k}rN.exports={derToJose:Vj$,joseToDer:xj$}});var Qv=y((Bu$,IN)=>{var dj$=NN(),f7=IK().Buffer,eq=i("crypto"),dN=VN(),xN=i("util"),bj$=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Wj="secret must be a string or buffer",z7="key must be a string or a buffer",oj$="key must be a string, a buffer or an object",Fv=typeof eq.createPublicKey==="function";if(Fv)z7+=" or a KeyObject",Wj+="or a KeyObject";function bN($){if(f7.isBuffer($))return;if(typeof $==="string")return;if(!Fv)throw pq(z7);if(typeof $!=="object")throw pq(z7);if(typeof $.type!=="string")throw pq(z7);if(typeof $.asymmetricKeyType!=="string")throw pq(z7);if(typeof $.export!=="function")throw pq(z7)}function oN($){if(f7.isBuffer($))return;if(typeof $==="string")return;if(typeof $==="object")return;throw pq(oj$)}function ij$($){if(f7.isBuffer($))return;if(typeof $==="string")return $;if(!Fv)throw pq(Wj);if(typeof $!=="object")throw pq(Wj);if($.type!=="secret")throw pq(Wj);if(typeof $.export!=="function")throw pq(Wj)}function Uv($){return $.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function iN($){$=$.toString();var q=4-$.length%4;if(q!==4)for(var _=0;_<q;++_)$+="=";return $.replace(/\-/g,"+").replace(/_/g,"/")}function pq($){var q=[].slice.call(arguments,1),_=xN.format.bind(xN,$).apply(null,q);return new TypeError(_)}function gj$($){return f7.isBuffer($)||typeof $==="string"}function Jj($){if(!gj$($))$=JSON.stringify($);return $}function gN($){return function q(_,K){ij$(K),_=Jj(_);var P=eq.createHmac("sha"+$,K),w=(P.update(_),P.digest("base64"));return Uv(w)}}function aj$($){return function q(_,K,P){var w=gN($)(_,P);return dj$(f7.from(K),f7.from(w))}}function aN($){return function q(_,K){oN(K),_=Jj(_);var P=eq.createSign("RSA-SHA"+$),w=(P.update(_),P.sign(K,"base64"));return Uv(w)}}function cN($){return function q(_,K,P){bN(P),_=Jj(_),K=iN(K);var w=eq.createVerify("RSA-SHA"+$);return w.update(_),w.verify(P,K,"base64")}}function cj$($){return function q(_,K){oN(K),_=Jj(_);var P=eq.createSign("RSA-SHA"+$),w=(P.update(_),P.sign({key:K,padding:eq.constants.RSA_PKCS1_PSS_PADDING,saltLength:eq.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Uv(w)}}function Ij$($){return function q(_,K,P){bN(P),_=Jj(_),K=iN(K);var w=eq.createVerify("RSA-SHA"+$);return w.update(_),w.verify({key:P,padding:eq.constants.RSA_PKCS1_PSS_PADDING,saltLength:eq.constants.RSA_PSS_SALTLEN_DIGEST},K,"base64")}}function lj$($){var q=aN($);return function _(){var K=q.apply(null,arguments);return K=dN.derToJose(K,"ES"+$),K}}function tj$($){var q=cN($);return function _(K,P,w){P=dN.joseToDer(P,"ES"+$).toString("base64");var O=q(K,P,w);return O}}function sj$(){return function $(){return""}}function ej$(){return function $(q,_){return _===""}}IN.exports=function $(q){var _={hs:gN,rs:aN,ps:cj$,es:lj$,none:sj$},K={hs:aj$,rs:cN,ps:Ij$,es:tj$,none:ej$},P=q.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!P)throw pq(bj$,q);var w=(P[1]||P[3]).toLowerCase(),O=P[2];return{sign:_[w](O),verify:K[w](O)}}});var $1=y((Fu$,lN)=>{var Bj$=i("buffer").Buffer;lN.exports=function $(q){if(typeof q==="string")return q;if(typeof q==="number"||Bj$.isBuffer(q))return q.toString();return JSON.stringify(q)}});var UN=y((Uu$,FN)=>{var Fj$=IK().Buffer,tN=sv(),Uj$=Qv(),Qj$=i("stream"),sN=$1(),q1=i("util");function eN($,q){return Fj$.from($,q).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $3$($,q,_){_=_||"utf8";var K=eN(sN($),"binary"),P=eN(sN(q),_);return q1.format("%s.%s",K,P)}function BN($){var{header:q,payload:_}=$,K=$.secret||$.privateKey,P=$.encoding,w=Uj$(q.alg),O=$3$(q,_,P),f=w.sign(O,K);return q1.format("%s.%s",O,f)}function gO($){var q=$.secret||$.privateKey||$.key,_=new tN(q);this.readable=!0,this.header=$.header,this.encoding=$.encoding,this.secret=this.privateKey=this.key=_,this.payload=new tN($.payload),this.secret.once("close",function(){if(!this.payload.writable&&this.readable)this.sign()}.bind(this)),this.payload.once("close",function(){if(!this.secret.writable&&this.readable)this.sign()}.bind(this))}q1.inherits(gO,Qj$);gO.prototype.sign=function $(){try{var q=BN({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",q),this.emit("data",q),this.emit("end"),this.readable=!1,q}catch(_){this.readable=!1,this.emit("error",_),this.emit("close")}};gO.sign=BN;FN.exports=gO});var zm=y((Qu$,Om)=>{var $m=IK().Buffer,QN=sv(),q3$=Qv(),_3$=i("stream"),qm=$1(),K3$=i("util"),P3$=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function j3$($){return Object.prototype.toString.call($)==="[object Object]"}function w3$($){if(j3$($))return $;try{return JSON.parse($)}catch(q){return}}function _m($){var q=$.split(".",1)[0];return w3$($m.from(q,"base64").toString("binary"))}function O3$($){return $.split(".",2).join(".")}function Km($){return $.split(".")[2]}function z3$($,q){q=q||"utf8";var _=$.split(".")[1];return $m.from(_,"base64").toString(q)}function Pm($){return P3$.test($)&&!!_m($)}function jm($,q,_){if(!q){var K=new Error("Missing algorithm parameter for jws.verify");throw K.code="MISSING_ALGORITHM",K}$=qm($);var P=Km($),w=O3$($),O=q3$(q);return O.verify(w,P,_)}function wm($,q){if(q=q||{},$=qm($),!Pm($))return null;var _=_m($);if(!_)return null;var K=z3$($);if(_.typ==="JWT"||q.json)K=JSON.parse(K,q.encoding);return{header:_,payload:K,signature:Km($)}}function M7($){$=$||{};var q=$.secret||$.publicKey||$.key,_=new QN(q);this.readable=!0,this.algorithm=$.algorithm,this.encoding=$.encoding,this.secret=this.publicKey=this.key=_,this.signature=new QN($.signature),this.secret.once("close",function(){if(!this.signature.writable&&this.readable)this.verify()}.bind(this)),this.signature.once("close",function(){if(!this.secret.writable&&this.readable)this.verify()}.bind(this))}K3$.inherits(M7,_3$);M7.prototype.verify=function $(){try{var q=jm(this.signature.buffer,this.algorithm,this.key.buffer),_=wm(this.signature.buffer,this.encoding);return this.emit("done",q,_),this.emit("data",q),this.emit("end"),this.readable=!1,q}catch(K){this.readable=!1,this.emit("error",K),this.emit("close")}};M7.decode=wm;M7.isValid=Pm;M7.verify=jm;Om.exports=M7});var cO=y((M3$)=>{var fm=UN(),aO=zm(),f3$=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];M3$.ALGORITHMS=f3$;M3$.sign=fm.sign;M3$.verify=aO.verify;M3$.decode=aO.decode;M3$.isValid=aO.isValid;M3$.createSign=function $(q){return new fm(q)};M3$.createVerify=function $(q){return new aO(q)}});var _1=y((qR$,Mm)=>{var W3$=cO();Mm.exports=function($,q){q=q||{};var _=W3$.decode($,q);if(!_)return null;var K=_.payload;if(typeof K==="string")try{var P=JSON.parse(K);if(P!==null&&typeof P==="object")K=P}catch(w){}if(q.complete===!0)return{header:_.header,payload:K,signature:_.signature};return K}});var Xj=y((_R$,vm)=>{var IO=function($,q){if(Error.call(this,$),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);if(this.name="JsonWebTokenError",this.message=$,q)this.inner=q};IO.prototype=Object.create(Error.prototype);IO.prototype.constructor=IO;vm.exports=IO});var K1=y((KR$,Ym)=>{var Hm=Xj(),lO=function($,q){Hm.call(this,$),this.name="NotBeforeError",this.date=q};lO.prototype=Object.create(Hm.prototype);lO.prototype.constructor=lO;Ym.exports=lO});var P1=y((PR$,km)=>{var hm=Xj(),tO=function($,q){hm.call(this,$),this.name="TokenExpiredError",this.expiredAt=q};tO.prototype=Object.create(hm.prototype);tO.prototype.constructor=tO;km.exports=tO});var j1=y((jR$,Tm)=>{var J3$=Jw();Tm.exports=function($,q){var _=q||Math.floor(Date.now()/1000);if(typeof $==="string"){var K=J3$($);if(typeof K==="undefined")return;return Math.floor(_+K/1000)}else if(typeof $==="number")return _+$;else return}});var Dj=y((wR$,Am)=>{var X3$=Number.MAX_SAFE_INTEGER||9007199254740991,D3$=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Am.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:X3$,RELEASE_TYPES:D3$,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var pj=y((OR$,Wm)=>{var p3$=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...$)=>console.error("SEMVER",...$):()=>{};Wm.exports=p3$});var v7=y((Z_,Jm)=>{var{MAX_SAFE_COMPONENT_LENGTH:w1,MAX_SAFE_BUILD_LENGTH:y3$,MAX_LENGTH:S3$}=Dj(),G3$=pj();Z_=Jm.exports={};var Z3$=Z_.re=[],N3$=Z_.safeRe=[],B=Z_.src=[],F=Z_.t={},m3$=0,O1="[a-zA-Z0-9-]",E3$=[["\\s",1],["\\d",S3$],[O1,y3$]],u3$=($)=>{for(let[q,_]of E3$)$=$.split(`${q}*`).join(`${q}{0,${_}}`).split(`${q}+`).join(`${q}{1,${_}}`);return $},k$=($,q,_)=>{let K=u3$(q),P=m3$++;G3$($,P,q),F[$]=P,B[P]=q,Z3$[P]=new RegExp(q,_?"g":void 0),N3$[P]=new RegExp(K,_?"g":void 0)};k$("NUMERICIDENTIFIER","0|[1-9]\\d*");k$("NUMERICIDENTIFIERLOOSE","\\d+");k$("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${O1}*`);k$("MAINVERSION",`(${B[F.NUMERICIDENTIFIER]})\\.(${B[F.NUMERICIDENTIFIER]})\\.(${B[F.NUMERICIDENTIFIER]})`);k$("MAINVERSIONLOOSE",`(${B[F.NUMERICIDENTIFIERLOOSE]})\\.(${B[F.NUMERICIDENTIFIERLOOSE]})\\.(${B[F.NUMERICIDENTIFIERLOOSE]})`);k$("PRERELEASEIDENTIFIER",`(?:${B[F.NUMERICIDENTIFIER]}|${B[F.NONNUMERICIDENTIFIER]})`);k$("PRERELEASEIDENTIFIERLOOSE",`(?:${B[F.NUMERICIDENTIFIERLOOSE]}|${B[F.NONNUMERICIDENTIFIER]})`);k$("PRERELEASE",`(?:-(${B[F.PRERELEASEIDENTIFIER]}(?:\\.${B[F.PRERELEASEIDENTIFIER]})*))`);k$("PRERELEASELOOSE",`(?:-?(${B[F.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${B[F.PRERELEASEIDENTIFIERLOOSE]})*))`);k$("BUILDIDENTIFIER",`${O1}+`);k$("BUILD",`(?:\\+(${B[F.BUILDIDENTIFIER]}(?:\\.${B[F.BUILDIDENTIFIER]})*))`);k$("FULLPLAIN",`v?${B[F.MAINVERSION]}${B[F.PRERELEASE]}?${B[F.BUILD]}?`);k$("FULL",`^${B[F.FULLPLAIN]}$`);k$("LOOSEPLAIN",`[v=\\s]*${B[F.MAINVERSIONLOOSE]}${B[F.PRERELEASELOOSE]}?${B[F.BUILD]}?`);k$("LOOSE",`^${B[F.LOOSEPLAIN]}$`);k$("GTLT","((?:<|>)?=?)");k$("XRANGEIDENTIFIERLOOSE",`${B[F.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);k$("XRANGEIDENTIFIER",`${B[F.NUMERICIDENTIFIER]}|x|X|\\*`);k$("XRANGEPLAIN",`[v=\\s]*(${B[F.XRANGEIDENTIFIER]})(?:\\.(${B[F.XRANGEIDENTIFIER]})(?:\\.(${B[F.XRANGEIDENTIFIER]})(?:${B[F.PRERELEASE]})?${B[F.BUILD]}?)?)?`);k$("XRANGEPLAINLOOSE",`[v=\\s]*(${B[F.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[F.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[F.XRANGEIDENTIFIERLOOSE]})(?:${B[F.PRERELEASELOOSE]})?${B[F.BUILD]}?)?)?`);k$("XRANGE",`^${B[F.GTLT]}\\s*${B[F.XRANGEPLAIN]}$`);k$("XRANGELOOSE",`^${B[F.GTLT]}\\s*${B[F.XRANGEPLAINLOOSE]}$`);k$("COERCEPLAIN",`(^|[^\\d])(\\d{1,${w1}})(?:\\.(\\d{1,${w1}}))?(?:\\.(\\d{1,${w1}}))?`);k$("COERCE",`${B[F.COERCEPLAIN]}(?:$|[^\\d])`);k$("COERCEFULL",B[F.COERCEPLAIN]+`(?:${B[F.PRERELEASE]})?(?:${B[F.BUILD]})?(?:$|[^\\d])`);k$("COERCERTL",B[F.COERCE],!0);k$("COERCERTLFULL",B[F.COERCEFULL],!0);k$("LONETILDE","(?:~>?)");k$("TILDETRIM",`(\\s*)${B[F.LONETILDE]}\\s+`,!0);Z_.tildeTrimReplace="$1~";k$("TILDE",`^${B[F.LONETILDE]}${B[F.XRANGEPLAIN]}$`);k$("TILDELOOSE",`^${B[F.LONETILDE]}${B[F.XRANGEPLAINLOOSE]}$`);k$("LONECARET","(?:\\^)");k$("CARETTRIM",`(\\s*)${B[F.LONECARET]}\\s+`,!0);Z_.caretTrimReplace="$1^";k$("CARET",`^${B[F.LONECARET]}${B[F.XRANGEPLAIN]}$`);k$("CARETLOOSE",`^${B[F.LONECARET]}${B[F.XRANGEPLAINLOOSE]}$`);k$("COMPARATORLOOSE",`^${B[F.GTLT]}\\s*(${B[F.LOOSEPLAIN]})$|^$`);k$("COMPARATOR",`^${B[F.GTLT]}\\s*(${B[F.FULLPLAIN]})$|^$`);k$("COMPARATORTRIM",`(\\s*)${B[F.GTLT]}\\s*(${B[F.LOOSEPLAIN]}|${B[F.XRANGEPLAIN]})`,!0);Z_.comparatorTrimReplace="$1$2$3";k$("HYPHENRANGE",`^\\s*(${B[F.XRANGEPLAIN]})\\s+-\\s+(${B[F.XRANGEPLAIN]})\\s*$`);k$("HYPHENRANGELOOSE",`^\\s*(${B[F.XRANGEPLAINLOOSE]})\\s+-\\s+(${B[F.XRANGEPLAINLOOSE]})\\s*$`);k$("STAR","(<|>)?=?\\s*\\*");k$("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");k$("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var sO=y((zR$,Xm)=>{var R3$=Object.freeze({loose:!0}),L3$=Object.freeze({}),C3$=($)=>{if(!$)return L3$;if(typeof $!=="object")return R3$;return $};Xm.exports=C3$});var z1=y((fR$,ym)=>{var Dm=/^[0-9]+$/,pm=($,q)=>{let _=Dm.test($),K=Dm.test(q);if(_&&K)$=+$,q=+q;return $===q?0:_&&!K?-1:K&&!_?1:$<q?-1:1},n3$=($,q)=>pm(q,$);ym.exports={compareIdentifiers:pm,rcompareIdentifiers:n3$}});var I6=y((MR$,Nm)=>{var eO=pj(),{MAX_LENGTH:Sm,MAX_SAFE_INTEGER:BO}=Dj(),{safeRe:Gm,t:Zm}=v7(),r3$=sO(),{compareIdentifiers:H7}=z1();class yq{constructor($,q){if(q=r3$(q),$ instanceof yq)if($.loose===!!q.loose&&$.includePrerelease===!!q.includePrerelease)return $;else $=$.version;else if(typeof $!=="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof $}".`);if($.length>Sm)throw new TypeError(`version is longer than ${Sm} characters`);eO("SemVer",$,q),this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease;let _=$.trim().match(q.loose?Gm[Zm.LOOSE]:Gm[Zm.FULL]);if(!_)throw new TypeError(`Invalid Version: ${$}`);if(this.raw=$,this.major=+_[1],this.minor=+_[2],this.patch=+_[3],this.major>BO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>BO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>BO||this.patch<0)throw new TypeError("Invalid patch version");if(!_[4])this.prerelease=[];else this.prerelease=_[4].split(".").map((K)=>{if(/^[0-9]+$/.test(K)){let P=+K;if(P>=0&&P<BO)return P}return K});this.build=_[5]?_[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare($){if(eO("SemVer.compare",this.version,this.options,$),!($ instanceof yq)){if(typeof $==="string"&&$===this.version)return 0;$=new yq($,this.options)}if($.version===this.version)return 0;return this.compareMain($)||this.comparePre($)}compareMain($){if(!($ instanceof yq))$=new yq($,this.options);return H7(this.major,$.major)||H7(this.minor,$.minor)||H7(this.patch,$.patch)}comparePre($){if(!($ instanceof yq))$=new yq($,this.options);if(this.prerelease.length&&!$.prerelease.length)return-1;else if(!this.prerelease.length&&$.prerelease.length)return 1;else if(!this.prerelease.length&&!$.prerelease.length)return 0;let q=0;do{let _=this.prerelease[q],K=$.prerelease[q];if(eO("prerelease compare",q,_,K),_===void 0&&K===void 0)return 0;else if(K===void 0)return 1;else if(_===void 0)return-1;else if(_===K)continue;else return H7(_,K)}while(++q)}compareBuild($){if(!($ instanceof yq))$=new yq($,this.options);let q=0;do{let _=this.build[q],K=$.build[q];if(eO("build compare",q,_,K),_===void 0&&K===void 0)return 0;else if(K===void 0)return 1;else if(_===void 0)return-1;else if(_===K)continue;else return H7(_,K)}while(++q)}inc($,q,_){switch($){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",q,_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",q,_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",q,_),this.inc("pre",q,_);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",q,_);this.inc("pre",q,_);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let K=Number(_)?1:0;if(!q&&_===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[K];else{let P=this.prerelease.length;while(--P>=0)if(typeof this.prerelease[P]==="number")this.prerelease[P]++,P=-2;if(P===-1){if(q===this.prerelease.join(".")&&_===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(K)}}if(q){let P=[q,K];if(_===!1)P=[q];if(H7(this.prerelease[0],q)===0){if(isNaN(this.prerelease[1]))this.prerelease=P}else this.prerelease=P}break}default:throw new Error(`invalid increment argument: ${$}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}Nm.exports=yq});var lK=y((vR$,Em)=>{var mm=I6(),V3$=($,q,_=!1)=>{if($ instanceof mm)return $;try{return new mm($,q)}catch(K){if(!_)return null;throw K}};Em.exports=V3$});var Rm=y((HR$,um)=>{var x3$=lK(),d3$=($,q)=>{let _=x3$($,q);return _?_.version:null};um.exports=d3$});var Cm=y((YR$,Lm)=>{var b3$=lK(),o3$=($,q)=>{let _=b3$($.trim().replace(/^[=v]+/,""),q);return _?_.version:null};Lm.exports=o3$});var Vm=y((hR$,rm)=>{var nm=I6(),i3$=($,q,_,K,P)=>{if(typeof _==="string")P=K,K=_,_=void 0;try{return new nm($ instanceof nm?$.version:$,_).inc(q,K,P).version}catch(w){return null}};rm.exports=i3$});var bm=y((kR$,dm)=>{var xm=lK(),g3$=($,q)=>{let _=xm($,null,!0),K=xm(q,null,!0),P=_.compare(K);if(P===0)return null;let w=P>0,O=w?_:K,f=w?K:_,Y=!!O.prerelease.length;if(!!f.prerelease.length&&!Y){if(!f.patch&&!f.minor)return"major";if(O.patch)return"patch";if(O.minor)return"minor";return"major"}let k=Y?"pre":"";if(_.major!==K.major)return k+"major";if(_.minor!==K.minor)return k+"minor";if(_.patch!==K.patch)return k+"patch";return"prerelease"};dm.exports=g3$});var im=y((TR$,om)=>{var a3$=I6(),c3$=($,q)=>new a3$($,q).major;om.exports=c3$});var am=y((AR$,gm)=>{var I3$=I6(),l3$=($,q)=>new I3$($,q).minor;gm.exports=l3$});var Im=y((WR$,cm)=>{var t3$=I6(),s3$=($,q)=>new t3$($,q).patch;cm.exports=s3$});var tm=y((JR$,lm)=>{var e3$=lK(),B3$=($,q)=>{let _=e3$($,q);return _&&_.prerelease.length?_.prerelease:null};lm.exports=B3$});var c8=y((XR$,em)=>{var sm=I6(),F3$=($,q,_)=>new sm($,_).compare(new sm(q,_));em.exports=F3$});var Fm=y((DR$,Bm)=>{var U3$=c8(),Q3$=($,q,_)=>U3$(q,$,_);Bm.exports=Q3$});var Qm=y((pR$,Um)=>{var $w$=c8(),qw$=($,q)=>$w$($,q,!0);Um.exports=qw$});var FO=y((yR$,qE)=>{var $E=I6(),_w$=($,q,_)=>{let K=new $E($,_),P=new $E(q,_);return K.compare(P)||K.compareBuild(P)};qE.exports=_w$});var KE=y((SR$,_E)=>{var Kw$=FO(),Pw$=($,q)=>$.sort((_,K)=>Kw$(_,K,q));_E.exports=Pw$});var jE=y((GR$,PE)=>{var jw$=FO(),ww$=($,q)=>$.sort((_,K)=>jw$(K,_,q));PE.exports=ww$});var yj=y((ZR$,wE)=>{var Ow$=c8(),zw$=($,q,_)=>Ow$($,q,_)>0;wE.exports=zw$});var UO=y((NR$,OE)=>{var fw$=c8(),Mw$=($,q,_)=>fw$($,q,_)<0;OE.exports=Mw$});var f1=y((mR$,zE)=>{var vw$=c8(),Hw$=($,q,_)=>vw$($,q,_)===0;zE.exports=Hw$});var M1=y((ER$,fE)=>{var Yw$=c8(),hw$=($,q,_)=>Yw$($,q,_)!==0;fE.exports=hw$});var QO=y((uR$,ME)=>{var kw$=c8(),Tw$=($,q,_)=>kw$($,q,_)>=0;ME.exports=Tw$});var $z=y((RR$,vE)=>{var Aw$=c8(),Ww$=($,q,_)=>Aw$($,q,_)<=0;vE.exports=Ww$});var v1=y((LR$,HE)=>{var Jw$=f1(),Xw$=M1(),Dw$=yj(),pw$=QO(),yw$=UO(),Sw$=$z(),Gw$=($,q,_,K)=>{switch(q){case"===":if(typeof $==="object")$=$.version;if(typeof _==="object")_=_.version;return $===_;case"!==":if(typeof $==="object")$=$.version;if(typeof _==="object")_=_.version;return $!==_;case"":case"=":case"==":return Jw$($,_,K);case"!=":return Xw$($,_,K);case">":return Dw$($,_,K);case">=":return pw$($,_,K);case"<":return yw$($,_,K);case"<=":return Sw$($,_,K);default:throw new TypeError(`Invalid operator: ${q}`)}};HE.exports=Gw$});var hE=y((CR$,YE)=>{var Zw$=I6(),Nw$=lK(),{safeRe:qz,t:_z}=v7(),mw$=($,q)=>{if($ instanceof Zw$)return $;if(typeof $==="number")$=String($);if(typeof $!=="string")return null;q=q||{};let _=null;if(!q.rtl)_=$.match(q.includePrerelease?qz[_z.COERCEFULL]:qz[_z.COERCE]);else{let Y=q.includePrerelease?qz[_z.COERCERTLFULL]:qz[_z.COERCERTL],h;while((h=Y.exec($))&&(!_||_.index+_[0].length!==$.length)){if(!_||h.index+h[0].length!==_.index+_[0].length)_=h;Y.lastIndex=h.index+h[1].length+h[2].length}Y.lastIndex=-1}if(_===null)return null;let K=_[2],P=_[3]||"0",w=_[4]||"0",O=q.includePrerelease&&_[5]?`-${_[5]}`:"",f=q.includePrerelease&&_[6]?`+${_[6]}`:"";return Nw$(`${K}.${P}.${w}${O}${f}`,q)};YE.exports=mw$});var AE=y((nR$,TE)=>{class kE{constructor(){this.max=1000,this.map=new Map}get($){let q=this.map.get($);if(q===void 0)return;else return this.map.delete($),this.map.set($,q),q}delete($){return this.map.delete($)}set($,q){if(!this.delete($)&&q!==void 0){if(this.map.size>=this.max){let K=this.map.keys().next().value;this.delete(K)}this.map.set($,q)}return this}}TE.exports=kE});var I8=y((rR$,DE)=>{var Ew$=/\s+/g;class Sj{constructor($,q){if(q=Rw$(q),$ instanceof Sj)if($.loose===!!q.loose&&$.includePrerelease===!!q.includePrerelease)return $;else return new Sj($.raw,q);if($ instanceof H1)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=$.trim().replace(Ew$," "),this.set=this.raw.split("||").map((_)=>this.parseRange(_.trim())).filter((_)=>_.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let _=this.set[0];if(this.set=this.set.filter((K)=>!JE(K[0])),this.set.length===0)this.set=[_];else if(this.set.length>1){for(let K of this.set)if(K.length===1&&dw$(K[0])){this.set=[K];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){if($>0)this.formatted+="||";let q=this.set[$];for(let _=0;_<q.length;_++){if(_>0)this.formatted+=" ";this.formatted+=q[_].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){let _=((this.options.includePrerelease&&Vw$)|(this.options.loose&&xw$))+":"+$,K=WE.get(_);if(K)return K;let P=this.options.loose,w=P?J8[w8.HYPHENRANGELOOSE]:J8[w8.HYPHENRANGE];$=$.replace(w,sw$(this.options.includePrerelease)),B$("hyphen replace",$),$=$.replace(J8[w8.COMPARATORTRIM],Cw$),B$("comparator trim",$),$=$.replace(J8[w8.TILDETRIM],nw$),B$("tilde trim",$),$=$.replace(J8[w8.CARETTRIM],rw$),B$("caret trim",$);let O=$.split(" ").map((k)=>bw$(k,this.options)).join(" ").split(/\s+/).map((k)=>tw$(k,this.options));if(P)O=O.filter((k)=>{return B$("loose invalid filter",k,this.options),!!k.match(J8[w8.COMPARATORLOOSE])});B$("range list",O);let f=new Map,Y=O.map((k)=>new H1(k,this.options));for(let k of Y){if(JE(k))return[k];f.set(k.value,k)}if(f.size>1&&f.has(""))f.delete("");let h=[...f.values()];return WE.set(_,h),h}intersects($,q){if(!($ instanceof Sj))throw new TypeError("a Range is required");return this.set.some((_)=>{return XE(_,q)&&$.set.some((K)=>{return XE(K,q)&&_.every((P)=>{return K.every((w)=>{return P.intersects(w,q)})})})})}test($){if(!$)return!1;if(typeof $==="string")try{$=new Lw$($,this.options)}catch(q){return!1}for(let q=0;q<this.set.length;q++)if(ew$(this.set[q],$,this.options))return!0;return!1}}DE.exports=Sj;var uw$=AE(),WE=new uw$,Rw$=sO(),H1=Gj(),B$=pj(),Lw$=I6(),{safeRe:J8,t:w8,comparatorTrimReplace:Cw$,tildeTrimReplace:nw$,caretTrimReplace:rw$}=v7(),{FLAG_INCLUDE_PRERELEASE:Vw$,FLAG_LOOSE:xw$}=Dj(),JE=($)=>$.value==="<0.0.0-0",dw$=($)=>$.value==="",XE=($,q)=>{let _=!0,K=$.slice(),P=K.pop();while(_&&K.length)_=K.every((w)=>{return P.intersects(w,q)}),P=K.pop();return _},bw$=($,q)=>{return B$("comp",$,q),$=gw$($,q),B$("caret",$),$=ow$($,q),B$("tildes",$),$=cw$($,q),B$("xrange",$),$=lw$($,q),B$("stars",$),$},O8=($)=>!$||$.toLowerCase()==="x"||$==="*",ow$=($,q)=>{return $.trim().split(/\s+/).map((_)=>iw$(_,q)).join(" ")},iw$=($,q)=>{let _=q.loose?J8[w8.TILDELOOSE]:J8[w8.TILDE];return $.replace(_,(K,P,w,O,f)=>{B$("tilde",$,K,P,w,O,f);let Y;if(O8(P))Y="";else if(O8(w))Y=`>=${P}.0.0 <${+P+1}.0.0-0`;else if(O8(O))Y=`>=${P}.${w}.0 <${P}.${+w+1}.0-0`;else if(f)B$("replaceTilde pr",f),Y=`>=${P}.${w}.${O}-${f} <${P}.${+w+1}.0-0`;else Y=`>=${P}.${w}.${O} <${P}.${+w+1}.0-0`;return B$("tilde return",Y),Y})},gw$=($,q)=>{return $.trim().split(/\s+/).map((_)=>aw$(_,q)).join(" ")},aw$=($,q)=>{B$("caret",$,q);let _=q.loose?J8[w8.CARETLOOSE]:J8[w8.CARET],K=q.includePrerelease?"-0":"";return $.replace(_,(P,w,O,f,Y)=>{B$("caret",$,P,w,O,f,Y);let h;if(O8(w))h="";else if(O8(O))h=`>=${w}.0.0${K} <${+w+1}.0.0-0`;else if(O8(f))if(w==="0")h=`>=${w}.${O}.0${K} <${w}.${+O+1}.0-0`;else h=`>=${w}.${O}.0${K} <${+w+1}.0.0-0`;else if(Y)if(B$("replaceCaret pr",Y),w==="0")if(O==="0")h=`>=${w}.${O}.${f}-${Y} <${w}.${O}.${+f+1}-0`;else h=`>=${w}.${O}.${f}-${Y} <${w}.${+O+1}.0-0`;else h=`>=${w}.${O}.${f}-${Y} <${+w+1}.0.0-0`;else if(B$("no pr"),w==="0")if(O==="0")h=`>=${w}.${O}.${f}${K} <${w}.${O}.${+f+1}-0`;else h=`>=${w}.${O}.${f}${K} <${w}.${+O+1}.0-0`;else h=`>=${w}.${O}.${f} <${+w+1}.0.0-0`;return B$("caret return",h),h})},cw$=($,q)=>{return B$("replaceXRanges",$,q),$.split(/\s+/).map((_)=>Iw$(_,q)).join(" ")},Iw$=($,q)=>{$=$.trim();let _=q.loose?J8[w8.XRANGELOOSE]:J8[w8.XRANGE];return $.replace(_,(K,P,w,O,f,Y)=>{B$("xRange",$,K,P,w,O,f,Y);let h=O8(w),k=h||O8(O),T=k||O8(f),p=T;if(P==="="&&p)P="";if(Y=q.includePrerelease?"-0":"",h)if(P===">"||P==="<")K="<0.0.0-0";else K="*";else if(P&&p){if(k)O=0;if(f=0,P===">")if(P=">=",k)w=+w+1,O=0,f=0;else O=+O+1,f=0;else if(P==="<=")if(P="<",k)w=+w+1;else O=+O+1;if(P==="<")Y="-0";K=`${P+w}.${O}.${f}${Y}`}else if(k)K=`>=${w}.0.0${Y} <${+w+1}.0.0-0`;else if(T)K=`>=${w}.${O}.0${Y} <${w}.${+O+1}.0-0`;return B$("xRange return",K),K})},lw$=($,q)=>{return B$("replaceStars",$,q),$.trim().replace(J8[w8.STAR],"")},tw$=($,q)=>{return B$("replaceGTE0",$,q),$.trim().replace(J8[q.includePrerelease?w8.GTE0PRE:w8.GTE0],"")},sw$=($)=>(q,_,K,P,w,O,f,Y,h,k,T,p)=>{if(O8(K))_="";else if(O8(P))_=`>=${K}.0.0${$?"-0":""}`;else if(O8(w))_=`>=${K}.${P}.0${$?"-0":""}`;else if(O)_=`>=${_}`;else _=`>=${_}${$?"-0":""}`;if(O8(h))Y="";else if(O8(k))Y=`<${+h+1}.0.0-0`;else if(O8(T))Y=`<${h}.${+k+1}.0-0`;else if(p)Y=`<=${h}.${k}.${T}-${p}`;else if($)Y=`<${h}.${k}.${+T+1}-0`;else Y=`<=${Y}`;return`${_} ${Y}`.trim()},ew$=($,q,_)=>{for(let K=0;K<$.length;K++)if(!$[K].test(q))return!1;if(q.prerelease.length&&!_.includePrerelease){for(let K=0;K<$.length;K++){if(B$($[K].semver),$[K].semver===H1.ANY)continue;if($[K].semver.prerelease.length>0){let P=$[K].semver;if(P.major===q.major&&P.minor===q.minor&&P.patch===q.patch)return!0}}return!1}return!0}});var Gj=y((VR$,NE)=>{var Zj=Symbol("SemVer ANY");class Kz{static get ANY(){return Zj}constructor($,q){if(q=pE(q),$ instanceof Kz)if($.loose===!!q.loose)return $;else $=$.value;if($=$.trim().split(/\s+/).join(" "),h1("comparator",$,q),this.options=q,this.loose=!!q.loose,this.parse($),this.semver===Zj)this.value="";else this.value=this.operator+this.semver.version;h1("comp",this)}parse($){let q=this.options.loose?yE[SE.COMPARATORLOOSE]:yE[SE.COMPARATOR],_=$.match(q);if(!_)throw new TypeError(`Invalid comparator: ${$}`);if(this.operator=_[1]!==void 0?_[1]:"",this.operator==="=")this.operator="";if(!_[2])this.semver=Zj;else this.semver=new GE(_[2],this.options.loose)}toString(){return this.value}test($){if(h1("Comparator.test",$,this.options.loose),this.semver===Zj||$===Zj)return!0;if(typeof $==="string")try{$=new GE($,this.options)}catch(q){return!1}return Y1($,this.operator,this.semver,this.options)}intersects($,q){if(!($ instanceof Kz))throw new TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new ZE($.value,q).test(this.value)}else if($.operator===""){if($.value==="")return!0;return new ZE(this.value,q).test($.semver)}if(q=pE(q),q.includePrerelease&&(this.value==="<0.0.0-0"||$.value==="<0.0.0-0"))return!1;if(!q.includePrerelease&&(this.value.startsWith("<0.0.0")||$.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&$.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&$.operator.startsWith("<"))return!0;if(this.semver.version===$.semver.version&&this.operator.includes("=")&&$.operator.includes("="))return!0;if(Y1(this.semver,"<",$.semver,q)&&this.operator.startsWith(">")&&$.operator.startsWith("<"))return!0;if(Y1(this.semver,">",$.semver,q)&&this.operator.startsWith("<")&&$.operator.startsWith(">"))return!0;return!1}}NE.exports=Kz;var pE=sO(),{safeRe:yE,t:SE}=v7(),Y1=v1(),h1=pj(),GE=I6(),ZE=I8()});var Nj=y((xR$,mE)=>{var Bw$=I8(),Fw$=($,q,_)=>{try{q=new Bw$(q,_)}catch(K){return!1}return q.test($)};mE.exports=Fw$});var uE=y((dR$,EE)=>{var Uw$=I8(),Qw$=($,q)=>new Uw$($,q).set.map((_)=>_.map((K)=>K.value).join(" ").trim().split(" "));EE.exports=Qw$});var LE=y((bR$,RE)=>{var $O$=I6(),qO$=I8(),_O$=($,q,_)=>{let K=null,P=null,w=null;try{w=new qO$(q,_)}catch(O){return null}return $.forEach((O)=>{if(w.test(O)){if(!K||P.compare(O)===-1)K=O,P=new $O$(K,_)}}),K};RE.exports=_O$});var nE=y((oR$,CE)=>{var KO$=I6(),PO$=I8(),jO$=($,q,_)=>{let K=null,P=null,w=null;try{w=new PO$(q,_)}catch(O){return null}return $.forEach((O)=>{if(w.test(O)){if(!K||P.compare(O)===1)K=O,P=new KO$(K,_)}}),K};CE.exports=jO$});var xE=y((iR$,VE)=>{var k1=I6(),wO$=I8(),rE=yj(),OO$=($,q)=>{$=new wO$($,q);let _=new k1("0.0.0");if($.test(_))return _;if(_=new k1("0.0.0-0"),$.test(_))return _;_=null;for(let K=0;K<$.set.length;++K){let P=$.set[K],w=null;if(P.forEach((O)=>{let f=new k1(O.semver.version);switch(O.operator){case">":if(f.prerelease.length===0)f.patch++;else f.prerelease.push(0);f.raw=f.format();case"":case">=":if(!w||rE(f,w))w=f;break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${O.operator}`)}}),w&&(!_||rE(_,w)))_=w}if(_&&$.test(_))return _;return null};VE.exports=OO$});var bE=y((gR$,dE)=>{var zO$=I8(),fO$=($,q)=>{try{return new zO$($,q).range||"*"}catch(_){return null}};dE.exports=fO$});var Pz=y((aR$,aE)=>{var MO$=I6(),gE=Gj(),{ANY:vO$}=gE,HO$=I8(),YO$=Nj(),oE=yj(),iE=UO(),hO$=$z(),kO$=QO(),TO$=($,q,_,K)=>{$=new MO$($,K),q=new HO$(q,K);let P,w,O,f,Y;switch(_){case">":P=oE,w=hO$,O=iE,f=">",Y=">=";break;case"<":P=iE,w=kO$,O=oE,f="<",Y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(YO$($,q,K))return!1;for(let h=0;h<q.set.length;++h){let k=q.set[h],T=null,p=null;if(k.forEach((G)=>{if(G.semver===vO$)G=new gE(">=0.0.0");if(T=T||G,p=p||G,P(G.semver,T.semver,K))T=G;else if(O(G.semver,p.semver,K))p=G}),T.operator===f||T.operator===Y)return!1;if((!p.operator||p.operator===f)&&w($,p.semver))return!1;else if(p.operator===Y&&O($,p.semver))return!1}return!0};aE.exports=TO$});var IE=y((cR$,cE)=>{var AO$=Pz(),WO$=($,q,_)=>AO$($,q,">",_);cE.exports=WO$});var tE=y((IR$,lE)=>{var JO$=Pz(),XO$=($,q,_)=>JO$($,q,"<",_);lE.exports=XO$});var BE=y((lR$,eE)=>{var sE=I8(),DO$=($,q,_)=>{return $=new sE($,_),q=new sE(q,_),$.intersects(q,_)};eE.exports=DO$});var UE=y((tR$,FE)=>{var pO$=Nj(),yO$=c8();FE.exports=($,q,_)=>{let K=[],P=null,w=null,O=$.sort((k,T)=>yO$(k,T,_));for(let k of O)if(pO$(k,q,_)){if(w=k,!P)P=k}else{if(w)K.push([P,w]);w=null,P=null}if(P)K.push([P,null]);let f=[];for(let[k,T]of K)if(k===T)f.push(k);else if(!T&&k===O[0])f.push("*");else if(!T)f.push(`>=${k}`);else if(k===O[0])f.push(`<=${T}`);else f.push(`${k} - ${T}`);let Y=f.join(" || "),h=typeof q.raw==="string"?q.raw:String(q);return Y.length<h.length?Y:q}});var Pu=y((sR$,Ku)=>{var QE=I8(),A1=Gj(),{ANY:T1}=A1,mj=Nj(),W1=c8(),SO$=($,q,_={})=>{if($===q)return!0;$=new QE($,_),q=new QE(q,_);let K=!1;$:for(let P of $.set){for(let w of q.set){let O=ZO$(P,w,_);if(K=K||O!==null,O)continue $}if(K)return!1}return!0},GO$=[new A1(">=0.0.0-0")],$u=[new A1(">=0.0.0")],ZO$=($,q,_)=>{if($===q)return!0;if($.length===1&&$[0].semver===T1)if(q.length===1&&q[0].semver===T1)return!0;else if(_.includePrerelease)$=GO$;else $=$u;if(q.length===1&&q[0].semver===T1)if(_.includePrerelease)return!0;else q=$u;let K=new Set,P,w;for(let G of $)if(G.operator===">"||G.operator===">=")P=qu(P,G,_);else if(G.operator==="<"||G.operator==="<=")w=_u(w,G,_);else K.add(G.semver);if(K.size>1)return null;let O;if(P&&w){if(O=W1(P.semver,w.semver,_),O>0)return null;else if(O===0&&(P.operator!==">="||w.operator!=="<="))return null}for(let G of K){if(P&&!mj(G,String(P),_))return null;if(w&&!mj(G,String(w),_))return null;for(let Z of q)if(!mj(G,String(Z),_))return!1;return!0}let f,Y,h,k,T=w&&!_.includePrerelease&&w.semver.prerelease.length?w.semver:!1,p=P&&!_.includePrerelease&&P.semver.prerelease.length?P.semver:!1;if(T&&T.prerelease.length===1&&w.operator==="<"&&T.prerelease[0]===0)T=!1;for(let G of q){if(k=k||G.operator===">"||G.operator===">=",h=h||G.operator==="<"||G.operator==="<=",P){if(p){if(G.semver.prerelease&&G.semver.prerelease.length&&G.semver.major===p.major&&G.semver.minor===p.minor&&G.semver.patch===p.patch)p=!1}if(G.operator===">"||G.operator===">="){if(f=qu(P,G,_),f===G&&f!==P)return!1}else if(P.operator===">="&&!mj(P.semver,String(G),_))return!1}if(w){if(T){if(G.semver.prerelease&&G.semver.prerelease.length&&G.semver.major===T.major&&G.semver.minor===T.minor&&G.semver.patch===T.patch)T=!1}if(G.operator==="<"||G.operator==="<="){if(Y=_u(w,G,_),Y===G&&Y!==w)return!1}else if(w.operator==="<="&&!mj(w.semver,String(G),_))return!1}if(!G.operator&&(w||P)&&O!==0)return!1}if(P&&h&&!w&&O!==0)return!1;if(w&&k&&!P&&O!==0)return!1;if(p||T)return!1;return!0},qu=($,q,_)=>{if(!$)return q;let K=W1($.semver,q.semver,_);return K>0?$:K<0?q:q.operator===">"&&$.operator===">="?q:$},_u=($,q,_)=>{if(!$)return q;let K=W1($.semver,q.semver,_);return K<0?$:K>0?q:q.operator==="<"&&$.operator==="<="?q:$};Ku.exports=SO$});var jz=y((eR$,Ou)=>{var J1=v7(),ju=Dj(),NO$=I6(),wu=z1(),mO$=lK(),EO$=Rm(),uO$=Cm(),RO$=Vm(),LO$=bm(),CO$=im(),nO$=am(),rO$=Im(),VO$=tm(),xO$=c8(),dO$=Fm(),bO$=Qm(),oO$=FO(),iO$=KE(),gO$=jE(),aO$=yj(),cO$=UO(),IO$=f1(),lO$=M1(),tO$=QO(),sO$=$z(),eO$=v1(),BO$=hE(),FO$=Gj(),UO$=I8(),QO$=Nj(),$z$=uE(),qz$=LE(),_z$=nE(),Kz$=xE(),Pz$=bE(),jz$=Pz(),wz$=IE(),Oz$=tE(),zz$=BE(),fz$=UE(),Mz$=Pu();Ou.exports={parse:mO$,valid:EO$,clean:uO$,inc:RO$,diff:LO$,major:CO$,minor:nO$,patch:rO$,prerelease:VO$,compare:xO$,rcompare:dO$,compareLoose:bO$,compareBuild:oO$,sort:iO$,rsort:gO$,gt:aO$,lt:cO$,eq:IO$,neq:lO$,gte:tO$,lte:sO$,cmp:eO$,coerce:BO$,Comparator:FO$,Range:UO$,satisfies:QO$,toComparators:$z$,maxSatisfying:qz$,minSatisfying:_z$,minVersion:Kz$,validRange:Pz$,outside:jz$,gtr:wz$,ltr:Oz$,intersects:zz$,simplifyRange:fz$,subset:Mz$,SemVer:NO$,re:J1.re,src:J1.src,tokens:J1.t,SEMVER_SPEC_VERSION:ju.SEMVER_SPEC_VERSION,RELEASE_TYPES:ju.RELEASE_TYPES,compareIdentifiers:wu.compareIdentifiers,rcompareIdentifiers:wu.rcompareIdentifiers}});var fu=y((BR$,zu)=>{var vz$=jz();zu.exports=vz$.satisfies(process.version,">=15.7.0")});var vu=y((FR$,Mu)=>{var Hz$=jz();Mu.exports=Hz$.satisfies(process.version,">=16.9.0")});var X1=y((UR$,Hu)=>{var Yz$=fu(),hz$=vu(),kz$={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},Tz$={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Hu.exports=function($,q){if(!$||!q)return;let _=q.asymmetricKeyType;if(!_)return;let K=kz$[_];if(!K)throw new Error(`Unknown key type "${_}".`);if(!K.includes($))throw new Error(`"alg" parameter for "${_}" key type must be one of: ${K.join(", ")}.`);if(Yz$)switch(_){case"ec":let P=q.asymmetricKeyDetails.namedCurve,w=Tz$[$];if(P!==w)throw new Error(`"alg" parameter "${$}" requires curve "${w}".`);break;case"rsa-pss":if(hz$){let O=parseInt($.slice(-3),10),{hashAlgorithm:f,mgf1HashAlgorithm:Y,saltLength:h}=q.asymmetricKeyDetails;if(f!==`sha${O}`||Y!==f)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${$}.`);if(h!==void 0&&h>O>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${$}.`)}break}}});var D1=y((QR$,Yu)=>{var Az$=jz();Yu.exports=Az$.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Tu=y(($L$,ku)=>{var c$=Xj(),Wz$=K1(),hu=P1(),Jz$=_1(),Xz$=j1(),Dz$=X1(),pz$=D1(),yz$=cO(),{KeyObject:Sz$,createSecretKey:Gz$,createPublicKey:Zz$}=i("crypto"),p1=["RS256","RS384","RS512"],Nz$=["ES256","ES384","ES512"],y1=["RS256","RS384","RS512"],mz$=["HS256","HS384","HS512"];if(pz$)p1.splice(p1.length,0,"PS256","PS384","PS512"),y1.splice(y1.length,0,"PS256","PS384","PS512");ku.exports=function($,q,_,K){if(typeof _==="function"&&!K)K=_,_={};if(!_)_={};_=Object.assign({},_);let P;if(K)P=K;else P=function(k,T){if(k)throw k;return T};if(_.clockTimestamp&&typeof _.clockTimestamp!=="number")return P(new c$("clockTimestamp must be a number"));if(_.nonce!==void 0&&(typeof _.nonce!=="string"||_.nonce.trim()===""))return P(new c$("nonce must be a non-empty string"));if(_.allowInvalidAsymmetricKeyTypes!==void 0&&typeof _.allowInvalidAsymmetricKeyTypes!=="boolean")return P(new c$("allowInvalidAsymmetricKeyTypes must be a boolean"));let w=_.clockTimestamp||Math.floor(Date.now()/1000);if(!$)return P(new c$("jwt must be provided"));if(typeof $!=="string")return P(new c$("jwt must be a string"));let O=$.split(".");if(O.length!==3)return P(new c$("jwt malformed"));let f;try{f=Jz$($,{complete:!0})}catch(k){return P(k)}if(!f)return P(new c$("invalid token"));let Y=f.header,h;if(typeof q==="function"){if(!K)return P(new c$("verify must be called asynchronous if secret or public key is provided as a callback"));h=q}else h=function(k,T){return T(null,q)};return h(Y,function(k,T){if(k)return P(new c$("error in secret or public key callback: "+k.message));let p=O[2].trim()!=="";if(!p&&T)return P(new c$("jwt signature is required"));if(p&&!T)return P(new c$("secret or public key must be provided"));if(!p&&!_.algorithms)return P(new c$('please specify "none" in "algorithms" to verify unsigned tokens'));if(T!=null&&!(T instanceof Sz$))try{T=Zz$(T)}catch(X){try{T=Gz$(typeof T==="string"?Buffer.from(T):T)}catch(C){return P(new c$("secretOrPublicKey is not valid key material"))}}if(!_.algorithms)if(T.type==="secret")_.algorithms=mz$;else if(["rsa","rsa-pss"].includes(T.asymmetricKeyType))_.algorithms=y1;else if(T.asymmetricKeyType==="ec")_.algorithms=Nz$;else _.algorithms=p1;if(_.algorithms.indexOf(f.header.alg)===-1)return P(new c$("invalid algorithm"));if(Y.alg.startsWith("HS")&&T.type!=="secret")return P(new c$(`secretOrPublicKey must be a symmetric key when using ${Y.alg}`));else if(/^(?:RS|PS|ES)/.test(Y.alg)&&T.type!=="public")return P(new c$(`secretOrPublicKey must be an asymmetric key when using ${Y.alg}`));if(!_.allowInvalidAsymmetricKeyTypes)try{Dz$(Y.alg,T)}catch(X){return P(X)}let G;try{G=yz$.verify($,f.header.alg,T)}catch(X){return P(X)}if(!G)return P(new c$("invalid signature"));let Z=f.payload;if(typeof Z.nbf!=="undefined"&&!_.ignoreNotBefore){if(typeof Z.nbf!=="number")return P(new c$("invalid nbf value"));if(Z.nbf>w+(_.clockTolerance||0))return P(new Wz$("jwt not active",new Date(Z.nbf*1000)))}if(typeof Z.exp!=="undefined"&&!_.ignoreExpiration){if(typeof Z.exp!=="number")return P(new c$("invalid exp value"));if(w>=Z.exp+(_.clockTolerance||0))return P(new hu("jwt expired",new Date(Z.exp*1000)))}if(_.audience){let X=Array.isArray(_.audience)?_.audience:[_.audience];if(!(Array.isArray(Z.aud)?Z.aud:[Z.aud]).some(function(L){return X.some(function(m){return m instanceof RegExp?m.test(L):m===L})}))return P(new c$("jwt audience invalid. expected: "+X.join(" or ")))}if(_.issuer){if(typeof _.issuer==="string"&&Z.iss!==_.issuer||Array.isArray(_.issuer)&&_.issuer.indexOf(Z.iss)===-1)return P(new c$("jwt issuer invalid. expected: "+_.issuer))}if(_.subject){if(Z.sub!==_.subject)return P(new c$("jwt subject invalid. expected: "+_.subject))}if(_.jwtid){if(Z.jti!==_.jwtid)return P(new c$("jwt jwtid invalid. expected: "+_.jwtid))}if(_.nonce){if(Z.nonce!==_.nonce)return P(new c$("jwt nonce invalid. expected: "+_.nonce))}if(_.maxAge){if(typeof Z.iat!=="number")return P(new c$("iat required when maxAge is specified"));let X=Xz$(_.maxAge,Z.iat);if(typeof X==="undefined")return P(new c$('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(w>=X+(_.clockTolerance||0))return P(new hu("maxAge exceeded",new Date(X*1000)))}if(_.complete===!0){let X=f.signature;return P(null,{header:Y,payload:Z,signature:X})}return P(null,Z)})}});var pu=y((qL$,Du)=>{var Au=1/0,Ju=9007199254740991,Ez$=179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,Wu=NaN,uz$="[object Arguments]",Rz$="[object Function]",Lz$="[object GeneratorFunction]",Cz$="[object String]",nz$="[object Symbol]",rz$=/^\s+|\s+$/g,Vz$=/^[-+]0x[0-9a-f]+$/i,xz$=/^0b[01]+$/i,dz$=/^0o[0-7]+$/i,bz$=/^(?:0|[1-9]\d*)$/,oz$=parseInt;function iz$($,q){var _=-1,K=$?$.length:0,P=Array(K);while(++_<K)P[_]=q($[_],_,$);return P}function gz$($,q,_,K){var P=$.length,w=_+(K?1:-1);while(K?w--:++w<P)if(q($[w],w,$))return w;return-1}function az$($,q,_){if(q!==q)return gz$($,cz$,_);var K=_-1,P=$.length;while(++K<P)if($[K]===q)return K;return-1}function cz$($){return $!==$}function Iz$($,q){var _=-1,K=Array($);while(++_<$)K[_]=q(_);return K}function lz$($,q){return iz$(q,function(_){return $[_]})}function tz$($,q){return function(_){return $(q(_))}}var wz=Object.prototype,G1=wz.hasOwnProperty,Oz=wz.toString,sz$=wz.propertyIsEnumerable,ez$=tz$(Object.keys,Object),Bz$=Math.max;function Fz$($,q){var _=Xu($)||_5$($)?Iz$($.length,String):[],K=_.length,P=!!K;for(var w in $)if((q||G1.call($,w))&&!(P&&(w=="length"||Qz$(w,K))))_.push(w);return _}function Uz$($){if(!$5$($))return ez$($);var q=[];for(var _ in Object($))if(G1.call($,_)&&_!="constructor")q.push(_);return q}function Qz$($,q){return q=q==null?Ju:q,!!q&&(typeof $=="number"||bz$.test($))&&($>-1&&$%1==0&&$<q)}function $5$($){var q=$&&$.constructor,_=typeof q=="function"&&q.prototype||wz;return $===_}function q5$($,q,_,K){$=Z1($)?$:H5$($),_=_&&!K?f5$(_):0;var P=$.length;if(_<0)_=Bz$(P+_,0);return w5$($)?_<=P&&$.indexOf(q,_)>-1:!!P&&az$($,q,_)>-1}function _5$($){return K5$($)&&G1.call($,"callee")&&(!sz$.call($,"callee")||Oz.call($)==uz$)}var Xu=Array.isArray;function Z1($){return $!=null&&j5$($.length)&&!P5$($)}function K5$($){return N1($)&&Z1($)}function P5$($){var q=S1($)?Oz.call($):"";return q==Rz$||q==Lz$}function j5$($){return typeof $=="number"&&$>-1&&$%1==0&&$<=Ju}function S1($){var q=typeof $;return!!$&&(q=="object"||q=="function")}function N1($){return!!$&&typeof $=="object"}function w5$($){return typeof $=="string"||!Xu($)&&N1($)&&Oz.call($)==Cz$}function O5$($){return typeof $=="symbol"||N1($)&&Oz.call($)==nz$}function z5$($){if(!$)return $===0?$:0;if($=M5$($),$===Au||$===-Au){var q=$<0?-1:1;return q*Ez$}return $===$?$:0}function f5$($){var q=z5$($),_=q%1;return q===q?_?q-_:q:0}function M5$($){if(typeof $=="number")return $;if(O5$($))return Wu;if(S1($)){var q=typeof $.valueOf=="function"?$.valueOf():$;$=S1(q)?q+"":q}if(typeof $!="string")return $===0?$:+$;$=$.replace(rz$,"");var _=xz$.test($);return _||dz$.test($)?oz$($.slice(2),_?2:8):Vz$.test($)?Wu:+$}function v5$($){return Z1($)?Fz$($):Uz$($)}function H5$($){return $?lz$($,v5$($)):[]}Du.exports=q5$});var Su=y((_L$,yu)=>{var Y5$="[object Boolean]",h5$=Object.prototype,k5$=h5$.toString;function T5$($){return $===!0||$===!1||A5$($)&&k5$.call($)==Y5$}function A5$($){return!!$&&typeof $=="object"}yu.exports=T5$});var Eu=y((KL$,mu)=>{var Gu=1/0,W5$=179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,Zu=NaN,J5$="[object Symbol]",X5$=/^\s+|\s+$/g,D5$=/^[-+]0x[0-9a-f]+$/i,p5$=/^0b[01]+$/i,y5$=/^0o[0-7]+$/i,S5$=parseInt,G5$=Object.prototype,Z5$=G5$.toString;function N5$($){return typeof $=="number"&&$==R5$($)}function Nu($){var q=typeof $;return!!$&&(q=="object"||q=="function")}function m5$($){return!!$&&typeof $=="object"}function E5$($){return typeof $=="symbol"||m5$($)&&Z5$.call($)==J5$}function u5$($){if(!$)return $===0?$:0;if($=L5$($),$===Gu||$===-Gu){var q=$<0?-1:1;return q*W5$}return $===$?$:0}function R5$($){var q=u5$($),_=q%1;return q===q?_?q-_:q:0}function L5$($){if(typeof $=="number")return $;if(E5$($))return Zu;if(Nu($)){var q=typeof $.valueOf=="function"?$.valueOf():$;$=Nu(q)?q+"":q}if(typeof $!="string")return $===0?$:+$;$=$.replace(X5$,"");var _=p5$.test($);return _||y5$.test($)?S5$($.slice(2),_?2:8):D5$.test($)?Zu:+$}mu.exports=N5$});var Ru=y((PL$,uu)=>{var C5$="[object Number]",n5$=Object.prototype,r5$=n5$.toString;function V5$($){return!!$&&typeof $=="object"}function x5$($){return typeof $=="number"||V5$($)&&r5$.call($)==C5$}uu.exports=x5$});var ru=y((jL$,nu)=>{var d5$="[object Object]";function b5$($){var q=!1;if($!=null&&typeof $.toString!="function")try{q=!!($+"")}catch(_){}return q}function o5$($,q){return function(_){return $(q(_))}}var i5$=Function.prototype,Lu=Object.prototype,Cu=i5$.toString,g5$=Lu.hasOwnProperty,a5$=Cu.call(Object),c5$=Lu.toString,I5$=o5$(Object.getPrototypeOf,Object);function l5$($){return!!$&&typeof $=="object"}function t5$($){if(!l5$($)||c5$.call($)!=d5$||b5$($))return!1;var q=I5$($);if(q===null)return!0;var _=g5$.call(q,"constructor")&&q.constructor;return typeof _=="function"&&_ instanceof _&&Cu.call(_)==a5$}nu.exports=t5$});var xu=y((wL$,Vu)=>{var s5$="[object String]",e5$=Object.prototype,B5$=e5$.toString,F5$=Array.isArray;function U5$($){return!!$&&typeof $=="object"}function Q5$($){return typeof $=="string"||!F5$($)&&U5$($)&&B5$.call($)==s5$}Vu.exports=Q5$});var gu=y((OL$,iu)=>{var $9$="Expected a function",du=1/0,q9$=179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,bu=NaN,_9$="[object Symbol]",K9$=/^\s+|\s+$/g,P9$=/^[-+]0x[0-9a-f]+$/i,j9$=/^0b[01]+$/i,w9$=/^0o[0-7]+$/i,O9$=parseInt,z9$=Object.prototype,f9$=z9$.toString;function M9$($,q){var _;if(typeof q!="function")throw new TypeError($9$);return $=k9$($),function(){if(--$>0)_=q.apply(this,arguments);if($<=1)q=void 0;return _}}function v9$($){return M9$(2,$)}function ou($){var q=typeof $;return!!$&&(q=="object"||q=="function")}function H9$($){return!!$&&typeof $=="object"}function Y9$($){return typeof $=="symbol"||H9$($)&&f9$.call($)==_9$}function h9$($){if(!$)return $===0?$:0;if($=T9$($),$===du||$===-du){var q=$<0?-1:1;return q*q9$}return $===$?$:0}function k9$($){var q=h9$($),_=q%1;return q===q?_?q-_:q:0}function T9$($){if(typeof $=="number")return $;if(Y9$($))return bu;if(ou($)){var q=typeof $.valueOf=="function"?$.valueOf():$;$=ou(q)?q+"":q}if(typeof $!="string")return $===0?$:+$;$=$.replace(K9$,"");var _=j9$.test($);return _||w9$.test($)?O9$($.slice(2),_?2:8):P9$.test($)?bu:+$}iu.exports=v9$});var Fu=y((zL$,Bu)=>{var au=j1(),A9$=D1(),W9$=X1(),cu=cO(),J9$=pu(),zz=Su(),Iu=Eu(),m1=Ru(),tu=ru(),Q_=xu(),X9$=gu(),{KeyObject:D9$,createSecretKey:p9$,createPrivateKey:y9$}=i("crypto"),su=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];if(A9$)su.splice(3,0,"PS256","PS384","PS512");var S9$={expiresIn:{isValid:function($){return Iu($)||Q_($)&&$},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function($){return Iu($)||Q_($)&&$},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function($){return Q_($)||Array.isArray($)},message:'"audience" must be a string or array'},algorithm:{isValid:J9$.bind(null,su),message:'"algorithm" must be a valid string enum value'},header:{isValid:tu,message:'"header" must be an object'},encoding:{isValid:Q_,message:'"encoding" must be a string'},issuer:{isValid:Q_,message:'"issuer" must be a string'},subject:{isValid:Q_,message:'"subject" must be a string'},jwtid:{isValid:Q_,message:'"jwtid" must be a string'},noTimestamp:{isValid:zz,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Q_,message:'"keyid" must be a string'},mutatePayload:{isValid:zz,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:zz,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:zz,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},G9$={iat:{isValid:m1,message:'"iat" should be a number of seconds'},exp:{isValid:m1,message:'"exp" should be a number of seconds'},nbf:{isValid:m1,message:'"nbf" should be a number of seconds'}};function eu($,q,_,K){if(!tu(_))throw new Error('Expected "'+K+'" to be a plain object.');Object.keys(_).forEach(function(P){let w=$[P];if(!w){if(!q)throw new Error('"'+P+'" is not allowed in "'+K+'"');return}if(!w.isValid(_[P]))throw new Error(w.message)})}function Z9$($){return eu(S9$,!1,$,"options")}function N9$($){return eu(G9$,!0,$,"payload")}var lu={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},m9$=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Bu.exports=function($,q,_,K){if(typeof _==="function")K=_,_={};else _=_||{};let P=typeof $==="object"&&!Buffer.isBuffer($),w=Object.assign({alg:_.algorithm||"HS256",typ:P?"JWT":void 0,kid:_.keyid},_.header);function O(h){if(K)return K(h);throw h}if(!q&&_.algorithm!=="none")return O(new Error("secretOrPrivateKey must have a value"));if(q!=null&&!(q instanceof D9$))try{q=y9$(q)}catch(h){try{q=p9$(typeof q==="string"?Buffer.from(q):q)}catch(k){return O(new Error("secretOrPrivateKey is not valid key material"))}}if(w.alg.startsWith("HS")&&q.type!=="secret")return O(new Error(`secretOrPrivateKey must be a symmetric key when using ${w.alg}`));else if(/^(?:RS|PS|ES)/.test(w.alg)){if(q.type!=="private")return O(new Error(`secretOrPrivateKey must be an asymmetric key when using ${w.alg}`));if(!_.allowInsecureKeySizes&&!w.alg.startsWith("ES")&&q.asymmetricKeyDetails!==void 0&&q.asymmetricKeyDetails.modulusLength<2048)return O(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${w.alg}`))}if(typeof $==="undefined")return O(new Error("payload is required"));else if(P){try{N9$($)}catch(h){return O(h)}if(!_.mutatePayload)$=Object.assign({},$)}else{let h=m9$.filter(function(k){return typeof _[k]!=="undefined"});if(h.length>0)return O(new Error("invalid "+h.join(",")+" option for "+typeof $+" payload"))}if(typeof $.exp!=="undefined"&&typeof _.expiresIn!=="undefined")return O(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof $.nbf!=="undefined"&&typeof _.notBefore!=="undefined")return O(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{Z9$(_)}catch(h){return O(h)}if(!_.allowInvalidAsymmetricKeyTypes)try{W9$(w.alg,q)}catch(h){return O(h)}let f=$.iat||Math.floor(Date.now()/1000);if(_.noTimestamp)delete $.iat;else if(P)$.iat=f;if(typeof _.notBefore!=="undefined"){try{$.nbf=au(_.notBefore,f)}catch(h){return O(h)}if(typeof $.nbf==="undefined")return O(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof _.expiresIn!=="undefined"&&typeof $==="object"){try{$.exp=au(_.expiresIn,f)}catch(h){return O(h)}if(typeof $.exp==="undefined")return O(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(lu).forEach(function(h){let k=lu[h];if(typeof _[h]!=="undefined"){if(typeof $[k]!=="undefined")return O(new Error('Bad "options.'+h+'" option. The payload already has an "'+k+'" property.'));$[k]=_[h]}});let Y=_.encoding||"utf8";if(typeof K==="function")K=K&&X9$(K),cu.createSign({header:w,privateKey:q,payload:$,encoding:Y}).once("error",K).once("done",function(h){if(!_.allowInsecureKeySizes&&/^(?:RS|PS)/.test(w.alg)&&h.length<256)return K(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${w.alg}`));K(null,h)});else{let h=cu.sign({header:w,payload:$,secret:q,encoding:Y});if(!_.allowInsecureKeySizes&&/^(?:RS|PS)/.test(w.alg)&&h.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${w.alg}`);return h}}});var Qu=y((fL$,Uu)=>{Uu.exports={decode:_1(),verify:Tu(),sign:Fu(),JsonWebTokenError:Xj(),NotBeforeError:K1(),TokenExpiredError:P1()}});var hL=y((cM$)=>{/*! @azure/msal-node v2.16.2 2024-11-19 */var hz=i("http"),$R=i("https"),E9$=pN(),NR=i("crypto"),u9$=Qu(),Ej=i("fs"),R9$=i("path");class dz{static serializeJSONBlob($){return JSON.stringify($)}static serializeAccounts($){let q={};return Object.keys($).map(function(_){let K=$[_];q[_]={home_account_id:K.homeAccountId,environment:K.environment,realm:K.realm,local_account_id:K.localAccountId,username:K.username,authority_type:K.authorityType,name:K.name,client_info:K.clientInfo,last_modification_time:K.lastModificationTime,last_modification_app:K.lastModificationApp,tenantProfiles:K.tenantProfiles?.map((P)=>{return JSON.stringify(P)})}}),q}static serializeIdTokens($){let q={};return Object.keys($).map(function(_){let K=$[_];q[_]={home_account_id:K.homeAccountId,environment:K.environment,credential_type:K.credentialType,client_id:K.clientId,secret:K.secret,realm:K.realm}}),q}static serializeAccessTokens($){let q={};return Object.keys($).map(function(_){let K=$[_];q[_]={home_account_id:K.homeAccountId,environment:K.environment,credential_type:K.credentialType,client_id:K.clientId,secret:K.secret,realm:K.realm,target:K.target,cached_at:K.cachedAt,expires_on:K.expiresOn,extended_expires_on:K.extendedExpiresOn,refresh_on:K.refreshOn,key_id:K.keyId,token_type:K.tokenType,requestedClaims:K.requestedClaims,requestedClaimsHash:K.requestedClaimsHash,userAssertionHash:K.userAssertionHash}}),q}static serializeRefreshTokens($){let q={};return Object.keys($).map(function(_){let K=$[_];q[_]={home_account_id:K.homeAccountId,environment:K.environment,credential_type:K.credentialType,client_id:K.clientId,secret:K.secret,family_id:K.familyId,target:K.target,realm:K.realm}}),q}static serializeAppMetadata($){let q={};return Object.keys($).map(function(_){let K=$[_];q[_]={client_id:K.clientId,environment:K.environment,family_id:K.familyId}}),q}static serializeAllCache($){return{Account:this.serializeAccounts($.accounts),IdToken:this.serializeIdTokens($.idTokens),AccessToken:this.serializeAccessTokens($.accessTokens),RefreshToken:this.serializeRefreshTokens($.refreshTokens),AppMetadata:this.serializeAppMetadata($.appMetadata)}}}/*! @azure/msal-common v14.16.0 2024-11-19 */var a={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2000,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},q6={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},KK=[a.OPENID_SCOPE,a.PROFILE_SCOPE,a.OFFLINE_ACCESS_SCOPE],qR=[...KK,a.EMAIL_SCOPE],V6={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},N_={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},fz={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},A7={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},V1={PLAIN:"plain",S256:"S256"},L9$={QUERY:"query",FRAGMENT:"fragment"},bz={...L9$,FORM_POST:"form_post"},i7={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Mz={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},t6={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},b$={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},i1="appmetadata",C9$="client_info",Lj="1",kz={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},u8={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},n6={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},I$={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Cj={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},_R={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},KR={username:"username",password:"password"},vz={httpSuccess:200,httpBadRequest:400},Y7={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},E1={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},X6={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},mR=300;/*! @azure/msal-common v14.16.0 2024-11-19 */var Tz="unexpected_error",Vj="post_request_failed",n9$=Object.freeze({__proto__:null,postRequestFailed:Vj,unexpectedError:Tz});/*! @azure/msal-common v14.16.0 2024-11-19 */var Az={[Tz]:"Unexpected error in authentication.",[Vj]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},r9$={unexpectedError:{code:Tz,desc:Az[Tz]},postRequestFailed:{code:Vj,desc:Az[Vj]}};class _6 extends Error{constructor($,q,_){let K=q?`${$}: ${q}`:$;super(K);Object.setPrototypeOf(this,_6.prototype),this.errorCode=$||a.EMPTY_STRING,this.errorMessage=q||a.EMPTY_STRING,this.subError=_||a.EMPTY_STRING,this.name="AuthError"}setCorrelationId($){this.correlationId=$}}function V9$($,q){return new _6($,q?`${Az[$]} ${q}`:Az[$])}/*! @azure/msal-common v14.16.0 2024-11-19 */var D7="client_info_decoding_error",xj="client_info_empty_error",p7="token_parsing_error",dj="null_or_empty_token",l8="endpoints_resolution_error",BK="network_error",bj="openid_config_error",oj="hash_not_deserialized",jK="invalid_state",y7="state_mismatch",S7="state_not_found",ij="nonce_mismatch",G7="auth_time_not_found",gj="max_age_transpired",Z7="multiple_matching_tokens",Wz="multiple_matching_accounts",aj="multiple_matching_appMetadata",cj="request_cannot_be_made",Ij="cannot_remove_empty_scope",lj="cannot_append_scopeset",N7="empty_input_scopeset",tj="device_code_polling_cancelled",sj="device_code_expired",ej="device_code_unknown_error",m7="no_account_in_silent_request",Bj="invalid_cache_record",E7="invalid_cache_environment",Jz="no_account_found",u7="no_crypto_object",Xz="unexpected_credential_type",Fj="invalid_assertion",R7="invalid_client_credential",Fq="token_refresh_required",Uj="user_timeout_reached",Qj="token_claims_cnf_required_for_signedjwt",$3="authorization_code_missing_from_server_response",q3="binding_key_not_removed",_3="end_session_endpoint_not_supported",K3="key_id_missing",Dz="no_network_connectivity",pz="user_canceled",P3="missing_tenant_id_error",D$="method_not_implemented",yz="nested_app_auth_bridge_disabled",x9$=Object.freeze({__proto__:null,authTimeNotFound:G7,authorizationCodeMissingFromServerResponse:$3,bindingKeyNotRemoved:q3,cannotAppendScopeSet:lj,cannotRemoveEmptyScope:Ij,clientInfoDecodingError:D7,clientInfoEmptyError:xj,deviceCodeExpired:sj,deviceCodePollingCancelled:tj,deviceCodeUnknownError:ej,emptyInputScopeSet:N7,endSessionEndpointNotSupported:_3,endpointResolutionError:l8,hashNotDeserialized:oj,invalidAssertion:Fj,invalidCacheEnvironment:E7,invalidCacheRecord:Bj,invalidClientCredential:R7,invalidState:jK,keyIdMissing:K3,maxAgeTranspired:gj,methodNotImplemented:D$,missingTenantIdError:P3,multipleMatchingAccounts:Wz,multipleMatchingAppMetadata:aj,multipleMatchingTokens:Z7,nestedAppAuthBridgeDisabled:yz,networkError:BK,noAccountFound:Jz,noAccountInSilentRequest:m7,noCryptoObject:u7,noNetworkConnectivity:Dz,nonceMismatch:ij,nullOrEmptyToken:dj,openIdConfigError:bj,requestCannotBeMade:cj,stateMismatch:y7,stateNotFound:S7,tokenClaimsCnfRequiredForSignedJwt:Qj,tokenParsingError:p7,tokenRefreshRequired:Fq,unexpectedCredentialType:Xz,userCanceled:pz,userTimeoutReached:Uj});/*! @azure/msal-common v14.16.0 2024-11-19 */var H$={[D7]:"The client info could not be parsed/decoded correctly",[xj]:"The client info was empty",[p7]:"Token cannot be parsed",[dj]:"The token is null or empty",[l8]:"Endpoints cannot be resolved",[BK]:"Network request failed",[bj]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[oj]:"The hash parameters could not be deserialized",[jK]:"State was not the expected format",[y7]:"State mismatch error",[S7]:"State not found",[ij]:"Nonce mismatch error",[G7]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[gj]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Z7]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Wz]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[aj]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[cj]:"Token request cannot be made without authorization code or refresh token.",[Ij]:"Cannot remove null or empty scope from ScopeSet",[lj]:"Cannot append ScopeSet",[N7]:"Empty input ScopeSet cannot be processed",[tj]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[sj]:"Device code is expired.",[ej]:"Device code stopped polling for unknown reasons.",[m7]:"Please pass an account object, silent flow is not supported without account information",[Bj]:"Cache record object was null or undefined.",[E7]:"Invalid environment when attempting to create cache entry",[Jz]:"No account found in cache for given key.",[u7]:"No crypto object detected.",[Xz]:"Unexpected credential type.",[Fj]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[R7]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Fq]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Uj]:"User defined timeout for device code polling reached",[Qj]:"Cannot generate a POP jwt if the token_claims are not populated",[$3]:"Server response does not contain an authorization code to proceed",[q3]:"Could not remove the credential's binding key from storage.",[_3]:"The provided authority does not support logout",[K3]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Dz]:"No network connectivity. Check your internet connection.",[pz]:"User cancelled the flow.",[P3]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[D$]:"This method has not been implemented",[yz]:"The nested app auth bridge is disabled"},d9$={clientInfoDecodingError:{code:D7,desc:H$[D7]},clientInfoEmptyError:{code:xj,desc:H$[xj]},tokenParsingError:{code:p7,desc:H$[p7]},nullOrEmptyToken:{code:dj,desc:H$[dj]},endpointResolutionError:{code:l8,desc:H$[l8]},networkError:{code:BK,desc:H$[BK]},unableToGetOpenidConfigError:{code:bj,desc:H$[bj]},hashNotDeserialized:{code:oj,desc:H$[oj]},invalidStateError:{code:jK,desc:H$[jK]},stateMismatchError:{code:y7,desc:H$[y7]},stateNotFoundError:{code:S7,desc:H$[S7]},nonceMismatchError:{code:ij,desc:H$[ij]},authTimeNotFoundError:{code:G7,desc:H$[G7]},maxAgeTranspired:{code:gj,desc:H$[gj]},multipleMatchingTokens:{code:Z7,desc:H$[Z7]},multipleMatchingAccounts:{code:Wz,desc:H$[Wz]},multipleMatchingAppMetadata:{code:aj,desc:H$[aj]},tokenRequestCannotBeMade:{code:cj,desc:H$[cj]},removeEmptyScopeError:{code:Ij,desc:H$[Ij]},appendScopeSetError:{code:lj,desc:H$[lj]},emptyInputScopeSetError:{code:N7,desc:H$[N7]},DeviceCodePollingCancelled:{code:tj,desc:H$[tj]},DeviceCodeExpired:{code:sj,desc:H$[sj]},DeviceCodeUnknownError:{code:ej,desc:H$[ej]},NoAccountInSilentRequest:{code:m7,desc:H$[m7]},invalidCacheRecord:{code:Bj,desc:H$[Bj]},invalidCacheEnvironment:{code:E7,desc:H$[E7]},noAccountFound:{code:Jz,desc:H$[Jz]},noCryptoObj:{code:u7,desc:H$[u7]},unexpectedCredentialType:{code:Xz,desc:H$[Xz]},invalidAssertion:{code:Fj,desc:H$[Fj]},invalidClientCredential:{code:R7,desc:H$[R7]},tokenRefreshRequired:{code:Fq,desc:H$[Fq]},userTimeoutReached:{code:Uj,desc:H$[Uj]},tokenClaimsRequired:{code:Qj,desc:H$[Qj]},noAuthorizationCodeFromServer:{code:$3,desc:H$[$3]},bindingKeyNotRemovedError:{code:q3,desc:H$[q3]},logoutNotSupported:{code:_3,desc:H$[_3]},keyIdMissing:{code:K3,desc:H$[K3]},noNetworkConnectivity:{code:Dz,desc:H$[Dz]},userCanceledError:{code:pz,desc:H$[pz]},missingTenantIdError:{code:P3,desc:H$[P3]},nestedAppAuthBridgeDisabled:{code:yz,desc:H$[yz]}};class J3 extends _6{constructor($,q){super($,q?`${H$[$]}: ${q}`:H$[$]);this.name="ClientAuthError",Object.setPrototypeOf(this,J3.prototype)}}function l($,q){return new J3($,q)}/*! @azure/msal-common v14.16.0 2024-11-19 */var x1={createNewGuid:()=>{throw l(D$)},base64Decode:()=>{throw l(D$)},base64Encode:()=>{throw l(D$)},base64UrlEncode:()=>{throw l(D$)},encodeKid:()=>{throw l(D$)},async getPublicKeyThumbprint(){throw l(D$)},async removeTokenBindingKey(){throw l(D$)},async clearKeystore(){throw l(D$)},async signJwt(){throw l(D$)},async hashString(){throw l(D$)}};/*! @azure/msal-common v14.16.0 2024-11-19 */cM$.LogLevel=void 0;(function($){$[$.Error=0]="Error",$[$.Warning=1]="Warning",$[$.Info=2]="Info",$[$.Verbose=3]="Verbose",$[$.Trace=4]="Trace"})(cM$.LogLevel||(cM$.LogLevel={}));class wK{constructor($,q,_){this.level=cM$.LogLevel.Info;let K=()=>{return},P=$||wK.createDefaultLoggerOptions();this.localCallback=P.loggerCallback||K,this.piiLoggingEnabled=P.piiLoggingEnabled||!1,this.level=typeof P.logLevel==="number"?P.logLevel:cM$.LogLevel.Info,this.correlationId=P.correlationId||a.EMPTY_STRING,this.packageName=q||a.EMPTY_STRING,this.packageVersion=_||a.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:cM$.LogLevel.Info}}clone($,q,_){return new wK({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:_||this.correlationId},$,q)}logMessage($,q){if(q.logLevel>this.level||!this.piiLoggingEnabled&&q.containsPii)return;let P=`${`[${new Date().toUTCString()}] : [${q.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${cM$.LogLevel[q.logLevel]} - ${$}`;this.executeCallback(q.logLevel,P,q.containsPii||!1)}executeCallback($,q,_){if(this.localCallback)this.localCallback($,q,_)}error($,q){this.logMessage($,{logLevel:cM$.LogLevel.Error,containsPii:!1,correlationId:q||a.EMPTY_STRING})}errorPii($,q){this.logMessage($,{logLevel:cM$.LogLevel.Error,containsPii:!0,correlationId:q||a.EMPTY_STRING})}warning($,q){this.logMessage($,{logLevel:cM$.LogLevel.Warning,containsPii:!1,correlationId:q||a.EMPTY_STRING})}warningPii($,q){this.logMessage($,{logLevel:cM$.LogLevel.Warning,containsPii:!0,correlationId:q||a.EMPTY_STRING})}info($,q){this.logMessage($,{logLevel:cM$.LogLevel.Info,containsPii:!1,correlationId:q||a.EMPTY_STRING})}infoPii($,q){this.logMessage($,{logLevel:cM$.LogLevel.Info,containsPii:!0,correlationId:q||a.EMPTY_STRING})}verbose($,q){this.logMessage($,{logLevel:cM$.LogLevel.Verbose,containsPii:!1,correlationId:q||a.EMPTY_STRING})}verbosePii($,q){this.logMessage($,{logLevel:cM$.LogLevel.Verbose,containsPii:!0,correlationId:q||a.EMPTY_STRING})}trace($,q){this.logMessage($,{logLevel:cM$.LogLevel.Trace,containsPii:!1,correlationId:q||a.EMPTY_STRING})}tracePii($,q){this.logMessage($,{logLevel:cM$.LogLevel.Trace,containsPii:!0,correlationId:q||a.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.16.0 2024-11-19 */var ER="@azure/msal-common",g1="14.16.0";/*! @azure/msal-common v14.16.0 2024-11-19 */var oz={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v14.16.0 2024-11-19 */function X3($,q){let _=b9$($);try{let K=q(_);return JSON.parse(K)}catch(K){throw l(p7)}}function b9$($){if(!$)throw l(dj);let _=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec($);if(!_||_.length<4)throw l(p7);return _[2]}function uR($,q){if(q===0||Date.now()-300000>$+q)throw l(gj)}/*! @azure/msal-common v14.16.0 2024-11-19 */function Y6(){return Math.round(new Date().getTime()/1000)}function L7($,q){let _=Number($)||0;return Y6()+q>_}function o9$($){return Number($)>Y6()}function i9$($,q){return new Promise((_)=>setTimeout(()=>_(q),$))}/*! @azure/msal-common v14.16.0 2024-11-19 */function h7($){return[I9$($),l9$($),t9$($),s9$($),e9$($)].join(t6.CACHE_KEY_SEPARATOR).toLowerCase()}function g9$($,q,_,K,P){return{credentialType:b$.ID_TOKEN,homeAccountId:$,environment:q,clientId:K,secret:_,realm:P}}function a9$($,q,_,K,P,w,O,f,Y,h,k,T,p,G,Z){let X={homeAccountId:$,credentialType:b$.ACCESS_TOKEN,secret:_,cachedAt:Y6().toString(),expiresOn:O.toString(),extendedExpiresOn:f.toString(),environment:q,clientId:K,realm:P,target:w,tokenType:k||I$.BEARER};if(T)X.userAssertionHash=T;if(h)X.refreshOn=h.toString();if(G)X.requestedClaims=G,X.requestedClaimsHash=Z;if(X.tokenType?.toLowerCase()!==I$.BEARER.toLowerCase())switch(X.credentialType=b$.ACCESS_TOKEN_WITH_AUTH_SCHEME,X.tokenType){case I$.POP:let C=X3(_,Y);if(!C?.cnf?.kid)throw l(Qj);X.keyId=C.cnf.kid;break;case I$.SSH:X.keyId=p}return X}function c9$($,q,_,K,P,w,O){let f={credentialType:b$.REFRESH_TOKEN,homeAccountId:$,environment:q,clientId:K,secret:_};if(w)f.userAssertionHash=w;if(P)f.familyId=P;if(O)f.expiresOn=O.toString();return f}function a1($){return $.hasOwnProperty("homeAccountId")&&$.hasOwnProperty("environment")&&$.hasOwnProperty("credentialType")&&$.hasOwnProperty("clientId")&&$.hasOwnProperty("secret")}function PR($){if(!$)return!1;return a1($)&&$.hasOwnProperty("realm")&&$.hasOwnProperty("target")&&($.credentialType===b$.ACCESS_TOKEN||$.credentialType===b$.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function jR($){if(!$)return!1;return a1($)&&$.hasOwnProperty("realm")&&$.credentialType===b$.ID_TOKEN}function wR($){if(!$)return!1;return a1($)&&$.credentialType===b$.REFRESH_TOKEN}function I9$($){return[$.homeAccountId,$.environment].join(t6.CACHE_KEY_SEPARATOR).toLowerCase()}function l9$($){let q=$.credentialType===b$.REFRESH_TOKEN?$.familyId||$.clientId:$.clientId;return[$.credentialType,q,$.realm||""].join(t6.CACHE_KEY_SEPARATOR).toLowerCase()}function t9$($){return($.target||"").toLowerCase()}function s9$($){return($.requestedClaimsHash||"").toLowerCase()}function e9$($){return $.tokenType&&$.tokenType.toLowerCase()!==I$.BEARER.toLowerCase()?$.tokenType.toLowerCase():""}function B9$($,q){let _=$.indexOf(n6.CACHE_KEY)===0,K=!0;if(q)K=q.hasOwnProperty("failedRequests")&&q.hasOwnProperty("errors")&&q.hasOwnProperty("cacheHits");return _&&K}function F9$($,q){let _=!1;if($)_=$.indexOf(Cj.THROTTLING_PREFIX)===0;let K=!0;if(q)K=q.hasOwnProperty("throttleTime");return _&&K}function U9$({environment:$,clientId:q}){return[i1,$,q].join(t6.CACHE_KEY_SEPARATOR).toLowerCase()}function OR($,q){if(!q)return!1;return $.indexOf(i1)===0&&q.hasOwnProperty("clientId")&&q.hasOwnProperty("environment")}function Q9$($,q){if(!q)return!1;return $.indexOf(kz.CACHE_KEY)===0&&q.hasOwnProperty("aliases")&&q.hasOwnProperty("preferred_cache")&&q.hasOwnProperty("preferred_network")&&q.hasOwnProperty("canonical_authority")&&q.hasOwnProperty("authorization_endpoint")&&q.hasOwnProperty("token_endpoint")&&q.hasOwnProperty("issuer")&&q.hasOwnProperty("aliasesFromNetwork")&&q.hasOwnProperty("endpointsFromNetwork")&&q.hasOwnProperty("expiresAt")&&q.hasOwnProperty("jwks_uri")}function zR(){return Y6()+kz.REFRESH_TIME_SECONDS}function Hz($,q,_){$.authorization_endpoint=q.authorization_endpoint,$.token_endpoint=q.token_endpoint,$.end_session_endpoint=q.end_session_endpoint,$.issuer=q.issuer,$.endpointsFromNetwork=_,$.jwks_uri=q.jwks_uri}function u1($,q,_){$.aliases=q.aliases,$.preferred_cache=q.preferred_cache,$.preferred_network=q.preferred_network,$.aliasesFromNetwork=_}function fR($){return $.expiresAt<=Y6()}/*! @azure/msal-common v14.16.0 2024-11-19 */var j3="redirect_uri_empty",Sz="claims_request_parsing_error",w3="authority_uri_insecure",_K="url_parse_error",C7="empty_url_error",O3="empty_input_scopes_error",z3="invalid_prompt_value",n7="invalid_claims",f3="token_request_empty",M3="logout_request_empty",v3="invalid_code_challenge_method",r7="pkce_params_missing",V7="invalid_cloud_discovery_metadata",H3="invalid_authority_metadata",Y3="untrusted_authority",x7="missing_ssh_jwk",Gz="missing_ssh_kid",Zz="missing_nonce_authentication_header",Nz="invalid_authentication_header",mz="cannot_set_OIDCOptions",Ez="cannot_allow_native_broker",uz="authority_mismatch",$f$=Object.freeze({__proto__:null,authorityMismatch:uz,authorityUriInsecure:w3,cannotAllowNativeBroker:Ez,cannotSetOIDCOptions:mz,claimsRequestParsingError:Sz,emptyInputScopesError:O3,invalidAuthenticationHeader:Nz,invalidAuthorityMetadata:H3,invalidClaims:n7,invalidCloudDiscoveryMetadata:V7,invalidCodeChallengeMethod:v3,invalidPromptValue:z3,logoutRequestEmpty:M3,missingNonceAuthenticationHeader:Zz,missingSshJwk:x7,missingSshKid:Gz,pkceParamsMissing:r7,redirectUriEmpty:j3,tokenRequestEmpty:f3,untrustedAuthority:Y3,urlEmptyError:C7,urlParseError:_K});/*! @azure/msal-common v14.16.0 2024-11-19 */var P6={[j3]:"A redirect URI is required for all calls, and none has been set.",[Sz]:"Could not parse the given claims request object.",[w3]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[_K]:"URL could not be parsed into appropriate segments.",[C7]:"URL was empty or null.",[O3]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[z3]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[n7]:"Given claims parameter must be a stringified JSON object.",[f3]:"Token request was empty and not found in cache.",[M3]:"The logout request was null or undefined.",[v3]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[r7]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[V7]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[H3]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Y3]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[x7]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Gz]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Zz]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Nz]:"Invalid authentication header provided",[mz]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ez]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[uz]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},qf$={redirectUriNotSet:{code:j3,desc:P6[j3]},claimsRequestParsingError:{code:Sz,desc:P6[Sz]},authorityUriInsecure:{code:w3,desc:P6[w3]},urlParseError:{code:_K,desc:P6[_K]},urlEmptyError:{code:C7,desc:P6[C7]},emptyScopesError:{code:O3,desc:P6[O3]},invalidPrompt:{code:z3,desc:P6[z3]},invalidClaimsRequest:{code:n7,desc:P6[n7]},tokenRequestEmptyError:{code:f3,desc:P6[f3]},logoutRequestEmptyError:{code:M3,desc:P6[M3]},invalidCodeChallengeMethod:{code:v3,desc:P6[v3]},invalidCodeChallengeParams:{code:r7,desc:P6[r7]},invalidCloudDiscoveryMetadata:{code:V7,desc:P6[V7]},invalidAuthorityMetadata:{code:H3,desc:P6[H3]},untrustedAuthority:{code:Y3,desc:P6[Y3]},missingSshJwk:{code:x7,desc:P6[x7]},missingSshKid:{code:Gz,desc:P6[Gz]},missingNonceAuthenticationHeader:{code:Zz,desc:P6[Zz]},invalidAuthenticationHeader:{code:Nz,desc:P6[Nz]},cannotSetOIDCOptions:{code:mz,desc:P6[mz]},cannotAllowNativeBroker:{code:Ez,desc:P6[Ez]},authorityMismatch:{code:uz,desc:P6[uz]}};class iz extends _6{constructor($){super($,P6[$]);this.name="ClientConfigurationError",Object.setPrototypeOf(this,iz.prototype)}}function j6($){return new iz($)}/*! @azure/msal-common v14.16.0 2024-11-19 */class L8{static isEmptyObj($){if($)try{let q=JSON.parse($);return Object.keys(q).length===0}catch(q){}return!0}static startsWith($,q){return $.indexOf(q)===0}static endsWith($,q){return $.length>=q.length&&$.lastIndexOf(q)===$.length-q.length}static queryStringToObject($){let q={},_=$.split("&"),K=(P)=>decodeURIComponent(P.replace(/\+/g," "));return _.forEach((P)=>{if(P.trim()){let[w,O]=P.split(/=(.+)/g,2);if(w&&O)q[K(w)]=K(O)}}),q}static trimArrayEntries($){return $.map((q)=>q.trim())}static removeEmptyStringsFromArray($){return $.filter((q)=>{return!!q})}static jsonParseHelper($){try{return JSON.parse($)}catch(q){return null}}static matchPattern($,q){return new RegExp($.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(q)}}/*! @azure/msal-common v14.16.0 2024-11-19 */class s6{constructor($){let q=$?L8.trimArrayEntries([...$]):[],_=q?L8.removeEmptyStringsFromArray(q):[];this.validateInputScopes(_),this.scopes=new Set,_.forEach((K)=>this.scopes.add(K))}static fromString($){let _=($||a.EMPTY_STRING).split(" ");return new s6(_)}static createSearchScopes($){let q=new s6($);if(!q.containsOnlyOIDCScopes())q.removeOIDCScopes();else q.removeScope(a.OFFLINE_ACCESS_SCOPE);return q}validateInputScopes($){if(!$||$.length<1)throw j6(O3)}containsScope($){let q=this.printScopesLowerCase().split(" "),_=new s6(q);return $?_.scopes.has($.toLowerCase()):!1}containsScopeSet($){if(!$||$.scopes.size<=0)return!1;return this.scopes.size>=$.scopes.size&&$.asArray().every((q)=>this.containsScope(q))}containsOnlyOIDCScopes(){let $=0;return qR.forEach((q)=>{if(this.containsScope(q))$+=1}),this.scopes.size===$}appendScope($){if($)this.scopes.add($.trim())}appendScopes($){try{$.forEach((q)=>this.appendScope(q))}catch(q){throw l(lj)}}removeScope($){if(!$)throw l(Ij);this.scopes.delete($.trim())}removeOIDCScopes(){qR.forEach(($)=>{this.scopes.delete($)})}unionScopeSets($){if(!$)throw l(N7);let q=new Set;return $.scopes.forEach((_)=>q.add(_.toLowerCase())),this.scopes.forEach((_)=>q.add(_.toLowerCase())),q}intersectingScopeSets($){if(!$)throw l(N7);if(!$.containsOnlyOIDCScopes())$.removeOIDCScopes();let q=this.unionScopeSets($),_=$.getScopeCount(),K=this.getScopeCount();return q.size<K+_}getScopeCount(){return this.scopes.size}asArray(){let $=[];return this.scopes.forEach((q)=>$.push(q)),$}printScopes(){if(this.scopes)return this.asArray().join(" ");return a.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.16.0 2024-11-19 */function Rz($,q){if(!$)throw l(xj);try{let _=q($);return JSON.parse(_)}catch(_){throw l(D7)}}function k7($){if(!$)throw l(D7);let q=$.split(t6.CLIENT_INFO_SEPARATOR,2);return{uid:q[0],utid:q.length<2?a.EMPTY_STRING:q[1]}}/*! @azure/msal-common v14.16.0 2024-11-19 */function Lz($,q){return!!$&&!!q&&$===q.split(".")[1]}function c1($,q,_,K){if(K){let{oid:P,sub:w,tid:O,name:f,tfp:Y,acr:h}=K,k=O||Y||h||"";return{tenantId:k,localAccountId:P||w||"",name:f,isHomeTenant:Lz(k,$)}}else return{tenantId:_,localAccountId:q,isHomeTenant:Lz(_,$)}}function RR($,q,_,K){let P=$;if(q){let{isHomeTenant:w,...O}=q;P={...$,...O}}if(_){let{isHomeTenant:w,...O}=c1($.homeAccountId,$.localAccountId,$.tenantId,_);return P={...P,...O,idTokenClaims:_,idToken:K},P}return P}/*! @azure/msal-common v14.16.0 2024-11-19 */var Bq={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.16.0 2024-11-19 */function LR($){if($)return $.tid||$.tfp||$.acr||null;return null}/*! @azure/msal-common v14.16.0 2024-11-19 */var FK={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.16.0 2024-11-19 */class X8{generateAccountId(){return[this.homeAccountId,this.environment].join(t6.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return X8.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(($)=>{return[$.tenantId,$]}))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey($){let q=$.homeAccountId.split(".")[1];return[$.homeAccountId,$.environment||"",q||$.tenantId||""].join(t6.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount($,q,_){let K=new X8;if(q.authorityType===Bq.Adfs)K.authorityType=Mz.ADFS_ACCOUNT_TYPE;else if(q.protocolMode===FK.AAD)K.authorityType=Mz.MSSTS_ACCOUNT_TYPE;else K.authorityType=Mz.GENERIC_ACCOUNT_TYPE;let P;if($.clientInfo&&_)P=Rz($.clientInfo,_);K.clientInfo=$.clientInfo,K.homeAccountId=$.homeAccountId,K.nativeAccountId=$.nativeAccountId;let w=$.environment||q&&q.getPreferredCache();if(!w)throw l(E7);K.environment=w,K.realm=P?.utid||LR($.idTokenClaims)||"",K.localAccountId=P?.uid||$.idTokenClaims?.oid||$.idTokenClaims?.sub||"";let O=$.idTokenClaims?.preferred_username||$.idTokenClaims?.upn,f=$.idTokenClaims?.emails?$.idTokenClaims.emails[0]:null;if(K.username=O||f||"",K.name=$.idTokenClaims?.name||"",K.cloudGraphHostName=$.cloudGraphHostName,K.msGraphHost=$.msGraphHost,$.tenantProfiles)K.tenantProfiles=$.tenantProfiles;else{let Y=c1($.homeAccountId,K.localAccountId,K.realm,$.idTokenClaims);K.tenantProfiles=[Y]}return K}static createFromAccountInfo($,q,_){let K=new X8;return K.authorityType=$.authorityType||Mz.GENERIC_ACCOUNT_TYPE,K.homeAccountId=$.homeAccountId,K.localAccountId=$.localAccountId,K.nativeAccountId=$.nativeAccountId,K.realm=$.tenantId,K.environment=$.environment,K.username=$.username,K.name=$.name,K.cloudGraphHostName=q,K.msGraphHost=_,K.tenantProfiles=Array.from($.tenantProfiles?.values()||[]),K}static generateHomeAccountId($,q,_,K,P){if(!(q===Bq.Adfs||q===Bq.Dsts)){if($)try{let w=Rz($,K.base64Decode);if(w.uid&&w.utid)return`${w.uid}.${w.utid}`}catch(w){}_.warning("No client info in response")}return P?.sub||""}static isAccountEntity($){if(!$)return!1;return $.hasOwnProperty("homeAccountId")&&$.hasOwnProperty("environment")&&$.hasOwnProperty("realm")&&$.hasOwnProperty("localAccountId")&&$.hasOwnProperty("username")&&$.hasOwnProperty("authorityType")}static accountInfoIsEqual($,q,_){if(!$||!q)return!1;let K=!0;if(_){let P=$.idTokenClaims||{},w=q.idTokenClaims||{};K=P.iat===w.iat&&P.nonce===w.nonce}return $.homeAccountId===q.homeAccountId&&$.localAccountId===q.localAccountId&&$.username===q.username&&$.tenantId===q.tenantId&&$.environment===q.environment&&$.nativeAccountId===q.nativeAccountId&&K}}/*! @azure/msal-common v14.16.0 2024-11-19 */function _f$($){if($.startsWith("#/"))return $.substring(2);else if($.startsWith("#")||$.startsWith("?"))return $.substring(1);return $}function CR($){if(!$||$.indexOf("=")<0)return null;try{let q=_f$($),_=Object.fromEntries(new URLSearchParams(q));if(_.code||_.error||_.error_description||_.state)return _}catch(q){throw l(oj)}return null}/*! @azure/msal-common v14.16.0 2024-11-19 */class x${get urlString(){return this._urlString}constructor($){if(this._urlString=$,!this._urlString)throw j6(C7);if(!$.includes("#"))this._urlString=x$.canonicalizeUri($)}static canonicalizeUri($){if($){let q=$.toLowerCase();if(L8.endsWith(q,"?"))q=q.slice(0,-1);else if(L8.endsWith(q,"?/"))q=q.slice(0,-2);if(!L8.endsWith(q,"/"))q+="/";return q}return $}validateAsUri(){let $;try{$=this.getUrlComponents()}catch(q){throw j6(_K)}if(!$.HostNameAndPort||!$.PathSegments)throw j6(_K);if(!$.Protocol||$.Protocol.toLowerCase()!=="https:")throw j6(w3)}static appendQueryString($,q){if(!q)return $;return $.indexOf("?")<0?`${$}?${q}`:`${$}&${q}`}static removeHashFromUrl($){return x$.canonicalizeUri($.split("#")[0])}replaceTenantPath($){let q=this.getUrlComponents(),_=q.PathSegments;if($&&_.length!==0&&(_[0]===N_.COMMON||_[0]===N_.ORGANIZATIONS))_[0]=$;return x$.constructAuthorityUriFromObject(q)}getUrlComponents(){let $=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),q=this.urlString.match($);if(!q)throw j6(_K);let _={Protocol:q[1],HostNameAndPort:q[4],AbsolutePath:q[5],QueryString:q[7]},K=_.AbsolutePath.split("/");if(K=K.filter((P)=>P&&P.length>0),_.PathSegments=K,_.QueryString&&_.QueryString.endsWith("/"))_.QueryString=_.QueryString.substring(0,_.QueryString.length-1);return _}static getDomainFromUrl($){let q=RegExp("^([^:/?#]+://)?([^/?#]*)"),_=$.match(q);if(!_)throw j6(_K);return _[2]}static getAbsoluteUrl($,q){if($[0]===a.FORWARD_SLASH){let K=new x$(q).getUrlComponents();return K.Protocol+"//"+K.HostNameAndPort+$}return $}static constructAuthorityUriFromObject($){return new x$($.Protocol+"//"+$.HostNameAndPort+"/"+$.PathSegments.join("/"))}static hashContainsKnownProperties($){return!!CR($)}}/*! @azure/msal-common v14.16.0 2024-11-19 */var nR={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},MR=nR.endpointMetadata,I1=nR.instanceDiscoveryMetadata,rR=new Set;I1.metadata.forEach(($)=>{$.aliases.forEach((q)=>{rR.add(q)})});function Kf$($,q){let _,K=$.canonicalAuthority;if(K){let P=new x$(K).getUrlComponents().HostNameAndPort;_=vR(P,$.cloudDiscoveryMetadata?.metadata,u8.CONFIG,q)||vR(P,I1.metadata,u8.HARDCODED_VALUES,q)||$.knownAuthorities}return _||[]}function vR($,q,_,K){if(K?.trace(`getAliasesFromMetadata called with source: ${_}`),$&&q){let P=Cz(q,$);if(P)return K?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${_}, returning aliases`),P.aliases;else K?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${_}`)}return null}function Pf$($){return Cz(I1.metadata,$)}function Cz($,q){for(let _=0;_<$.length;_++){let K=$[_];if(K.aliases.includes(q))return K}return null}/*! @azure/msal-common v14.16.0 2024-11-19 */var VR="cache_quota_exceeded",l1="cache_error_unknown";/*! @azure/msal-common v14.16.0 2024-11-19 */var R1={[VR]:"Exceeded cache storage capacity.",[l1]:"Unexpected error occurred when using cache storage."};class nj extends Error{constructor($,q){let _=q||(R1[$]?R1[$]:R1[l1]);super(`${$}: ${_}`);Object.setPrototypeOf(this,nj.prototype),this.name="CacheError",this.errorCode=$,this.errorMessage=_}}/*! @azure/msal-common v14.16.0 2024-11-19 */class D3{constructor($,q,_,K){this.clientId=$,this.cryptoImpl=q,this.commonLogger=_.clone(ER,g1),this.staticAuthorityOptions=K}getAllAccounts($){return this.buildTenantProfiles(this.getAccountsFilteredBy($||{}),$)}getAccountInfoFilteredBy($){let q=this.getAllAccounts($);if(q.length>1)return q.sort((K)=>{return K.idTokenClaims?-1:1})[0];else if(q.length===1)return q[0];else return null}getBaseAccountInfo($){let q=this.getAccountsFilteredBy($);if(q.length>0)return q[0].getAccountInfo();else return null}buildTenantProfiles($,q){return $.flatMap((_)=>{return this.getTenantProfilesFromAccountEntity(_,q?.tenantId,q)})}getTenantedAccountInfoByFilter($,q,_,K){let P=null,w;if(K){if(!this.tenantProfileMatchesFilter(_,K))return null}let O=this.getIdToken($,q,_.tenantId);if(O){if(w=X3(O.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(w,K))return null}return P=RR($,_,w,O?.secret),P}getTenantProfilesFromAccountEntity($,q,_){let K=$.getAccountInfo(),P=K.tenantProfiles||new Map,w=this.getTokenKeys();if(q){let f=P.get(q);if(f)P=new Map([[q,f]]);else return[]}let O=[];return P.forEach((f)=>{let Y=this.getTenantedAccountInfoByFilter(K,w,f,_);if(Y)O.push(Y)}),O}tenantProfileMatchesFilter($,q){if(!!q.localAccountId&&!this.matchLocalAccountIdFromTenantProfile($,q.localAccountId))return!1;if(!!q.name&&$.name!==q.name)return!1;if(q.isHomeTenant!==void 0&&$.isHomeTenant!==q.isHomeTenant)return!1;return!0}idTokenClaimsMatchTenantProfileFilter($,q){if(q){if(!!q.localAccountId&&!this.matchLocalAccountIdFromTokenClaims($,q.localAccountId))return!1;if(!!q.loginHint&&!this.matchLoginHintFromTokenClaims($,q.loginHint))return!1;if(!!q.username&&!this.matchUsername($.preferred_username,q.username))return!1;if(!!q.name&&!this.matchName($,q.name))return!1;if(!!q.sid&&!this.matchSid($,q.sid))return!1}return!0}async saveCacheRecord($,q,_){if(!$)throw l(Bj);try{if($.account)this.setAccount($.account);if(!!$.idToken&&q?.idToken!==!1)this.setIdTokenCredential($.idToken);if(!!$.accessToken&&q?.accessToken!==!1)await this.saveAccessToken($.accessToken);if(!!$.refreshToken&&q?.refreshToken!==!1)this.setRefreshTokenCredential($.refreshToken);if($.appMetadata)this.setAppMetadata($.appMetadata)}catch(K){if(this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),K instanceof Error)if(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${K.message}`,_),K.name==="QuotaExceededError"||K.name==="NS_ERROR_DOM_QUOTA_REACHED"||K.message.includes("exceeded the quota"))throw this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",_),new nj(VR);else throw new nj(K.name,K.message);else throw this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${K}`,_),new nj(l1)}}async saveAccessToken($){let q={clientId:$.clientId,credentialType:$.credentialType,environment:$.environment,homeAccountId:$.homeAccountId,realm:$.realm,tokenType:$.tokenType,requestedClaimsHash:$.requestedClaimsHash},_=this.getTokenKeys(),K=s6.fromString($.target),P=[];_.accessToken.forEach((w)=>{if(!this.accessTokenKeyMatchesFilter(w,q,!1))return;let O=this.getAccessTokenCredential(w);if(O&&this.credentialMatchesFilter(O,q)){if(s6.fromString(O.target).intersectingScopeSets(K))P.push(this.removeAccessToken(w))}}),await Promise.all(P),this.setAccessTokenCredential($)}getAccountsFilteredBy($){let q=this.getAccountKeys(),_=[];return q.forEach((K)=>{if(!this.isAccountKey(K,$.homeAccountId))return;let P=this.getAccount(K,this.commonLogger);if(!P)return;if(!!$.homeAccountId&&!this.matchHomeAccountId(P,$.homeAccountId))return;if(!!$.username&&!this.matchUsername(P.username,$.username))return;if(!!$.environment&&!this.matchEnvironment(P,$.environment))return;if(!!$.realm&&!this.matchRealm(P,$.realm))return;if(!!$.nativeAccountId&&!this.matchNativeAccountId(P,$.nativeAccountId))return;if(!!$.authorityType&&!this.matchAuthorityType(P,$.authorityType))return;let w={localAccountId:$?.localAccountId,name:$?.name},O=P.tenantProfiles?.filter((f)=>{return this.tenantProfileMatchesFilter(f,w)});if(O&&O.length===0)return;_.push(P)}),_}isAccountKey($,q,_){if($.split(t6.CACHE_KEY_SEPARATOR).length<3)return!1;if(q&&!$.toLowerCase().includes(q.toLowerCase()))return!1;if(_&&!$.toLowerCase().includes(_.toLowerCase()))return!1;return!0}isCredentialKey($){if($.split(t6.CACHE_KEY_SEPARATOR).length<6)return!1;let q=$.toLowerCase();if(q.indexOf(b$.ID_TOKEN.toLowerCase())===-1&&q.indexOf(b$.ACCESS_TOKEN.toLowerCase())===-1&&q.indexOf(b$.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&q.indexOf(b$.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(q.indexOf(b$.REFRESH_TOKEN.toLowerCase())>-1){let _=`${b$.REFRESH_TOKEN}${t6.CACHE_KEY_SEPARATOR}${this.clientId}${t6.CACHE_KEY_SEPARATOR}`,K=`${b$.REFRESH_TOKEN}${t6.CACHE_KEY_SEPARATOR}${Lj}${t6.CACHE_KEY_SEPARATOR}`;if(q.indexOf(_.toLowerCase())===-1&&q.indexOf(K.toLowerCase())===-1)return!1}else if(q.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter($,q){if(!!q.clientId&&!this.matchClientId($,q.clientId))return!1;if(!!q.userAssertionHash&&!this.matchUserAssertionHash($,q.userAssertionHash))return!1;if(typeof q.homeAccountId==="string"&&!this.matchHomeAccountId($,q.homeAccountId))return!1;if(!!q.environment&&!this.matchEnvironment($,q.environment))return!1;if(!!q.realm&&!this.matchRealm($,q.realm))return!1;if(!!q.credentialType&&!this.matchCredentialType($,q.credentialType))return!1;if(!!q.familyId&&!this.matchFamilyId($,q.familyId))return!1;if(!!q.target&&!this.matchTarget($,q.target))return!1;if(q.requestedClaimsHash||$.requestedClaimsHash){if($.requestedClaimsHash!==q.requestedClaimsHash)return!1}if($.credentialType===b$.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(!!q.tokenType&&!this.matchTokenType($,q.tokenType))return!1;if(q.tokenType===I$.SSH){if(q.keyId&&!this.matchKeyId($,q.keyId))return!1}}return!0}getAppMetadataFilteredBy($){let q=this.getKeys(),_={};return q.forEach((K)=>{if(!this.isAppMetadata(K))return;let P=this.getAppMetadata(K);if(!P)return;if(!!$.environment&&!this.matchEnvironment(P,$.environment))return;if(!!$.clientId&&!this.matchClientId(P,$.clientId))return;_[K]=P}),_}getAuthorityMetadataByAlias($){let q=this.getAuthorityMetadataKeys(),_=null;return q.forEach((K)=>{if(!this.isAuthorityMetadata(K)||K.indexOf(this.clientId)===-1)return;let P=this.getAuthorityMetadata(K);if(!P)return;if(P.aliases.indexOf($)===-1)return;_=P}),_}async removeAllAccounts(){let $=this.getAccountKeys(),q=[];$.forEach((_)=>{q.push(this.removeAccount(_))}),await Promise.all(q)}async removeAccount($){let q=this.getAccount($,this.commonLogger);if(!q)return;await this.removeAccountContext(q),this.removeItem($)}async removeAccountContext($){let q=this.getTokenKeys(),_=$.generateAccountId(),K=[];q.idToken.forEach((P)=>{if(P.indexOf(_)===0)this.removeIdToken(P)}),q.accessToken.forEach((P)=>{if(P.indexOf(_)===0)K.push(this.removeAccessToken(P))}),q.refreshToken.forEach((P)=>{if(P.indexOf(_)===0)this.removeRefreshToken(P)}),await Promise.all(K)}updateOutdatedCachedAccount($,q,_){if(q&&q.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let K=this.getAccountKeys().filter((Y)=>{return Y.startsWith(q.homeAccountId)}),P=[];K.forEach((Y)=>{let h=this.getCachedAccountEntity(Y);if(h)P.push(h)});let w=P.find((Y)=>{return Lz(Y.realm,Y.homeAccountId)})||P[0];w.tenantProfiles=P.map((Y)=>{return{tenantId:Y.realm,localAccountId:Y.localAccountId,name:Y.name,isHomeTenant:Lz(Y.realm,Y.homeAccountId)}});let O=D3.toObject(new X8,{...w}),f=O.generateAccountKey();return K.forEach((Y)=>{if(Y!==f)this.removeOutdatedAccount($)}),this.setAccount(O),_?.verbose("Updated an outdated account entity in the cache"),O}return q}async removeAccessToken($){let q=this.getAccessTokenCredential($);if(!q)return;if(q.credentialType.toLowerCase()===b$.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()){if(q.tokenType===I$.POP){let K=q.keyId;if(K)try{await this.cryptoImpl.removeTokenBindingKey(K)}catch(P){throw l(q3)}}}return this.removeItem($)}removeAppMetadata(){return this.getKeys().forEach((q)=>{if(this.isAppMetadata(q))this.removeItem(q)}),!0}readAccountFromCache($){let q=X8.generateAccountCacheKey($);return this.getAccount(q,this.commonLogger)}getIdToken($,q,_,K,P){this.commonLogger.trace("CacheManager - getIdToken called");let w={homeAccountId:$.homeAccountId,environment:$.environment,credentialType:b$.ID_TOKEN,clientId:this.clientId,realm:_},O=this.getIdTokensByFilter(w,q),f=O.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;else if(f>1){let Y=O;if(!_){let h=new Map;O.forEach((T,p)=>{if(T.realm===$.tenantId)h.set(p,T)});let k=h.size;if(k<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),O.values().next().value;else if(k===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),h.values().next().value;else Y=h}if(this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),Y.forEach((h,k)=>{this.removeIdToken(k)}),K&&P)K.addFields({multiMatchedID:O.size},P);return null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),O.values().next().value}getIdTokensByFilter($,q){let _=q&&q.idToken||this.getTokenKeys().idToken,K=new Map;return _.forEach((P)=>{if(!this.idTokenKeyMatchesFilter(P,{clientId:this.clientId,...$}))return;let w=this.getIdTokenCredential(P);if(w&&this.credentialMatchesFilter(w,$))K.set(P,w)}),K}idTokenKeyMatchesFilter($,q){let _=$.toLowerCase();if(q.clientId&&_.indexOf(q.clientId.toLowerCase())===-1)return!1;if(q.homeAccountId&&_.indexOf(q.homeAccountId.toLowerCase())===-1)return!1;return!0}removeIdToken($){this.removeItem($)}removeRefreshToken($){this.removeItem($)}getAccessToken($,q,_,K,P,w){this.commonLogger.trace("CacheManager - getAccessToken called");let O=s6.createSearchScopes(q.scopes),f=q.authenticationScheme||I$.BEARER,Y=f&&f.toLowerCase()!==I$.BEARER.toLowerCase()?b$.ACCESS_TOKEN_WITH_AUTH_SCHEME:b$.ACCESS_TOKEN,h={homeAccountId:$.homeAccountId,environment:$.environment,credentialType:Y,clientId:this.clientId,realm:K||$.tenantId,target:O,tokenType:f,keyId:q.sshKid,requestedClaimsHash:q.requestedClaimsHash},k=_&&_.accessToken||this.getTokenKeys().accessToken,T=[];k.forEach((G)=>{if(this.accessTokenKeyMatchesFilter(G,h,!0)){let Z=this.getAccessTokenCredential(G);if(Z&&this.credentialMatchesFilter(Z,h))T.push(Z)}});let p=T.length;if(p<1)return this.commonLogger.info("CacheManager:getAccessToken - No token found"),null;else if(p>1){if(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),T.forEach((G)=>{this.removeAccessToken(h7(G))}),P&&w)P.addFields({multiMatchedAT:T.length},w);return null}return this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),T[0]}accessTokenKeyMatchesFilter($,q,_){let K=$.toLowerCase();if(q.clientId&&K.indexOf(q.clientId.toLowerCase())===-1)return!1;if(q.homeAccountId&&K.indexOf(q.homeAccountId.toLowerCase())===-1)return!1;if(q.realm&&K.indexOf(q.realm.toLowerCase())===-1)return!1;if(q.requestedClaimsHash&&K.indexOf(q.requestedClaimsHash.toLowerCase())===-1)return!1;if(q.target){let P=q.target.asArray();for(let w=0;w<P.length;w++)if(_&&!K.includes(P[w].toLowerCase()))return!1;else if(!_&&K.includes(P[w].toLowerCase()))return!0}return!0}getAccessTokensByFilter($){let q=this.getTokenKeys(),_=[];return q.accessToken.forEach((K)=>{if(!this.accessTokenKeyMatchesFilter(K,$,!0))return;let P=this.getAccessTokenCredential(K);if(P&&this.credentialMatchesFilter(P,$))_.push(P)}),_}getRefreshToken($,q,_,K,P){this.commonLogger.trace("CacheManager - getRefreshToken called");let w=q?Lj:void 0,O={homeAccountId:$.homeAccountId,environment:$.environment,credentialType:b$.REFRESH_TOKEN,clientId:this.clientId,familyId:w},f=_&&_.refreshToken||this.getTokenKeys().refreshToken,Y=[];f.forEach((k)=>{if(this.refreshTokenKeyMatchesFilter(k,O)){let T=this.getRefreshTokenCredential(k);if(T&&this.credentialMatchesFilter(T,O))Y.push(T)}});let h=Y.length;if(h<1)return this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null;if(h>1&&K&&P)K.addFields({multiMatchedRT:h},P);return this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),Y[0]}refreshTokenKeyMatchesFilter($,q){let _=$.toLowerCase();if(q.familyId&&_.indexOf(q.familyId.toLowerCase())===-1)return!1;if(!q.familyId&&q.clientId&&_.indexOf(q.clientId.toLowerCase())===-1)return!1;if(q.homeAccountId&&_.indexOf(q.homeAccountId.toLowerCase())===-1)return!1;return!0}readAppMetadataFromCache($){let q={environment:$,clientId:this.clientId},_=this.getAppMetadataFilteredBy(q),K=Object.keys(_).map((w)=>_[w]),P=K.length;if(P<1)return null;else if(P>1)throw l(aj);return K[0]}isAppMetadataFOCI($){let q=this.readAppMetadataFromCache($);return!!(q&&q.familyId===Lj)}matchHomeAccountId($,q){return typeof $.homeAccountId==="string"&&q===$.homeAccountId}matchLocalAccountIdFromTokenClaims($,q){let _=$.oid||$.sub;return q===_}matchLocalAccountIdFromTenantProfile($,q){return $.localAccountId===q}matchName($,q){return q.toLowerCase()===$.name?.toLowerCase()}matchUsername($,q){return!!($&&typeof $==="string"&&q?.toLowerCase()===$.toLowerCase())}matchUserAssertionHash($,q){return!!($.userAssertionHash&&q===$.userAssertionHash)}matchEnvironment($,q){if(this.staticAuthorityOptions){let K=Kf$(this.staticAuthorityOptions,this.commonLogger);if(K.includes(q)&&K.includes($.environment))return!0}let _=this.getAuthorityMetadataByAlias(q);if(_&&_.aliases.indexOf($.environment)>-1)return!0;return!1}matchCredentialType($,q){return $.credentialType&&q.toLowerCase()===$.credentialType.toLowerCase()}matchClientId($,q){return!!($.clientId&&q===$.clientId)}matchFamilyId($,q){return!!($.familyId&&q===$.familyId)}matchRealm($,q){return $.realm?.toLowerCase()===q.toLowerCase()}matchNativeAccountId($,q){return!!($.nativeAccountId&&q===$.nativeAccountId)}matchLoginHintFromTokenClaims($,q){if($.login_hint===q)return!0;if($.preferred_username===q)return!0;if($.upn===q)return!0;return!1}matchSid($,q){return $.sid===q}matchAuthorityType($,q){return!!($.authorityType&&q.toLowerCase()===$.authorityType.toLowerCase())}matchTarget($,q){if($.credentialType!==b$.ACCESS_TOKEN&&$.credentialType!==b$.ACCESS_TOKEN_WITH_AUTH_SCHEME||!$.target)return!1;return s6.fromString($.target).containsScopeSet(q)}matchTokenType($,q){return!!($.tokenType&&$.tokenType===q)}matchKeyId($,q){return!!($.keyId&&$.keyId===q)}isAppMetadata($){return $.indexOf(i1)!==-1}isAuthorityMetadata($){return $.indexOf(kz.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey($){return`${kz.CACHE_KEY}-${this.clientId}-${$}`}static toObject($,q){for(let _ in q)$[_]=q[_];return $}}class xR extends D3{setAccount(){throw l(D$)}getAccount(){throw l(D$)}getCachedAccountEntity(){throw l(D$)}setIdTokenCredential(){throw l(D$)}getIdTokenCredential(){throw l(D$)}setAccessTokenCredential(){throw l(D$)}getAccessTokenCredential(){throw l(D$)}setRefreshTokenCredential(){throw l(D$)}getRefreshTokenCredential(){throw l(D$)}setAppMetadata(){throw l(D$)}getAppMetadata(){throw l(D$)}setServerTelemetry(){throw l(D$)}getServerTelemetry(){throw l(D$)}setAuthorityMetadata(){throw l(D$)}getAuthorityMetadata(){throw l(D$)}getAuthorityMetadataKeys(){throw l(D$)}setThrottlingCache(){throw l(D$)}getThrottlingCache(){throw l(D$)}removeItem(){throw l(D$)}getKeys(){throw l(D$)}getAccountKeys(){throw l(D$)}getTokenKeys(){throw l(D$)}updateCredentialCacheKey(){throw l(D$)}removeOutdatedAccount(){throw l(D$)}}/*! @azure/msal-common v14.16.0 2024-11-19 */var jf$={tokenRenewalOffsetSeconds:mR,preventCorsPreflight:!1},wf$={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:cM$.LogLevel.Info,correlationId:a.EMPTY_STRING},Of$={claimsBasedCachingEnabled:!1},zf$={async sendGetRequestAsync(){throw l(D$)},async sendPostRequestAsync(){throw l(D$)}},ff$={sku:a.SKU,version:g1,cpu:a.EMPTY_STRING,os:a.EMPTY_STRING},Mf$={clientSecret:a.EMPTY_STRING,clientAssertion:void 0},vf$={azureCloudInstance:oz.None,tenant:`${a.DEFAULT_COMMON_TENANT}`},Hf$={application:{appName:"",appVersion:""}};function Yf$({authOptions:$,systemOptions:q,loggerOptions:_,cacheOptions:K,storageInterface:P,networkInterface:w,cryptoInterface:O,clientCredentials:f,libraryInfo:Y,telemetry:h,serverTelemetryManager:k,persistencePlugin:T,serializableCache:p}){let G={...wf$,..._};return{authOptions:hf$($),systemOptions:{...jf$,...q},loggerOptions:G,cacheOptions:{...Of$,...K},storageInterface:P||new xR($.clientId,x1,new wK(G)),networkInterface:w||zf$,cryptoInterface:O||x1,clientCredentials:f||Mf$,libraryInfo:{...ff$,...Y},telemetry:{...Hf$,...h},serverTelemetryManager:k||null,persistencePlugin:T||null,serializableCache:p||null}}function hf$($){return{clientCapabilities:[],azureCloudOptions:vf$,skipAuthorityMetadataCache:!1,instanceAware:!1,...$}}function d1($){return $.authOptions.authority.options.protocolMode===FK.OIDC}/*! @azure/msal-common v14.16.0 2024-11-19 */var Uq={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.16.0 2024-11-19 */var h3="client_id",dR="redirect_uri",HR="response_type",kf$="response_mode",Tf$="grant_type",Af$="claims",Wf$="scope",Jf$="refresh_token",Xf$="state",Df$="nonce",pf$="prompt",yf$="code",Sf$="code_challenge",Gf$="code_challenge_method",Zf$="code_verifier",Nf$="client-request-id",mf$="x-client-SKU",Ef$="x-client-VER",uf$="x-client-OS",Rf$="x-client-CPU",Lf$="x-client-current-telemetry",Cf$="x-client-last-telemetry",nf$="x-ms-lib-capability",rf$="x-app-name",Vf$="x-app-ver",xf$="post_logout_redirect_uri",df$="id_token_hint",bf$="device_code",of$="client_secret",if$="client_assertion",gf$="client_assertion_type",YR="token_type",hR="req_cnf",af$="assertion",cf$="requested_token_use",If$="on_behalf_of",kR="return_spa_code",lf$="nativebroker",tf$="logout_hint",sf$="sid",ef$="login_hint",Bf$="domain_hint",TR="x-client-xtra-sku",bR="brk_client_id",Ff$="brk_redirect_uri";/*! @azure/msal-common v14.16.0 2024-11-19 */class tK{static validateRedirectUri($){if(!$)throw j6(j3)}static validatePrompt($){let q=[];for(let _ in A7)q.push(A7[_]);if(q.indexOf($)<0)throw j6(z3)}static validateClaims($){try{JSON.parse($)}catch(q){throw j6(n7)}}static validateCodeChallengeParams($,q){if(!$||!q)throw j6(r7);else this.validateCodeChallengeMethod(q)}static validateCodeChallengeMethod($){if([V1.PLAIN,V1.S256].indexOf($)<0)throw j6(v3)}}/*! @azure/msal-common v14.16.0 2024-11-19 */function Uf$($,q,_){if(!q)return;let K=$.get(h3);if(K&&$.has(bR))_?.addFields({embeddedClientId:K,embeddedRedirectUri:$.get(dR)},q)}class D8{constructor($,q){this.parameters=new Map,this.performanceClient=q,this.correlationId=$}addResponseTypeCode(){this.parameters.set(HR,encodeURIComponent(a.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(HR,encodeURIComponent(`${a.TOKEN_RESPONSE_TYPE} ${a.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode($){this.parameters.set(kf$,encodeURIComponent($?$:bz.QUERY))}addNativeBroker(){this.parameters.set(lf$,encodeURIComponent("1"))}addScopes($,q=!0,_=KK){if(q&&!_.includes("openid")&&!$.includes("openid"))_.push("openid");let K=q?[...$||[],..._]:$||[],P=new s6(K);this.parameters.set(Wf$,encodeURIComponent(P.printScopes()))}addClientId($){this.parameters.set(h3,encodeURIComponent($))}addRedirectUri($){tK.validateRedirectUri($),this.parameters.set(dR,encodeURIComponent($))}addPostLogoutRedirectUri($){tK.validateRedirectUri($),this.parameters.set(xf$,encodeURIComponent($))}addIdTokenHint($){this.parameters.set(df$,encodeURIComponent($))}addDomainHint($){this.parameters.set(Bf$,encodeURIComponent($))}addLoginHint($){this.parameters.set(ef$,encodeURIComponent($))}addCcsUpn($){this.parameters.set(V6.CCS_HEADER,encodeURIComponent(`UPN:${$}`))}addCcsOid($){this.parameters.set(V6.CCS_HEADER,encodeURIComponent(`Oid:${$.uid}@${$.utid}`))}addSid($){this.parameters.set(sf$,encodeURIComponent($))}addClaims($,q){let _=this.addClientCapabilitiesToClaims($,q);tK.validateClaims(_),this.parameters.set(Af$,encodeURIComponent(_))}addCorrelationId($){this.parameters.set(Nf$,encodeURIComponent($))}addLibraryInfo($){if(this.parameters.set(mf$,$.sku),this.parameters.set(Ef$,$.version),$.os)this.parameters.set(uf$,$.os);if($.cpu)this.parameters.set(Rf$,$.cpu)}addApplicationTelemetry($){if($?.appName)this.parameters.set(rf$,$.appName);if($?.appVersion)this.parameters.set(Vf$,$.appVersion)}addPrompt($){tK.validatePrompt($),this.parameters.set(`${pf$}`,encodeURIComponent($))}addState($){if($)this.parameters.set(Xf$,encodeURIComponent($))}addNonce($){this.parameters.set(Df$,encodeURIComponent($))}addCodeChallengeParams($,q){if(tK.validateCodeChallengeParams($,q),$&&q)this.parameters.set(Sf$,encodeURIComponent($)),this.parameters.set(Gf$,encodeURIComponent(q));else throw j6(r7)}addAuthorizationCode($){this.parameters.set(yf$,encodeURIComponent($))}addDeviceCode($){this.parameters.set(bf$,encodeURIComponent($))}addRefreshToken($){this.parameters.set(Jf$,encodeURIComponent($))}addCodeVerifier($){this.parameters.set(Zf$,encodeURIComponent($))}addClientSecret($){this.parameters.set(of$,encodeURIComponent($))}addClientAssertion($){if($)this.parameters.set(if$,encodeURIComponent($))}addClientAssertionType($){if($)this.parameters.set(gf$,encodeURIComponent($))}addOboAssertion($){this.parameters.set(af$,encodeURIComponent($))}addRequestTokenUse($){this.parameters.set(cf$,encodeURIComponent($))}addGrantType($){this.parameters.set(Tf$,encodeURIComponent($))}addClientInfo(){this.parameters.set(C9$,"1")}addExtraQueryParameters($){Object.entries($).forEach(([q,_])=>{if(!this.parameters.has(q)&&_)this.parameters.set(q,_)})}addClientCapabilitiesToClaims($,q){let _;if(!$)_={};else try{_=JSON.parse($)}catch(K){throw j6(n7)}if(q&&q.length>0){if(!_.hasOwnProperty(fz.ACCESS_TOKEN))_[fz.ACCESS_TOKEN]={};_[fz.ACCESS_TOKEN][fz.XMS_CC]={values:q}}return JSON.stringify(_)}addUsername($){this.parameters.set(KR.username,encodeURIComponent($))}addPassword($){this.parameters.set(KR.password,encodeURIComponent($))}addPopToken($){if($)this.parameters.set(YR,I$.POP),this.parameters.set(hR,encodeURIComponent($))}addSshJwk($){if($)this.parameters.set(YR,I$.SSH),this.parameters.set(hR,encodeURIComponent($))}addServerTelemetry($){this.parameters.set(Lf$,$.generateCurrentRequestHeaderValue()),this.parameters.set(Cf$,$.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(nf$,Cj.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint($){this.parameters.set(tf$,encodeURIComponent($))}addBrokerParameters($){let q={};q[bR]=$.brokerClientId,q[Ff$]=$.brokerRedirectUri,this.addExtraQueryParameters(q)}createQueryString(){let $=new Array;return this.parameters.forEach((q,_)=>{$.push(`${_}=${q}`)}),Uf$(this.parameters,this.correlationId,this.performanceClient),$.join("&")}}/*! @azure/msal-common v14.16.0 2024-11-19 */function Qf$($){return $.hasOwnProperty("authorization_endpoint")&&$.hasOwnProperty("token_endpoint")&&$.hasOwnProperty("issuer")&&$.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.16.0 2024-11-19 */function $M$($){return $.hasOwnProperty("tenant_discovery_endpoint")&&$.hasOwnProperty("metadata")}/*! @azure/msal-common v14.16.0 2024-11-19 */function qM$($){return $.hasOwnProperty("error")&&$.hasOwnProperty("error_description")}/*! @azure/msal-common v14.16.0 2024-11-19 */var _$={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"};/*! @azure/msal-common v14.16.0 2024-11-19 */var _M$=($,q,_,K,P)=>{return(...w)=>{_.trace(`Executing function ${q}`);let O=K?.startMeasurement(q,P);if(P){let f=q+"CallCount";K?.incrementFields({[f]:1},P)}try{let f=$(...w);return O?.end({success:!0}),_.trace(`Returning result from ${q}`),f}catch(f){_.trace(`Error occurred in ${q}`);try{_.trace(JSON.stringify(f))}catch(Y){_.trace("Unable to print error message.")}throw O?.end({success:!1},f),f}}},r$=($,q,_,K,P)=>{return(...w)=>{_.trace(`Executing function ${q}`);let O=K?.startMeasurement(q,P);if(P){let f=q+"CallCount";K?.incrementFields({[f]:1},P)}return K?.setPreQueueTime(q,P),$(...w).then((f)=>{return _.trace(`Returning result from ${q}`),O?.end({success:!0}),f}).catch((f)=>{_.trace(`Error occurred in ${q}`);try{_.trace(JSON.stringify(f))}catch(Y){_.trace("Unable to print error message.")}throw O?.end({success:!1},f),f})}};/*! @azure/msal-common v14.16.0 2024-11-19 */class gz{constructor($,q,_,K){this.networkInterface=$,this.logger=q,this.performanceClient=_,this.correlationId=K}async detectRegion($,q){this.performanceClient?.addQueueMeasurement(_$.RegionDiscoveryDetectRegion,this.correlationId);let _=$;if(!_){let K=gz.IMDS_OPTIONS;try{let P=await r$(this.getRegionFromIMDS.bind(this),_$.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a.IMDS_VERSION,K);if(P.status===vz.httpSuccess)_=P.body,q.region_source=Y7.IMDS;if(P.status===vz.httpBadRequest){let w=await r$(this.getCurrentVersion.bind(this),_$.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(K);if(!w)return q.region_source=Y7.FAILED_AUTO_DETECTION,null;let O=await r$(this.getRegionFromIMDS.bind(this),_$.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(w,K);if(O.status===vz.httpSuccess)_=O.body,q.region_source=Y7.IMDS}}catch(P){return q.region_source=Y7.FAILED_AUTO_DETECTION,null}}else q.region_source=Y7.ENVIRONMENT_VARIABLE;if(!_)q.region_source=Y7.FAILED_AUTO_DETECTION;return _||null}async getRegionFromIMDS($,q){return this.performanceClient?.addQueueMeasurement(_$.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${a.IMDS_ENDPOINT}?api-version=${$}&format=text`,q,a.IMDS_TIMEOUT)}async getCurrentVersion($){this.performanceClient?.addQueueMeasurement(_$.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let q=await this.networkInterface.sendGetRequestAsync(`${a.IMDS_ENDPOINT}?format=json`,$);if(q.status===vz.httpBadRequest&&q.body&&q.body["newest-versions"]&&q.body["newest-versions"].length>0)return q.body["newest-versions"][0];return null}catch(q){return null}}}gz.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.16.0 2024-11-19 */class z8{constructor($,q,_,K,P,w,O,f){this.canonicalAuthority=$,this._canonicalAuthority.validateAsUri(),this.networkInterface=q,this.cacheManager=_,this.authorityOptions=K,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=P,this.performanceClient=O,this.correlationId=w,this.managedIdentity=f||!1,this.regionDiscovery=new gz(q,this.logger,this.performanceClient,this.correlationId)}getAuthorityType($){if($.HostNameAndPort.endsWith(a.CIAM_AUTH_URL))return Bq.Ciam;let q=$.PathSegments;if(q.length)switch(q[0].toLowerCase()){case a.ADFS:return Bq.Adfs;case a.DSTS:return Bq.Dsts}return Bq.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority($){this._canonicalAuthority=new x$($),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){if(!this._canonicalAuthorityUrlComponents)this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents();return this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);else throw l(l8)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);else throw l(l8)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));else throw l(l8)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw l(_3);return this.replacePath(this.metadata.end_session_endpoint)}else throw l(l8)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);else throw l(l8)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);else throw l(l8)}canReplaceTenant($){return $.PathSegments.length===1&&!z8.reservedTenantDomains.has($.PathSegments[0])&&this.getAuthorityType($)===Bq.Default&&this.protocolMode===FK.AAD}replaceTenant($){return $.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath($){let q=$,K=new x$(this.metadata.canonical_authority).getUrlComponents(),P=K.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((O,f)=>{let Y=P[f];if(f===0&&this.canReplaceTenant(K)){let h=new x$(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];if(Y!==h)this.logger.verbose(`Replacing tenant domain name ${Y} with id ${h}`),Y=h}if(O!==Y)q=q.replace(`/${Y}/`,`/${O}/`)}),this.replaceTenant(q)}get defaultOpenIdConfigurationEndpoint(){let $=this.hostnameAndPort;if(this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Bq.Adfs||this.protocolMode!==FK.AAD&&!this.isAliasOfKnownMicrosoftAuthority($))return`${this.canonicalAuthority}.well-known/openid-configuration`;return`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(_$.AuthorityResolveEndpointsAsync,this.correlationId);let $=this.getCurrentMetadataEntity(),q=await r$(this.updateCloudDiscoveryMetadata.bind(this),_$.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)($);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,$.preferred_network);let _=await r$(this.updateEndpointMetadata.bind(this),_$.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)($);this.updateCachedMetadata($,q,{source:_}),this.performanceClient?.addFields({cloudDiscoverySource:q,authorityEndpointSource:_},this.correlationId)}getCurrentMetadataEntity(){let $=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);if(!$)$={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:zR(),jwks_uri:""};return $}updateCachedMetadata($,q,_){if(q!==u8.CACHE&&_?.source!==u8.CACHE)$.expiresAt=zR(),$.canonical_authority=this.canonicalAuthority;let K=this.cacheManager.generateAuthorityMetadataCacheKey($.preferred_cache);this.cacheManager.setAuthorityMetadata(K,$),this.metadata=$}async updateEndpointMetadata($){this.performanceClient?.addQueueMeasurement(_$.AuthorityUpdateEndpointMetadata,this.correlationId);let q=this.updateEndpointMetadataFromLocalSources($);if(q){if(q.source===u8.HARDCODED_VALUES){if(this.authorityOptions.azureRegionConfiguration?.azureRegion){if(q.metadata){let K=await r$(this.updateMetadataWithRegionalInformation.bind(this),_$.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(q.metadata);Hz($,K,!1),$.canonical_authority=this.canonicalAuthority}}}return q.source}let _=await r$(this.getEndpointMetadataFromNetwork.bind(this),_$.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(_){if(this.authorityOptions.azureRegionConfiguration?.azureRegion)_=await r$(this.updateMetadataWithRegionalInformation.bind(this),_$.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(_);return Hz($,_,!0),u8.NETWORK}else throw l(bj,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources($){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let q=this.getEndpointMetadataFromConfig();if(q)return this.logger.verbose("Found endpoint metadata in authority configuration"),Hz($,q,!1),{source:u8.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let K=this.getEndpointMetadataFromHardcodedValues();if(K)return Hz($,K,!1),{source:u8.HARDCODED_VALUES,metadata:K};else this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let _=fR($);if(this.isAuthoritySameType($)&&$.endpointsFromNetwork&&!_)return this.logger.verbose("Found endpoint metadata in the cache."),{source:u8.CACHE};else if(_)this.logger.verbose("The metadata entity is expired.");return null}isAuthoritySameType($){return new x$($.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch($){throw j6(H3)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(_$.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let $={},q=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${q}`);try{let _=await this.networkInterface.sendGetRequestAsync(q,$);if(Qf$(_.body))return _.body;else return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null}catch(_){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${_}`),null}}getEndpointMetadataFromHardcodedValues(){if(this.hostnameAndPort in MR)return MR[this.hostnameAndPort];return null}async updateMetadataWithRegionalInformation($){this.performanceClient?.addQueueMeasurement(_$.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let q=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(q){if(q!==a.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=E1.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=q,z8.replaceWithRegionalInformation($,q);let _=await r$(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),_$.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(_)return this.regionDiscoveryMetadata.region_outcome=E1.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=_,z8.replaceWithRegionalInformation($,_);this.regionDiscoveryMetadata.region_outcome=E1.AUTO_DETECTION_REQUESTED_FAILED}return $}async updateCloudDiscoveryMetadata($){this.performanceClient?.addQueueMeasurement(_$.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let q=this.updateCloudDiscoveryMetadataFromLocalSources($);if(q)return q;let _=await r$(this.getCloudDiscoveryMetadataFromNetwork.bind(this),_$.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(_)return u1($,_,!0),u8.NETWORK;throw j6(Y3)}updateCloudDiscoveryMetadataFromLocalSources($){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||a.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||a.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${$.canonical_authority||a.NOT_APPLICABLE}`);let q=this.getCloudDiscoveryMetadataFromConfig();if(q)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),u1($,q,!1),u8.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let K=Pf$(this.hostnameAndPort);if(K)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),u1($,K,!1),u8.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let _=fR($);if(this.isAuthoritySameType($)&&$.aliasesFromNetwork&&!_)return this.logger.verbose("Found cloud discovery metadata in the cache."),u8.CACHE;else if(_)this.logger.verbose("The metadata entity is expired.");return null}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Bq.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),z8.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let $=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),q=Cz($.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),q)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),q;else this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch($){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),j6(V7)}}if(this.isInKnownAuthorities())return this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),z8.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);return null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(_$.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let $=`${a.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,q={},_=null;try{let K=await this.networkInterface.sendGetRequestAsync($,q),P,w;if($M$(K.body))P=K.body,w=P.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${P.tenant_discovery_endpoint}`);else if(qM$(K.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${K.status}`),P=K.body,P.error===a.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${P.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${P.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),w=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),_=Cz(w,this.hostnameAndPort)}catch(K){if(K instanceof _6)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${K.errorCode}
Error Description: ${K.errorMessage}`);else{let P=K;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${P.name}
Error Description: ${P.message}`)}return null}if(!_)this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),_=z8.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);return _}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((q)=>{return q&&x$.getDomainFromUrl(q).toLowerCase()===this.hostnameAndPort}).length>0}static generateAuthority($,q){let _;if(q&&q.azureCloudInstance!==oz.None){let K=q.tenant?q.tenant:a.DEFAULT_COMMON_TENANT;_=`${q.azureCloudInstance}/${K}/`}return _?_:$}static createCloudDiscoveryMetadataFromHost($){return{preferred_network:$,preferred_cache:$,aliases:[$]}}getPreferredCache(){if(this.managedIdentity)return a.DEFAULT_AUTHORITY_HOST;else if(this.discoveryComplete())return this.metadata.preferred_cache;else throw l(l8)}isAlias($){return this.metadata.aliases.indexOf($)>-1}isAliasOfKnownMicrosoftAuthority($){return rR.has($)}static isPublicCloudAuthority($){return a.KNOWN_PUBLIC_CLOUDS.indexOf($)>=0}static buildRegionalAuthorityString($,q,_){let K=new x$($);K.validateAsUri();let P=K.getUrlComponents(),w=`${q}.${P.HostNameAndPort}`;if(this.isPublicCloudAuthority(P.HostNameAndPort))w=`${q}.${a.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`;let O=x$.constructAuthorityUriFromObject({...K.getUrlComponents(),HostNameAndPort:w}).urlString;if(_)return`${O}?${_}`;return O}static replaceWithRegionalInformation($,q){let _={...$};if(_.authorization_endpoint=z8.buildRegionalAuthorityString(_.authorization_endpoint,q),_.token_endpoint=z8.buildRegionalAuthorityString(_.token_endpoint,q),_.end_session_endpoint)_.end_session_endpoint=z8.buildRegionalAuthorityString(_.end_session_endpoint,q);return _}static transformCIAMAuthority($){let q=$,K=new x$($).getUrlComponents();if(K.PathSegments.length===0&&K.HostNameAndPort.endsWith(a.CIAM_AUTH_URL)){let P=K.HostNameAndPort.split(".")[0];q=`${q}${P}${a.AAD_TENANT_DOMAIN_SUFFIX}`}return q}}z8.reservedTenantDomains=new Set(["{tenant}","{tenantid}",N_.COMMON,N_.CONSUMERS,N_.ORGANIZATIONS]);function KM$($){let K=new x$($).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(K){case N_.COMMON:case N_.ORGANIZATIONS:case N_.CONSUMERS:return;default:return K}}function oR($){return $.endsWith(a.FORWARD_SLASH)?$:`${$}${a.FORWARD_SLASH}`}function PM$($){let q=$.cloudDiscoveryMetadata,_=void 0;if(q)try{_=JSON.parse(q)}catch(K){throw j6(V7)}return{canonicalAuthority:$.authority?oR($.authority):void 0,knownAuthorities:$.knownAuthorities,cloudDiscoveryMetadata:_}}/*! @azure/msal-common v14.16.0 2024-11-19 */async function iR($,q,_,K,P,w,O){O?.addQueueMeasurement(_$.AuthorityFactoryCreateDiscoveredInstance,w);let f=z8.transformCIAMAuthority(oR($)),Y=new z8(f,q,_,K,P,w,O);try{return await r$(Y.resolveEndpointsAsync.bind(Y),_$.AuthorityResolveEndpointsAsync,P,O,w)(),Y}catch(h){throw l(l8)}}/*! @azure/msal-common v14.16.0 2024-11-19 */class OK extends _6{constructor($,q,_,K,P){super($,q,_);this.name="ServerError",this.errorNo=K,this.status=P,Object.setPrototypeOf(this,OK.prototype)}}/*! @azure/msal-common v14.16.0 2024-11-19 */class $K{static generateThrottlingStorageKey($){return`${Cj.THROTTLING_PREFIX}.${JSON.stringify($)}`}static preProcess($,q){let _=$K.generateThrottlingStorageKey(q),K=$.getThrottlingCache(_);if(K){if(K.throttleTime<Date.now()){$.removeItem(_);return}throw new OK(K.errorCodes?.join(" ")||a.EMPTY_STRING,K.errorMessage,K.subError)}}static postProcess($,q,_){if($K.checkResponseStatus(_)||$K.checkResponseForRetryAfter(_)){let K={throttleTime:$K.calculateThrottleTime(parseInt(_.headers[V6.RETRY_AFTER])),error:_.body.error,errorCodes:_.body.error_codes,errorMessage:_.body.error_description,subError:_.body.suberror};$.setThrottlingCache($K.generateThrottlingStorageKey(q),K)}}static checkResponseStatus($){return $.status===429||$.status>=500&&$.status<600}static checkResponseForRetryAfter($){if($.headers)return $.headers.hasOwnProperty(V6.RETRY_AFTER)&&($.status<200||$.status>=300);return!1}static calculateThrottleTime($){let q=$<=0?0:$,_=Date.now()/1000;return Math.floor(Math.min(_+(q||Cj.DEFAULT_THROTTLE_TIME_SECONDS),_+Cj.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1000)}static removeThrottle($,q,_,K){let P={clientId:q,authority:_.authority,scopes:_.scopes,homeAccountIdentifier:K,claims:_.claims,authenticationScheme:_.authenticationScheme,resourceRequestMethod:_.resourceRequestMethod,resourceRequestUri:_.resourceRequestUri,shrClaims:_.shrClaims,sshKid:_.sshKid},w=this.generateThrottlingStorageKey(P);$.removeItem(w)}}/*! @azure/msal-common v14.16.0 2024-11-19 */class t1 extends _6{constructor($,q,_){super($.errorCode,$.errorMessage,$.subError);Object.setPrototypeOf(this,t1.prototype),this.name="NetworkError",this.error=$,this.httpStatus=q,this.responseHeaders=_}}/*! @azure/msal-common v14.16.0 2024-11-19 */class fK{constructor($,q){this.config=Yf$($),this.logger=new wK(this.config.loggerOptions,ER,g1),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=q}createTokenRequestHeaders($){let q={};if(q[V6.CONTENT_TYPE]=a.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&$)switch($.type){case Uq.HOME_ACCOUNT_ID:try{let _=k7($.credential);q[V6.CCS_HEADER]=`Oid:${_.uid}@${_.utid}`}catch(_){this.logger.verbose("Could not parse home account ID for CCS Header: "+_)}break;case Uq.UPN:q[V6.CCS_HEADER]=`UPN: ${$.credential}`;break}return q}async executePostToTokenEndpoint($,q,_,K,P,w){if(w)this.performanceClient?.addQueueMeasurement(w,P);let O=await this.sendPostRequest(K,$,{body:q,headers:_},P);if(this.config.serverTelemetryManager&&O.status<500&&O.status!==429)this.config.serverTelemetryManager.clearTelemetryCache();return O}async sendPostRequest($,q,_,K){$K.preProcess(this.cacheManager,$);let P;try{P=await r$(this.networkClient.sendPostRequestAsync.bind(this.networkClient),_$.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,K)(q,_);let w=P.headers||{};this.performanceClient?.addFields({refreshTokenSize:P.body.refresh_token?.length||0,httpVerToken:w[V6.X_MS_HTTP_VERSION]||"",requestId:w[V6.X_MS_REQUEST_ID]||""},K)}catch(w){if(w instanceof t1){let O=w.responseHeaders;if(O)this.performanceClient?.addFields({httpVerToken:O[V6.X_MS_HTTP_VERSION]||"",requestId:O[V6.X_MS_REQUEST_ID]||"",contentTypeHeader:O[V6.CONTENT_TYPE]||void 0,contentLengthHeader:O[V6.CONTENT_LENGTH]||void 0,httpStatus:w.httpStatus},K);throw w.error}if(w instanceof _6)throw w;else throw l(BK)}return $K.postProcess(this.cacheManager,$,P),P}async updateAuthority($,q){this.performanceClient?.addQueueMeasurement(_$.UpdateTokenEndpointAuthority,q);let _=`https://${$}/${this.authority.tenant}/`,K=await iR(_,this.networkClient,this.cacheManager,this.authority.options,this.logger,q,this.performanceClient);this.authority=K}createTokenQueryParameters($){let q=new D8($.correlationId,this.performanceClient);if($.embeddedClientId)q.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri});if($.tokenQueryParameters)q.addExtraQueryParameters($.tokenQueryParameters);return q.addCorrelationId($.correlationId),q.createQueryString()}}/*! @azure/msal-common v14.16.0 2024-11-19 */var d7="no_tokens_found",nz="native_account_unavailable",s1="refresh_token_expired",gR="interaction_required",aR="consent_required",cR="login_required",b7="bad_token",jM$=Object.freeze({__proto__:null,badToken:b7,consentRequired:aR,interactionRequired:gR,loginRequired:cR,nativeAccountUnavailable:nz,noTokensFound:d7,refreshTokenExpired:s1});/*! @azure/msal-common v14.16.0 2024-11-19 */var AR=[gR,aR,cR,b7],wM$=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Yz={[d7]:"No refresh token found in the cache. Please sign-in.",[nz]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[s1]:"Refresh token has expired.",[b7]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},OM$={noTokensFoundError:{code:d7,desc:Yz[d7]},native_account_unavailable:{code:nz,desc:Yz[nz]},bad_token:{code:b7,desc:Yz[b7]}};class zK extends _6{constructor($,q,_,K,P,w,O,f){super($,q,_);Object.setPrototypeOf(this,zK.prototype),this.timestamp=K||a.EMPTY_STRING,this.traceId=P||a.EMPTY_STRING,this.correlationId=w||a.EMPTY_STRING,this.claims=O||a.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=f}}function WR($,q,_){let K=!!$&&AR.indexOf($)>-1,P=!!_&&wM$.indexOf(_)>-1,w=!!q&&AR.some((O)=>{return q.indexOf(O)>-1});return K||w||P}function JR($){return new zK($,Yz[$])}/*! @azure/msal-common v14.16.0 2024-11-19 */class e1{static setRequestState($,q,_){let K=e1.generateLibraryState($,_);return q?`${K}${a.RESOURCE_DELIM}${q}`:K}static generateLibraryState($,q){if(!$)throw l(u7);let _={id:$.createNewGuid()};if(q)_.meta=q;let K=JSON.stringify(_);return $.base64Encode(K)}static parseRequestState($,q){if(!$)throw l(u7);if(!q)throw l(jK);try{let _=q.split(a.RESOURCE_DELIM),K=_[0],P=_.length>1?_.slice(1).join(a.RESOURCE_DELIM):a.EMPTY_STRING,w=$.base64Decode(K),O=JSON.parse(w);return{userRequestState:P||a.EMPTY_STRING,libraryState:O}}catch(_){throw l(jK)}}}/*! @azure/msal-common v14.16.0 2024-11-19 */var zM$={SW:"sw",UHW:"uhw"};class k3{constructor($,q){this.cryptoUtils=$,this.performanceClient=q}async generateCnf($,q){this.performanceClient?.addQueueMeasurement(_$.PopTokenGenerateCnf,$.correlationId);let _=await r$(this.generateKid.bind(this),_$.PopTokenGenerateCnf,q,this.performanceClient,$.correlationId)($),K=this.cryptoUtils.base64UrlEncode(JSON.stringify(_));return{kid:_.kid,reqCnfString:K}}async generateKid($){return this.performanceClient?.addQueueMeasurement(_$.PopTokenGenerateKid,$.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint($),xms_ksl:zM$.SW}}async signPopToken($,q,_){return this.signPayload($,q,_)}async signPayload($,q,_,K){let{resourceRequestMethod:P,resourceRequestUri:w,shrClaims:O,shrNonce:f,shrOptions:Y}=_,k=(w?new x$(w):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:$,ts:Y6(),m:P?.toUpperCase(),u:k?.HostNameAndPort,nonce:f||this.cryptoUtils.createNewGuid(),p:k?.AbsolutePath,q:k?.QueryString?[[],k.QueryString]:void 0,client_claims:O||void 0,...K},q,Y,_.correlationId)}}/*! @azure/msal-common v14.16.0 2024-11-19 */class o7{constructor($,q){this.cache=$,this.hasChanged=q}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.16.0 2024-11-19 */function fM$($){let _=$.error_uri?.lastIndexOf("code=");return _&&_>=0?$.error_uri?.substring(_+5):void 0}class p8{constructor($,q,_,K,P,w,O){this.clientId=$,this.cacheStorage=q,this.cryptoObj=_,this.logger=K,this.serializableCache=P,this.persistencePlugin=w,this.performanceClient=O}validateServerAuthorizationCodeResponse($,q){if(!$.state||!q)throw $.state?l(S7,"Cached State"):l(S7,"Server State");let _,K;try{_=decodeURIComponent($.state)}catch(P){throw l(jK,$.state)}try{K=decodeURIComponent(q)}catch(P){throw l(jK,$.state)}if(_!==K)throw l(y7);if($.error||$.error_description||$.suberror){let P=fM$($);if(WR($.error,$.error_description,$.suberror))throw new zK($.error||"",$.error_description,$.suberror,$.timestamp||"",$.trace_id||"",$.correlation_id||"",$.claims||"",P);throw new OK($.error||"",$.error_description,$.suberror,P)}}validateTokenResponse($,q){if($.error||$.error_description||$.suberror){let _=`Error(s): ${$.error_codes||a.NOT_AVAILABLE} - Timestamp: ${$.timestamp||a.NOT_AVAILABLE} - Description: ${$.error_description||a.NOT_AVAILABLE} - Correlation ID: ${$.correlation_id||a.NOT_AVAILABLE} - Trace ID: ${$.trace_id||a.NOT_AVAILABLE}`,K=$.error_codes?.length?$.error_codes[0]:void 0,P=new OK($.error,_,$.suberror,K,$.status);if(q&&$.status&&$.status>=q6.SERVER_ERROR_RANGE_START&&$.status<=q6.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${P}`);return}else if(q&&$.status&&$.status>=q6.CLIENT_ERROR_RANGE_START&&$.status<=q6.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${P}`);return}if(WR($.error,$.error_description,$.suberror))throw new zK($.error,$.error_description,$.suberror,$.timestamp||a.EMPTY_STRING,$.trace_id||a.EMPTY_STRING,$.correlation_id||a.EMPTY_STRING,$.claims||a.EMPTY_STRING,K);throw P}}async handleServerTokenResponse($,q,_,K,P,w,O,f,Y){this.performanceClient?.addQueueMeasurement(_$.HandleServerTokenResponse,$.correlation_id);let h;if($.id_token){if(h=X3($.id_token||a.EMPTY_STRING,this.cryptoObj.base64Decode),P&&P.nonce){if(h.nonce!==P.nonce)throw l(ij)}if(K.maxAge||K.maxAge===0){let G=h.auth_time;if(!G)throw l(G7);uR(G,K.maxAge)}}this.homeAccountIdentifier=X8.generateHomeAccountId($.client_info||a.EMPTY_STRING,q.authorityType,this.logger,this.cryptoObj,h);let k;if(!!P&&!!P.state)k=e1.parseRequestState(this.cryptoObj,P.state);$.key_id=$.key_id||K.sshKid||void 0;let T=this.generateCacheRecord($,q,_,K,h,w,P),p;try{if(this.persistencePlugin&&this.serializableCache)this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new o7(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p);if(O&&!f&&T.account){let G=T.account.generateAccountKey();if(!this.cacheStorage.getAccount(G,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await p8.generateAuthenticationResult(this.cryptoObj,q,T,!1,K,h,k,void 0,Y)}await this.cacheStorage.saveCacheRecord(T,K.storeInCache,K.correlationId)}finally{if(this.persistencePlugin&&this.serializableCache&&p)this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p)}return p8.generateAuthenticationResult(this.cryptoObj,q,T,!1,K,h,k,$,Y)}generateCacheRecord($,q,_,K,P,w,O){let f=q.getPreferredCache();if(!f)throw l(E7);let Y=LR(P),h,k;if($.id_token&&!!P)h=g9$(this.homeAccountIdentifier,f,$.id_token,this.clientId,Y||""),k=MM$(this.cacheStorage,q,this.homeAccountIdentifier,this.cryptoObj.base64Decode,P,$.client_info,f,Y,O,void 0,this.logger);let T=null;if($.access_token){let Z=$.scope?s6.fromString($.scope):new s6(K.scopes||[]),X=(typeof $.expires_in==="string"?parseInt($.expires_in,10):$.expires_in)||0,C=(typeof $.ext_expires_in==="string"?parseInt($.ext_expires_in,10):$.ext_expires_in)||0,N=(typeof $.refresh_in==="string"?parseInt($.refresh_in,10):$.refresh_in)||void 0,L=_+X,m=L+C,E=N&&N>0?_+N:void 0;T=a9$(this.homeAccountIdentifier,f,$.access_token,this.clientId,Y||q.tenant||"",Z.printScopes(),L,m,this.cryptoObj.base64Decode,E,$.token_type,w,$.key_id,K.claims,K.requestedClaimsHash)}let p=null;if($.refresh_token){let Z;if($.refresh_token_expires_in){let X=typeof $.refresh_token_expires_in==="string"?parseInt($.refresh_token_expires_in,10):$.refresh_token_expires_in;Z=_+X}p=c9$(this.homeAccountIdentifier,f,$.refresh_token,this.clientId,$.foci,w,Z)}let G=null;if($.foci)G={clientId:this.clientId,environment:f,familyId:$.foci};return{account:k,idToken:h,accessToken:T,refreshToken:p,appMetadata:G}}static async generateAuthenticationResult($,q,_,K,P,w,O,f,Y){let h=a.EMPTY_STRING,k=[],T=null,p,G,Z=a.EMPTY_STRING;if(_.accessToken){if(_.accessToken.tokenType===I$.POP&&!P.popKid){let L=new k3($),{secret:m,keyId:E}=_.accessToken;if(!E)throw l(K3);h=await L.signPopToken(m,E,P)}else h=_.accessToken.secret;if(k=s6.fromString(_.accessToken.target).asArray(),T=new Date(Number(_.accessToken.expiresOn)*1000),p=new Date(Number(_.accessToken.extendedExpiresOn)*1000),_.accessToken.refreshOn)G=new Date(Number(_.accessToken.refreshOn)*1000)}if(_.appMetadata)Z=_.appMetadata.familyId===Lj?Lj:"";let X=w?.oid||w?.sub||"",C=w?.tid||"";if(f?.spa_accountid&&!!_.account)_.account.nativeAccountId=f?.spa_accountid;let N=_.account?RR(_.account.getAccountInfo(),void 0,w,_.idToken?.secret):null;return{authority:q.canonicalAuthority,uniqueId:X,tenantId:C,scopes:k,account:N,idToken:_?.idToken?.secret||"",idTokenClaims:w||{},accessToken:h,fromCache:K,expiresOn:T,extExpiresOn:p,refreshOn:G,correlationId:P.correlationId,requestId:Y||a.EMPTY_STRING,familyId:Z,tokenType:_.accessToken?.tokenType||a.EMPTY_STRING,state:O?O.userRequestState:a.EMPTY_STRING,cloudGraphHostName:_.account?.cloudGraphHostName||a.EMPTY_STRING,msGraphHost:_.account?.msGraphHost||a.EMPTY_STRING,code:f?.spa_code,fromNativeBroker:!1}}}function MM$($,q,_,K,P,w,O,f,Y,h,k){k?.verbose("setCachedAccount called");let p=$.getAccountKeys().find((N)=>{return N.startsWith(_)}),G=null;if(p)G=$.getAccount(p,k);let Z=G||X8.createAccount({homeAccountId:_,idTokenClaims:P,clientInfo:w,environment:O,cloudGraphHostName:Y?.cloud_graph_host_name,msGraphHost:Y?.msgraph_host,nativeAccountId:h},q,K),X=Z.tenantProfiles||[],C=f||Z.realm;if(C&&!X.find((N)=>{return N.tenantId===C})){let N=c1(_,Z.localAccountId,C,P);X.push(N)}return Z.tenantProfiles=X,Z}/*! @azure/msal-common v14.16.0 2024-11-19 */async function UK($,q,_){if(typeof $==="string")return $;else return $({clientId:q,tokenEndpoint:_})}/*! @azure/msal-common v14.16.0 2024-11-19 */class b1 extends fK{constructor($,q){super($,q);this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl($){this.performanceClient?.addQueueMeasurement(_$.GetAuthCodeUrl,$.correlationId);let q=await r$(this.createAuthCodeUrlQueryString.bind(this),_$.AuthClientCreateQueryString,this.logger,this.performanceClient,$.correlationId)($);return x$.appendQueryString(this.authority.authorizationEndpoint,q)}async acquireToken($,q){if(this.performanceClient?.addQueueMeasurement(_$.AuthClientAcquireToken,$.correlationId),!$.code)throw l(cj);let _=Y6(),K=await r$(this.executeTokenRequest.bind(this),_$.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,$.correlationId)(this.authority,$),P=K.headers?.[V6.X_MS_REQUEST_ID],w=new p8(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return w.validateTokenResponse(K.body),r$(w.handleServerTokenResponse.bind(w),_$.HandleServerTokenResponse,this.logger,this.performanceClient,$.correlationId)(K.body,this.authority,_,$,q,void 0,void 0,void 0,P)}handleFragmentResponse($,q){if(new p8(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse($,q),!$.code)throw l($3);return $}getLogoutUri($){if(!$)throw j6(M3);let q=this.createLogoutUrlQueryString($);return x$.appendQueryString(this.authority.endSessionEndpoint,q)}async executeTokenRequest($,q){this.performanceClient?.addQueueMeasurement(_$.AuthClientExecuteTokenRequest,q.correlationId);let _=this.createTokenQueryParameters(q),K=x$.appendQueryString($.tokenEndpoint,_),P=await r$(this.createTokenRequestBody.bind(this),_$.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,q.correlationId)(q),w=void 0;if(q.clientInfo)try{let Y=Rz(q.clientInfo,this.cryptoUtils.base64Decode);w={credential:`${Y.uid}${t6.CLIENT_INFO_SEPARATOR}${Y.utid}`,type:Uq.HOME_ACCOUNT_ID}}catch(Y){this.logger.verbose("Could not parse client info for CCS Header: "+Y)}let O=this.createTokenRequestHeaders(w||q.ccsCredential),f={clientId:q.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:$.canonicalAuthority,scopes:q.scopes,claims:q.claims,authenticationScheme:q.authenticationScheme,resourceRequestMethod:q.resourceRequestMethod,resourceRequestUri:q.resourceRequestUri,shrClaims:q.shrClaims,sshKid:q.sshKid};return r$(this.executePostToTokenEndpoint.bind(this),_$.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,q.correlationId)(K,P,O,f,q.correlationId,_$.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody($){this.performanceClient?.addQueueMeasurement(_$.AuthClientCreateTokenRequestBody,$.correlationId);let q=new D8($.correlationId,this.performanceClient);if(q.addClientId($.embeddedClientId||$.tokenBodyParameters?.[h3]||this.config.authOptions.clientId),!this.includeRedirectUri)tK.validateRedirectUri($.redirectUri);else q.addRedirectUri($.redirectUri);if(q.addScopes($.scopes,!0,this.oidcDefaultScopes),q.addAuthorizationCode($.code),q.addLibraryInfo(this.config.libraryInfo),q.addApplicationTelemetry(this.config.telemetry.application),q.addThrottling(),this.serverTelemetryManager&&!d1(this.config))q.addServerTelemetry(this.serverTelemetryManager);if($.codeVerifier)q.addCodeVerifier($.codeVerifier);if(this.config.clientCredentials.clientSecret)q.addClientSecret(this.config.clientCredentials.clientSecret);if(this.config.clientCredentials.clientAssertion){let K=this.config.clientCredentials.clientAssertion;q.addClientAssertion(await UK(K.assertion,this.config.authOptions.clientId,$.resourceRequestUri)),q.addClientAssertionType(K.assertionType)}if(q.addGrantType(i7.AUTHORIZATION_CODE_GRANT),q.addClientInfo(),$.authenticationScheme===I$.POP){let K=new k3(this.cryptoUtils,this.performanceClient),P;if(!$.popKid)P=(await r$(K.generateCnf.bind(K),_$.PopTokenGenerateCnf,this.logger,this.performanceClient,$.correlationId)($,this.logger)).reqCnfString;else P=this.cryptoUtils.encodeKid($.popKid);q.addPopToken(P)}else if($.authenticationScheme===I$.SSH)if($.sshJwk)q.addSshJwk($.sshJwk);else throw j6(x7);if(!L8.isEmptyObj($.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)q.addClaims($.claims,this.config.authOptions.clientCapabilities);let _=void 0;if($.clientInfo)try{let K=Rz($.clientInfo,this.cryptoUtils.base64Decode);_={credential:`${K.uid}${t6.CLIENT_INFO_SEPARATOR}${K.utid}`,type:Uq.HOME_ACCOUNT_ID}}catch(K){this.logger.verbose("Could not parse client info for CCS Header: "+K)}else _=$.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&_)switch(_.type){case Uq.HOME_ACCOUNT_ID:try{let K=k7(_.credential);q.addCcsOid(K)}catch(K){this.logger.verbose("Could not parse home account ID for CCS Header: "+K)}break;case Uq.UPN:q.addCcsUpn(_.credential);break}if($.embeddedClientId)q.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri});if($.tokenBodyParameters)q.addExtraQueryParameters($.tokenBodyParameters);if($.enableSpaAuthorizationCode&&(!$.tokenBodyParameters||!$.tokenBodyParameters[kR]))q.addExtraQueryParameters({[kR]:"1"});return q.createQueryString()}async createAuthCodeUrlQueryString($){let q=$.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(_$.AuthClientCreateQueryString,q);let _=new D8(q,this.performanceClient);_.addClientId($.embeddedClientId||$.extraQueryParameters?.[h3]||this.config.authOptions.clientId);let K=[...$.scopes||[],...$.extraScopesToConsent||[]];if(_.addScopes(K,!0,this.oidcDefaultScopes),_.addRedirectUri($.redirectUri),_.addCorrelationId(q),_.addResponseMode($.responseMode),_.addResponseTypeCode(),_.addLibraryInfo(this.config.libraryInfo),!d1(this.config))_.addApplicationTelemetry(this.config.telemetry.application);if(_.addClientInfo(),$.codeChallenge&&$.codeChallengeMethod)_.addCodeChallengeParams($.codeChallenge,$.codeChallengeMethod);if($.prompt)_.addPrompt($.prompt);if($.domainHint)_.addDomainHint($.domainHint);if($.prompt!==A7.SELECT_ACCOUNT){if($.sid&&$.prompt===A7.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),_.addSid($.sid);else if($.account){let P=this.extractAccountSid($.account),w=this.extractLoginHint($.account);if(w&&$.domainHint)this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),w=null;if(w){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),_.addLoginHint(w);try{let O=k7($.account.homeAccountId);_.addCcsOid(O)}catch(O){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(P&&$.prompt===A7.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),_.addSid(P);try{let O=k7($.account.homeAccountId);_.addCcsOid(O)}catch(O){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if($.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),_.addLoginHint($.loginHint),_.addCcsUpn($.loginHint);else if($.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),_.addLoginHint($.account.username);try{let O=k7($.account.homeAccountId);_.addCcsOid(O)}catch(O){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else if($.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),_.addLoginHint($.loginHint),_.addCcsUpn($.loginHint)}else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if($.nonce)_.addNonce($.nonce);if($.state)_.addState($.state);if($.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)_.addClaims($.claims,this.config.authOptions.clientCapabilities);if($.embeddedClientId)_.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri});if(this.addExtraQueryParams($,_),$.nativeBroker){if(_.addNativeBroker(),$.authenticationScheme===I$.POP){let P=new k3(this.cryptoUtils),w;if(!$.popKid)w=(await r$(P.generateCnf.bind(P),_$.PopTokenGenerateCnf,this.logger,this.performanceClient,$.correlationId)($,this.logger)).reqCnfString;else w=this.cryptoUtils.encodeKid($.popKid);_.addPopToken(w)}}return _.createQueryString()}createLogoutUrlQueryString($){let q=new D8($.correlationId,this.performanceClient);if($.postLogoutRedirectUri)q.addPostLogoutRedirectUri($.postLogoutRedirectUri);if($.correlationId)q.addCorrelationId($.correlationId);if($.idTokenHint)q.addIdTokenHint($.idTokenHint);if($.state)q.addState($.state);if($.logoutHint)q.addLogoutHint($.logoutHint);return this.addExtraQueryParams($,q),q.createQueryString()}addExtraQueryParams($,q){if(!($.extraQueryParameters&&$.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware)$.extraQueryParameters=$.extraQueryParameters||{},$.extraQueryParameters.instance_aware="true";if($.extraQueryParameters)q.addExtraQueryParameters($.extraQueryParameters)}extractAccountSid($){return $.idTokenClaims?.sid||null}extractLoginHint($){return $.idTokenClaims?.login_hint||null}}/*! @azure/msal-common v14.16.0 2024-11-19 */var vM$=300;class rz extends fK{constructor($,q){super($,q)}async acquireToken($){this.performanceClient?.addQueueMeasurement(_$.RefreshTokenClientAcquireToken,$.correlationId);let q=Y6(),_=await r$(this.executeTokenRequest.bind(this),_$.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,$.correlationId)($,this.authority),K=_.headers?.[V6.X_MS_REQUEST_ID],P=new p8(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return P.validateTokenResponse(_.body),r$(P.handleServerTokenResponse.bind(P),_$.HandleServerTokenResponse,this.logger,this.performanceClient,$.correlationId)(_.body,this.authority,q,$,void 0,void 0,!0,$.forceCache,K)}async acquireTokenByRefreshToken($){if(!$)throw j6(f3);if(this.performanceClient?.addQueueMeasurement(_$.RefreshTokenClientAcquireTokenByRefreshToken,$.correlationId),!$.account)throw l(m7);if(this.cacheManager.isAppMetadataFOCI($.account.environment))try{return await r$(this.acquireTokenWithCachedRefreshToken.bind(this),_$.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,$.correlationId)($,!0)}catch(_){let K=_ instanceof zK&&_.errorCode===d7,P=_ instanceof OK&&_.errorCode===_R.INVALID_GRANT_ERROR&&_.subError===_R.CLIENT_MISMATCH_ERROR;if(K||P)return r$(this.acquireTokenWithCachedRefreshToken.bind(this),_$.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,$.correlationId)($,!1);else throw _}return r$(this.acquireTokenWithCachedRefreshToken.bind(this),_$.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,$.correlationId)($,!1)}async acquireTokenWithCachedRefreshToken($,q){this.performanceClient?.addQueueMeasurement(_$.RefreshTokenClientAcquireTokenWithCachedRefreshToken,$.correlationId);let _=_M$(this.cacheManager.getRefreshToken.bind(this.cacheManager),_$.CacheManagerGetRefreshToken,this.logger,this.performanceClient,$.correlationId)($.account,q,void 0,this.performanceClient,$.correlationId);if(!_)throw JR(d7);if(_.expiresOn&&L7(_.expiresOn,$.refreshTokenExpirationOffsetSeconds||vM$))throw JR(s1);let K={...$,refreshToken:_.secret,authenticationScheme:$.authenticationScheme||I$.BEARER,ccsCredential:{credential:$.account.homeAccountId,type:Uq.HOME_ACCOUNT_ID}};try{return await r$(this.acquireToken.bind(this),_$.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,$.correlationId)(K)}catch(P){if(P instanceof zK&&P.subError===b7){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let w=h7(_);this.cacheManager.removeRefreshToken(w)}throw P}}async executeTokenRequest($,q){this.performanceClient?.addQueueMeasurement(_$.RefreshTokenClientExecuteTokenRequest,$.correlationId);let _=this.createTokenQueryParameters($),K=x$.appendQueryString(q.tokenEndpoint,_),P=await r$(this.createTokenRequestBody.bind(this),_$.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,$.correlationId)($),w=this.createTokenRequestHeaders($.ccsCredential),O={clientId:$.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:q.canonicalAuthority,scopes:$.scopes,claims:$.claims,authenticationScheme:$.authenticationScheme,resourceRequestMethod:$.resourceRequestMethod,resourceRequestUri:$.resourceRequestUri,shrClaims:$.shrClaims,sshKid:$.sshKid};return r$(this.executePostToTokenEndpoint.bind(this),_$.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,$.correlationId)(K,P,w,O,$.correlationId,_$.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody($){this.performanceClient?.addQueueMeasurement(_$.RefreshTokenClientCreateTokenRequestBody,$.correlationId);let q=$.correlationId,_=new D8(q,this.performanceClient);if(_.addClientId($.embeddedClientId||$.tokenBodyParameters?.[h3]||this.config.authOptions.clientId),$.redirectUri)_.addRedirectUri($.redirectUri);if(_.addScopes($.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),_.addGrantType(i7.REFRESH_TOKEN_GRANT),_.addClientInfo(),_.addLibraryInfo(this.config.libraryInfo),_.addApplicationTelemetry(this.config.telemetry.application),_.addThrottling(),this.serverTelemetryManager&&!d1(this.config))_.addServerTelemetry(this.serverTelemetryManager);if(_.addRefreshToken($.refreshToken),this.config.clientCredentials.clientSecret)_.addClientSecret(this.config.clientCredentials.clientSecret);if(this.config.clientCredentials.clientAssertion){let K=this.config.clientCredentials.clientAssertion;_.addClientAssertion(await UK(K.assertion,this.config.authOptions.clientId,$.resourceRequestUri)),_.addClientAssertionType(K.assertionType)}if($.authenticationScheme===I$.POP){let K=new k3(this.cryptoUtils,this.performanceClient),P;if(!$.popKid)P=(await r$(K.generateCnf.bind(K),_$.PopTokenGenerateCnf,this.logger,this.performanceClient,$.correlationId)($,this.logger)).reqCnfString;else P=this.cryptoUtils.encodeKid($.popKid);_.addPopToken(P)}else if($.authenticationScheme===I$.SSH)if($.sshJwk)_.addSshJwk($.sshJwk);else throw j6(x7);if(!L8.isEmptyObj($.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)_.addClaims($.claims,this.config.authOptions.clientCapabilities);if(this.config.systemOptions.preventCorsPreflight&&$.ccsCredential)switch($.ccsCredential.type){case Uq.HOME_ACCOUNT_ID:try{let K=k7($.ccsCredential.credential);_.addCcsOid(K)}catch(K){this.logger.verbose("Could not parse home account ID for CCS Header: "+K)}break;case Uq.UPN:_.addCcsUpn($.ccsCredential.credential);break}if($.embeddedClientId)_.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri});if($.tokenBodyParameters)_.addExtraQueryParameters($.tokenBodyParameters);return _.createQueryString()}}/*! @azure/msal-common v14.16.0 2024-11-19 */class IR extends fK{constructor($,q){super($,q)}async acquireToken($){try{let[q,_]=await this.acquireCachedToken({...$,scopes:$.scopes?.length?$.scopes:[...KK]});if(_===X6.PROACTIVELY_REFRESHED)this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new rz(this.config,this.performanceClient).acquireTokenByRefreshToken($).catch(()=>{});return q}catch(q){if(q instanceof J3&&q.errorCode===Fq)return new rz(this.config,this.performanceClient).acquireTokenByRefreshToken($);else throw q}}async acquireCachedToken($){this.performanceClient?.addQueueMeasurement(_$.SilentFlowClientAcquireCachedToken,$.correlationId);let q=X6.NOT_APPLICABLE;if($.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!L8.isEmptyObj($.claims))throw this.setCacheOutcome(X6.FORCE_REFRESH_OR_CLAIMS,$.correlationId),l(Fq);if(!$.account)throw l(m7);let _=$.account.tenantId||KM$($.authority),K=this.cacheManager.getTokenKeys(),P=this.cacheManager.getAccessToken($.account,$,K,_,this.performanceClient,$.correlationId);if(!P)throw this.setCacheOutcome(X6.NO_CACHED_ACCESS_TOKEN,$.correlationId),l(Fq);else if(o9$(P.cachedAt)||L7(P.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(X6.CACHED_ACCESS_TOKEN_EXPIRED,$.correlationId),l(Fq);else if(P.refreshOn&&L7(P.refreshOn,0))q=X6.PROACTIVELY_REFRESHED;let w=$.authority||this.authority.getPreferredCache(),O={account:this.cacheManager.readAccountFromCache($.account),accessToken:P,idToken:this.cacheManager.getIdToken($.account,K,_,this.performanceClient,$.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(w)};if(this.setCacheOutcome(q,$.correlationId),this.config.serverTelemetryManager)this.config.serverTelemetryManager.incrementCacheHits();return[await r$(this.generateResultFromCacheRecord.bind(this),_$.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,$.correlationId)(O,$),q]}setCacheOutcome($,q){if(this.serverTelemetryManager?.setCacheOutcome($),this.performanceClient?.addFields({cacheOutcome:$},q),$!==X6.NOT_APPLICABLE)this.logger.info(`Token refresh is required due to cache outcome: ${$}`)}async generateResultFromCacheRecord($,q){this.performanceClient?.addQueueMeasurement(_$.SilentFlowClientGenerateResultFromCacheRecord,q.correlationId);let _;if($.idToken)_=X3($.idToken.secret,this.config.cryptoInterface.base64Decode);if(q.maxAge||q.maxAge===0){let K=_?.auth_time;if(!K)throw l(G7);uR(K,q.maxAge)}return p8.generateAuthenticationResult(this.cryptoUtils,this.authority,$,!0,q,_)}}/*! @azure/msal-common v14.16.0 2024-11-19 */var XR=",",lR="|";function HM$($){let{skus:q,libraryName:_,libraryVersion:K,extensionName:P,extensionVersion:w}=$,O=new Map([[0,[_,K]],[2,[P,w]]]),f=[];if(q?.length){if(f=q.split(XR),f.length<4)return q}else f=Array.from({length:4},()=>lR);return O.forEach((Y,h)=>{if(Y.length===2&&Y[0]?.length&&Y[1]?.length)YM$({skuArr:f,index:h,skuName:Y[0],skuVersion:Y[1]})}),f.join(XR)}function YM$($){let{skuArr:q,index:_,skuName:K,skuVersion:P}=$;if(_>=q.length)return;q[_]=[K,P].join(lR)}class T3{constructor($,q){this.cacheOutcome=X6.NOT_APPLICABLE,this.cacheManager=q,this.apiId=$.apiId,this.correlationId=$.correlationId,this.wrapperSKU=$.wrapperSKU||a.EMPTY_STRING,this.wrapperVer=$.wrapperVer||a.EMPTY_STRING,this.telemetryCacheKey=n6.CACHE_KEY+t6.CACHE_KEY_SEPARATOR+$.clientId}generateCurrentRequestHeaderValue(){let $=`${this.apiId}${n6.VALUE_SEPARATOR}${this.cacheOutcome}`,q=[this.wrapperSKU,this.wrapperVer],_=this.getNativeBrokerErrorCode();if(_?.length)q.push(`broker_error=${_}`);let K=q.join(n6.VALUE_SEPARATOR),P=this.getRegionDiscoveryFields(),w=[$,P].join(n6.VALUE_SEPARATOR);return[n6.SCHEMA_VERSION,w,K].join(n6.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let $=this.getLastRequests(),q=T3.maxErrorsToSend($),_=$.failedRequests.slice(0,2*q).join(n6.VALUE_SEPARATOR),K=$.errors.slice(0,q).join(n6.VALUE_SEPARATOR),P=$.errors.length,w=q<P?n6.OVERFLOW_TRUE:n6.OVERFLOW_FALSE,O=[P,w].join(n6.VALUE_SEPARATOR);return[n6.SCHEMA_VERSION,$.cacheHits,_,K,O].join(n6.CATEGORY_SEPARATOR)}cacheFailedRequest($){let q=this.getLastRequests();if(q.errors.length>=n6.MAX_CACHED_ERRORS)q.failedRequests.shift(),q.failedRequests.shift(),q.errors.shift();if(q.failedRequests.push(this.apiId,this.correlationId),$ instanceof Error&&!!$&&$.toString())if($ instanceof _6)if($.subError)q.errors.push($.subError);else if($.errorCode)q.errors.push($.errorCode);else q.errors.push($.toString());else q.errors.push($.toString());else q.errors.push(n6.UNKNOWN_ERROR);this.cacheManager.setServerTelemetry(this.telemetryCacheKey,q);return}incrementCacheHits(){let $=this.getLastRequests();return $.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,$),$.cacheHits}getLastRequests(){let $={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||$}clearTelemetryCache(){let $=this.getLastRequests(),q=T3.maxErrorsToSend($),_=$.errors.length;if(q===_)this.cacheManager.removeItem(this.telemetryCacheKey);else{let K={failedRequests:$.failedRequests.slice(q*2),errors:$.errors.slice(q),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,K)}}static maxErrorsToSend($){let q,_=0,K=0,P=$.errors.length;for(q=0;q<P;q++){let w=$.failedRequests[2*q]||a.EMPTY_STRING,O=$.failedRequests[2*q+1]||a.EMPTY_STRING,f=$.errors[q]||a.EMPTY_STRING;if(K+=w.toString().length+O.toString().length+f.length+3,K<n6.MAX_LAST_HEADER_BYTES)_+=1;else break}return _}getRegionDiscoveryFields(){let $=[];return $.push(this.regionUsed||a.EMPTY_STRING),$.push(this.regionSource||a.EMPTY_STRING),$.push(this.regionOutcome||a.EMPTY_STRING),$.join(",")}updateRegionDiscoveryMetadata($){this.regionUsed=$.region_used,this.regionSource=$.region_source,this.regionOutcome=$.region_outcome}setCacheOutcome($){this.cacheOutcome=$}setNativeBrokerErrorCode($){let q=this.getLastRequests();q.nativeBrokerErrorCode=$,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,q)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let $=this.getLastRequests();delete $.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,$)}static makeExtraSkuString($){return HM$($)}}class A3{static deserializeJSONBlob($){return!$?{}:JSON.parse($)}static deserializeAccounts($){let q={};if($)Object.keys($).map(function(_){let K=$[_],P={homeAccountId:K.home_account_id,environment:K.environment,realm:K.realm,localAccountId:K.local_account_id,username:K.username,authorityType:K.authority_type,name:K.name,clientInfo:K.client_info,lastModificationTime:K.last_modification_time,lastModificationApp:K.last_modification_app,tenantProfiles:K.tenantProfiles?.map((O)=>{return JSON.parse(O)})},w=new X8;D3.toObject(w,P),q[_]=w});return q}static deserializeIdTokens($){let q={};if($)Object.keys($).map(function(_){let K=$[_],P={homeAccountId:K.home_account_id,environment:K.environment,credentialType:K.credential_type,clientId:K.client_id,secret:K.secret,realm:K.realm};q[_]=P});return q}static deserializeAccessTokens($){let q={};if($)Object.keys($).map(function(_){let K=$[_],P={homeAccountId:K.home_account_id,environment:K.environment,credentialType:K.credential_type,clientId:K.client_id,secret:K.secret,realm:K.realm,target:K.target,cachedAt:K.cached_at,expiresOn:K.expires_on,extendedExpiresOn:K.extended_expires_on,refreshOn:K.refresh_on,keyId:K.key_id,tokenType:K.token_type,requestedClaims:K.requestedClaims,requestedClaimsHash:K.requestedClaimsHash,userAssertionHash:K.userAssertionHash};q[_]=P});return q}static deserializeRefreshTokens($){let q={};if($)Object.keys($).map(function(_){let K=$[_],P={homeAccountId:K.home_account_id,environment:K.environment,credentialType:K.credential_type,clientId:K.client_id,secret:K.secret,familyId:K.family_id,target:K.target,realm:K.realm};q[_]=P});return q}static deserializeAppMetadata($){let q={};if($)Object.keys($).map(function(_){let K=$[_];q[_]={clientId:K.client_id,environment:K.environment,familyId:K.family_id}});return q}static deserializeAllCache($){return{accounts:$.Account?this.deserializeAccounts($.Account):{},idTokens:$.IdToken?this.deserializeIdTokens($.IdToken):{},accessTokens:$.AccessToken?this.deserializeAccessTokens($.AccessToken):{},refreshTokens:$.RefreshToken?this.deserializeRefreshTokens($.RefreshToken):{},appMetadata:$.AppMetadata?this.deserializeAppMetadata($.AppMetadata):{}}}}var hM$=Object.freeze({__proto__:null,Deserializer:A3,Serializer:dz}),kM$="Authorization",B1="Metadata",TM$="X-IDENTITY-HEADER",AM$="secret",az="api-version",p3="resource",WM$="system_assigned_managed_identity",JM$="managed_identity",DR=`https://login.microsoftonline.com/${JM$}/`,Z$={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT"},C$={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",SERVICE_FABRIC:"ServiceFabric"},R8={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},f8={GET:"get",POST:"post"},L1={SUCCESS:q6.SUCCESS,SUCCESS_RANGE_START:q6.SUCCESS_RANGE_START,SUCCESS_RANGE_END:q6.SUCCESS_RANGE_END,SERVER_ERROR:q6.SERVER_ERROR},XM$="REGION_NAME",DM$="MSAL_FORCE_REGION",pM$=32,yM$={SHA256:"sha256"},C1={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},t8={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},T7={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Sq={ALGORITHM:"alg",RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},n1={INTERVAL_MS:100,TIMEOUT_MS:5000},SM$=4096,GM$=3,ZM$=1000,NM$=[q6.NOT_FOUND,q6.REQUEST_TIMEOUT,q6.TOO_MANY_REQUESTS,q6.SERVER_ERROR,q6.SERVICE_UNAVAILABLE,q6.GATEWAY_TIMEOUT];class Vz{static getNetworkResponse($,q,_){return{headers:$,body:q,status:_}}static urlToHttpOptions($){let q={protocol:$.protocol,hostname:$.hostname&&$.hostname.startsWith("[")?$.hostname.slice(1,-1):$.hostname,hash:$.hash,search:$.search,pathname:$.pathname,path:`${$.pathname||""}${$.search||""}`,href:$.href};if($.port!=="")q.port=Number($.port);if($.username||$.password)q.auth=`${decodeURIComponent($.username)}:${decodeURIComponent($.password)}`;return q}}class cz{constructor($,q){this.proxyUrl=$||"",this.customAgentOptions=q||{}}async sendGetRequestAsync($,q,_){if(this.proxyUrl)return pR($,this.proxyUrl,f8.GET,q,this.customAgentOptions,_);else return yR($,f8.GET,q,this.customAgentOptions,_)}async sendPostRequestAsync($,q){if(this.proxyUrl)return pR($,this.proxyUrl,f8.POST,q,this.customAgentOptions);else return yR($,f8.POST,q,this.customAgentOptions)}}var pR=($,q,_,K,P,w)=>{let O=new URL($),f=new URL(q),Y=K?.headers||{},h={host:f.hostname,port:f.port,method:"CONNECT",path:O.hostname,headers:Y};if(P&&Object.keys(P).length)h.agent=new hz.Agent(P);let k="";if(_===f8.POST){let p=K?.body||"";k=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${p.length}\r
\r
${p}`}else if(w)h.timeout=w;let T=`${_.toUpperCase()} ${O.href} HTTP/1.1\r
Host: ${O.host}\r
Connection: close\r
`+k+`\r
`;return new Promise((p,G)=>{let Z=hz.request(h);if(w)Z.on("timeout",()=>{Z.destroy(),G(new Error("Request time out"))});Z.end(),Z.on("connect",(X,C)=>{let N=X?.statusCode||L1.SERVER_ERROR;if(N<L1.SUCCESS_RANGE_START||N>L1.SUCCESS_RANGE_END)Z.destroy(),C.destroy(),G(new Error(`Error connecting to proxy. Http status code: ${X.statusCode}. Http status message: ${X?.statusMessage||"Unknown"}`));C.write(T);let L=[];C.on("data",(m)=>{L.push(m)}),C.on("end",()=>{let E=Buffer.concat([...L]).toString().split(`\r
`),W=parseInt(E[0].split(" ")[1]),V=E[0].split(" ").slice(2).join(" "),n=E[E.length-1],b=E.slice(1,E.length-2),x=new Map;b.forEach((u)=>{let Cq=u.split(new RegExp(/:\s(.*)/s)),E6=Cq[0],K$=Cq[1];try{let J=JSON.parse(K$);if(J&&typeof J==="object")K$=J}catch(J){}x.set(E6,K$)});let s=Object.fromEntries(x),v$=Vz.getNetworkResponse(s,tR(W,V,s,n),W);if((W<q6.SUCCESS_RANGE_START||W>q6.SUCCESS_RANGE_END)&&v$.body.error!==t8.AUTHORIZATION_PENDING)Z.destroy();p(v$)}),C.on("error",(m)=>{Z.destroy(),C.destroy(),G(new Error(m.toString()))})}),Z.on("error",(X)=>{Z.destroy(),G(new Error(X.toString()))})})},yR=($,q,_,K,P)=>{let w=q===f8.POST,O=_?.body||"",f=new URL($),Y=_?.headers||{},h={method:q,headers:Y,...Vz.urlToHttpOptions(f)};if(K&&Object.keys(K).length)h.agent=new $R.Agent(K);if(w)h.headers={...h.headers,"Content-Length":O.length};else if(P)h.timeout=P;return new Promise((k,T)=>{let p;if(h.protocol==="http:")p=hz.request(h);else p=$R.request(h);if(w)p.write(O);if(P)p.on("timeout",()=>{p.destroy(),T(new Error("Request time out"))});p.end(),p.on("response",(G)=>{let{headers:Z,statusCode:X,statusMessage:C}=G,N=[];G.on("data",(L)=>{N.push(L)}),G.on("end",()=>{let L=Buffer.concat([...N]).toString(),m=Z,E=Vz.getNetworkResponse(m,tR(X,C,m,L),X);if((X<q6.SUCCESS_RANGE_START||X>q6.SUCCESS_RANGE_END)&&E.body.error!==t8.AUTHORIZATION_PENDING)p.destroy();k(E)})}),p.on("error",(G)=>{p.destroy(),T(new Error(G.toString()))})})},tR=($,q,_,K)=>{let P;try{P=JSON.parse(K)}catch(w){let O,f;if($>=q6.CLIENT_ERROR_RANGE_START&&$<=q6.CLIENT_ERROR_RANGE_END)O="client_error",f="A client";else if($>=q6.SERVER_ERROR_RANGE_START&&$<=q6.SERVER_ERROR_RANGE_END)O="server_error",f="A server";else O="unknown_error",f="An unknown";P={error:O,error_description:`${f} error occured.
Http status code: ${$}
Http status message: ${q||"Unknown"}
Headers: ${JSON.stringify(_)}`}}return P},sR="invalid_file_extension",eR="invalid_file_path",rj="invalid_managed_identity_id_type",BR="invalid_secret",mM$="missing_client_id",EM$="network_unavailable",FR="platform_not_supported",UR="unable_to_create_azure_arc",QR="unable_to_create_cloud_shell",$L="unable_to_create_source",o1="unable_to_read_secret_file",uM$="user_assigned_not_available_at_runtime",qL="www_authenticate_header_missing",_L="www_authenticate_header_unsupported_format",Rj={[Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Z$.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Z$.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Z$.MSI_ENDPOINT]:"msi_endpoint_url_malformed"},RM$={[sR]:"The file path in the WWW-Authenticate header does not contain a .key file.",[eR]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[rj]:"More than one ManagedIdentityIdType was provided.",[BR]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[FR]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[mM$]:"A ManagedIdentityId id was not provided.",[Rj.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[Rj.IDENTITY_ENDPOINT]:`The Managed Identity's '${Z$.IDENTITY_ENDPOINT}' environment variable is malformed.`,[Rj.IMDS_ENDPOINT]:`The Managed Identity's '${Z$.IMDS_ENDPOINT}' environment variable is malformed.`,[Rj.MSI_ENDPOINT]:`The Managed Identity's '${Z$.MSI_ENDPOINT}' environment variable is malformed.`,[EM$]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[UR]:"Azure Arc Managed Identities can only be system assigned.",[QR]:"Cloud Shell Managed Identities can only be system assigned.",[$L]:"Unable to create a Managed Identity source based on environment variables.",[o1]:"Unable to read the secret file.",[uM$]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[qL]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[_L]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class F1 extends _6{constructor($){super($,RM$[$]);this.name="ManagedIdentityError",Object.setPrototypeOf(this,F1.prototype)}}function l6($){return new F1($)}class KL{get id(){return this._id}set id($){this._id=$}get idType(){return this._idType}set idType($){this._idType=$}constructor($){let q=$?.userAssignedClientId,_=$?.userAssignedResourceId,K=$?.userAssignedObjectId;if(q){if(_||K)throw l6(rj);this.id=q,this.idType=R8.USER_ASSIGNED_CLIENT_ID}else if(_){if(q||K)throw l6(rj);this.id=_,this.idType=R8.USER_ASSIGNED_RESOURCE_ID}else if(K){if(q||_)throw l6(rj);this.id=K,this.idType=R8.USER_ASSIGNED_OBJECT_ID}else this.id=WM$,this.idType=R8.SYSTEM_ASSIGNED}}class PL{constructor($,q,_){this.maxRetries=$,this.retryDelay=q,this.httpStatusCodesToRetryOn=_}retryAfterMillisecondsToSleep($){if(!$)return 0;let q=Math.round(parseFloat($)*1000);if(isNaN(q))q=Math.max(0,new Date($).valueOf()-new Date().valueOf());return q}async pauseForRetry($,q,_){if(this.httpStatusCodesToRetryOn.includes($)&&q<this.maxRetries){let K=this.retryAfterMillisecondsToSleep(_);return await new Promise((P)=>{return setTimeout(P,K||this.retryDelay)}),!0}return!1}}class jL{constructor($,q){this.httpClientNoRetries=$,this.retryPolicy=q}async sendNetworkRequestAsyncHelper($,q,_){if($===f8.GET)return this.httpClientNoRetries.sendGetRequestAsync(q,_);else return this.httpClientNoRetries.sendPostRequestAsync(q,_)}async sendNetworkRequestAsync($,q,_){let K=await this.sendNetworkRequestAsyncHelper($,q,_),P=0;while(await this.retryPolicy.pauseForRetry(K.status,P,K.headers[V6.RETRY_AFTER]))K=await this.sendNetworkRequestAsyncHelper($,q,_),P++;return K}async sendGetRequestAsync($,q){return this.sendNetworkRequestAsync(f8.GET,$,q)}async sendPostRequestAsync($,q){return this.sendNetworkRequestAsync(f8.POST,$,q)}}var r6={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}};class x6 extends _6{constructor($,q){super($,q);this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new x6(r6.invalidLoopbackAddressType.code,`${r6.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new x6(r6.unableToLoadRedirectUri.code,`${r6.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new x6(r6.noAuthCodeInResponse.code,`${r6.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new x6(r6.noLoopbackServerExists.code,`${r6.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new x6(r6.loopbackServerAlreadyExists.code,`${r6.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new x6(r6.loopbackServerTimeout.code,`${r6.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new x6(r6.stateNotFoundError.code,r6.stateNotFoundError.desc)}static createThumbprintMissingError(){return new x6(r6.thumbprintMissing.code,r6.thumbprintMissing.desc)}}var LM$={clientId:a.EMPTY_STRING,authority:a.DEFAULT_AUTHORITY,clientSecret:a.EMPTY_STRING,clientAssertion:a.EMPTY_STRING,clientCertificate:{thumbprint:a.EMPTY_STRING,thumbprintSha256:a.EMPTY_STRING,privateKey:a.EMPTY_STRING,x5c:a.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:a.EMPTY_STRING,authorityMetadata:a.EMPTY_STRING,clientCapabilities:[],protocolMode:FK.AAD,azureCloudOptions:{azureCloudInstance:oz.None,tenant:a.EMPTY_STRING},skipAuthorityMetadataCache:!1},CM$={claimsBasedCachingEnabled:!1},U1={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:cM$.LogLevel.Info},nM$={loggerOptions:U1,networkClient:new cz,proxyUrl:a.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},rM$={application:{appName:a.EMPTY_STRING,appVersion:a.EMPTY_STRING}};function VM$({auth:$,broker:q,cache:_,system:K,telemetry:P}){let w={...nM$,networkClient:new cz(K?.proxyUrl,K?.customAgentOptions),loggerOptions:K?.loggerOptions||U1,disableInternalRetries:K?.disableInternalRetries||!1};if(!!$.clientCertificate&&!$.clientCertificate.thumbprint&&!$.clientCertificate.thumbprintSha256)throw x6.createStateNotFoundError();return{auth:{...LM$,...$},broker:{...q},cache:{...CM$,..._},system:{...w,...K},telemetry:{...rM$,...P}}}function xM$({managedIdentityIdParams:$,system:q}){let _=new KL($),K=q?.loggerOptions||U1,P;if(q?.networkClient)P=q.networkClient;else P=new cz(q?.proxyUrl,q?.customAgentOptions);if(!q?.disableInternalRetries){let w=new PL(GM$,ZM$,NM$);P=new jL(P,w)}return{managedIdentityId:_,system:{loggerOptions:K,networkClient:P}}}class wL{generateGuid(){return E9$.v4()}isGuid($){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)}}class Qq{static base64Encode($,q){return Buffer.from($,q).toString("base64")}static base64EncodeUrl($,q){return Qq.base64Encode($,q).replace(/=/g,a.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode($){return Buffer.from($,"base64").toString("utf8")}static base64DecodeUrl($){let q=$.replace(/-/g,"+").replace(/_/g,"/");while(q.length%4)q+="=";return Qq.base64Decode(q)}}class Q1{sha256($){return NR.createHash(yM$.SHA256).update($).digest()}}class OL{constructor(){this.hashUtils=new Q1}async generatePkceCodes(){let $=this.generateCodeVerifier(),q=this.generateCodeChallengeFromVerifier($);return{verifier:$,challenge:q}}generateCodeVerifier(){let $=[],q=256-256%C1.CV_CHARSET.length;while($.length<=pM$){let K=NR.randomBytes(1)[0];if(K>=q)continue;let P=K%C1.CV_CHARSET.length;$.push(C1.CV_CHARSET[P])}let _=$.join(a.EMPTY_STRING);return Qq.base64EncodeUrl(_)}generateCodeChallengeFromVerifier($){return Qq.base64EncodeUrl(this.hashUtils.sha256($).toString("base64"),"base64")}}class Iz{constructor(){this.pkceGenerator=new OL,this.guidGenerator=new wL,this.hashUtils=new Q1}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode($){return Qq.base64Encode($)}base64Decode($){return Qq.base64Decode($)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString($){return Qq.base64EncodeUrl(this.hashUtils.sha256($).toString("base64"),"base64")}}class lz extends D3{constructor($,q,_,K){super(q,_,$,K);this.cache={},this.changeEmitters=[],this.logger=$}registerChangeEmitter($){this.changeEmitters.push($)}emitChange(){this.changeEmitters.forEach(($)=>$.call(null))}cacheToInMemoryCache($){let q={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let _ in $){let K=$[_];if(typeof K!=="object")continue;if(K instanceof X8)q.accounts[_]=K;else if(jR(K))q.idTokens[_]=K;else if(PR(K))q.accessTokens[_]=K;else if(wR(K))q.refreshTokens[_]=K;else if(OR(_,K))q.appMetadata[_]=K;else continue}return q}inMemoryCacheToCache($){let q=this.getCache();return q={...q,...$.accounts,...$.idTokens,...$.accessTokens,...$.refreshTokens,...$.appMetadata},q}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache($){this.logger.trace("Setting in-memory cache");let q=this.inMemoryCacheToCache($);this.setCache(q),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache($){this.logger.trace("Setting cache key value store"),this.cache=$,this.emitChange()}getItem($){return this.logger.tracePii(`Item key: ${$}`),this.getCache()[$]}setItem($,q){this.logger.tracePii(`Item key: ${$}`);let _=this.getCache();_[$]=q,this.setCache(_)}getAccountKeys(){let $=this.getInMemoryCache();return Object.keys($.accounts)}getTokenKeys(){let $=this.getInMemoryCache();return{idToken:Object.keys($.idTokens),accessToken:Object.keys($.accessTokens),refreshToken:Object.keys($.refreshTokens)}}getAccount($){let q=this.getCachedAccountEntity($);if(q&&X8.isAccountEntity(q))return this.updateOutdatedCachedAccount($,q);return null}getCachedAccountEntity($){return this.getItem($)?Object.assign(new X8,this.getItem($)):null}setAccount($){let q=$.generateAccountKey();this.setItem(q,$)}getIdTokenCredential($){let q=this.getItem($);if(jR(q))return q;return null}setIdTokenCredential($){let q=h7($);this.setItem(q,$)}getAccessTokenCredential($){let q=this.getItem($);if(PR(q))return q;return null}setAccessTokenCredential($){let q=h7($);this.setItem(q,$)}getRefreshTokenCredential($){let q=this.getItem($);if(wR(q))return q;return null}setRefreshTokenCredential($){let q=h7($);this.setItem(q,$)}getAppMetadata($){let q=this.getItem($);if(OR($,q))return q;return null}setAppMetadata($){let q=U9$($);this.setItem(q,$)}getServerTelemetry($){let q=this.getItem($);if(q&&B9$($,q))return q;return null}setServerTelemetry($,q){this.setItem($,q)}getAuthorityMetadata($){let q=this.getItem($);if(q&&Q9$($,q))return q;return null}getAuthorityMetadataKeys(){return this.getKeys().filter(($)=>{return this.isAuthorityMetadata($)})}setAuthorityMetadata($,q){this.setItem($,q)}getThrottlingCache($){let q=this.getItem($);if(q&&F9$($,q))return q;return null}setThrottlingCache($,q){this.setItem($,q)}removeItem($){this.logger.tracePii(`Item key: ${$}`);let q=!1,_=this.getCache();if(_[$])delete _[$],q=!0;if(q)this.setCache(_),this.emitChange();return q}removeOutdatedAccount($){this.removeItem($)}containsKey($){return this.getKeys().includes($)}getKeys(){this.logger.trace("Retrieving all cache keys");let $=this.getCache();return[...Object.keys($)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach((q)=>{this.removeItem(q)}),this.emitChange()}static generateInMemoryCache($){return A3.deserializeAllCache(A3.deserializeJSONBlob($))}static generateJsonCache($){return dz.serializeAllCache($)}updateCredentialCacheKey($,q){let _=h7(q);if($!==_){let K=this.getItem($);if(K)return this.removeItem($),this.setItem(_,K),this.logger.verbose(`Updated an outdated ${q.credentialType} cache key`),_;else this.logger.error(`Attempted to update an outdated ${q.credentialType} cache key but no item matching the outdated key was found in storage`)}return $}}var uj={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}};class $H{constructor($,q,_){if(this.cacheHasChanged=!1,this.storage=$,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),_)this.persistence=_;this.logger=q}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let $=dz.serializeAllCache(this.storage.getInMemoryCache());if(this.cacheSnapshot)this.logger.trace("Reading cache snapshot from disk"),$=this.mergeState(JSON.parse(this.cacheSnapshot),$);else this.logger.trace("No cache snapshot to merge");return this.cacheHasChanged=!1,JSON.stringify($)}deserialize($){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=$,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let q=A3.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(q)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}async getAllAccounts(){this.logger.trace("getAllAccounts called");let $;try{if(this.persistence)$=new o7(this,!1),await this.persistence.beforeCacheAccess($);return this.storage.getAllAccounts()}finally{if(this.persistence&&$)await this.persistence.afterCacheAccess($)}}async getAccountByHomeId($){let q=await this.getAllAccounts();if($&&q&&q.length)return q.filter((_)=>_.homeAccountId===$)[0]||null;else return null}async getAccountByLocalId($){let q=await this.getAllAccounts();if($&&q&&q.length)return q.filter((_)=>_.localAccountId===$)[0]||null;else return null}async removeAccount($){this.logger.trace("removeAccount called");let q;try{if(this.persistence)q=new o7(this,!0),await this.persistence.beforeCacheAccess(q);await this.storage.removeAccount(X8.generateAccountCacheKey($))}finally{if(this.persistence&&q)await this.persistence.afterCacheAccess(q)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState($,q){this.logger.trace("Merging in-memory cache with cache snapshot");let _=this.mergeRemovals($,q);return this.mergeUpdates(_,q)}mergeUpdates($,q){return Object.keys(q).forEach((_)=>{let K=q[_];if(!$.hasOwnProperty(_)){if(K!==null)$[_]=K}else{let P=K!==null,w=typeof K==="object",O=!Array.isArray(K),f=typeof $[_]!=="undefined"&&$[_]!==null;if(P&&w&&O&&f)this.mergeUpdates($[_],K);else $[_]=K}}),$}mergeRemovals($,q){this.logger.trace("Remove updated entries in cache");let _=$.Account?this.mergeRemovalsDict($.Account,q.Account):$.Account,K=$.AccessToken?this.mergeRemovalsDict($.AccessToken,q.AccessToken):$.AccessToken,P=$.RefreshToken?this.mergeRemovalsDict($.RefreshToken,q.RefreshToken):$.RefreshToken,w=$.IdToken?this.mergeRemovalsDict($.IdToken,q.IdToken):$.IdToken,O=$.AppMetadata?this.mergeRemovalsDict($.AppMetadata,q.AppMetadata):$.AppMetadata;return{...$,Account:_,AccessToken:K,RefreshToken:P,IdToken:w,AppMetadata:O}}mergeRemovalsDict($,q){let _={...$};return Object.keys($).forEach((K)=>{if(!q||!q.hasOwnProperty(K))delete _[K]}),_}overlayDefaults($){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...uj.Account,...$.Account},IdToken:{...uj.IdToken,...$.IdToken},AccessToken:{...uj.AccessToken,...$.AccessToken},RefreshToken:{...uj.RefreshToken,...$.RefreshToken},AppMetadata:{...uj.AppMetadata,...$.AppMetadata}}}}class PK{static fromAssertion($){let q=new PK;return q.jwt=$,q}static fromCertificate($,q,_){let K=new PK;if(K.privateKey=q,K.thumbprint=$,K.useSha256=!1,_)K.publicCertificate=this.parseCertificate(_);return K}static fromCertificateWithSha256Thumbprint($,q,_){let K=new PK;if(K.privateKey=q,K.thumbprint=$,K.useSha256=!0,_)K.publicCertificate=this.parseCertificate(_);return K}getJwt($,q,_){if(this.privateKey&&this.thumbprint){if(this.jwt&&!this.isExpired()&&q===this.issuer&&_===this.jwtAudience)return this.jwt;return this.createJwt($,q,_)}if(this.jwt)return this.jwt;throw l(Fj)}createJwt($,q,_){this.issuer=q,this.jwtAudience=_;let K=Y6();this.expirationTime=K+600;let w={alg:this.useSha256?Sq.PSS_256:Sq.RSA_256},O=this.useSha256?Sq.X5T_256:Sq.X5T;if(Object.assign(w,{[O]:Qq.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate)Object.assign(w,{[Sq.X5C]:this.publicCertificate});let f={[Sq.AUDIENCE]:this.jwtAudience,[Sq.EXPIRATION_TIME]:this.expirationTime,[Sq.ISSUER]:this.issuer,[Sq.SUBJECT]:this.issuer,[Sq.NOT_BEFORE]:K,[Sq.JWT_ID]:$.createNewGuid()};return this.jwt=u9$.sign(f,this.privateKey,{header:w}),this.jwt}isExpired(){return this.expirationTime<Y6()}static parseCertificate($){let q=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,_=[],K;while((K=q.exec($))!==null)_.push(K[1].replace(/\r*\n/g,a.EMPTY_STRING));return _}}var zL="@azure/msal-node",W3="2.16.2";class qH extends fK{constructor($){super($)}async acquireToken($){this.logger.info("in acquireToken call in username-password client");let q=Y6(),_=await this.executeTokenRequest(this.authority,$),K=new p8(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return K.validateTokenResponse(_.body),K.handleServerTokenResponse(_.body,this.authority,q,$)}async executeTokenRequest($,q){let _=this.createTokenQueryParameters(q),K=x$.appendQueryString($.tokenEndpoint,_),P=await this.createTokenRequestBody(q),w=this.createTokenRequestHeaders({credential:q.username,type:Uq.UPN}),O={clientId:this.config.authOptions.clientId,authority:$.canonicalAuthority,scopes:q.scopes,claims:q.claims,authenticationScheme:q.authenticationScheme,resourceRequestMethod:q.resourceRequestMethod,resourceRequestUri:q.resourceRequestUri,shrClaims:q.shrClaims,sshKid:q.sshKid};return this.executePostToTokenEndpoint(K,P,w,O,q.correlationId)}async createTokenRequestBody($){let q=new D8;if(q.addClientId(this.config.authOptions.clientId),q.addUsername($.username),q.addPassword($.password),q.addScopes($.scopes),q.addResponseTypeForTokenAndIdToken(),q.addGrantType(i7.RESOURCE_OWNER_PASSWORD_GRANT),q.addClientInfo(),q.addLibraryInfo(this.config.libraryInfo),q.addApplicationTelemetry(this.config.telemetry.application),q.addThrottling(),this.serverTelemetryManager)q.addServerTelemetry(this.serverTelemetryManager);let _=$.correlationId||this.config.cryptoInterface.createNewGuid();if(q.addCorrelationId(_),this.config.clientCredentials.clientSecret)q.addClientSecret(this.config.clientCredentials.clientSecret);let K=this.config.clientCredentials.clientAssertion;if(K)q.addClientAssertion(await UK(K.assertion,this.config.authOptions.clientId,$.resourceRequestUri)),q.addClientAssertionType(K.assertionType);if(!L8.isEmptyObj($.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)q.addClaims($.claims,this.config.authOptions.clientCapabilities);if(this.config.systemOptions.preventCorsPreflight&&$.username)q.addCcsUpn($.username);return q.createQueryString()}}class tz{constructor($){this.config=VM$($),this.cryptoProvider=new Iz,this.logger=new wK(this.config.system.loggerOptions,zL,W3),this.storage=new lz(this.logger,this.config.auth.clientId,this.cryptoProvider,PM$(this.config.auth)),this.tokenCache=new $H(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl($){this.logger.info("getAuthCodeUrl called",$.correlationId);let q={...$,...await this.initializeBaseRequest($),responseMode:$.responseMode||bz.QUERY,authenticationScheme:I$.BEARER},_=await this.buildOauthClientConfiguration(q.authority,q.correlationId,q.redirectUri,void 0,void 0,$.azureCloudOptions),K=new b1(_);return this.logger.verbose("Auth code client created",q.correlationId),K.getAuthCodeUrl(q)}async acquireTokenByCode($,q){if(this.logger.info("acquireTokenByCode called"),$.state&&q)this.logger.info("acquireTokenByCode - validating state"),this.validateState($.state,q.state||""),q={...q,state:""};let _={...$,...await this.initializeBaseRequest($),authenticationScheme:I$.BEARER},K=this.initializeServerTelemetryManager(T7.acquireTokenByCode,_.correlationId);try{let P=await this.buildOauthClientConfiguration(_.authority,_.correlationId,_.redirectUri,K,void 0,$.azureCloudOptions),w=new b1(P);return this.logger.verbose("Auth code client created",_.correlationId),await w.acquireToken(_,q)}catch(P){if(P instanceof _6)P.setCorrelationId(_.correlationId);throw K.cacheFailedRequest(P),P}}async acquireTokenByRefreshToken($){this.logger.info("acquireTokenByRefreshToken called",$.correlationId);let q={...$,...await this.initializeBaseRequest($),authenticationScheme:I$.BEARER},_=this.initializeServerTelemetryManager(T7.acquireTokenByRefreshToken,q.correlationId);try{let K=await this.buildOauthClientConfiguration(q.authority,q.correlationId,q.redirectUri||"",_,void 0,$.azureCloudOptions),P=new rz(K);return this.logger.verbose("Refresh token client created",q.correlationId),await P.acquireToken(q)}catch(K){if(K instanceof _6)K.setCorrelationId(q.correlationId);throw _.cacheFailedRequest(K),K}}async acquireTokenSilent($){let q={...$,...await this.initializeBaseRequest($),forceRefresh:$.forceRefresh||!1},_=this.initializeServerTelemetryManager(T7.acquireTokenSilent,q.correlationId,q.forceRefresh);try{let K=await this.buildOauthClientConfiguration(q.authority,q.correlationId,q.redirectUri||"",_,void 0,$.azureCloudOptions),P=new IR(K);return this.logger.verbose("Silent flow client created",q.correlationId),await P.acquireToken(q)}catch(K){if(K instanceof _6)K.setCorrelationId(q.correlationId);throw _.cacheFailedRequest(K),K}}async acquireTokenByUsernamePassword($){this.logger.info("acquireTokenByUsernamePassword called",$.correlationId);let q={...$,...await this.initializeBaseRequest($)},_=this.initializeServerTelemetryManager(T7.acquireTokenByUsernamePassword,q.correlationId);try{let K=await this.buildOauthClientConfiguration(q.authority,q.correlationId,"",_,void 0,$.azureCloudOptions),P=new qH(K);return this.logger.verbose("Username password client created",q.correlationId),await P.acquireToken(q)}catch(K){if(K instanceof _6)K.setCorrelationId(q.correlationId);throw _.cacheFailedRequest(K),K}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState($,q){if(!$)throw x6.createStateNotFoundError();if($!==q)throw l(y7)}getLogger(){return this.logger}setLogger($){this.logger=$}async buildOauthClientConfiguration($,q,_,K,P,w){this.logger.verbose("buildOauthClientConfiguration called",q);let O=w?w:this.config.auth.azureCloudOptions,f=await this.createAuthority($,q,P,O);return this.logger.info(`Building oauth client configuration with the following authority: ${f.tokenEndpoint}.`,q),K?.updateRegionDiscoveryMetadata(f.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:_},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:q},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:K,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(f)},libraryInfo:{sku:t8.MSAL_SKU,version:W3,cpu:process.arch||a.EMPTY_STRING,os:process.platform||a.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion($){if(this.developerProvidedClientAssertion)this.clientAssertion=PK.fromAssertion(await UK(this.developerProvidedClientAssertion,this.config.auth.clientId,$.tokenEndpoint));return this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,$.tokenEndpoint),assertionType:t8.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest($){if(this.logger.verbose("initializeRequestScopes called",$.correlationId),$.authenticationScheme&&$.authenticationScheme===I$.POP)this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",$.correlationId);if($.authenticationScheme=I$.BEARER,this.config.cache.claimsBasedCachingEnabled&&$.claims&&!L8.isEmptyObj($.claims))$.requestedClaimsHash=await this.cryptoProvider.hashString($.claims);return{...$,scopes:[...$&&$.scopes||[],...KK],correlationId:$&&$.correlationId||this.cryptoProvider.createNewGuid(),authority:$.authority||this.config.auth.authority}}initializeServerTelemetryManager($,q,_){let K={clientId:this.config.auth.clientId,correlationId:q,apiId:$,forceRefresh:_||!1};return new T3(K,this.storage)}async createAuthority($,q,_,K){this.logger.verbose("createAuthority called",q);let P=z8.generateAuthority($,K),w={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:_,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return iR(P,this.config.system.networkClient,this.storage,w,this.logger,q)}clearCache(){this.storage.clear()}}class fL{async listenForAuthCode($,q){if(this.server)throw x6.createLoopbackServerAlreadyExistsError();return new Promise((_,K)=>{this.server=hz.createServer((P,w)=>{let O=P.url;if(!O){w.end(q||"Error occurred loading redirectUrl"),K(x6.createUnableToLoadRedirectUrlError());return}else if(O===a.FORWARD_SLASH){w.end($||"Auth code was successfully acquired. You can close this window now.");return}let f=this.getRedirectUri(),Y=new URL(O,f),h=CR(Y.search)||{};if(h.code)w.writeHead(q6.REDIRECT,{location:f}),w.end();if(h.error)w.end(q||`Error occurred: ${h.error}`);_(h)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw x6.createNoLoopbackServerExistsError();let $=this.server.address();if(!$||typeof $==="string"||!$.port)throw this.closeServer(),x6.createInvalidLoopbackAddressTypeError();let q=$&&$.port;return`${t8.HTTP_PROTOCOL}${t8.LOCALHOST}:${q}`}closeServer(){if(this.server){if(this.server.close(),typeof this.server.closeAllConnections==="function")this.server.closeAllConnections();this.server.unref(),this.server=void 0}}}class _H extends fK{constructor($){super($)}async acquireToken($){let q=await this.getDeviceCode($);$.deviceCodeCallback(q);let _=Y6(),K=await this.acquireTokenWithDeviceCode($,q),P=new p8(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return P.validateTokenResponse(K),P.handleServerTokenResponse(K,this.authority,_,$)}async getDeviceCode($){let q=this.createExtraQueryParameters($),_=x$.appendQueryString(this.authority.deviceCodeEndpoint,q),K=this.createQueryString($),P=this.createTokenRequestHeaders(),w={clientId:this.config.authOptions.clientId,authority:$.authority,scopes:$.scopes,claims:$.claims,authenticationScheme:$.authenticationScheme,resourceRequestMethod:$.resourceRequestMethod,resourceRequestUri:$.resourceRequestUri,shrClaims:$.shrClaims,sshKid:$.sshKid};return this.executePostRequestToDeviceCodeEndpoint(_,K,P,w,$.correlationId)}createExtraQueryParameters($){let q=new D8;if($.extraQueryParameters)q.addExtraQueryParameters($.extraQueryParameters);return q.createQueryString()}async executePostRequestToDeviceCodeEndpoint($,q,_,K,P){let{body:{user_code:w,device_code:O,verification_uri:f,expires_in:Y,interval:h,message:k}}=await this.sendPostRequest(K,$,{body:q,headers:_},P);return{userCode:w,deviceCode:O,verificationUri:f,expiresIn:Y,interval:h,message:k}}createQueryString($){let q=new D8;if(q.addScopes($.scopes),q.addClientId(this.config.authOptions.clientId),$.extraQueryParameters)q.addExtraQueryParameters($.extraQueryParameters);if($.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)q.addClaims($.claims,this.config.authOptions.clientCapabilities);return q.createQueryString()}continuePolling($,q,_){if(_)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),l(tj);else if(q&&q<$&&Y6()>q)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${q}`),l(Uj);else if(Y6()>$){if(q)this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${q}`);throw this.logger.error(`Device code expired. Expiration time of device code was ${$}`),l(sj)}return!0}async acquireTokenWithDeviceCode($,q){let _=this.createTokenQueryParameters($),K=x$.appendQueryString(this.authority.tokenEndpoint,_),P=this.createTokenRequestBody($,q),w=this.createTokenRequestHeaders(),O=$.timeout?Y6()+$.timeout:void 0,f=Y6()+q.expiresIn,Y=q.interval*1000;while(this.continuePolling(f,O,$.cancel)){let h={clientId:this.config.authOptions.clientId,authority:$.authority,scopes:$.scopes,claims:$.claims,authenticationScheme:$.authenticationScheme,resourceRequestMethod:$.resourceRequestMethod,resourceRequestUri:$.resourceRequestUri,shrClaims:$.shrClaims,sshKid:$.sshKid},k=await this.executePostToTokenEndpoint(K,P,w,h,$.correlationId);if(k.body&&k.body.error)if(k.body.error===a.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await i9$(Y);else throw this.logger.info("Unexpected error in polling from the server"),V9$(Vj,k.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),k.body}throw this.logger.error("Polling stopped for unknown reasons."),l(ej)}createTokenRequestBody($,q){let _=new D8;_.addScopes($.scopes),_.addClientId(this.config.authOptions.clientId),_.addGrantType(i7.DEVICE_CODE_GRANT),_.addDeviceCode(q.deviceCode);let K=$.correlationId||this.config.cryptoInterface.createNewGuid();if(_.addCorrelationId(K),_.addClientInfo(),_.addLibraryInfo(this.config.libraryInfo),_.addApplicationTelemetry(this.config.telemetry.application),_.addThrottling(),this.serverTelemetryManager)_.addServerTelemetry(this.serverTelemetryManager);if(!L8.isEmptyObj($.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)_.addClaims($.claims,this.config.authOptions.clientCapabilities);return _.createQueryString()}}class ML extends tz{constructor($){super($);if(this.config.broker.nativeBrokerPlugin)if(this.config.broker.nativeBrokerPlugin.isBrokerAvailable)this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions);else this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.");this.skus=T3.makeExtraSkuString({libraryName:t8.MSAL_SKU,libraryVersion:W3})}async acquireTokenByDeviceCode($){this.logger.info("acquireTokenByDeviceCode called",$.correlationId);let q=Object.assign($,await this.initializeBaseRequest($)),_=this.initializeServerTelemetryManager(T7.acquireTokenByDeviceCode,q.correlationId);try{let K=await this.buildOauthClientConfiguration(q.authority,q.correlationId,"",_,void 0,$.azureCloudOptions),P=new _H(K);return this.logger.verbose("Device code client created",q.correlationId),await P.acquireToken(q)}catch(K){if(K instanceof _6)K.setCorrelationId(q.correlationId);throw _.cacheFailedRequest(K),K}}async acquireTokenInteractive($){let q=$.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",q);let{openBrowser:_,successTemplate:K,errorTemplate:P,windowHandle:w,loopbackClient:O,...f}=$;if(this.nativeBrokerPlugin){let G={...f,clientId:this.config.auth.clientId,scopes:$.scopes||KK,redirectUri:`${t8.HTTP_PROTOCOL}${t8.LOCALHOST}`,authority:$.authority||this.config.auth.authority,correlationId:q,extraParameters:{...f.extraQueryParameters,...f.tokenQueryParameters,[TR]:this.skus},accountId:f.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(G,w)}let{verifier:Y,challenge:h}=await this.cryptoProvider.generatePkceCodes(),k=O||new fL,T={},p=null;try{let G=k.listenForAuthCode(K,P).then((m)=>{T=m}).catch((m)=>{p=m}),Z=await this.waitForRedirectUri(k),X={...f,correlationId:q,scopes:$.scopes||KK,redirectUri:Z,responseMode:bz.QUERY,codeChallenge:h,codeChallengeMethod:V1.S256},C=await this.getAuthCodeUrl(X);if(await _(C),await G,p)throw p;if(T.error)throw new OK(T.error,T.error_description,T.suberror);else if(!T.code)throw x6.createNoAuthCodeInResponseError();let N=T.client_info,L={code:T.code,codeVerifier:Y,clientInfo:N||a.EMPTY_STRING,...X};return await this.acquireTokenByCode(L)}finally{k.closeServer()}}async acquireTokenSilent($){let q=$.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",q),this.nativeBrokerPlugin){let _={...$,clientId:this.config.auth.clientId,scopes:$.scopes||KK,redirectUri:`${t8.HTTP_PROTOCOL}${t8.LOCALHOST}`,authority:$.authority||this.config.auth.authority,correlationId:q,extraParameters:{...$.tokenQueryParameters,[TR]:this.skus},accountId:$.account.nativeAccountId,forceRefresh:$.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(_)}return super.acquireTokenSilent($)}async signOut($){if(this.nativeBrokerPlugin&&$.account.nativeAccountId){let q={clientId:this.config.auth.clientId,accountId:$.account.nativeAccountId,correlationId:$.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(q)}await this.getTokenCache().removeAccount($.account)}async getAllAccounts(){if(this.nativeBrokerPlugin){let $=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,$)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri($){return new Promise((q,_)=>{let K=0,P=setInterval(()=>{if(n1.TIMEOUT_MS/n1.INTERVAL_MS<K){clearInterval(P),_(x6.createLoopbackServerTimeoutError());return}try{let w=$.getRedirectUri();clearInterval(P),q(w);return}catch(w){if(w instanceof _6&&w.errorCode===r6.noLoopbackServerExists.code){K++;return}clearInterval(P),_(w);return}},n1.INTERVAL_MS)})}}class sz extends fK{constructor($,q){super($);this.appTokenProvider=q}async acquireToken($){if($.skipCache||$.claims)return this.executeTokenRequest($,this.authority);let[q,_]=await this.getCachedAuthenticationResult($,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);if(q){if(_===X6.PROACTIVELY_REFRESHED){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let K=!0;await this.executeTokenRequest($,this.authority,K)}return q}else return this.executeTokenRequest($,this.authority)}async getCachedAuthenticationResult($,q,_,K,P,w){let O=q,f=q,Y=X6.NOT_APPLICABLE,h;if(O.serializableCache&&O.persistencePlugin)h=new o7(O.serializableCache,!1),await O.persistencePlugin.beforeCacheAccess(h);let k=this.readAccessTokenFromCache(K,f.managedIdentityId?.id||O.authOptions.clientId,new s6($.scopes||[]),P);if(O.serializableCache&&O.persistencePlugin&&h)await O.persistencePlugin.afterCacheAccess(h);if(!k)return w?.setCacheOutcome(X6.NO_CACHED_ACCESS_TOKEN),[null,X6.NO_CACHED_ACCESS_TOKEN];if(L7(k.expiresOn,O.systemOptions?.tokenRenewalOffsetSeconds||mR))return w?.setCacheOutcome(X6.CACHED_ACCESS_TOKEN_EXPIRED),[null,X6.CACHED_ACCESS_TOKEN_EXPIRED];if(k.refreshOn&&L7(k.refreshOn.toString(),0))Y=X6.PROACTIVELY_REFRESHED,w?.setCacheOutcome(X6.PROACTIVELY_REFRESHED);return[await p8.generateAuthenticationResult(_,K,{account:null,idToken:null,accessToken:k,refreshToken:null,appMetadata:null},!0,$),Y]}readAccessTokenFromCache($,q,_,K){let P={homeAccountId:a.EMPTY_STRING,environment:$.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:b$.ACCESS_TOKEN,clientId:q,realm:$.tenant,target:s6.createSearchScopes(_.asArray())},w=K.getAccessTokensByFilter(P);if(w.length<1)return null;else if(w.length>1)throw l(Z7);return w[0]}async executeTokenRequest($,q,_){let K,P;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let f={correlationId:$.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:$.scopes,claims:$.claims};P=Y6();let Y=await this.appTokenProvider(f);K={access_token:Y.accessToken,expires_in:Y.expiresInSeconds,refresh_in:Y.refreshInSeconds,token_type:I$.BEARER}}else{let f=this.createTokenQueryParameters($),Y=x$.appendQueryString(q.tokenEndpoint,f),h=await this.createTokenRequestBody($),k=this.createTokenRequestHeaders(),T={clientId:this.config.authOptions.clientId,authority:$.authority,scopes:$.scopes,claims:$.claims,authenticationScheme:$.authenticationScheme,resourceRequestMethod:$.resourceRequestMethod,resourceRequestUri:$.resourceRequestUri,shrClaims:$.shrClaims,sshKid:$.sshKid};this.logger.info("Sending token request to endpoint: "+q.tokenEndpoint),P=Y6();let p=await this.executePostToTokenEndpoint(Y,h,k,T,$.correlationId);K=p.body,K.status=p.status}let w=new p8(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return w.validateTokenResponse(K,_),await w.handleServerTokenResponse(K,this.authority,P,$)}async createTokenRequestBody($){let q=new D8;if(q.addClientId(this.config.authOptions.clientId),q.addScopes($.scopes,!1),q.addGrantType(i7.CLIENT_CREDENTIALS_GRANT),q.addLibraryInfo(this.config.libraryInfo),q.addApplicationTelemetry(this.config.telemetry.application),q.addThrottling(),this.serverTelemetryManager)q.addServerTelemetry(this.serverTelemetryManager);let _=$.correlationId||this.config.cryptoInterface.createNewGuid();if(q.addCorrelationId(_),this.config.clientCredentials.clientSecret)q.addClientSecret(this.config.clientCredentials.clientSecret);let K=$.clientAssertion||this.config.clientCredentials.clientAssertion;if(K)q.addClientAssertion(await UK(K.assertion,this.config.authOptions.clientId,$.resourceRequestUri)),q.addClientAssertionType(K.assertionType);if(!L8.isEmptyObj($.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)q.addClaims($.claims,this.config.authOptions.clientCapabilities);return q.createQueryString()}}class KH extends fK{constructor($){super($)}async acquireToken($){if(this.scopeSet=new s6($.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString($.oboAssertion),$.skipCache||$.claims)return this.executeTokenRequest($,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult($)}catch(q){return await this.executeTokenRequest($,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult($){let q=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,$);if(!q)throw this.serverTelemetryManager?.setCacheOutcome(X6.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),l(Fq);else if(L7(q.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(X6.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),l(Fq);let _=this.readIdTokenFromCacheForOBO(q.homeAccountId),K,P=null;if(_){K=X3(_.secret,Qq.base64Decode);let w=K.oid||K.sub,O={homeAccountId:_.homeAccountId,environment:_.environment,tenantId:_.realm,username:a.EMPTY_STRING,localAccountId:w||a.EMPTY_STRING};P=this.cacheManager.readAccountFromCache(O)}if(this.config.serverTelemetryManager)this.config.serverTelemetryManager.incrementCacheHits();return p8.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:P,accessToken:q,idToken:_,refreshToken:null,appMetadata:null},!0,$,K)}readIdTokenFromCacheForOBO($){let q={homeAccountId:$,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:b$.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},_=this.cacheManager.getIdTokensByFilter(q);if(Object.values(_).length<1)return null;return Object.values(_)[0]}readAccessTokenFromCacheForOBO($,q){let _=q.authenticationScheme||I$.BEARER,P={credentialType:_&&_.toLowerCase()!==I$.BEARER.toLowerCase()?b$.ACCESS_TOKEN_WITH_AUTH_SCHEME:b$.ACCESS_TOKEN,clientId:$,target:s6.createSearchScopes(this.scopeSet.asArray()),tokenType:_,keyId:q.sshKid,requestedClaimsHash:q.requestedClaimsHash,userAssertionHash:this.userAssertionHash},w=this.cacheManager.getAccessTokensByFilter(P),O=w.length;if(O<1)return null;else if(O>1)throw l(Z7);return w[0]}async executeTokenRequest($,q,_){let K=this.createTokenQueryParameters($),P=x$.appendQueryString(q.tokenEndpoint,K),w=await this.createTokenRequestBody($),O=this.createTokenRequestHeaders(),f={clientId:this.config.authOptions.clientId,authority:$.authority,scopes:$.scopes,claims:$.claims,authenticationScheme:$.authenticationScheme,resourceRequestMethod:$.resourceRequestMethod,resourceRequestUri:$.resourceRequestUri,shrClaims:$.shrClaims,sshKid:$.sshKid},Y=Y6(),h=await this.executePostToTokenEndpoint(P,w,O,f,$.correlationId),k=new p8(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return k.validateTokenResponse(h.body),await k.handleServerTokenResponse(h.body,this.authority,Y,$,void 0,_)}async createTokenRequestBody($){let q=new D8;if(q.addClientId(this.config.authOptions.clientId),q.addScopes($.scopes),q.addGrantType(i7.JWT_BEARER),q.addClientInfo(),q.addLibraryInfo(this.config.libraryInfo),q.addApplicationTelemetry(this.config.telemetry.application),q.addThrottling(),this.serverTelemetryManager)q.addServerTelemetry(this.serverTelemetryManager);let _=$.correlationId||this.config.cryptoInterface.createNewGuid();if(q.addCorrelationId(_),q.addRequestTokenUse(If$),q.addOboAssertion($.oboAssertion),this.config.clientCredentials.clientSecret)q.addClientSecret(this.config.clientCredentials.clientSecret);let K=this.config.clientCredentials.clientAssertion;if(K)q.addClientAssertion(await UK(K.assertion,this.config.authOptions.clientId,$.resourceRequestUri)),q.addClientAssertionType(K.assertionType);if($.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)q.addClaims($.claims,this.config.authOptions.clientCapabilities);return q.createQueryString()}}class vL extends tz{constructor($){super($);this.setClientCredential(),this.appTokenProvider=void 0}SetAppTokenProvider($){this.appTokenProvider=$}async acquireTokenByClientCredential($){this.logger.info("acquireTokenByClientCredential called",$.correlationId);let q;if($.clientAssertion)q={assertion:await UK($.clientAssertion,this.config.auth.clientId),assertionType:t8.JWT_BEARER_ASSERTION_TYPE};let _=await this.initializeBaseRequest($),K={..._,scopes:_.scopes.filter((T)=>!KK.includes(T))},P={...$,...K,clientAssertion:q},O=new x$(P.authority).getUrlComponents().PathSegments[0];if(Object.values(N_).includes(O))throw l(P3);let f=process.env[DM$],Y;if(P.azureRegion!=="DisableMsalForceRegion")if(!P.azureRegion&&f)Y=f;else Y=P.azureRegion;let h={azureRegion:Y,environmentRegion:process.env[XM$]},k=this.initializeServerTelemetryManager(T7.acquireTokenByClientCredential,P.correlationId,P.skipCache);try{let T=await this.buildOauthClientConfiguration(P.authority,P.correlationId,"",k,h,$.azureCloudOptions),p=new sz(T,this.appTokenProvider);return this.logger.verbose("Client credential client created",P.correlationId),await p.acquireToken(P)}catch(T){if(T instanceof _6)T.setCorrelationId(P.correlationId);throw k.cacheFailedRequest(T),T}}async acquireTokenOnBehalfOf($){this.logger.info("acquireTokenOnBehalfOf called",$.correlationId);let q={...$,...await this.initializeBaseRequest($)};try{let _=await this.buildOauthClientConfiguration(q.authority,q.correlationId,"",void 0,void 0,$.azureCloudOptions),K=new KH(_);return this.logger.verbose("On behalf of client created",q.correlationId),await K.acquireToken(q)}catch(_){if(_ instanceof _6)_.setCorrelationId(q.correlationId);throw _}}setClientCredential(){let $=!!this.config.auth.clientSecret,q=!!this.config.auth.clientAssertion,_=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(this.appTokenProvider)return;if($&&q||q&&_||$&&_)throw l(R7);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(!_)throw l(R7);else this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?PK.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):PK.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c)}}var r1={MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID:"mi_res_id"};class QK{constructor($,q,_,K){this.logger=$,this.nodeStorage=q,this.networkClient=_,this.cryptoProvider=K}async getServerTokenResponseAsync($,q,_,K){return this.getServerTokenResponse($)}getServerTokenResponse($){let q,_;if($.body.expires_on){if(_=$.body.expires_on-Y6(),_>7200)q=_/2}return{status:$.status,access_token:$.body.access_token,expires_in:_,scope:$.body.resource,token_type:$.body.token_type,refresh_in:q,correlation_id:$.body.correlation_id||$.body.correlationId,error:typeof $.body.error==="string"?$.body.error:$.body.error?.code,error_description:$.body.message||(typeof $.body.error==="string"?$.body.error_description:$.body.error?.message),error_codes:$.body.error_codes,timestamp:$.body.timestamp,trace_id:$.body.trace_id}}async acquireTokenWithManagedIdentity($,q,_,K){let P=this.createRequest($.resource,q),w=P.headers;w[V6.CONTENT_TYPE]=a.URL_FORM_CONTENT_TYPE;let O={headers:w};if(Object.keys(P.bodyParameters).length)O.body=P.computeParametersBodyString();let f=Y6(),Y;try{if(P.httpMethod===f8.POST)Y=await this.networkClient.sendPostRequestAsync(P.computeUri(),O);else Y=await this.networkClient.sendGetRequestAsync(P.computeUri(),O)}catch(T){if(T instanceof _6)throw T;else throw l(BK)}let h=new p8(q.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),k=await this.getServerTokenResponseAsync(Y,this.networkClient,P,O);return h.validateTokenResponse(k,K),h.handleServerTokenResponse(k,_,f,$)}getManagedIdentityUserAssignedIdQueryParameterKey($){switch($){case R8.USER_ASSIGNED_CLIENT_ID:return this.logger.info("[Managed Identity] Adding user assigned client id to the request."),r1.MANAGED_IDENTITY_CLIENT_ID;case R8.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r1.MANAGED_IDENTITY_RESOURCE_ID;case R8.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),r1.MANAGED_IDENTITY_OBJECT_ID;default:throw l6(rj)}}}QK.getValidatedEnvVariableUrlString=($,q,_,K)=>{try{return new x$(q).urlString}catch(P){throw K.info(`[Managed Identity] ${_} managed identity is unavailable because the '${$}' environment variable is malformed.`),l6(Rj[$])}};class g7{constructor($,q){this.httpMethod=$,this._baseEndpoint=q,this.headers={},this.bodyParameters={},this.queryParameters={}}computeUri(){let $=new D8;if(this.queryParameters)$.addExtraQueryParameters(this.queryParameters);let q=$.createQueryString();return x$.appendQueryString(this._baseEndpoint,q)}computeParametersBodyString(){let $=new D8;if(this.bodyParameters)$.addExtraQueryParameters(this.bodyParameters);return $.createQueryString()}}var dM$="2019-08-01";class W7 extends QK{constructor($,q,_,K,P,w){super($,q,_,K);this.identityEndpoint=P,this.identityHeader=w}static getEnvironmentVariables(){let $=process.env[Z$.IDENTITY_ENDPOINT],q=process.env[Z$.IDENTITY_HEADER];return[$,q]}static tryCreate($,q,_,K){let[P,w]=W7.getEnvironmentVariables();if(!P||!w)return $.info(`[Managed Identity] ${C$.APP_SERVICE} managed identity is unavailable because one or both of the '${Z$.IDENTITY_HEADER}' and '${Z$.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let O=W7.getValidatedEnvVariableUrlString(Z$.IDENTITY_ENDPOINT,P,C$.APP_SERVICE,$);return $.info(`[Managed Identity] Environment variables validation passed for ${C$.APP_SERVICE} managed identity. Endpoint URI: ${O}. Creating ${C$.APP_SERVICE} managed identity.`),new W7($,q,_,K,P,w)}createRequest($,q){let _=new g7(f8.GET,this.identityEndpoint);if(_.headers[TM$]=this.identityHeader,_.queryParameters[az]=dM$,_.queryParameters[p3]=$,q.idType!==R8.SYSTEM_ASSIGNED)_.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(q.idType)]=q.id;return _}}var bM$="2019-11-01",SR="http://127.0.0.1:40342/metadata/identity/oauth2/token",GR="N/A: himds executable exists",ZR={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},oM$={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class eK extends QK{constructor($,q,_,K,P){super($,q,_,K);this.identityEndpoint=P}static getEnvironmentVariables(){let $=process.env[Z$.IDENTITY_ENDPOINT],q=process.env[Z$.IMDS_ENDPOINT];if(!$||!q){let _=oM$[process.platform];try{Ej.accessSync(_,Ej.constants.F_OK|Ej.constants.R_OK),$=SR,q=GR}catch(K){}}return[$,q]}static tryCreate($,q,_,K,P){let[w,O]=eK.getEnvironmentVariables();if(!w||!O)return $.info(`[Managed Identity] ${C$.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Z$.IDENTITY_ENDPOINT}' and '${Z$.IMDS_ENDPOINT}' are not defined. ${C$.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(O===GR)$.info(`[Managed Identity] ${C$.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${C$.AZURE_ARC} endpoint: ${SR}. Creating ${C$.AZURE_ARC} managed identity.`);else{let f=eK.getValidatedEnvVariableUrlString(Z$.IDENTITY_ENDPOINT,w,C$.AZURE_ARC,$);f.endsWith("/")&&f.slice(0,-1),eK.getValidatedEnvVariableUrlString(Z$.IMDS_ENDPOINT,O,C$.AZURE_ARC,$),$.info(`[Managed Identity] Environment variables validation passed for ${C$.AZURE_ARC} managed identity. Endpoint URI: ${f}. Creating ${C$.AZURE_ARC} managed identity.`)}if(P.idType!==R8.SYSTEM_ASSIGNED)throw l6(UR);return new eK($,q,_,K,w)}createRequest($){let q=new g7(f8.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return q.headers[B1]="true",q.queryParameters[az]=bM$,q.queryParameters[p3]=$,q}async getServerTokenResponseAsync($,q,_,K){let P;if($.status===q6.UNAUTHORIZED){let w=$.headers["www-authenticate"];if(!w)throw l6(qL);if(!w.includes("Basic realm="))throw l6(_L);let O=w.split("Basic realm=")[1];if(!ZR.hasOwnProperty(process.platform))throw l6(FR);let f=ZR[process.platform],Y=R9$.basename(O);if(!Y.endsWith(".key"))throw l6(sR);if(f+Y!==O)throw l6(eR);let h;try{h=await Ej.statSync(O).size}catch(p){throw l6(o1)}if(h>SM$)throw l6(BR);let k;try{k=Ej.readFileSync(O,"utf-8")}catch(p){throw l6(o1)}let T=`Basic ${k}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),_.headers[kM$]=T;try{P=await q.sendGetRequestAsync(_.computeUri(),K)}catch(p){if(p instanceof _6)throw p;else throw l(BK)}}return this.getServerTokenResponse(P||$)}}class J7 extends QK{constructor($,q,_,K,P){super($,q,_,K);this.msiEndpoint=P}static getEnvironmentVariables(){return[process.env[Z$.MSI_ENDPOINT]]}static tryCreate($,q,_,K,P){let[w]=J7.getEnvironmentVariables();if(!w)return $.info(`[Managed Identity] ${C$.CLOUD_SHELL} managed identity is unavailable because the '${Z$.MSI_ENDPOINT} environment variable is not defined.`),null;let O=J7.getValidatedEnvVariableUrlString(Z$.MSI_ENDPOINT,w,C$.CLOUD_SHELL,$);if($.info(`[Managed Identity] Environment variable validation passed for ${C$.CLOUD_SHELL} managed identity. Endpoint URI: ${O}. Creating ${C$.CLOUD_SHELL} managed identity.`),P.idType!==R8.SYSTEM_ASSIGNED)throw l6(QR);return new J7($,q,_,K,w)}createRequest($){let q=new g7(f8.POST,this.msiEndpoint);return q.headers[B1]="true",q.bodyParameters[p3]=$,q}}var HL="/metadata/identity/oauth2/token",iM$=`http://169.254.169.254${HL}`,gM$="2018-02-01";class xz extends QK{constructor($,q,_,K,P){super($,q,_,K);this.identityEndpoint=P}static tryCreate($,q,_,K){let P;if(process.env[Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST])$.info(`[Managed Identity] Environment variable ${Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${C$.IMDS} returned endpoint: ${process.env[Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),P=xz.getValidatedEnvVariableUrlString(Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${HL}`,C$.IMDS,$);else $.info(`[Managed Identity] Unable to find ${Z$.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${C$.IMDS}, using the default endpoint.`),P=iM$;return new xz($,q,_,K,P)}createRequest($,q){let _=new g7(f8.GET,this.identityEndpoint);if(_.headers[B1]="true",_.queryParameters[az]=gM$,_.queryParameters[p3]=$,q.idType!==R8.SYSTEM_ASSIGNED)_.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(q.idType)]=q.id;return _}}var aM$="2019-07-01-preview";class X7 extends QK{constructor($,q,_,K,P,w){super($,q,_,K);this.identityEndpoint=P,this.identityHeader=w}static getEnvironmentVariables(){let $=process.env[Z$.IDENTITY_ENDPOINT],q=process.env[Z$.IDENTITY_HEADER],_=process.env[Z$.IDENTITY_SERVER_THUMBPRINT];return[$,q,_]}static tryCreate($,q,_,K,P){let[w,O,f]=X7.getEnvironmentVariables();if(!w||!O||!f)return $.info(`[Managed Identity] ${C$.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Z$.IDENTITY_HEADER}', '${Z$.IDENTITY_ENDPOINT}' or '${Z$.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let Y=X7.getValidatedEnvVariableUrlString(Z$.IDENTITY_ENDPOINT,w,C$.SERVICE_FABRIC,$);if($.info(`[Managed Identity] Environment variables validation passed for ${C$.SERVICE_FABRIC} managed identity. Endpoint URI: ${Y}. Creating ${C$.SERVICE_FABRIC} managed identity.`),P.idType!==R8.SYSTEM_ASSIGNED)$.warning(`[Managed Identity] ${C$.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`);return new X7($,q,_,K,w,O)}createRequest($,q){let _=new g7(f8.GET,this.identityEndpoint);if(_.headers[AM$]=this.identityHeader,_.queryParameters[az]=aM$,_.queryParameters[p3]=$,q.idType!==R8.SYSTEM_ASSIGNED)_.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(q.idType)]=q.id;return _}}class qK{constructor($,q,_,K){this.logger=$,this.nodeStorage=q,this.networkClient=_,this.cryptoProvider=K}async sendManagedIdentityTokenRequest($,q,_,K){if(!qK.identitySource)qK.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,q);return qK.identitySource.acquireTokenWithManagedIdentity($,q,_,K)}allEnvironmentVariablesAreDefined($){return Object.values($).every((q)=>{return q!==void 0})}getManagedIdentitySource(){return qK.sourceName=this.allEnvironmentVariablesAreDefined(X7.getEnvironmentVariables())?C$.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(W7.getEnvironmentVariables())?C$.APP_SERVICE:this.allEnvironmentVariablesAreDefined(J7.getEnvironmentVariables())?C$.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(eK.getEnvironmentVariables())?C$.AZURE_ARC:C$.DEFAULT_TO_IMDS,qK.sourceName}selectManagedIdentitySource($,q,_,K,P){let w=X7.tryCreate($,q,_,K,P)||W7.tryCreate($,q,_,K)||J7.tryCreate($,q,_,K,P)||eK.tryCreate($,q,_,K,P)||xz.tryCreate($,q,_,K);if(!w)throw l6($L);return w}}class sK{constructor($){this.config=xM$($||{}),this.logger=new wK(this.config.system.loggerOptions,zL,W3);let q={canonicalAuthority:a.DEFAULT_AUTHORITY};if(!sK.nodeStorage)sK.nodeStorage=new lz(this.logger,this.config.managedIdentityId.id,x1,q);this.networkClient=this.config.system.networkClient,this.cryptoProvider=new Iz;let _={protocolMode:FK.AAD,knownAuthorities:[DR],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new z8(DR,this.networkClient,sK.nodeStorage,_,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new sz({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new qK(this.logger,sK.nodeStorage,this.networkClient,this.cryptoProvider)}async acquireToken($){if(!$.resource)throw j6(C7);let q={forceRefresh:$.forceRefresh,resource:$.resource.replace("/.default",""),scopes:[$.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid()};if($.claims||q.forceRefresh)return this.managedIdentityClient.sendManagedIdentityTokenRequest(q,this.config.managedIdentityId,this.fakeAuthority);let[_,K]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(q,this.config,this.cryptoProvider,this.fakeAuthority,sK.nodeStorage);if(_){if(K===X6.PROACTIVELY_REFRESHED){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let P=!0;await this.managedIdentityClient.sendManagedIdentityTokenRequest(q,this.config.managedIdentityId,this.fakeAuthority,P)}return _}else return this.managedIdentityClient.sendManagedIdentityTokenRequest(q,this.config.managedIdentityId,this.fakeAuthority)}getManagedIdentitySource(){return qK.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}class YL{constructor($,q){this.client=$,this.partitionManager=q}async beforeCacheAccess($){let q=await this.partitionManager.getKey(),_=await this.client.get(q);$.tokenCache.deserialize(_)}async afterCacheAccess($){if($.cacheHasChanged){let q=$.tokenCache.getKVStore(),_=Object.values(q).filter((P)=>X8.isAccountEntity(P)),K;if(_.length>0){let P=_[0];K=await this.partitionManager.extractKey(P)}else K=await this.partitionManager.getKey();await this.client.set(K,$.tokenCache.serialize())}}}cM$.AuthError=_6;cM$.AuthErrorCodes=n9$;cM$.AuthErrorMessage=r9$;cM$.AzureCloudInstance=oz;cM$.ClientApplication=tz;cM$.ClientAssertion=PK;cM$.ClientAuthError=J3;cM$.ClientAuthErrorCodes=x9$;cM$.ClientAuthErrorMessage=d9$;cM$.ClientConfigurationError=iz;cM$.ClientConfigurationErrorCodes=$f$;cM$.ClientConfigurationErrorMessage=qf$;cM$.ClientCredentialClient=sz;cM$.ConfidentialClientApplication=vL;cM$.CryptoProvider=Iz;cM$.DeviceCodeClient=_H;cM$.DistributedCachePlugin=YL;cM$.InteractionRequiredAuthError=zK;cM$.InteractionRequiredAuthErrorCodes=jM$;cM$.InteractionRequiredAuthErrorMessage=OM$;cM$.Logger=wK;cM$.ManagedIdentityApplication=sK;cM$.ManagedIdentitySourceNames=C$;cM$.NodeStorage=lz;cM$.OnBehalfOfClient=KH;cM$.PromptValue=A7;cM$.ProtocolMode=FK;cM$.PublicClientApplication=ML;cM$.ResponseMode=bz;cM$.ServerError=OK;cM$.TokenCache=$H;cM$.TokenCacheContext=o7;cM$.UsernamePasswordClient=qH;cM$.internals=hM$;cM$.version=W3});var jH=y((vL$,TL)=>{var kL=i("fs"),PH;function Zv$(){try{return kL.statSync("/.dockerenv"),!0}catch($){return!1}}function Nv$(){try{return kL.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch($){return!1}}TL.exports=()=>{if(PH===void 0)PH=Zv$()||Nv$();return PH}});var JL=y((HL$,wH)=>{var mv$=i("os"),Ev$=i("fs"),AL=jH(),WL=()=>{if(process.platform!=="linux")return!1;if(mv$.release().toLowerCase().includes("microsoft")){if(AL())return!1;return!0}try{return Ev$.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!AL():!1}catch($){return!1}};if(process.env.__IS_WSL_TEST__)wH.exports=WL;else wH.exports=WL()});var DL=y((YL$,XL)=>{XL.exports=($,q,_)=>{let K=(P)=>Object.defineProperty($,q,{value:P,enumerable:!0,writable:!0});return Object.defineProperty($,q,{configurable:!0,enumerable:!0,get(){let P=_();return K(P),P},set(P){K(P)}}),$}});var mL=y((hL$,NL)=>{var __dirname="/Users/ali/Projects/twin-viewer-producer/node_modules/.pnpm/open@8.4.2/node_modules/open",uv$=i("path"),Rv$=i("child_process"),{promises:Bz,constants:ZL}=i("fs"),ez=JL(),Lv$=jH(),zH=DL(),pL=uv$.join(__dirname,"xdg-open"),{platform:a7,arch:yL}=process,Cv$=()=>{try{return Bz.statSync("/run/.containerenv"),!0}catch{return!1}},OH;function nv$(){if(OH===void 0)OH=Cv$()||Lv$();return OH}var rv$=(()=>{let q;return async function(){if(q)return q;let _="/etc/wsl.conf",K=!1;try{await Bz.access(_,ZL.F_OK),K=!0}catch{}if(!K)return"/mnt/";let P=await Bz.readFile(_,{encoding:"utf8"}),w=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(P);if(!w)return"/mnt/";return q=w.groups.mountPoint.trim(),q=q.endsWith("/")?q:`${q}/`,q}})(),SL=async($,q)=>{let _;for(let K of $)try{return await q(K)}catch(P){_=P}throw _},Fz=async($)=>{if($={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...$},Array.isArray($.app))return SL($.app,(f)=>Fz({...$,app:f}));let{name:q,arguments:_=[]}=$.app||{};if(_=[..._],Array.isArray(q))return SL(q,(f)=>Fz({...$,app:{name:f,arguments:_}}));let K,P=[],w={};if(a7==="darwin"){if(K="open",$.wait)P.push("--wait-apps");if($.background)P.push("--background");if($.newInstance)P.push("--new");if(q)P.push("-a",q)}else if(a7==="win32"||ez&&!nv$()&&!q){let f=await rv$();if(K=ez?`${f}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,P.push("-NoProfile","-NonInteractive","ExecutionPolicy","Bypass","-EncodedCommand"),!ez)w.windowsVerbatimArguments=!0;let Y=["Start"];if($.wait)Y.push("-Wait");if(q){if(Y.push(`"\`"${q}\`""`,"-ArgumentList"),$.target)_.unshift($.target)}else if($.target)Y.push(`"${$.target}"`);if(_.length>0)_=_.map((h)=>`"\`"${h}\`""`),Y.push(_.join(","));$.target=Buffer.from(Y.join(" "),"utf16le").toString("base64")}else{if(q)K=q;else{let f=!__dirname||__dirname==="/",Y=!1;try{await Bz.access(pL,ZL.X_OK),Y=!0}catch{}K=process.versions.electron||a7==="android"||f||!Y?"xdg-open":pL}if(_.length>0)P.push(..._);if(!$.wait)w.stdio="ignore",w.detached=!0}if($.target)P.push($.target);if(a7==="darwin"&&_.length>0)P.push("--args",..._);let O=Rv$.spawn(K,P,w);if($.wait)return new Promise((f,Y)=>{O.once("error",Y),O.once("close",(h)=>{if(!$.allowNonzeroExitCode&&h>0){Y(new Error(`Exited with code ${h}`));return}f(O)})});return O.unref(),O},fH=($,q)=>{if(typeof $!=="string")throw new TypeError("Expected a `target`");return Fz({...q,target:$})},Vv$=($,q)=>{if(typeof $!=="string")throw new TypeError("Expected a `name`");let{arguments:_=[]}=q||{};if(_!==void 0&&_!==null&&!Array.isArray(_))throw new TypeError("Expected `appArguments` as Array type");return Fz({...q,app:{name:$,arguments:_}})};function GL($){if(typeof $==="string"||Array.isArray($))return $;let{[yL]:q}=$;if(!q)throw new Error(`${yL} is not supported`);return q}function MH({[a7]:$},{wsl:q}){if(q&&ez)return GL(q);if(!$)throw new Error(`${a7} is not supported`);return GL($)}var Uz={};zH(Uz,"chrome",()=>MH({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));zH(Uz,"firefox",()=>MH({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));zH(Uz,"edge",()=>MH({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));fH.apps=Uz;fH.openApp=Vv$;NL.exports=fH});var AC=y((TC)=>{Object.defineProperty(TC,"__esModule",{value:!0});var DH=Kj(),xv$=RZ(),t7=T8(),M8=O7(),dv$=Wv(),bv$=i("fs"),ov$=i("os"),iv$=i("path"),gv$=q7(),iL=hL(),av$=mL(),gL=i("fs/promises"),pH=i("child_process"),aL=i("crypto"),cv$=i("node:crypto"),Iv$=i("node:fs/promises");function cL($){var q=Object.create(null);if($)Object.keys($).forEach(function(_){if(_!=="default"){var K=Object.getOwnPropertyDescriptor($,_);Object.defineProperty(q,_,K.get?K:{enumerable:!0,get:function(){return $[_]}})}});return q.default=$,Object.freeze(q)}var Zq=cL(iL),lv$=cL(pH),IL="4.6.0",q5="04b07795-8ddb-461a-bbee-02f9e1bf7b46",tv$="common";TC.AzureAuthorityHosts=void 0;(function($){$.AzureChina="https://login.chinacloudapi.cn",$.AzureGermany="https://login.microsoftonline.de",$.AzureGovernment="https://login.microsoftonline.us",$.AzurePublicCloud="https://login.microsoftonline.com"})(TC.AzureAuthorityHosts||(TC.AzureAuthorityHosts={}));var yH=TC.AzureAuthorityHosts.AzurePublicCloud,sv$=["*"],ev$="cae",Bv$="nocae",Fv$="msal.cache",Qz=void 0,Uv$={setPersistence($){Qz=$}},AH=void 0,Qv$={setNativeBroker($){AH={broker:$}}};function $1$($){var q,_,K,P,w,O,f;let Y={cache:{},broker:{isEnabled:(_=(q=$.brokerOptions)===null||q===void 0?void 0:q.enabled)!==null&&_!==void 0?_:!1,enableMsaPassthrough:(P=(K=$.brokerOptions)===null||K===void 0?void 0:K.legacyEnableMsaPassthrough)!==null&&P!==void 0?P:!1,parentWindowHandle:(w=$.brokerOptions)===null||w===void 0?void 0:w.parentWindowHandle}};if((O=$.tokenCachePersistenceOptions)===null||O===void 0?void 0:O.enabled){if(Qz===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let h=$.tokenCachePersistenceOptions.name||Fv$;Y.cache.cachePlugin=Qz(Object.assign({name:`${h}.${Bv$}`},$.tokenCachePersistenceOptions)),Y.cache.cachePluginCae=Qz(Object.assign({name:`${h}.${ev$}`},$.tokenCachePersistenceOptions))}if((f=$.brokerOptions)===null||f===void 0?void 0:f.enabled){if(AH===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(createNativeBrokerPlugin())` before using `enableBroker`."].join(" "));Y.broker.nativeBrokerPlugin=AH.broker}return Y}var q1$={generatePluginConfiguration:$1$},e8=DH.createClientLogger("identity");function lL($){return $.reduce((q,_)=>{if(process.env[_])q.assigned.push(_);else q.missing.push(_);return q},{missing:[],assigned:[]})}function F8($){return`SUCCESS. Scopes: ${Array.isArray($)?$.join(", "):$}.`}function w6($,q){let _="ERROR.";if($===null||$===void 0?void 0:$.length)_+=` Scopes: ${Array.isArray($)?$.join(", "):$}.`;return`${_} Error message: ${typeof q==="string"?q:q.message}.`}function EL($,q,_=e8){let K=q?`${q.fullTitle} ${$}`:$;function P(Y){_.info(`${K} =>`,Y)}function w(Y){_.warning(`${K} =>`,Y)}function O(Y){_.verbose(`${K} =>`,Y)}function f(Y){_.error(`${K} =>`,Y)}return{title:$,fullTitle:K,info:P,warning:w,verbose:O,error:f}}function v6($,q=e8){let _=EL($,void 0,q);return Object.assign(Object.assign({},_),{parent:q,getToken:EL("=> getToken()",_,q)})}function _1$($){return $&&typeof $.error==="string"&&typeof $.error_description==="string"}var tL="CredentialUnavailableError";class w$ extends Error{constructor($,q){super($,q);this.name=tL}}var SH="AuthenticationError";class YK extends Error{constructor($,q,_){let K={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(_1$(q))K=uL(q);else if(typeof q==="string")try{let P=JSON.parse(q);K=uL(P)}catch(P){if($===400)K={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${q}`};else K={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${q}`}}else K={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${K.error} Status code: ${$}
More details:
${K.errorDescription},`,_);this.statusCode=$,this.errorResponse=K,this.name=SH}}var sL="AggregateAuthenticationError";class GH extends Error{constructor($,q){let _=$.join(`
`);super(`${q}
${_}`);this.errors=$,this.name=sL}}function uL($){return{error:$.error,errorDescription:$.error_description,correlationId:$.correlation_id,errorCodes:$.error_codes,timestamp:$.timestamp,traceId:$.trace_id}}class hK extends Error{constructor($){super($.message,$.cause?{cause:$.cause}:void 0);this.scopes=$.scopes,this.getTokenOptions=$.getTokenOptions,this.name="AuthenticationRequiredError"}}function K1$($){return`The current credential is not configured to acquire tokens for tenant ${$}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}function Q8($,q,_=[],K){var P;let w;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH)w=$;else if($==="adfs")w=$;else w=(P=q===null||q===void 0?void 0:q.tenantId)!==null&&P!==void 0?P:$;if($&&w!==$&&!_.includes("*")&&!_.some((O)=>O.localeCompare(w)===0)){let O=K1$($);throw K===null||K===void 0||K.info(O),new w$(O)}return w}function U8($,q){if(!q.match(/^[0-9a-zA-Z-.]+$/)){let _=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw $.info(w6("",_)),_}}function ZH($,q,_){if(q)return U8($,q),q;if(!_)_=q5;if(_!==q5)return"common";return"organizations"}function $q($){if(!$||$.length===0)return[];if($.includes("*"))return sv$;return $}function P1$($){if($==="adfs")return"oauth2/token";else return"oauth2/v2.0/token"}var Z6=dv$.createTracingClient({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:IL}),RL="/.default",eL="http://169.254.169.254",j1$="/metadata/identity/oauth2/token",w1$="2018-02-01";function NH($){let q="";if(Array.isArray($)){if($.length!==1)return;q=$[0]}else if(typeof $==="string")q=$;if(!q.endsWith(RL))return q;return q.substr(0,q.lastIndexOf(RL))}function O1$($){if(typeof $.expires_on==="number")return $.expires_on*1000;if(typeof $.expires_on==="string"){let q=+$.expires_on;if(!isNaN(q))return q*1000;let _=Date.parse($.expires_on);if(!isNaN(_))return _}if(typeof $.expires_in==="number")return Date.now()+$.expires_in*1000;throw new Error(`Failed to parse token expiration from body. expires_in="${$.expires_in}", expires_on="${$.expires_on}"`)}function z1$($){if($.refresh_on){if(typeof $.refresh_on==="number")return $.refresh_on*1000;if(typeof $.refresh_on==="string"){let q=+$.refresh_on;if(!isNaN(q))return q*1000;let _=Date.parse($.refresh_on);if(!isNaN(_))return _}throw new Error(`Failed to parse refresh_on from body. refresh_on="${$.refresh_on}"`)}else return}var y3="noCorrelationId";function f1$($){let q=$===null||$===void 0?void 0:$.authorityHost;if(t7.isNode)q=q!==null&&q!==void 0?q:process.env.AZURE_AUTHORITY_HOST;return q!==null&&q!==void 0?q:yH}class s7 extends xv$.ServiceClient{constructor($){var q,_;let K=`azsdk-js-identity/${IL}`,P=((q=$===null||$===void 0?void 0:$.userAgentOptions)===null||q===void 0?void 0:q.userAgentPrefix)?`${$.userAgentOptions.userAgentPrefix} ${K}`:`${K}`,w=f1$($);if(!w.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},$),{userAgentOptions:{userAgentPrefix:P},baseUri:w}));if(this.allowInsecureConnection=!1,this.authorityHost=w,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=(_=$===null||$===void 0?void 0:$.loggingOptions)===null||_===void 0?void 0:_.allowLoggingAccountIdentifiers,this.tokenCredentialOptions=Object.assign({},$),$===null||$===void 0?void 0:$.allowInsecureConnection)this.allowInsecureConnection=$.allowInsecureConnection}async sendTokenRequest($){e8.info(`IdentityClient: sending token request to [${$.url}]`);let q=await this.sendRequest($);if(q.bodyAsText&&(q.status===200||q.status===201)){let _=JSON.parse(q.bodyAsText);if(!_.access_token)return null;this.logIdentifiers(q);let K={accessToken:{token:_.access_token,expiresOnTimestamp:O1$(_),refreshAfterTimestamp:z1$(_),tokenType:"Bearer"},refreshToken:_.refresh_token};return e8.info(`IdentityClient: [${$.url}] token acquired, expires on ${K.accessToken.expiresOnTimestamp}`),K}else{let _=new YK(q.status,q.bodyAsText);throw e8.warning(`IdentityClient: authentication error. HTTP status: ${q.status}, ${_.errorResponse.errorDescription}`),_}}async refreshAccessToken($,q,_,K,P,w={}){if(K===void 0)return null;e8.info(`IdentityClient: refreshing access token with client ID: ${q}, scopes: ${_} started`);let O={grant_type:"refresh_token",client_id:q,refresh_token:K,scope:_};if(P!==void 0)O.client_secret=P;let f=new URLSearchParams(O);return Z6.withSpan("IdentityClient.refreshAccessToken",w,async(Y)=>{try{let h=P1$($),k=M8.createPipelineRequest({url:`${this.authorityHost}/${$}/${h}`,method:"POST",body:f.toString(),abortSignal:w.abortSignal,headers:M8.createHttpHeaders({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:Y.tracingOptions}),T=await this.sendTokenRequest(k);return e8.info(`IdentityClient: refreshed token for client ID: ${q}`),T}catch(h){if(h.name===SH&&h.errorResponse.error==="interaction_required")return e8.info(`IdentityClient: interaction required for client ID: ${q}`),null;else throw e8.warning(`IdentityClient: failed refreshing token for client ID: ${q}: ${h}`),h}})}generateAbortSignal($){let q=new AbortController,_=this.abortControllers.get($)||[];_.push(q),this.abortControllers.set($,_);let K=q.signal.onabort;return q.signal.onabort=(...P)=>{if(this.abortControllers.set($,void 0),K)K.apply(q.signal,P)},q.signal}abortRequests($){let q=$||y3,_=[...this.abortControllers.get(q)||[],...this.abortControllers.get(y3)||[]];if(!_.length)return;for(let K of _)K.abort();this.abortControllers.set(q,void 0)}getCorrelationId($){var q;let _=(q=$===null||$===void 0?void 0:$.body)===null||q===void 0?void 0:q.split("&").map((K)=>K.split("=")).find(([K])=>K==="client-request-id");return _&&_.length?_[1]||y3:y3}async sendGetRequestAsync($,q){let _=M8.createPipelineRequest({url:$,method:"GET",body:q===null||q===void 0?void 0:q.body,allowInsecureConnection:this.allowInsecureConnection,headers:M8.createHttpHeaders(q===null||q===void 0?void 0:q.headers),abortSignal:this.generateAbortSignal(y3)}),K=await this.sendRequest(_);return this.logIdentifiers(K),{body:K.bodyAsText?JSON.parse(K.bodyAsText):void 0,headers:K.headers.toJSON(),status:K.status}}async sendPostRequestAsync($,q){let _=M8.createPipelineRequest({url:$,method:"POST",body:q===null||q===void 0?void 0:q.body,headers:M8.createHttpHeaders(q===null||q===void 0?void 0:q.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(q))}),K=await this.sendRequest(_);return this.logIdentifiers(K),{body:K.bodyAsText?JSON.parse(K.bodyAsText):void 0,headers:K.headers.toJSON(),status:K.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers($){if(!this.allowLoggingAccountIdentifiers||!$.bodyAsText)return;let q="No User Principal Name available";try{let K=($.parsedBody||JSON.parse($.bodyAsText)).access_token;if(!K)return;let P=K.split(".")[1],{appid:w,upn:O,tid:f,oid:Y}=JSON.parse(Buffer.from(P,"base64").toString("utf8"));e8.info(`[Authenticated account] Client ID: ${w}. Tenant ID: ${f}. User Principal Name: ${O||q}. Object ID (user): ${Y}`)}catch(_){e8.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",_.message)}}}var M1$="common",v1$="aebc6443-996d-45c2-90f0-388ff96faa56",$4=v6("VisualStudioCodeCredential"),WH=void 0,H1$={setVsCodeCredentialFinder($){WH=$}},Y1$={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function LL($){let q=Y1$[$];if(q)throw new w$(q)}var h1$={AzureCloud:TC.AzureAuthorityHosts.AzurePublicCloud,AzureChina:TC.AzureAuthorityHosts.AzureChina,AzureGermanCloud:TC.AzureAuthorityHosts.AzureGermany,AzureUSGovernment:TC.AzureAuthorityHosts.AzureGovernment};function CL($){let q=["User","settings.json"],_="Code",K=ov$.homedir();function P(...w){let O=iv$.join(...w,"Code",...q);return JSON.parse(bv$.readFileSync(O,{encoding:"utf8"}))[$]}try{let w;switch(process.platform){case"win32":return w=process.env.APPDATA,w?P(w):void 0;case"darwin":return P(K,"Library","Application Support");case"linux":return P(K,".config");default:return}}catch(w){$4.info(`Failed to load the Visual Studio Code configuration file. Error: ${w.message}`);return}}class BL{constructor($){this.cloudName=CL("azure.cloud")||"AzureCloud";let q=h1$[this.cloudName];if(this.identityClient=new s7(Object.assign({authorityHost:q},$)),$&&$.tenantId)U8($4,$.tenantId),this.tenantId=$.tenantId;else this.tenantId=M1$;this.additionallyAllowedTenantIds=$q($===null||$===void 0?void 0:$.additionallyAllowedTenants),LL(this.tenantId)}async prepare(){let $=CL("azure.tenant");if($)this.tenantId=$;LL(this.tenantId)}prepareOnce(){if(!this.preparePromise)this.preparePromise=this.prepare();return this.preparePromise}async getToken($,q){var _,K;await this.prepareOnce();let P=Q8(this.tenantId,q,this.additionallyAllowedTenantIds,$4)||this.tenantId;if(WH===void 0)throw new w$(["No implementation of `VisualStudioCodeCredential` is available.","You must install the identity-vscode plugin package (`npm install --save-dev @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before creating a `VisualStudioCodeCredential`.","To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot."].join(" "));let w=typeof $==="string"?$:$.join(" ");if(!w.match(/^[0-9a-zA-Z-.:/]+$/)){let Y=new Error("Invalid scope was specified by the user or calling client");throw $4.getToken.info(w6($,Y)),Y}if(w.indexOf("offline_access")<0)w+=" offline_access";let O=await WH(),{password:f}=(K=(_=O.find(({account:Y})=>Y===this.cloudName))!==null&&_!==void 0?_:O[0])!==null&&K!==void 0?K:{};if(f){let Y=await this.identityClient.refreshAccessToken(P,v1$,w,f,void 0);if(Y)return $4.getToken.info(F8($)),Y.accessToken;else{let h=new w$("Could not retrieve the token associated with Visual Studio Code. Have you connected using the 'Azure Account' extension recently? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw $4.getToken.info(w6($,h)),h}}else{let Y=new w$("Could not retrieve the token associated with Visual Studio Code. Did you connect using the 'Azure Account' extension? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw $4.getToken.info(w6($,Y)),Y}}}var k1$={cachePluginControl:Uv$,nativeBrokerPluginControl:Qv$,vsCodeCredentialControl:H1$};function T1$($){$(k1$)}var N3=v6("IdentityUtils"),FL="1.0";function S3($,q,_){let K=(P)=>{return N3.getToken.info(P),new hK({scopes:Array.isArray($)?$:[$],getTokenOptions:_,message:P})};if(!q)throw K("No response");if(!q.expiresOn)throw K('Response had no "expiresOn" property.');if(!q.accessToken)throw K('Response had no "accessToken" property.')}function UL($){let q=$===null||$===void 0?void 0:$.authorityHost;if(!q&&t7.isNodeLike)q=process.env.AZURE_AUTHORITY_HOST;return q!==null&&q!==void 0?q:yH}function mH($,q){if(!q)q=yH;if(new RegExp(`${$}/?$`).test(q))return q;if(q.endsWith("/"))return q+$;else return`${q}/${$}`}function A1$($,q,_){if($==="adfs"&&q||_)return[q];return[]}var QL=($,q=t7.isNode?"Node":"Browser")=>(_,K,P)=>{if(P)return;switch(_){case Zq.LogLevel.Error:$.info(`MSAL ${q} V2 error: ${K}`);return;case Zq.LogLevel.Info:$.info(`MSAL ${q} V2 info message: ${K}`);return;case Zq.LogLevel.Verbose:$.info(`MSAL ${q} V2 verbose message: ${K}`);return;case Zq.LogLevel.Warning:$.info(`MSAL ${q} V2 warning: ${K}`);return}};function $C($){switch($){case"error":return Zq.LogLevel.Error;case"info":return Zq.LogLevel.Info;case"verbose":return Zq.LogLevel.Verbose;case"warning":return Zq.LogLevel.Warning;default:return Zq.LogLevel.Info}}function G3($,q,_){if(q.name==="AuthError"||q.name==="ClientAuthError"||q.name==="BrowserAuthError"){let K=q;switch(K.errorCode){case"endpoints_resolution_error":return N3.info(w6($,q.message)),new w$(q.message);case"device_code_polling_cancelled":return new gv$.AbortError("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":N3.info(w6($,`Authentication returned errorCode ${K.errorCode}`));break;default:N3.info(w6($,`Failed to acquire token: ${q.message}`));break}}if(q.name==="ClientConfigurationError"||q.name==="BrowserConfigurationAuthError"||q.name==="AbortError"||q.name==="AuthenticationError")return q;if(q.name==="NativeAuthError")return N3.info(w6($,`Error from the native broker: ${q.message} with status code: ${q.statusCode}`)),q;return new hK({scopes:$,getTokenOptions:_,message:q.message})}function W1$($){let[q]=$.authority.match(/([a-z]*\.[a-z]*\.[a-z]*)/)||[""];return Object.assign(Object.assign({},$),{localAccountId:$.homeAccountId,environment:q})}function J1$($,q){return{authority:mH(q.tenantId,q.environment),homeAccountId:q.homeAccountId,tenantId:q.tenantId||tv$,username:q.username,clientId:$,version:FL}}function X1$($){return JSON.stringify($)}function D1$($){let q=JSON.parse($);if(q.version&&q.version!==FL)throw Error("Unsupported AuthenticationRecord version");return q}var s8="ManagedIdentityCredential - IMDS",m_=v6(s8);function nL($,q,_,K){var P;let w=NH($);if(!w)throw new Error(`${s8}: Multiple scopes are not supported.`);let{skipQuery:O,skipMetadataHeader:f}=K||{},Y="";if(!O){let T={resource:w,"api-version":w1$};if(q)T.client_id=q;if(_)T.msi_res_id=_;Y=`?${new URLSearchParams(T).toString()}`}let h=new URL(j1$,(P=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&P!==void 0?P:eL),k={Accept:"application/json",Metadata:"true"};if(f)delete k.Metadata;return{url:`${h}${Y}`,method:"GET",headers:M8.createHttpHeaders(k)}}var p1$={name:"imdsMsi",async isAvailable({scopes:$,identityClient:q,clientId:_,resourceId:K,getTokenOptions:P={}}){let w=NH($);if(!w)return m_.info(`${s8}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!q)throw new Error("Missing IdentityClient");let O=nL(w,_,K,{skipMetadataHeader:!0,skipQuery:!0});return Z6.withSpan("ManagedIdentityCredential-pingImdsEndpoint",P,async(f)=>{var Y,h;O.tracingOptions=f.tracingOptions;let k=M8.createPipelineRequest(O);k.timeout=((Y=f.requestOptions)===null||Y===void 0?void 0:Y.timeout)||1000,k.allowInsecureConnection=!0;let T;try{m_.info(`${s8}: Pinging the Azure IMDS endpoint`),T=await q.sendRequest(k)}catch(p){if(t7.isError(p))m_.verbose(`${s8}: Caught error ${p.name}: ${p.message}`);return m_.info(`${s8}: The Azure IMDS endpoint is unavailable`),!1}if(T.status===403){if((h=T.bodyAsText)===null||h===void 0?void 0:h.includes("unreachable"))return m_.info(`${s8}: The Azure IMDS endpoint is unavailable`),m_.info(`${s8}: ${T.bodyAsText}`),!1}return m_.info(`${s8}: The Azure IMDS endpoint is available`),!0})},async getToken($,q={}){let{identityClient:_,scopes:K,clientId:P,resourceId:w}=$;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)m_.info(`${s8}: Using the Azure IMDS endpoint coming from the environment variable AZURE_POD_IDENTITY_AUTHORITY_HOST=${process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST}.`);else m_.info(`${s8}: Using the default Azure IMDS endpoint ${eL}.`);let O=$.retryConfig.startDelayInMs;for(let f=0;f<$.retryConfig.maxRetries;f++)try{let Y=M8.createPipelineRequest(Object.assign(Object.assign({abortSignal:q.abortSignal},nL(K,P,w)),{allowInsecureConnection:!0})),h=await _.sendTokenRequest(Y);return h&&h.accessToken||null}catch(Y){if(Y.statusCode===404){await t7.delay(O),O*=$.retryConfig.intervalIncrement;continue}throw Y}throw new YK(404,`${s8}: Failed to retrieve IMDS token after ${$.retryConfig.maxRetries} retries.`)}},y1$=64000;function S1$($){return M8.retryPolicy([{name:"imdsRetryPolicy",retry:({retryCount:q,response:_})=>{if((_===null||_===void 0?void 0:_.status)!==404)return{skipStrategy:!0};return t7.calculateRetryDelay(q,{retryDelayInMs:$.startDelayInMs,maxRetryDelayInMs:y1$})}}],{maxRetries:$.maxRetries})}var JH;(function($){$.AutoDiscoverRegion="AutoDiscoverRegion",$.USWest="westus",$.USWest2="westus2",$.USCentral="centralus",$.USEast="eastus",$.USEast2="eastus2",$.USNorthCentral="northcentralus",$.USSouthCentral="southcentralus",$.USWestCentral="westcentralus",$.CanadaCentral="canadacentral",$.CanadaEast="canadaeast",$.BrazilSouth="brazilsouth",$.EuropeNorth="northeurope",$.EuropeWest="westeurope",$.UKSouth="uksouth",$.UKWest="ukwest",$.FranceCentral="francecentral",$.FranceSouth="francesouth",$.SwitzerlandNorth="switzerlandnorth",$.SwitzerlandWest="switzerlandwest",$.GermanyNorth="germanynorth",$.GermanyWestCentral="germanywestcentral",$.NorwayWest="norwaywest",$.NorwayEast="norwayeast",$.AsiaEast="eastasia",$.AsiaSouthEast="southeastasia",$.JapanEast="japaneast",$.JapanWest="japanwest",$.AustraliaEast="australiaeast",$.AustraliaSouthEast="australiasoutheast",$.AustraliaCentral="australiacentral",$.AustraliaCentral2="australiacentral2",$.IndiaCentral="centralindia",$.IndiaSouth="southindia",$.IndiaWest="westindia",$.KoreaSouth="koreasouth",$.KoreaCentral="koreacentral",$.UAECentral="uaecentral",$.UAENorth="uaenorth",$.SouthAfricaNorth="southafricanorth",$.SouthAfricaWest="southafricawest",$.ChinaNorth="chinanorth",$.ChinaEast="chinaeast",$.ChinaNorth2="chinanorth2",$.ChinaEast2="chinaeast2",$.GermanyCentral="germanycentral",$.GermanyNorthEast="germanynortheast",$.GovernmentUSVirginia="usgovvirginia",$.GovernmentUSIowa="usgoviowa",$.GovernmentUSArizona="usgovarizona",$.GovernmentUSTexas="usgovtexas",$.GovernmentUSDodEast="usdodeast",$.GovernmentUSDodCentral="usdodcentral"})(JH||(JH={}));function vH($){var q,_;let K=$;if(K===void 0&&((_=(q=globalThis.process)===null||q===void 0?void 0:q.env)===null||_===void 0?void 0:_.AZURE_REGIONAL_AUTHORITY_NAME)!==void 0)K=process.env.AZURE_REGIONAL_AUTHORITY_NAME;if(K===JH.AutoDiscoverRegion)return"AUTO_DISCOVER";return K}var y8=v6("MsalClient"),G1$={open:av$};function Z1$($,q,_={}){var K,P,w;let O=ZH((K=_.logger)!==null&&K!==void 0?K:y8,q,$),f=mH(O,UL(_)),Y=new s7(Object.assign(Object.assign({},_.tokenCredentialOptions),{authorityHost:f,loggingOptions:_.loggingOptions}));return{auth:{clientId:$,authority:f,knownAuthorities:A1$(O,f,_.disableInstanceDiscovery)},system:{networkClient:Y,loggerOptions:{loggerCallback:QL((P=_.logger)!==null&&P!==void 0?P:y8),logLevel:$C(DH.getLogLevel()),piiLoggingEnabled:(w=_.loggingOptions)===null||w===void 0?void 0:w.enableUnsafeSupportLogging}}}}function kK($,q,_={}){var K;let P={msalConfig:Z1$($,q,_),cachedAccount:_.authenticationRecord?W1$(_.authenticationRecord):null,pluginConfiguration:q1$.generatePluginConfiguration(_),logger:(K=_.logger)!==null&&K!==void 0?K:y8},w=new Map;async function O(W={}){let V=W.enableCae?"CAE":"default",n=w.get(V);if(n)return P.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),n;P.logger.getToken.info(`Creating new PublicClientApplication with CAE ${W.enableCae?"enabled":"disabled"}.`);let b=W.enableCae?P.pluginConfiguration.cache.cachePluginCae:P.pluginConfiguration.cache.cachePlugin;return P.msalConfig.auth.clientCapabilities=W.enableCae?["cp1"]:void 0,n=new Zq.PublicClientApplication(Object.assign(Object.assign({},P.msalConfig),{broker:{nativeBrokerPlugin:P.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await b}})),w.set(V,n),n}let f=new Map;async function Y(W={}){let V=W.enableCae?"CAE":"default",n=f.get(V);if(n)return P.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),n;P.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${W.enableCae?"enabled":"disabled"}.`);let b=W.enableCae?P.pluginConfiguration.cache.cachePluginCae:P.pluginConfiguration.cache.cachePlugin;return P.msalConfig.auth.clientCapabilities=W.enableCae?["cp1"]:void 0,n=new Zq.ConfidentialClientApplication(Object.assign(Object.assign({},P.msalConfig),{broker:{nativeBrokerPlugin:P.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await b}})),f.set(V,n),n}async function h(W,V,n={}){if(P.cachedAccount===null){P.logger.getToken.info("No cached account found in local state, attempting to load it from MSAL cache.");let g=await W.getTokenCache().getAllAccounts();if(g===void 0||g.length===0)throw new hK({scopes:V});if(g.length>1)throw P.logger.info(`More than one account was found authenticated for this Client ID and Tenant ID.
However, no "authenticationRecord" has been provided for this credential,
therefore we're unable to pick between these accounts.
A new login attempt will be requested, to ensure the correct account is picked.
To work with multiple accounts for the same Client ID and Tenant ID, please provide an "authenticationRecord" when initializing a credential to prevent this from happening.`),new hK({scopes:V});P.cachedAccount=g[0]}if(n.claims)P.cachedClaims=n.claims;let b={account:P.cachedAccount,scopes:V,claims:P.cachedClaims};if(P.pluginConfiguration.broker.isEnabled){if(b.tokenQueryParameters||(b.tokenQueryParameters={}),P.pluginConfiguration.broker.enableMsaPassthrough)b.tokenQueryParameters.msal_request_type="consumer_passthrough"}if(n.proofOfPossessionOptions)b.shrNonce=n.proofOfPossessionOptions.nonce,b.authenticationScheme="pop",b.resourceRequestMethod=n.proofOfPossessionOptions.resourceRequestMethod,b.resourceRequestUri=n.proofOfPossessionOptions.resourceRequestUrl;return P.logger.getToken.info("Attempting to acquire token silently"),W.acquireTokenSilent(b)}function k(W){if(W===null||W===void 0?void 0:W.tenantId)return mH(W.tenantId,UL(_));return P.msalConfig.auth.authority}async function T(W,V,n,b){var x,g;let s=null;try{s=await h(W,V,n)}catch(v$){if(v$.name!=="AuthenticationRequiredError")throw v$;if(n.disableAutomaticAuthentication)throw new hK({scopes:V,getTokenOptions:n,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(s===null)try{s=await b()}catch(v$){throw G3(V,v$,n)}return S3(V,s,n),P.cachedAccount=(x=s===null||s===void 0?void 0:s.account)!==null&&x!==void 0?x:null,P.logger.getToken.info(F8(V)),{token:s.accessToken,expiresOnTimestamp:s.expiresOn.getTime(),refreshAfterTimestamp:(g=s.refreshOn)===null||g===void 0?void 0:g.getTime(),tokenType:s.tokenType}}async function p(W,V,n={}){var b;P.logger.getToken.info("Attempting to acquire token using client secret"),P.msalConfig.auth.clientSecret=V;let x=await Y(n);try{let g=await x.acquireTokenByClientCredential({scopes:W,authority:k(n),azureRegion:vH(),claims:n===null||n===void 0?void 0:n.claims});return S3(W,g,n),P.logger.getToken.info(F8(W)),{token:g.accessToken,expiresOnTimestamp:g.expiresOn.getTime(),refreshAfterTimestamp:(b=g.refreshOn)===null||b===void 0?void 0:b.getTime(),tokenType:g.tokenType}}catch(g){throw G3(W,g,n)}}async function G(W,V,n={}){var b;P.logger.getToken.info("Attempting to acquire token using client assertion"),P.msalConfig.auth.clientAssertion=V;let x=await Y(n);try{let g=await x.acquireTokenByClientCredential({scopes:W,authority:k(n),azureRegion:vH(),claims:n===null||n===void 0?void 0:n.claims,clientAssertion:V});return S3(W,g,n),P.logger.getToken.info(F8(W)),{token:g.accessToken,expiresOnTimestamp:g.expiresOn.getTime(),refreshAfterTimestamp:(b=g.refreshOn)===null||b===void 0?void 0:b.getTime(),tokenType:g.tokenType}}catch(g){throw G3(W,g,n)}}async function Z(W,V,n={}){var b;P.logger.getToken.info("Attempting to acquire token using client certificate"),P.msalConfig.auth.clientCertificate=V;let x=await Y(n);try{let g=await x.acquireTokenByClientCredential({scopes:W,authority:k(n),azureRegion:vH(),claims:n===null||n===void 0?void 0:n.claims});return S3(W,g,n),P.logger.getToken.info(F8(W)),{token:g.accessToken,expiresOnTimestamp:g.expiresOn.getTime(),refreshAfterTimestamp:(b=g.refreshOn)===null||b===void 0?void 0:b.getTime(),tokenType:g.tokenType}}catch(g){throw G3(W,g,n)}}async function X(W,V,n={}){P.logger.getToken.info("Attempting to acquire token using device code");let b=await O(n);return T(b,W,n,()=>{var x,g;let s={scopes:W,cancel:(g=(x=n===null||n===void 0?void 0:n.abortSignal)===null||x===void 0?void 0:x.aborted)!==null&&g!==void 0?g:!1,deviceCodeCallback:V,authority:k(n),claims:n===null||n===void 0?void 0:n.claims},v$=b.acquireTokenByDeviceCode(s);if(n.abortSignal)n.abortSignal.addEventListener("abort",()=>{s.cancel=!0});return v$})}async function C(W,V,n,b={}){P.logger.getToken.info("Attempting to acquire token using username and password");let x=await O(b);return T(x,W,b,()=>{let g={scopes:W,username:V,password:n,authority:k(b),claims:b===null||b===void 0?void 0:b.claims};return x.acquireTokenByUsernamePassword(g)})}function N(){if(!P.cachedAccount)return;return J1$($,P.cachedAccount)}async function L(W,V,n,b,x={}){P.logger.getToken.info("Attempting to acquire token using authorization code");let g;if(b)P.msalConfig.auth.clientSecret=b,g=await Y(x);else g=await O(x);return T(g,W,x,()=>{return g.acquireTokenByCode({scopes:W,redirectUri:V,code:n,authority:k(x),claims:x===null||x===void 0?void 0:x.claims})})}async function m(W,V,n,b={}){var x;if(y8.getToken.info("Attempting to acquire token on behalf of another user"),typeof n==="string")y8.getToken.info("Using client secret for on behalf of flow"),P.msalConfig.auth.clientSecret=n;else if(typeof n==="function")y8.getToken.info("Using client assertion callback for on behalf of flow"),P.msalConfig.auth.clientAssertion=n;else y8.getToken.info("Using client certificate for on behalf of flow"),P.msalConfig.auth.clientCertificate=n;let g=await Y(b);try{let s=await g.acquireTokenOnBehalfOf({scopes:W,authority:k(b),claims:b.claims,oboAssertion:V});return S3(W,s,b),y8.getToken.info(F8(W)),{token:s.accessToken,expiresOnTimestamp:s.expiresOn.getTime(),refreshAfterTimestamp:(x=s.refreshOn)===null||x===void 0?void 0:x.getTime(),tokenType:s.tokenType}}catch(s){throw G3(W,s,b)}}async function E(W,V={}){y8.getToken.info("Attempting to acquire token interactively");let n=await O(V);async function b(g){var s;y8.verbose("Authentication will resume through the broker");let v$=x();if(P.pluginConfiguration.broker.parentWindowHandle)v$.windowHandle=Buffer.from(P.pluginConfiguration.broker.parentWindowHandle);else y8.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle.");if(P.pluginConfiguration.broker.enableMsaPassthrough)((s=v$.tokenQueryParameters)!==null&&s!==void 0?s:v$.tokenQueryParameters={}).msal_request_type="consumer_passthrough";if(g)v$.prompt="none",y8.verbose("Attempting broker authentication using the default broker account");else y8.verbose("Attempting broker authentication without the default broker account");if(V.proofOfPossessionOptions)v$.shrNonce=V.proofOfPossessionOptions.nonce,v$.authenticationScheme="pop",v$.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,v$.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl;try{return await n.acquireTokenInteractive(v$)}catch(u){if(y8.verbose(`Failed to authenticate through the broker: ${u.message}`),g)return b(!1);else throw u}}function x(){var g,s;return{openBrowser:async(v$)=>{await G1$.open(v$,{wait:!0,newInstance:!0})},scopes:W,authority:k(V),claims:V===null||V===void 0?void 0:V.claims,loginHint:V===null||V===void 0?void 0:V.loginHint,errorTemplate:(g=V===null||V===void 0?void 0:V.browserCustomizationOptions)===null||g===void 0?void 0:g.errorMessage,successTemplate:(s=V===null||V===void 0?void 0:V.browserCustomizationOptions)===null||s===void 0?void 0:s.successMessage}}return T(n,W,V,async()=>{var g;let s=x();if(P.pluginConfiguration.broker.isEnabled)return b((g=P.pluginConfiguration.broker.useDefaultBrokerAccount)!==null&&g!==void 0?g:!1);if(V.proofOfPossessionOptions)s.shrNonce=V.proofOfPossessionOptions.nonce,s.authenticationScheme="pop",s.resourceRequestMethod=V.proofOfPossessionOptions.resourceRequestMethod,s.resourceRequestUri=V.proofOfPossessionOptions.resourceRequestUrl;return n.acquireTokenInteractive(s)})}return{getActiveAccount:N,getTokenByClientSecret:p,getTokenByClientAssertion:G,getTokenByClientCertificate:Z,getTokenByDeviceCode:X,getTokenByUsernamePassword:C,getTokenByAuthorizationCode:L,getTokenOnBehalfOf:m,getTokenByInteractiveRequest:E}}var rL=v6("ClientAssertionCredential");class _5{constructor($,q,_,K={}){if(!$)throw new w$("ClientAssertionCredential: tenantId is a required parameter.");if(!q)throw new w$("ClientAssertionCredential: clientId is a required parameter.");if(!_)throw new w$("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=$,this.additionallyAllowedTenantIds=$q(K===null||K===void 0?void 0:K.additionallyAllowedTenants),this.options=K,this.getAssertion=_,this.msalClient=kK(q,$,Object.assign(Object.assign({},K),{logger:rL,tokenCredentialOptions:this.options}))}async getToken($,q={}){return Z6.withSpan(`${this.constructor.name}.getToken`,q,async(_)=>{_.tenantId=Q8(this.tenantId,_,this.additionallyAllowedTenantIds,rL);let K=Array.isArray($)?$:[$];return this.msalClient.getTokenByClientAssertion(K,this.getAssertion,_)})}}var q4="WorkloadIdentityCredential",N1$=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],Z3=v6(q4);class l7{constructor($){this.azureFederatedTokenFileContent=void 0,this.cacheDate=void 0;let q=lL(N1$).assigned.join(", ");Z3.info(`Found the following environment variables: ${q}`);let _=$!==null&&$!==void 0?$:{},K=_.tenantId||process.env.AZURE_TENANT_ID,P=_.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=_.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,K)U8(Z3,K);if(!P)throw new w$(`${q4}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!K)throw new w$(`${q4}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new w$(`${q4}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);Z3.info(`Invoking ClientAssertionCredential with tenant ID: ${K}, clientId: ${_.clientId} and federated token path: [REDACTED]`),this.client=new _5(K,P,this.readFileContents.bind(this),$)}async getToken($,q){if(!this.client){let _=`${q4}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw Z3.info(_),new w$(_)}return Z3.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken($,q)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=300000)this.azureFederatedTokenFileContent=void 0;if(!this.federatedTokenFilePath)throw new w$(`${q4}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let q=(await gL.readFile(this.federatedTokenFilePath,"utf8")).trim();if(!q)throw new w$(`${q4}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`);else this.azureFederatedTokenFileContent=q,this.cacheDate=Date.now()}return this.azureFederatedTokenFileContent}}var qC="ManagedIdentityCredential - Token Exchange",m1$=v6(qC),VL={name:"tokenExchangeMsi",async isAvailable({clientId:$}){let q=process.env,_=Boolean(($||q.AZURE_CLIENT_ID)&&q.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);if(!_)m1$.info(`${qC}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`);return _},async getToken($,q={}){let{scopes:_,clientId:K}=$,P={};return new l7(Object.assign(Object.assign({clientId:K,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE},P),{disableInstanceDiscovery:!0})).getToken(_,q)}},$_=v6("ManagedIdentityCredential(MSAL)");class _C{constructor($,q={}){var _,K;this.msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};let P={};if(typeof $==="string")this.clientId=$,P=q;else this.clientId=$===null||$===void 0?void 0:$.clientId,P=$!==null&&$!==void 0?$:{};if(this.resourceId=P===null||P===void 0?void 0:P.resourceId,this.objectId=P===null||P===void 0?void 0:P.objectId,[this.clientId,this.resourceId,this.objectId].filter(Boolean).length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);if(P.allowInsecureConnection=!0,((_=P===null||P===void 0?void 0:P.retryOptions)===null||_===void 0?void 0:_.maxRetries)!==void 0)this.msiRetryConfig.maxRetries=P.retryOptions.maxRetries;if(this.identityClient=new s7(Object.assign(Object.assign({},P),{additionalPolicies:[{policy:S1$(this.msiRetryConfig),position:"perCall"}]})),this.managedIdentityApp=new iL.ManagedIdentityApplication({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:$C(DH.getLogLevel()),piiLoggingEnabled:(K=q.loggingOptions)===null||K===void 0?void 0:K.enableUnsafeSupportLogging,loggerCallback:QL($_)}}}),this.isAvailableIdentityClient=new s7(Object.assign(Object.assign({},P),{retryOptions:{maxRetries:0}})),this.managedIdentityApp.getManagedIdentitySource()==="CloudShell"){if(this.clientId||this.resourceId||this.objectId)throw $_.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new w$("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.")}}async getToken($,q={}){$_.getToken.info("Using the MSAL provider for Managed Identity.");let _=NH($);if(!_)throw new w$(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify($)}`);return Z6.withSpan("ManagedIdentityCredential.getToken",q,async()=>{var K;try{let P=await VL.isAvailable({scopes:$,clientId:this.clientId,getTokenOptions:q,identityClient:this.identityClient,resourceId:this.resourceId}),w=this.managedIdentityApp.getManagedIdentitySource(),O=w==="DefaultToImds"||w==="Imds";if($_.getToken.info(`MSAL Identity source: ${w}`),P){$_.getToken.info("Using the token exchange managed identity.");let Y=await VL.getToken({scopes:$,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(Y===null)throw new w$("Attempted to use the token exchange managed identity, but received a null response.");return Y}else if(O){if($_.getToken.info("Using the IMDS endpoint to probe for availability."),!await p1$.isAvailable({scopes:$,clientId:this.clientId,getTokenOptions:q,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId}))throw new w$("Attempted to use the IMDS endpoint, but it is not available.")}$_.getToken.info("Calling into MSAL for managed identity token.");let f=await this.managedIdentityApp.acquireToken({resource:_});return this.ensureValidMsalToken($,f,q),$_.getToken.info(F8($)),{expiresOnTimestamp:f.expiresOn.getTime(),token:f.accessToken,refreshAfterTimestamp:(K=f.refreshOn)===null||K===void 0?void 0:K.getTime(),tokenType:"Bearer"}}catch(P){if($_.getToken.error(w6($,P)),P.name==="AuthenticationRequiredError")throw P;if(E1$(P))throw new w$(`ManagedIdentityCredential: Network unreachable. Message: ${P.message}`,{cause:P});throw new w$(`ManagedIdentityCredential: Authentication failed. Message ${P.message}`,{cause:P})}})}ensureValidMsalToken($,q,_){let K=(P)=>{return $_.getToken.info(P),new hK({scopes:Array.isArray($)?$:[$],getTokenOptions:_,message:P})};if(!q)throw K("No response.");if(!q.expiresOn)throw K('Response had no "expiresOn" property.');if(!q.accessToken)throw K('Response had no "accessToken" property.')}}function E1$($){if($.errorCode==="network_error")return!0;if($.code==="ENETUNREACH"||$.code==="EHOSTUNREACH")return!0;if($.statusCode===403||$.code===403){if($.message.includes("unreachable"))return!0}return!1}class I7{constructor($,q){this.implProvider=new _C($,q)}async getToken($,q){return this.implProvider.getToken($,q)}}function _4($){return Array.isArray($)?$:[$]}function EH($,q){if(!$.match(/^[0-9a-zA-Z-_.:/]+$/)){let _=new Error("Invalid scope was specified by the user or calling client");throw q.getToken.info(w6($,_)),_}}function KC($){return $.replace(/\/.default$/,"")}var PC={getSafeWorkingDir(){if(process.platform==="win32"){if(!process.env.SystemRoot)throw new Error("Azure CLI credential expects a 'SystemRoot' environment variable");return process.env.SystemRoot}else return"/bin"},async getAzureCliAccessToken($,q,_){let K=[];if(q)K=["--tenant",q];return new Promise((P,w)=>{try{pH.execFile("az",["account","get-access-token","--output","json","--resource",$,...K],{cwd:PC.getSafeWorkingDir(),shell:!0,timeout:_},(O,f,Y)=>{P({stdout:f,stderr:Y,error:O})})}catch(O){w(O)}})}},E_=v6("AzureCliCredential");class uH{constructor($){if($===null||$===void 0?void 0:$.tenantId)U8(E_,$===null||$===void 0?void 0:$.tenantId),this.tenantId=$===null||$===void 0?void 0:$.tenantId;this.additionallyAllowedTenantIds=$q($===null||$===void 0?void 0:$.additionallyAllowedTenants),this.timeout=$===null||$===void 0?void 0:$.processTimeoutInMs}async getToken($,q={}){let _=Q8(this.tenantId,q,this.additionallyAllowedTenantIds);if(_)U8(E_,_);let K=typeof $==="string"?$:$[0];return E_.getToken.info(`Using the scope ${K}`),Z6.withSpan(`${this.constructor.name}.getToken`,q,async()=>{var P,w,O,f;try{EH(K,E_);let Y=KC(K),h=await PC.getAzureCliAccessToken(Y,_,this.timeout),k=(P=h.stderr)===null||P===void 0?void 0:P.match("(.*)az login --scope(.*)"),T=((w=h.stderr)===null||w===void 0?void 0:w.match("(.*)az login(.*)"))&&!k;if(((O=h.stderr)===null||O===void 0?void 0:O.match("az:(.*)not found"))||((f=h.stderr)===null||f===void 0?void 0:f.startsWith("'az' is not recognized"))){let G=new w$("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw E_.getToken.info(w6($,G)),G}if(T){let G=new w$("Please run 'az login' from a command prompt to authenticate before using this credential.");throw E_.getToken.info(w6($,G)),G}try{let G=h.stdout,Z=this.parseRawResponse(G);return E_.getToken.info(F8($)),Z}catch(G){if(h.stderr)throw new w$(h.stderr);throw G}}catch(Y){let h=Y.name==="CredentialUnavailableError"?Y:new w$(Y.message||"Unknown error while trying to retrieve the access token");throw E_.getToken.info(w6($,h)),h}})}parseRawResponse($){let q=JSON.parse($),_=q.accessToken,K=Number.parseInt(q.expires_on,10)*1000;if(!isNaN(K))return E_.getToken.info("expires_on is available and is valid, using it"),{token:_,expiresOnTimestamp:K,tokenType:"Bearer"};if(K=new Date(q.expiresOn).getTime(),isNaN(K))throw new w$(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${q.expiresOn}"`);return{token:_,expiresOnTimestamp:K,tokenType:"Bearer"}}}var jC={getSafeWorkingDir(){if(process.platform==="win32"){if(!process.env.SystemRoot)throw new Error("Azure Developer CLI credential expects a 'SystemRoot' environment variable");return process.env.SystemRoot}else return"/bin"},async getAzdAccessToken($,q,_){let K=[];if(q)K=["--tenant-id",q];return new Promise((P,w)=>{try{pH.execFile("azd",["auth","token","--output","json",...$.reduce((O,f)=>O.concat("--scope",f),[]),...K],{cwd:jC.getSafeWorkingDir(),timeout:_},(O,f,Y)=>{P({stdout:f,stderr:Y,error:O})})}catch(O){w(O)}})}},MK=v6("AzureDeveloperCliCredential");class RH{constructor($){if($===null||$===void 0?void 0:$.tenantId)U8(MK,$===null||$===void 0?void 0:$.tenantId),this.tenantId=$===null||$===void 0?void 0:$.tenantId;this.additionallyAllowedTenantIds=$q($===null||$===void 0?void 0:$.additionallyAllowedTenants),this.timeout=$===null||$===void 0?void 0:$.processTimeoutInMs}async getToken($,q={}){let _=Q8(this.tenantId,q,this.additionallyAllowedTenantIds);if(_)U8(MK,_);let K;if(typeof $==="string")K=[$];else K=$;return MK.getToken.info(`Using the scopes ${$}`),Z6.withSpan(`${this.constructor.name}.getToken`,q,async()=>{var P,w,O,f;try{K.forEach((T)=>{EH(T,MK)});let Y=await jC.getAzdAccessToken(K,_,this.timeout),h=((P=Y.stderr)===null||P===void 0?void 0:P.match("not logged in, run `azd login` to login"))||((w=Y.stderr)===null||w===void 0?void 0:w.match("not logged in, run `azd auth login` to login"));if(((O=Y.stderr)===null||O===void 0?void 0:O.match("azd:(.*)not found"))||((f=Y.stderr)===null||f===void 0?void 0:f.startsWith("'azd' is not recognized"))||Y.error&&Y.error.code==="ENOENT"){let T=new w$("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw MK.getToken.info(w6($,T)),T}if(h){let T=new w$("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw MK.getToken.info(w6($,T)),T}try{let T=JSON.parse(Y.stdout);return MK.getToken.info(F8($)),{token:T.token,expiresOnTimestamp:new Date(T.expiresOn).getTime(),tokenType:"Bearer"}}catch(T){if(Y.stderr)throw new w$(Y.stderr);throw T}}catch(Y){let h=Y.name==="CredentialUnavailableError"?Y:new w$(Y.message||"Unknown error while trying to retrieve the access token");throw MK.getToken.info(w6($,h)),h}})}}var u1$={execFile($,q,_){return new Promise((K,P)=>{lv$.execFile($,q,_,(w,O,f)=>{if(Buffer.isBuffer(O))O=O.toString("utf8");if(Buffer.isBuffer(f))f=f.toString("utf8");if(f||w)P(f?new Error(f):w);else K(O)})})}},u_=v6("AzurePowerShellCredential"),wC=process.platform==="win32";function OC($){if(wC)return`${$}.exe`;else return $}async function xL($,q){let _=[];for(let K of $){let[P,...w]=K,O=await u1$.execFile(P,w,{encoding:"utf8",timeout:q});_.push(O)}return _}var zC={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},HH={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},R1$=($)=>$.message.match(`(.*)${zC.login}(.*)`),L1$=($)=>$.message.match(zC.installed),XH=[OC("pwsh")];if(wC)XH.push(OC("powershell"));class LH{constructor($){if($===null||$===void 0?void 0:$.tenantId)U8(u_,$===null||$===void 0?void 0:$.tenantId),this.tenantId=$===null||$===void 0?void 0:$.tenantId;this.additionallyAllowedTenantIds=$q($===null||$===void 0?void 0:$.additionallyAllowedTenants),this.timeout=$===null||$===void 0?void 0:$.processTimeoutInMs}async getAzurePowerShellAccessToken($,q,_){for(let K of[...XH]){try{await xL([[K,"/?"]],_)}catch(O){XH.shift();continue}let w=(await xL([[K,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${q!==null&&q!==void 0?q:""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0'

          $params = @{
            ResourceUrl = "${$}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn
          if ($useSecureString) {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value (ConvertFrom-SecureString -AsPlainText $token.Token)
          } else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return C1$(w)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken($,q={}){return Z6.withSpan(`${this.constructor.name}.getToken`,q,async()=>{let _=Q8(this.tenantId,q,this.additionallyAllowedTenantIds),K=typeof $==="string"?$:$[0];if(_)U8(u_,_);try{EH(K,u_),u_.getToken.info(`Using the scope ${K}`);let P=KC(K),w=await this.getAzurePowerShellAccessToken(P,_,this.timeout);return u_.getToken.info(F8($)),{token:w.Token,expiresOnTimestamp:new Date(w.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(P){if(L1$(P)){let O=new w$(HH.installed);throw u_.getToken.info(w6(K,O)),O}else if(R1$(P)){let O=new w$(HH.login);throw u_.getToken.info(w6(K,O)),O}let w=new w$(`${P}. ${HH.troubleshoot}`);throw u_.getToken.info(w6(K,w)),w}})}}async function C1$($){let q=/{[^{}]*}/g,_=$.match(q),K=$;if(_)try{for(let P of _)try{let w=JSON.parse(P);if(w===null||w===void 0?void 0:w.Token){if(K=K.replace(P,""),K)u_.getToken.warning(K);return w}}catch(w){continue}}catch(P){throw new Error(`Unable to parse the output of PowerShell. Received output: ${$}`)}throw new Error(`No access token found in the output. Received output: ${$}`)}var YH=v6("ChainedTokenCredential");class CH{constructor(...$){this._sources=[],this._sources=$}async getToken($,q={}){let{token:_}=await this.getTokenInternal($,q);return _}async getTokenInternal($,q={}){let _=null,K,P=[];return Z6.withSpan("ChainedTokenCredential.getToken",q,async(w)=>{for(let O=0;O<this._sources.length&&_===null;O++)try{_=await this._sources[O].getToken($,w),K=this._sources[O]}catch(f){if(f.name==="CredentialUnavailableError"||f.name==="AuthenticationRequiredError")P.push(f);else throw YH.getToken.info(w6($,f)),f}if(!_&&P.length>0){let O=new GH(P,"ChainedTokenCredential authentication failed.");throw YH.getToken.info(w6($,O)),O}if(YH.getToken.info(`Result for ${K.constructor.name}: ${F8($)}`),_===null)throw new w$("Failed to retrieve a valid token");return{token:_,successfulCredential:K}})}}var m3="ClientCertificateCredential",dL=v6(m3);class nH{constructor($,q,_,K={}){if(!$||!q)throw new Error(`${m3}: tenantId and clientId are required parameters.`);this.tenantId=$,this.additionallyAllowedTenantIds=$q(K===null||K===void 0?void 0:K.additionallyAllowedTenants),this.sendCertificateChain=K.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof _==="string"?{certificatePath:_}:_);let P=this.certificateConfiguration.certificate,w=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(P||w))throw new Error(`${m3}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(P&&w)throw new Error(`${m3}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=kK(q,$,Object.assign(Object.assign({},K),{logger:dL,tokenCredentialOptions:K}))}async getToken($,q={}){return Z6.withSpan(`${m3}.getToken`,q,async(_)=>{_.tenantId=Q8(this.tenantId,_,this.additionallyAllowedTenantIds,dL);let K=Array.isArray($)?$:[$],P=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(K,P,_)})}async buildClientCertificate(){var $;let q=await n1$(this.certificateConfiguration,($=this.sendCertificateChain)!==null&&$!==void 0?$:!1),_;if(this.certificateConfiguration.certificatePassword!==void 0)_=aL.createPrivateKey({key:q.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString();else _=q.certificateContents;return{thumbprint:q.thumbprint,privateKey:_,x5c:q.x5c}}}async function n1$($,q){let{certificate:_,certificatePath:K}=$,P=_||await gL.readFile(K,"utf8"),w=q?P:void 0,O=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,f=[],Y;do if(Y=O.exec(P),Y)f.push(Y[3]);while(Y);if(f.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let h=aL.createHash("sha1").update(Buffer.from(f[0],"base64")).digest("hex").toUpperCase();return{certificateContents:P,thumbprint:h,x5c:w}}var bL=v6("ClientSecretCredential");class rH{constructor($,q,_,K={}){if(!$)throw new w$("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!q)throw new w$("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!_)throw new w$("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=_,this.tenantId=$,this.additionallyAllowedTenantIds=$q(K===null||K===void 0?void 0:K.additionallyAllowedTenants),this.msalClient=kK(q,$,Object.assign(Object.assign({},K),{logger:bL,tokenCredentialOptions:K}))}async getToken($,q={}){return Z6.withSpan(`${this.constructor.name}.getToken`,q,async(_)=>{_.tenantId=Q8(this.tenantId,_,this.additionallyAllowedTenantIds,bL);let K=_4($);return this.msalClient.getTokenByClientSecret(K,this.clientSecret,_)})}}var r1$=v6("UsernamePasswordCredential");class VH{constructor($,q,_,K,P={}){if(!$)throw new w$("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!q)throw new w$("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!_)throw new w$("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!K)throw new w$("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=$,this.additionallyAllowedTenantIds=$q(P===null||P===void 0?void 0:P.additionallyAllowedTenants),this.username=_,this.password=K,this.msalClient=kK(q,this.tenantId,Object.assign(Object.assign({},P),{tokenCredentialOptions:P!==null&&P!==void 0?P:{}}))}async getToken($,q={}){return Z6.withSpan(`${this.constructor.name}.getToken`,q,async(_)=>{_.tenantId=Q8(this.tenantId,_,this.additionallyAllowedTenantIds,r1$);let K=_4($);return this.msalClient.getTokenByUsernamePassword(K,this.username,this.password,_)})}}var V1$=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function x1$(){var $;return(($=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&$!==void 0?$:"").split(";")}var $5="EnvironmentCredential",vK=v6($5);function d1$(){var $;let q=(($=process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN)!==null&&$!==void 0?$:"").toLowerCase(),_=q==="true"||q==="1";return vK.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${_}`),_}class xH{constructor($){this._credential=void 0;let q=lL(V1$).assigned.join(", ");vK.info(`Found the following environment variables: ${q}`);let _=process.env.AZURE_TENANT_ID,K=process.env.AZURE_CLIENT_ID,P=process.env.AZURE_CLIENT_SECRET,w=x1$(),O=d1$(),f=Object.assign(Object.assign({},$),{additionallyAllowedTenantIds:w,sendCertificateChain:O});if(_)U8(vK,_);if(_&&K&&P){vK.info(`Invoking ClientSecretCredential with tenant ID: ${_}, clientId: ${K} and clientSecret: [REDACTED]`),this._credential=new rH(_,K,P,f);return}let Y=process.env.AZURE_CLIENT_CERTIFICATE_PATH,h=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(_&&K&&Y){vK.info(`Invoking ClientCertificateCredential with tenant ID: ${_}, clientId: ${K} and certificatePath: ${Y}`),this._credential=new nH(_,K,{certificatePath:Y,certificatePassword:h},f);return}let k=process.env.AZURE_USERNAME,T=process.env.AZURE_PASSWORD;if(_&&K&&k&&T)vK.info(`Invoking UsernamePasswordCredential with tenant ID: ${_}, clientId: ${K} and username: ${k}`),this._credential=new VH(_,K,k,T,f)}async getToken($,q={}){return Z6.withSpan(`${$5}.getToken`,q,async(_)=>{if(this._credential)try{let K=await this._credential.getToken($,_);return vK.getToken.info(F8($)),K}catch(K){let P=new YK(400,{error:`${$5} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:K.message.toString().split("More details:").join("")});throw vK.getToken.info(w6($,P)),P}throw new w$(`${$5} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}}var fC=v6("DefaultAzureCredential");function b1$($={}){var q,_,K,P;(q=$.retryOptions)!==null&&q!==void 0||($.retryOptions={maxRetries:5,retryDelayInMs:800});let w=(_=$===null||$===void 0?void 0:$.managedIdentityClientId)!==null&&_!==void 0?_:process.env.AZURE_CLIENT_ID,O=(K=$===null||$===void 0?void 0:$.workloadIdentityClientId)!==null&&K!==void 0?K:w,f=$===null||$===void 0?void 0:$.managedIdentityResourceId,Y=process.env.AZURE_FEDERATED_TOKEN_FILE,h=(P=$===null||$===void 0?void 0:$.tenantId)!==null&&P!==void 0?P:process.env.AZURE_TENANT_ID;if(f){let k=Object.assign(Object.assign({},$),{resourceId:f});return new I7(k)}if(Y&&O){let k=Object.assign(Object.assign({},$),{tenantId:h});return new I7(O,k)}if(w){let k=Object.assign(Object.assign({},$),{clientId:w});return new I7(k)}return new I7($)}function o1$($){var q,_,K;let P=(q=$===null||$===void 0?void 0:$.managedIdentityClientId)!==null&&q!==void 0?q:process.env.AZURE_CLIENT_ID,w=(_=$===null||$===void 0?void 0:$.workloadIdentityClientId)!==null&&_!==void 0?_:P,O=process.env.AZURE_FEDERATED_TOKEN_FILE,f=(K=$===null||$===void 0?void 0:$.tenantId)!==null&&K!==void 0?K:process.env.AZURE_TENANT_ID;if(O&&w){let Y=Object.assign(Object.assign({},$),{tenantId:f,clientId:w,tokenFilePath:O});return new l7(Y)}if(f){let Y=Object.assign(Object.assign({},$),{tenantId:f});return new l7(Y)}return new l7($)}function i1$($={}){let q=$.processTimeoutInMs;return new RH(Object.assign({processTimeoutInMs:q},$))}function g1$($={}){let q=$.processTimeoutInMs;return new uH(Object.assign({processTimeoutInMs:q},$))}function a1$($={}){let q=$.processTimeoutInMs;return new LH(Object.assign({processTimeoutInMs:q},$))}function c1$($={}){return new xH($)}class MC{constructor($,q){this.credentialName=$,this.credentialUnavailableErrorMessage=q}getToken(){return fC.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}}class dH extends CH{constructor($){let _=[c1$,o1$,b1$,g1$,a1$,i1$].map((K)=>{try{return K($)}catch(P){return fC.warning(`Skipped ${K.name} because of an error creating the credential: ${P}`),new MC(K.name,P.message)}});super(..._)}}var hH=v6("InteractiveBrowserCredential");class vC{constructor($){var q,_,K,P,w;this.tenantId=ZH(hH,$.tenantId,$.clientId),this.additionallyAllowedTenantIds=$q($===null||$===void 0?void 0:$.additionallyAllowedTenants);let O=Object.assign(Object.assign({},$),{tokenCredentialOptions:$,logger:hH}),f=$;if(this.browserCustomizationOptions=f.browserCustomizationOptions,this.loginHint=f.loginHint,(q=f===null||f===void 0?void 0:f.brokerOptions)===null||q===void 0?void 0:q.enabled)if(!((_=f===null||f===void 0?void 0:f.brokerOptions)===null||_===void 0?void 0:_.parentWindowHandle))throw new Error("In order to do WAM authentication, `parentWindowHandle` under `brokerOptions` is a required parameter");else O.brokerOptions={enabled:!0,parentWindowHandle:f.brokerOptions.parentWindowHandle,legacyEnableMsaPassthrough:(K=f.brokerOptions)===null||K===void 0?void 0:K.legacyEnableMsaPassthrough,useDefaultBrokerAccount:(P=f.brokerOptions)===null||P===void 0?void 0:P.useDefaultBrokerAccount};this.msalClient=kK((w=$.clientId)!==null&&w!==void 0?w:q5,this.tenantId,O),this.disableAutomaticAuthentication=$===null||$===void 0?void 0:$.disableAutomaticAuthentication}async getToken($,q={}){return Z6.withSpan(`${this.constructor.name}.getToken`,q,async(_)=>{_.tenantId=Q8(this.tenantId,_,this.additionallyAllowedTenantIds,hH);let K=_4($);return this.msalClient.getTokenByInteractiveRequest(K,Object.assign(Object.assign({},_),{disableAutomaticAuthentication:this.disableAutomaticAuthentication,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint}))})}async authenticate($,q={}){return Z6.withSpan(`${this.constructor.name}.authenticate`,q,async(_)=>{let K=_4($);return await this.msalClient.getTokenByInteractiveRequest(K,Object.assign(Object.assign({},_),{disableAutomaticAuthentication:!1,browserCustomizationOptions:this.browserCustomizationOptions,loginHint:this.loginHint})),this.msalClient.getActiveAccount()})}}var kH=v6("DeviceCodeCredential");function I1$($){console.log($.message)}class HC{constructor($){var q,_;this.tenantId=$===null||$===void 0?void 0:$.tenantId,this.additionallyAllowedTenantIds=$q($===null||$===void 0?void 0:$.additionallyAllowedTenants);let K=(q=$===null||$===void 0?void 0:$.clientId)!==null&&q!==void 0?q:q5,P=ZH(kH,$===null||$===void 0?void 0:$.tenantId,K);this.userPromptCallback=(_=$===null||$===void 0?void 0:$.userPromptCallback)!==null&&_!==void 0?_:I1$,this.msalClient=kK(K,P,Object.assign(Object.assign({},$),{logger:kH,tokenCredentialOptions:$||{}})),this.disableAutomaticAuthentication=$===null||$===void 0?void 0:$.disableAutomaticAuthentication}async getToken($,q={}){return Z6.withSpan(`${this.constructor.name}.getToken`,q,async(_)=>{_.tenantId=Q8(this.tenantId,_,this.additionallyAllowedTenantIds,kH);let K=_4($);return this.msalClient.getTokenByDeviceCode(K,this.userPromptCallback,Object.assign(Object.assign({},_),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))})}async authenticate($,q={}){return Z6.withSpan(`${this.constructor.name}.authenticate`,q,async(_)=>{let K=Array.isArray($)?$:[$];return await this.msalClient.getTokenByDeviceCode(K,this.userPromptCallback,Object.assign(Object.assign({},_),{disableAutomaticAuthentication:!1})),this.msalClient.getActiveAccount()})}}var Gq="AzurePipelinesCredential",B8=v6(Gq),l1$="7.1";class YC{constructor($,q,_,K,P={}){var w,O;if(!q)throw new w$(`${Gq}: is unavailable. clientId is a required parameter.`);if(!$)throw new w$(`${Gq}: is unavailable. tenantId is a required parameter.`);if(!_)throw new w$(`${Gq}: is unavailable. serviceConnectionId is a required parameter.`);if(!K)throw new w$(`${Gq}: is unavailable. systemAccessToken is a required parameter.`);if(P.loggingOptions=Object.assign(Object.assign({},P===null||P===void 0?void 0:P.loggingOptions),{additionalAllowedHeaderNames:[...(O=(w=P.loggingOptions)===null||w===void 0?void 0:w.additionalAllowedHeaderNames)!==null&&O!==void 0?O:[],"x-vss-e2eid","x-msedge-ref"]}),this.identityClient=new s7(P),U8(B8,$),B8.info(`Invoking AzurePipelinesCredential with tenant ID: ${$}, client ID: ${q}, and service connection ID: ${_}`),!process.env.SYSTEM_OIDCREQUESTURI)throw new w$(`${Gq}: is unavailable. Ensure that you're running this task in an Azure Pipeline, so that following missing system variable(s) can be defined- "SYSTEM_OIDCREQUESTURI"`);let f=`${process.env.SYSTEM_OIDCREQUESTURI}?api-version=${l1$}&serviceConnectionId=${_}`;B8.info(`Invoking ClientAssertionCredential with tenant ID: ${$}, client ID: ${q} and service connection ID: ${_}`),this.clientAssertionCredential=new _5($,q,this.requestOidcToken.bind(this,f,K),P)}async getToken($,q){if(!this.clientAssertionCredential){let _=`${Gq}: is unavailable. To use Federation Identity in Azure Pipelines, the following parameters are required - 
      tenantId,
      clientId,
      serviceConnectionId,
      systemAccessToken,
      "SYSTEM_OIDCREQUESTURI".      
      See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`;throw B8.error(_),new w$(_)}return B8.info("Invoking getToken() of Client Assertion Credential"),this.clientAssertionCredential.getToken($,q)}async requestOidcToken($,q){B8.info("Requesting OIDC token from Azure Pipelines..."),B8.info($);let _=M8.createPipelineRequest({url:$,method:"POST",headers:M8.createHttpHeaders({"Content-Type":"application/json",Authorization:`Bearer ${q}`,"X-TFS-FedAuthRedirect":"Suppress"})}),K=await this.identityClient.sendRequest(_);return t1$(K)}}function t1$($){let q=$.bodyAsText;if(!q)throw B8.error(`${Gq}: Authentication Failed. Received null token from OIDC request. Response status- ${$.status}. Complete response - ${JSON.stringify($)}`),new YK($.status,{error:`${Gq}: Authentication Failed. Received null token from OIDC request.`,error_description:`${JSON.stringify($)}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`});try{let _=JSON.parse(q);if(_===null||_===void 0?void 0:_.oidcToken)return _.oidcToken;else{let K=`${Gq}: Authentication Failed. oidcToken field not detected in the response.`,P="";if($.status!==200)P=`Response body = ${q}. Response Headers ["x-vss-e2eid"] = ${$.headers.get("x-vss-e2eid")} and ["x-msedge-ref"] = ${$.headers.get("x-msedge-ref")}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`;throw B8.error(K),B8.error(P),new YK($.status,{error:K,error_description:P})}}catch(_){let K=`${Gq}: Authentication Failed. oidcToken field not detected in the response.`;throw B8.error(`Response from service = ${q}, Response Headers ["x-vss-e2eid"] = ${$.headers.get("x-vss-e2eid")} 
      and ["x-msedge-ref"] = ${$.headers.get("x-msedge-ref")}, error message = ${_.message}`),B8.error(K),new YK($.status,{error:K,error_description:`Response = ${q}. Response headers ["x-vss-e2eid"] = ${$.headers.get("x-vss-e2eid")} and ["x-msedge-ref"] =  ${$.headers.get("x-msedge-ref")}. See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/azurepipelinescredential/troubleshoot`})}}var oL=v6("AuthorizationCodeCredential");class hC{constructor($,q,_,K,P,w){if(U8(oL,$),this.clientSecret=_,typeof P==="string")this.authorizationCode=K,this.redirectUri=P;else this.authorizationCode=_,this.redirectUri=K,this.clientSecret=void 0,w=P;this.tenantId=$,this.additionallyAllowedTenantIds=$q(w===null||w===void 0?void 0:w.additionallyAllowedTenants),this.msalClient=kK(q,$,Object.assign(Object.assign({},w),{logger:oL,tokenCredentialOptions:w!==null&&w!==void 0?w:{}}))}async getToken($,q={}){return Z6.withSpan(`${this.constructor.name}.getToken`,q,async(_)=>{let K=Q8(this.tenantId,_,this.additionallyAllowedTenantIds);_.tenantId=K;let P=_4($);return this.msalClient.getTokenByAuthorizationCode(P,this.redirectUri,this.authorizationCode,this.clientSecret,Object.assign(Object.assign({},_),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))})}}var c7="OnBehalfOfCredential",TH=v6(c7);class kC{constructor($){let{clientSecret:q}=$,{certificatePath:_,sendCertificateChain:K}=$,{getAssertion:P}=$,{tenantId:w,clientId:O,userAssertionToken:f,additionallyAllowedTenants:Y}=$;if(!w)throw new w$(`${c7}: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!O)throw new w$(`${c7}: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!q&&!_&&!P)throw new w$(`${c7}: You must provide one of clientSecret, certificatePath, or a getAssertion callback but none were provided. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(!f)throw new w$(`${c7}: userAssertionToken is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.certificatePath=_,this.clientSecret=q,this.userAssertionToken=f,this.sendCertificateChain=K,this.clientAssertion=P,this.tenantId=w,this.additionallyAllowedTenantIds=$q(Y),this.msalClient=kK(O,this.tenantId,Object.assign(Object.assign({},$),{logger:TH,tokenCredentialOptions:$}))}async getToken($,q={}){return Z6.withSpan(`${c7}.getToken`,q,async(_)=>{_.tenantId=Q8(this.tenantId,_,this.additionallyAllowedTenantIds,TH);let K=_4($);if(this.certificatePath){let P=await this.buildClientCertificate(this.certificatePath);return this.msalClient.getTokenOnBehalfOf(K,this.userAssertionToken,P,_)}else if(this.clientSecret)return this.msalClient.getTokenOnBehalfOf(K,this.userAssertionToken,this.clientSecret,q);else if(this.clientAssertion)return this.msalClient.getTokenOnBehalfOf(K,this.userAssertionToken,this.clientAssertion,q);else throw new Error("Expected either clientSecret or certificatePath or clientAssertion to be defined.")})}async buildClientCertificate($){try{let q=await this.parseCertificate({certificatePath:$},this.sendCertificateChain);return{thumbprint:q.thumbprint,privateKey:q.certificateContents,x5c:q.x5c}}catch(q){throw TH.info(w6("",q)),q}}async parseCertificate($,q){let _=$.certificatePath,K=await Iv$.readFile(_,"utf8"),P=q?K:void 0,w=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,O=[],f;do if(f=w.exec(K),f)O.push(f[3]);while(f);if(O.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let Y=cv$.createHash("sha1").update(Buffer.from(O[0],"base64")).digest("hex").toUpperCase();return{certificateContents:K,thumbprint:Y,x5c:P}}}function s1$($,q,_){let{abortSignal:K,tracingOptions:P}=_||{},w=M8.createEmptyPipeline();w.addPolicy(M8.bearerTokenAuthenticationPolicy({credential:$,scopes:q}));async function O(){var f;let h=(f=(await w.sendRequest({sendRequest:(k)=>Promise.resolve({request:k,status:200,headers:k.headers})},M8.createPipelineRequest({url:"https://example.com",abortSignal:K,tracingOptions:P}))).headers.get("authorization"))===null||f===void 0?void 0:f.split(" ")[1];if(!h)throw new Error("Failed to get access token");return h}return O}function e1$(){return new dH}TC.AggregateAuthenticationError=GH;TC.AggregateAuthenticationErrorName=sL;TC.AuthenticationError=YK;TC.AuthenticationErrorName=SH;TC.AuthenticationRequiredError=hK;TC.AuthorizationCodeCredential=hC;TC.AzureCliCredential=uH;TC.AzureDeveloperCliCredential=RH;TC.AzurePipelinesCredential=YC;TC.AzurePowerShellCredential=LH;TC.ChainedTokenCredential=CH;TC.ClientAssertionCredential=_5;TC.ClientCertificateCredential=nH;TC.ClientSecretCredential=rH;TC.CredentialUnavailableError=w$;TC.CredentialUnavailableErrorName=tL;TC.DefaultAzureCredential=dH;TC.DeviceCodeCredential=HC;TC.EnvironmentCredential=xH;TC.InteractiveBrowserCredential=vC;TC.ManagedIdentityCredential=I7;TC.OnBehalfOfCredential=kC;TC.UsernamePasswordCredential=VH;TC.VisualStudioCodeCredential=BL;TC.WorkloadIdentityCredential=l7;TC.deserializeAuthenticationRecord=D1$;TC.getBearerTokenProvider=s1$;TC.getDefaultAzureCredential=e1$;TC.logger=e8;TC.serializeAuthenticationRecord=X1$;TC.useIdentityPlugin=T1$});var DC=y((JC)=>{Object.defineProperty(JC,"__esModule",{value:!0});JC.AzureKeyCredential=void 0;class WC{get key(){return this._key}constructor($){if(!$)throw new Error("key must be a non-empty string");this._key=$}update($){this._key=$}}JC.AzureKeyCredential=WC});var yC=y((pC)=>{Object.defineProperty(pC,"__esModule",{value:!0});pC.isKeyCredential=mH$;var NH$=T8();function mH$($){return NH$.isObjectWithProperties($,["key"])&&typeof $.key==="string"}});var NC=y((GC)=>{Object.defineProperty(GC,"__esModule",{value:!0});GC.AzureNamedKeyCredential=void 0;GC.isNamedKeyCredential=RH$;var uH$=T8();class SC{get key(){return this._key}get name(){return this._name}constructor($,q){if(!$||!q)throw new TypeError("name and key must be non-empty strings");this._name=$,this._key=q}update($,q){if(!$||!q)throw new TypeError("newName and newKey must be non-empty strings");this._name=$,this._key=q}}GC.AzureNamedKeyCredential=SC;function RH$($){return uH$.isObjectWithProperties($,["name","key"])&&typeof $.key==="string"&&typeof $.name==="string"}});var RC=y((EC)=>{Object.defineProperty(EC,"__esModule",{value:!0});EC.AzureSASCredential=void 0;EC.isSASCredential=nH$;var CH$=T8();class mC{get signature(){return this._signature}constructor($){if(!$)throw new Error("shared access signature must be a non-empty string");this._signature=$}update($){if(!$)throw new Error("shared access signature must be a non-empty string");this._signature=$}}EC.AzureSASCredential=mC;function nH$($){return CH$.isObjectWithProperties($,["signature"])&&typeof $.signature==="string"}});var CC=y((LC)=>{Object.defineProperty(LC,"__esModule",{value:!0});LC.isBearerToken=VH$;LC.isPopToken=xH$;LC.isTokenCredential=dH$;function VH$($){return!$.tokenType||$.tokenType==="Bearer"}function xH$($){return $.tokenType==="pop"}function dH$($){let q=$;return q&&typeof q.getToken==="function"&&(q.signRequest===void 0||q.getToken.length>0)}});var VC=y((R_)=>{Object.defineProperty(R_,"__esModule",{value:!0});R_.isTokenCredential=R_.isSASCredential=R_.AzureSASCredential=R_.isNamedKeyCredential=R_.AzureNamedKeyCredential=R_.isKeyCredential=R_.AzureKeyCredential=void 0;var gH$=DC();Object.defineProperty(R_,"AzureKeyCredential",{enumerable:!0,get:function(){return gH$.AzureKeyCredential}});var aH$=yC();Object.defineProperty(R_,"isKeyCredential",{enumerable:!0,get:function(){return aH$.isKeyCredential}});var nC=NC();Object.defineProperty(R_,"AzureNamedKeyCredential",{enumerable:!0,get:function(){return nC.AzureNamedKeyCredential}});Object.defineProperty(R_,"isNamedKeyCredential",{enumerable:!0,get:function(){return nC.isNamedKeyCredential}});var rC=RC();Object.defineProperty(R_,"AzureSASCredential",{enumerable:!0,get:function(){return rC.AzureSASCredential}});Object.defineProperty(R_,"isSASCredential",{enumerable:!0,get:function(){return rC.isSASCredential}});var cH$=CC();Object.defineProperty(R_,"isTokenCredential",{enumerable:!0,get:function(){return cH$.isTokenCredential}})});var iC=y((dC,bC)=>{Object.defineProperty(dC,"__esModule",{value:!0});dC.default=void 0;var lH$=i("events"),tH$=sH$(i("util"));function xC($){if(typeof WeakMap!="function")return null;var q=new WeakMap,_=new WeakMap;return(xC=function(K){return K?_:q})($)}function sH$($,q){if(!q&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var _=xC(q);if(_&&_.has($))return _.get($);var K={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in $)if(w!=="default"&&Object.prototype.hasOwnProperty.call($,w)){var O=P?Object.getOwnPropertyDescriptor($,w):null;O&&(O.get||O.set)?Object.defineProperty(K,w,O):K[w]=$[w]}return K.default=$,_&&_.set($,K),K}class bH extends lH$.EventEmitter{constructor({data:$=!1,payload:q=!1,packet:_=!1,token:K=!1}={}){super();this.options={data:$,payload:q,packet:_,token:K},this.indent="  "}packet($,q){if(this.haveListeners()&&this.options.packet)this.log(""),this.log($),this.log(q.headerToString(this.indent))}data($){if(this.haveListeners()&&this.options.data)this.log($.dataToString(this.indent))}payload($){if(this.haveListeners()&&this.options.payload)this.log($())}token($){if(this.haveListeners()&&this.options.token)this.log(tH$.inspect($,{showHidden:!1,depth:5,colors:!0}))}haveListeners(){return this.listeners("debug").length>0}log($){this.emit("debug",$)}}var mL$=dC.default=bH;bC.exports=bH});var K5=y((aC)=>{Object.defineProperty(aC,"__esModule",{value:!0});aC.default=void 0;class gC extends Error{constructor(){super("The operation was aborted");this.code="ABORT_ERR",this.name="AbortError"}}aC.default=gC});var sC=y((tC)=>{Object.defineProperty(tC,"__esModule",{value:!0});tC.sendInParallel=lC;tC.sendMessage=FH$;var eH$=j5(i("dgram")),IC=j5(i("net")),BH$=j5(i("node:url")),P5=j5(K5());function j5($){return $&&$.__esModule?$:{default:$}}async function lC($,q,_,K){if(K.aborted)throw new P5.default;return await new Promise((P,w)=>{let O=[],f=0,Y=(p)=>{if(f++,f===$.length)K.removeEventListener("abort",k),T(),w(p)},h=(p)=>{K.removeEventListener("abort",k),T(),P(p)},k=()=>{T(),w(new P5.default)},T=()=>{for(let p of O)p.removeListener("error",Y),p.removeListener("message",h),p.close()};K.addEventListener("abort",k,{once:!0});for(let p=0;p<$.length;p++){let G=$[p].family===6?"udp6":"udp4",Z=eH$.default.createSocket(G);O.push(Z),Z.on("error",Y),Z.on("message",h),Z.send(_,0,_.length,q,$[p].address)}})}async function FH$($,q,_,K,P){if(K.aborted)throw new P5.default;let w;if(IC.default.isIP($))w=[{address:$,family:IC.default.isIPv6($)?6:4}];else w=await new Promise((O,f)=>{let Y=()=>{f(new P5.default)},h=BH$.default.domainToASCII($);_(h===""?$:h,{all:!0},(k,T)=>{K.removeEventListener("abort",Y),k?f(k):O(T)})});return await lC(w,q,P,K)}});var UC=y((BC)=>{Object.defineProperty(BC,"__esModule",{value:!0});BC.default=void 0;class eC extends Error{constructor(){super("The operation was aborted due to timeout");this.code="TIMEOUT_ERR",this.name="TimeoutError"}}BC.default=eC});var $n=y((QC)=>{Object.defineProperty(QC,"__esModule",{value:!0});QC.withTimeout=_2$;var $2$=q2$(UC());function q2$($){return $&&$.__esModule?$:{default:$}}async function _2$($,q,_){let K=new AbortController,P=()=>{K.abort()},w=setTimeout(P,$);_?.addEventListener("abort",P,{once:!0});try{return await q(K.signal)}catch(O){if(O instanceof Error&&O.name==="AbortError"&&!(_&&_.aborted))throw new $2$.default;throw O}finally{_?.removeEventListener("abort",P),clearTimeout(w)}}});var Pn=y((Kn)=>{Object.defineProperty(Kn,"__esModule",{value:!0});Kn.instanceLookup=H2$;Kn.parseBrowserResponse=_n;var P2$=qn(i("dns")),j2$=qn(K5()),w2$=sC(),O2$=$n();function qn($){return $&&$.__esModule?$:{default:$}}var z2$=1434,f2$=2000,M2$=3,v2$=3;async function H2$($){let q=$.server;if(typeof q!=="string")throw new TypeError('Invalid arguments: "server" must be a string');let _=$.instanceName;if(typeof _!=="string")throw new TypeError('Invalid arguments: "instanceName" must be a string');let K=$.timeout===void 0?f2$:$.timeout;if(typeof K!=="number")throw new TypeError('Invalid arguments: "timeout" must be a number');let P=$.retries===void 0?M2$:$.retries;if(typeof P!=="number")throw new TypeError('Invalid arguments: "retries" must be a number');if($.lookup!==void 0&&typeof $.lookup!=="function")throw new TypeError('Invalid arguments: "lookup" must be a function');let w=$.lookup??P2$.default.lookup;if($.port!==void 0&&typeof $.port!=="number")throw new TypeError('Invalid arguments: "port" must be a number');let O=$.port??z2$,f=$.signal;if(f.aborted)throw new j2$.default;let Y;for(let T=0;T<=P;T++)try{Y=await O2$.withTimeout(K,async(p)=>{let G=Buffer.from([2]);return await w2$.sendMessage($.server,O,w,p,G)},f)}catch(p){if(!f.aborted&&p instanceof Error&&p.name==="TimeoutError")continue;throw p}if(!Y)throw new Error("Failed to get response from SQL Server Browser on "+q);let h=Y.toString("ascii",v2$),k=_n(h,_);if(!k)throw new Error("Port for "+_+" not found in "+$.server);return k}function _n($,q){let _,K=$.split(";;");for(let P=0,w=K.length;P<w;P++){let f=K[P].split(";");for(let Y=0,h=f.length;Y<h;Y+=2){let k=f[Y],T=f[Y+1];if(k==="tcp"&&_)return parseInt(T,10);if(k==="InstanceName")if(T.toUpperCase()===q.toUpperCase())_=!0;else _=!1}}}});var zn=y((wn)=>{Object.defineProperty(wn,"__esModule",{value:!0});wn.TransientErrorLookup=void 0;class jn{isTransientError($){return[4060,10928,10929,40197,40501,40613].indexOf($)!==-1}}wn.TransientErrorLookup=jn});var e7=y((fn)=>{(function(){var $={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function q(O){return K(w(O),arguments)}function _(O,f){return q.apply(null,[O].concat(f||[]))}function K(O,f){var Y=1,h=O.length,k,T="",p,G,Z,X,C,N,L,m;for(p=0;p<h;p++)if(typeof O[p]==="string")T+=O[p];else if(typeof O[p]==="object"){if(Z=O[p],Z.keys){k=f[Y];for(G=0;G<Z.keys.length;G++){if(k==null)throw new Error(q('[sprintf] Cannot access property "%s" of undefined value "%s"',Z.keys[G],Z.keys[G-1]));k=k[Z.keys[G]]}}else if(Z.param_no)k=f[Z.param_no];else k=f[Y++];if($.not_type.test(Z.type)&&$.not_primitive.test(Z.type)&&k instanceof Function)k=k();if($.numeric_arg.test(Z.type)&&(typeof k!=="number"&&isNaN(k)))throw new TypeError(q("[sprintf] expecting number but found %T",k));if($.number.test(Z.type))L=k>=0;switch(Z.type){case"b":k=parseInt(k,10).toString(2);break;case"c":k=String.fromCharCode(parseInt(k,10));break;case"d":case"i":k=parseInt(k,10);break;case"j":k=JSON.stringify(k,null,Z.width?parseInt(Z.width):0);break;case"e":k=Z.precision?parseFloat(k).toExponential(Z.precision):parseFloat(k).toExponential();break;case"f":k=Z.precision?parseFloat(k).toFixed(Z.precision):parseFloat(k);break;case"g":k=Z.precision?String(Number(k.toPrecision(Z.precision))):parseFloat(k);break;case"o":k=(parseInt(k,10)>>>0).toString(8);break;case"s":k=String(k),k=Z.precision?k.substring(0,Z.precision):k;break;case"t":k=String(!!k),k=Z.precision?k.substring(0,Z.precision):k;break;case"T":k=Object.prototype.toString.call(k).slice(8,-1).toLowerCase(),k=Z.precision?k.substring(0,Z.precision):k;break;case"u":k=parseInt(k,10)>>>0;break;case"v":k=k.valueOf(),k=Z.precision?k.substring(0,Z.precision):k;break;case"x":k=(parseInt(k,10)>>>0).toString(16);break;case"X":k=(parseInt(k,10)>>>0).toString(16).toUpperCase();break}if($.json.test(Z.type))T+=k;else{if($.number.test(Z.type)&&(!L||Z.sign))m=L?"+":"-",k=k.toString().replace($.sign,"");else m="";C=Z.pad_char?Z.pad_char==="0"?"0":Z.pad_char.charAt(1):" ",N=Z.width-(m+k).length,X=Z.width?N>0?C.repeat(N):"":"",T+=Z.align?m+k+X:C==="0"?m+X+k:X+m+k}}return T}var P=Object.create(null);function w(O){if(P[O])return P[O];var f=O,Y,h=[],k=0;while(f){if((Y=$.text.exec(f))!==null)h.push(Y[0]);else if((Y=$.modulo.exec(f))!==null)h.push("%");else if((Y=$.placeholder.exec(f))!==null){if(Y[2]){k|=1;var T=[],p=Y[2],G=[];if((G=$.key.exec(p))!==null){T.push(G[1]);while((p=p.substring(G[0].length))!=="")if((G=$.key_access.exec(p))!==null)T.push(G[1]);else if((G=$.index_access.exec(p))!==null)T.push(G[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key")}else throw new SyntaxError("[sprintf] failed to parse named argument key");Y[2]=T}else k|=2;if(k===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:Y[0],param_no:Y[1],keys:Y[2],sign:Y[3],pad_char:Y[4],align:Y[5],width:Y[6],precision:Y[7],type:Y[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");f=f.substring(Y[0].length)}return P[O]=h}if(typeof fn!=="undefined")fn.sprintf=q,fn.vsprintf=_;if(typeof window!=="undefined"){if(window.sprintf=q,window.vsprintf=_,typeof define==="function"&&define.amd)define(function(){return{sprintf:q,vsprintf:_}})}})()});var E3=y((Yn)=>{Object.defineProperty(Yn,"__esModule",{value:!0});Yn.TYPE=Yn.Packet=Yn.OFFSET=Yn.HEADER_LENGTH=void 0;Yn.isPacketComplete=J2$;Yn.packetLength=X2$;var oH=e7(),iH=Yn.HEADER_LENGTH=8,Mn=Yn.TYPE={SQL_BATCH:1,RPC_REQUEST:3,TABULAR_RESULT:4,ATTENTION:6,BULK_LOAD:7,TRANSACTION_MANAGER:14,LOGIN7:16,NTLMAUTH_PKT:17,PRELOGIN:18,FEDAUTH_TOKEN:8},vn={};for(let $ in Mn)vn[Mn[$]]=$;var q_={NORMAL:0,EOM:1,IGNORE:2,RESETCONNECTION:8,RESETCONNECTIONSKIPTRAN:16},i$=Yn.OFFSET={Type:0,Status:1,Length:2,SPID:4,PacketID:6,Window:7},k2$=0,T2$=1,A2$=0,W2$=`
`;class Hn{constructor($){if($ instanceof Buffer)this.buffer=$;else{let q=$;this.buffer=Buffer.alloc(iH,0),this.buffer.writeUInt8(q,i$.Type),this.buffer.writeUInt8(q_.NORMAL,i$.Status),this.buffer.writeUInt16BE(k2$,i$.SPID),this.buffer.writeUInt8(T2$,i$.PacketID),this.buffer.writeUInt8(A2$,i$.Window),this.setLength()}}setLength(){this.buffer.writeUInt16BE(this.buffer.length,i$.Length)}length(){return this.buffer.readUInt16BE(i$.Length)}resetConnection($){let q=this.buffer.readUInt8(i$.Status);if($)q|=q_.RESETCONNECTION;else q&=255-q_.RESETCONNECTION;this.buffer.writeUInt8(q,i$.Status)}last($){let q=this.buffer.readUInt8(i$.Status);if(arguments.length>0){if($)q|=q_.EOM;else q&=255-q_.EOM;this.buffer.writeUInt8(q,i$.Status)}return this.isLast()}ignore($){let q=this.buffer.readUInt8(i$.Status);if($)q|=q_.IGNORE;else q&=255-q_.IGNORE;this.buffer.writeUInt8(q,i$.Status)}isLast(){return!!(this.buffer.readUInt8(i$.Status)&q_.EOM)}packetId($){if($)this.buffer.writeUInt8($%256,i$.PacketID);return this.buffer.readUInt8(i$.PacketID)}addData($){return this.buffer=Buffer.concat([this.buffer,$]),this.setLength(),this}data(){return this.buffer.slice(iH)}type(){return this.buffer.readUInt8(i$.Type)}statusAsString(){let $=this.buffer.readUInt8(i$.Status),q=[];for(let _ in q_){let K=q_[_];if($&K)q.push(_);else q.push(void 0)}return q.join(" ").trim()}headerToString($=""){let q=oH.sprintf("type:0x%02X(%s), status:0x%02X(%s), length:0x%04X, spid:0x%04X, packetId:0x%02X, window:0x%02X",this.buffer.readUInt8(i$.Type),vn[this.buffer.readUInt8(i$.Type)],this.buffer.readUInt8(i$.Status),this.statusAsString(),this.buffer.readUInt16BE(i$.Length),this.buffer.readUInt16BE(i$.SPID),this.buffer.readUInt8(i$.PacketID),this.buffer.readUInt8(i$.Window));return $+q}dataToString($=""){let P=this.data(),w="",O="";for(let f=0;f<P.length;f++){if(f%32===0)w+=$,w+=oH.sprintf("%04X  ",f);if(P[f]<32||P[f]>126){if(O+=".",(f+1)%8===0&&(f+1)%32!==0)O+=" "}else O+=String.fromCharCode(P[f]);if(P[f]!=null)w+=oH.sprintf("%02X",P[f]);if((f+1)%4===0&&(f+1)%32!==0)w+=" ";if((f+1)%32===0){if(w+="  "+O,O="",f<P.length-1)w+=W2$}}if(O.length)w+="  "+O;return w}toString($=""){return this.headerToString($)+`
`+this.dataToString($+$)}payloadString(){return""}}Yn.Packet=Hn;function J2$($){if($.length<iH)return!1;else return $.length>=$.readUInt16BE(i$.Length)}function X2$($){return $.readUInt16BE(i$.Length)}});var Xn=y((An,Wn)=>{Object.defineProperty(An,"__esModule",{value:!0});An.default=void 0;var Z2$=e7(),B7=N2$(k8());function N2$($){return $&&$.__esModule?$:{default:$}}var F7=20,S8={VERSION:0,ENCRYPTION:1,INSTOPT:2,THREADID:3,MARS:4,FEDAUTHREQUIRED:6,TERMINATOR:255},w5={OFF:0,ON:1,NOT_SUP:2,REQ:3},kn={};for(let $ in w5){let q=w5[$];kn[q]=$}var gH={OFF:0,ON:1},Tn={};for(let $ in gH){let q=gH[$];Tn[q]=$}class aH{constructor($={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}}){if($ instanceof Buffer)this.data=$,this.options={encrypt:!1,version:{major:0,minor:0,build:0,subbuild:0}};else this.options=$,this.createOptions();this.extractOptions()}createOptions(){let $=[this.createVersionOption(),this.createEncryptionOption(),this.createInstanceOption(),this.createThreadIdOption(),this.createMarsOption(),this.createFedAuthOption()],q=0;for(let P=0,w=$.length;P<w;P++){let O=$[P];q+=5+O.data.length}q++,this.data=Buffer.alloc(q,0);let _=0,K=5*$.length+1;for(let P=0,w=$.length;P<w;P++){let O=$[P];this.data.writeUInt8(O.token,_+0),this.data.writeUInt16BE(K,_+1),this.data.writeUInt16BE(O.data.length,_+3),_+=5,O.data.copy(this.data,K),K+=O.data.length}this.data.writeUInt8(S8.TERMINATOR,_)}createVersionOption(){let $=new B7.default(F7);return $.writeUInt8(this.options.version.major),$.writeUInt8(this.options.version.minor),$.writeUInt16BE(this.options.version.build),$.writeUInt16BE(this.options.version.subbuild),{token:S8.VERSION,data:$.data}}createEncryptionOption(){let $=new B7.default(F7);if(this.options.encrypt)$.writeUInt8(w5.ON);else $.writeUInt8(w5.NOT_SUP);return{token:S8.ENCRYPTION,data:$.data}}createInstanceOption(){let $=new B7.default(F7);return $.writeUInt8(0),{token:S8.INSTOPT,data:$.data}}createThreadIdOption(){let $=new B7.default(F7);return $.writeUInt32BE(0),{token:S8.THREADID,data:$.data}}createMarsOption(){let $=new B7.default(F7);return $.writeUInt8(gH.OFF),{token:S8.MARS,data:$.data}}createFedAuthOption(){let $=new B7.default(F7);return $.writeUInt8(1),{token:S8.FEDAUTHREQUIRED,data:$.data}}extractOptions(){let $=0;while(this.data[$]!==S8.TERMINATOR){let q=this.data.readUInt16BE($+1),_=this.data.readUInt16BE($+3);switch(this.data[$]){case S8.VERSION:this.extractVersion(q);break;case S8.ENCRYPTION:this.extractEncryption(q);break;case S8.INSTOPT:this.extractInstance(q);break;case S8.THREADID:if(_>0)this.extractThreadId(q);break;case S8.MARS:this.extractMars(q);break;case S8.FEDAUTHREQUIRED:this.extractFedAuth(q);break}$+=5,q+=_}}extractVersion($){this.version={major:this.data.readUInt8($+0),minor:this.data.readUInt8($+1),build:this.data.readUInt16BE($+2),subbuild:this.data.readUInt16BE($+4)}}extractEncryption($){this.encryption=this.data.readUInt8($),this.encryptionString=kn[this.encryption]}extractInstance($){this.instance=this.data.readUInt8($)}extractThreadId($){this.threadId=this.data.readUInt32BE($)}extractMars($){this.mars=this.data.readUInt8($),this.marsString=Tn[this.mars]}extractFedAuth($){this.fedAuthRequired=this.data.readUInt8($)}toString($=""){return $+"PreLogin - "+Z2$.sprintf("version:%d.%d.%d.%d, encryption:0x%02X(%s), instopt:0x%02X, threadId:0x%08X, mars:0x%02X(%s)",this.version.major,this.version.minor,this.version.build,this.version.subbuild,this.encryption?this.encryption:0,this.encryptionString?this.encryptionString:"",this.instance?this.instance:0,this.threadId?this.threadId:0,this.mars?this.mars:0,this.marsString?this.marsString:"")}}var bL$=An.default=aH;Wn.exports=aH});var u3=y((pn)=>{Object.defineProperty(pn,"__esModule",{value:!0});pn.versionsByValue=pn.versions=void 0;var Dn=pn.versions={"7_1":1895825409,"7_2":1913192450,"7_3_A":1930035203,"7_3_B":1930100739,"7_4":1946157060,"8_0":134217728},m2$=pn.versionsByValue={};for(let $ in Dn)m2$[Dn[$]]=$});var Nn=y((Sn,Gn)=>{Object.defineProperty(Sn,"__esModule",{value:!0});Sn.default=void 0;var O5=e7(),u2$=u3(),TK={ENDIAN_LITTLE:0,ENDIAN_BIG:1,CHARSET_ASCII:0,CHARSET_EBCDIC:2,FLOAT_IEEE_754:0,FLOAT_VAX:4,FLOAT_ND5000:8,BCP_DUMPLOAD_ON:0,BCP_DUMPLOAD_OFF:16,USE_DB_ON:0,USE_DB_OFF:32,INIT_DB_WARN:0,INIT_DB_FATAL:64,SET_LANG_WARN_OFF:0,SET_LANG_WARN_ON:128},R3={INIT_LANG_WARN:0,INIT_LANG_FATAL:1,ODBC_OFF:0,ODBC_ON:2,F_TRAN_BOUNDARY:4,F_CACHE_CONNECT:8,USER_NORMAL:0,USER_SERVER:16,USER_REMUSER:32,USER_SQLREPL:64,INTEGRATED_SECURITY_OFF:0,INTEGRATED_SECURITY_ON:128},z5={SQL_DFLT:0,SQL_TSQL:8,OLEDB_OFF:0,OLEDB_ON:16,READ_WRITE_INTENT:0,READ_ONLY_INTENT:32},cH={CHANGE_PASSWORD_NO:0,CHANGE_PASSWORD_YES:1,BINARY_XML:2,SPAWN_USER_INSTANCE:4,UNKNOWN_COLLATION_HANDLING:8,EXTENSION_USED:16},L_={FEATURE_ID:2,LIBRARY_SECURITYTOKEN:1,LIBRARY_ADAL:2,FEDAUTH_YES_ECHO:1,FEDAUTH_NO_ECHO:0,ADAL_WORKFLOW_USER_PASS:1,ADAL_WORKFLOW_INTEGRATED:2},R2$=255;class IH{constructor({tdsVersion:$,packetSize:q,clientProgVer:_,clientPid:K,connectionId:P,clientTimeZone:w,clientLcid:O}){this.tdsVersion=$,this.packetSize=q,this.clientProgVer=_,this.clientPid=K,this.connectionId=P,this.clientTimeZone=w,this.clientLcid=O,this.readOnlyIntent=!1,this.initDbFatal=!1,this.fedAuth=void 0,this.userName=void 0,this.password=void 0,this.serverName=void 0,this.appName=void 0,this.hostname=void 0,this.libraryName=void 0,this.language=void 0,this.database=void 0,this.clientId=void 0,this.sspi=void 0,this.attachDbFile=void 0,this.changePassword=void 0}toBuffer(){let $=Buffer.alloc(94),q=[$],_=0,K=$.length;if(_=$.writeUInt32LE(0,_),_=$.writeUInt32LE(this.tdsVersion,_),_=$.writeUInt32LE(this.packetSize,_),_=$.writeUInt32LE(this.clientProgVer,_),_=$.writeUInt32LE(this.clientPid,_),_=$.writeUInt32LE(this.connectionId,_),_=$.writeUInt8(this.buildOptionFlags1(),_),_=$.writeUInt8(this.buildOptionFlags2(),_),_=$.writeUInt8(this.buildTypeFlags(),_),_=$.writeUInt8(this.buildOptionFlags3(),_),_=$.writeInt32LE(this.clientTimeZone,_),_=$.writeUInt32LE(this.clientLcid,_),_=$.writeUInt16LE(K,_),this.hostname){let f=Buffer.from(this.hostname,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(K,_);if(_=$.writeUInt16LE(K,_),this.userName){let f=Buffer.from(this.userName,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);if(_=$.writeUInt16LE(K,_),this.password){let f=Buffer.from(this.password,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(this.scramblePassword(f))}else _=$.writeUInt16LE(0,_);if(_=$.writeUInt16LE(K,_),this.appName){let f=Buffer.from(this.appName,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);if(_=$.writeUInt16LE(K,_),this.serverName){let f=Buffer.from(this.serverName,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);_=$.writeUInt16LE(K,_);let P=this.buildFeatureExt();_=$.writeUInt16LE(4,_);let w=Buffer.alloc(4);if(w.writeUInt32LE(K+=4,0),K+=P.length,q.push(w,P),_=$.writeUInt16LE(K,_),this.libraryName){let f=Buffer.from(this.libraryName,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);if(_=$.writeUInt16LE(K,_),this.language){let f=Buffer.from(this.language,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);if(_=$.writeUInt16LE(K,_),this.database){let f=Buffer.from(this.database,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);if(this.clientId)this.clientId.copy($,_,0,6);if(_+=6,_=$.writeUInt16LE(K,_),this.sspi){if(this.sspi.length>65535)_=$.writeUInt16LE(65535,_);else _=$.writeUInt16LE(this.sspi.length,_);q.push(this.sspi)}else _=$.writeUInt16LE(0,_);if(_=$.writeUInt16LE(K,_),this.attachDbFile){let f=Buffer.from(this.attachDbFile,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);if(_=$.writeUInt16LE(K,_),this.changePassword){let f=Buffer.from(this.changePassword,"ucs2");_=$.writeUInt16LE(f.length/2,_),K+=f.length,q.push(f)}else _=$.writeUInt16LE(0,_);if(this.sspi&&this.sspi.length>65535)$.writeUInt32LE(this.sspi.length,_);else $.writeUInt32LE(0,_);let O=Buffer.concat(q);return O.writeUInt32LE(O.length,0),O}buildOptionFlags1(){let $=TK.ENDIAN_LITTLE|TK.CHARSET_ASCII|TK.FLOAT_IEEE_754|TK.BCP_DUMPLOAD_OFF|TK.USE_DB_OFF|TK.SET_LANG_WARN_ON;if(this.initDbFatal)$|=TK.INIT_DB_FATAL;else $|=TK.INIT_DB_WARN;return $}buildFeatureExt(){let $=[],q=this.fedAuth;if(q)switch(q.type){case"ADAL":let _=Buffer.alloc(7);_.writeUInt8(L_.FEATURE_ID,0),_.writeUInt32LE(2,1),_.writeUInt8(L_.LIBRARY_ADAL<<1|(q.echo?L_.FEDAUTH_YES_ECHO:L_.FEDAUTH_NO_ECHO),5),_.writeUInt8(q.workflow==="integrated"?2:L_.ADAL_WORKFLOW_USER_PASS,6),$.push(_);break;case"SECURITYTOKEN":let K=Buffer.from(q.fedAuthToken,"ucs2"),P=Buffer.alloc(10),w=0;w=P.writeUInt8(L_.FEATURE_ID,w),w=P.writeUInt32LE(K.length+4+1,w),w=P.writeUInt8(L_.LIBRARY_SECURITYTOKEN<<1|(q.echo?L_.FEDAUTH_YES_ECHO:L_.FEDAUTH_NO_ECHO),w),P.writeInt32LE(K.length,w),$.push(P),$.push(K);break}if(this.tdsVersion>=u2$.versions["7_4"]){let P=Buffer.alloc(6);P.writeUInt8(10,0),P.writeUInt32LE(1,1),P.writeUInt8(1,5),$.push(P)}return $.push(Buffer.from([R2$])),Buffer.concat($)}buildOptionFlags2(){let $=R3.INIT_LANG_WARN|R3.ODBC_OFF|R3.USER_NORMAL;if(this.sspi)$|=R3.INTEGRATED_SECURITY_ON;else $|=R3.INTEGRATED_SECURITY_OFF;return $}buildTypeFlags(){let $=z5.SQL_DFLT|z5.OLEDB_OFF;if(this.readOnlyIntent)$|=z5.READ_ONLY_INTENT;else $|=z5.READ_WRITE_INTENT;return $}buildOptionFlags3(){return cH.CHANGE_PASSWORD_NO|cH.UNKNOWN_COLLATION_HANDLING|cH.EXTENSION_USED}scramblePassword($){for(let q=0,_=$.length;q<_;q++){let K=$[q],P=K&15,w=K>>4;K=P<<4|w,K=K^165,$[q]=K}return $}toString($=""){return $+"Login7 - "+O5.sprintf("TDS:0x%08X, PacketSize:0x%08X, ClientProgVer:0x%08X, ClientPID:0x%08X, ConnectionID:0x%08X",this.tdsVersion,this.packetSize,this.clientProgVer,this.clientPid,this.connectionId)+`
`+$+"         "+O5.sprintf("Flags1:0x%02X, Flags2:0x%02X, TypeFlags:0x%02X, Flags3:0x%02X, ClientTimezone:%d, ClientLCID:0x%08X",this.buildOptionFlags1(),this.buildOptionFlags2(),this.buildTypeFlags(),this.buildOptionFlags3(),this.clientTimeZone,this.clientLcid)+`
`+$+"         "+O5.sprintf("Hostname:'%s', Username:'%s', Password:'%s', AppName:'%s', ServerName:'%s', LibraryName:'%s'",this.hostname,this.userName,this.password,this.appName,this.serverName,this.libraryName)+`
`+$+"         "+O5.sprintf("Language:'%s', Database:'%s', SSPI:'%s', AttachDbFile:'%s', ChangePassword:'%s'",this.language,this.database,this.sspi,this.attachDbFile,this.changePassword)}}var iL$=Sn.default=IH;Gn.exports=IH});var mn=y((gL$,f5)=>{(function(){var $=typeof window==="object"?window:{},q=!$.JS_MD4_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(q)$=global;var _=!$.JS_MD4_NO_COMMON_JS&&typeof f5==="object"&&f5.exports,K=typeof define==="function"&&define.amd,P=!$.JS_MD4_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined",w="0123456789abcdef".split(""),O=[128,32768,8388608,-2147483648],f=[0,8,16,24],Y=["hex","array","digest","buffer","arrayBuffer"],h=[],k;if(P){var T=new ArrayBuffer(68);k=new Uint8Array(T),h=new Uint32Array(T)}var p=function(N){return function(L){return new X(!0).update(L)[N]()}},G=function(){var N=p("hex");if(q)N=Z(N);N.create=function(){return new X},N.update=function(E){return N.create().update(E)};for(var L=0;L<Y.length;++L){var m=Y[L];N[m]=p(m)}return N},Z=function(N){var L=i("crypto"),m=i("buffer").Buffer,E=function(W){if(typeof W==="string")return L.createHash("md4").update(W,"utf8").digest("hex");else if(P&&W instanceof ArrayBuffer)W=new Uint8Array(W);else if(W.length===void 0)return N(W);return L.createHash("md4").update(new m(W)).digest("hex")};return E};function X(N){if(N)h[0]=h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0,this.blocks=h,this.buffer8=k;else if(P){var L=new ArrayBuffer(68);this.buffer8=new Uint8Array(L),this.blocks=new Uint32Array(L)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}X.prototype.update=function(N){if(this.finalized)return;var L=typeof N!=="string";if(L&&P&&N instanceof ArrayBuffer)N=new Uint8Array(N);var m,E=0,W,V=N.length||0,n=this.blocks,b=this.buffer8;while(E<V){if(this.hashed)this.hashed=!1,n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0;if(L)if(P)for(W=this.start;E<V&&W<64;++E)b[W++]=N[E];else for(W=this.start;E<V&&W<64;++E)n[W>>2]|=N[E]<<f[W++&3];else if(P)for(W=this.start;E<V&&W<64;++E)if(m=N.charCodeAt(E),m<128)b[W++]=m;else if(m<2048)b[W++]=192|m>>6,b[W++]=128|m&63;else if(m<55296||m>=57344)b[W++]=224|m>>12,b[W++]=128|m>>6&63,b[W++]=128|m&63;else m=65536+((m&1023)<<10|N.charCodeAt(++E)&1023),b[W++]=240|m>>18,b[W++]=128|m>>12&63,b[W++]=128|m>>6&63,b[W++]=128|m&63;else for(W=this.start;E<V&&W<64;++E)if(m=N.charCodeAt(E),m<128)n[W>>2]|=m<<f[W++&3];else if(m<2048)n[W>>2]|=(192|m>>6)<<f[W++&3],n[W>>2]|=(128|m&63)<<f[W++&3];else if(m<55296||m>=57344)n[W>>2]|=(224|m>>12)<<f[W++&3],n[W>>2]|=(128|m>>6&63)<<f[W++&3],n[W>>2]|=(128|m&63)<<f[W++&3];else m=65536+((m&1023)<<10|N.charCodeAt(++E)&1023),n[W>>2]|=(240|m>>18)<<f[W++&3],n[W>>2]|=(128|m>>12&63)<<f[W++&3],n[W>>2]|=(128|m>>6&63)<<f[W++&3],n[W>>2]|=(128|m&63)<<f[W++&3];if(this.lastByteIndex=W,this.bytes+=W-this.start,W>=64)this.start=W-64,this.hash(),this.hashed=!0;else this.start=W}return this},X.prototype.finalize=function(){if(this.finalized)return;this.finalized=!0;var N=this.blocks,L=this.lastByteIndex;if(N[L>>2]|=O[L&3],L>=56){if(!this.hashed)this.hash();N[0]=N[16],N[16]=N[1]=N[2]=N[3]=N[4]=N[5]=N[6]=N[7]=N[8]=N[9]=N[10]=N[11]=N[12]=N[13]=N[14]=N[15]=0}N[14]=this.bytes<<3,this.hash()},X.prototype.hash=function(){var N,L,m,E,W,V,n,b,x=this.blocks;if(this.first)N=x[0]-1,N=N<<3|N>>>29,E=(N&4023233417|~N&2562383102)+x[1]+271733878,E=E<<7|E>>>25,m=(E&N|~E&4023233417)+x[2]-1732584194,m=m<<11|m>>>21,L=(m&E|~m&N)+x[3]-271733879,L=L<<19|L>>>13;else N=this.h0,L=this.h1,m=this.h2,E=this.h3,N+=(L&m|~L&E)+x[0],N=N<<3|N>>>29,E+=(N&L|~N&m)+x[1],E=E<<7|E>>>25,m+=(E&N|~E&L)+x[2],m=m<<11|m>>>21,L+=(m&E|~m&N)+x[3],L=L<<19|L>>>13;if(N+=(L&m|~L&E)+x[4],N=N<<3|N>>>29,E+=(N&L|~N&m)+x[5],E=E<<7|E>>>25,m+=(E&N|~E&L)+x[6],m=m<<11|m>>>21,L+=(m&E|~m&N)+x[7],L=L<<19|L>>>13,N+=(L&m|~L&E)+x[8],N=N<<3|N>>>29,E+=(N&L|~N&m)+x[9],E=E<<7|E>>>25,m+=(E&N|~E&L)+x[10],m=m<<11|m>>>21,L+=(m&E|~m&N)+x[11],L=L<<19|L>>>13,N+=(L&m|~L&E)+x[12],N=N<<3|N>>>29,E+=(N&L|~N&m)+x[13],E=E<<7|E>>>25,m+=(E&N|~E&L)+x[14],m=m<<11|m>>>21,L+=(m&E|~m&N)+x[15],L=L<<19|L>>>13,V=L&m,N+=(V|L&E|m&E)+x[0]+1518500249,N=N<<3|N>>>29,W=N&L,E+=(W|N&m|V)+x[4]+1518500249,E=E<<5|E>>>27,b=E&N,m+=(b|E&L|W)+x[8]+1518500249,m=m<<9|m>>>23,n=m&E,L+=(n|m&N|b)+x[12]+1518500249,L=L<<13|L>>>19,V=L&m,N+=(V|L&E|n)+x[1]+1518500249,N=N<<3|N>>>29,W=N&L,E+=(W|N&m|V)+x[5]+1518500249,E=E<<5|E>>>27,b=E&N,m+=(b|E&L|W)+x[9]+1518500249,m=m<<9|m>>>23,n=m&E,L+=(n|m&N|b)+x[13]+1518500249,L=L<<13|L>>>19,V=L&m,N+=(V|L&E|n)+x[2]+1518500249,N=N<<3|N>>>29,W=N&L,E+=(W|N&m|V)+x[6]+1518500249,E=E<<5|E>>>27,b=E&N,m+=(b|E&L|W)+x[10]+1518500249,m=m<<9|m>>>23,n=m&E,L+=(n|m&N|b)+x[14]+1518500249,L=L<<13|L>>>19,V=L&m,N+=(V|L&E|n)+x[3]+1518500249,N=N<<3|N>>>29,W=N&L,E+=(W|N&m|V)+x[7]+1518500249,E=E<<5|E>>>27,b=E&N,m+=(b|E&L|W)+x[11]+1518500249,m=m<<9|m>>>23,L+=(m&E|m&N|b)+x[15]+1518500249,L=L<<13|L>>>19,V=L^m,N+=(V^E)+x[0]+1859775393,N=N<<3|N>>>29,E+=(V^N)+x[8]+1859775393,E=E<<9|E>>>23,b=E^N,m+=(b^L)+x[4]+1859775393,m=m<<11|m>>>21,L+=(b^m)+x[12]+1859775393,L=L<<15|L>>>17,V=L^m,N+=(V^E)+x[2]+1859775393,N=N<<3|N>>>29,E+=(V^N)+x[10]+1859775393,E=E<<9|E>>>23,b=E^N,m+=(b^L)+x[6]+1859775393,m=m<<11|m>>>21,L+=(b^m)+x[14]+1859775393,L=L<<15|L>>>17,V=L^m,N+=(V^E)+x[1]+1859775393,N=N<<3|N>>>29,E+=(V^N)+x[9]+1859775393,E=E<<9|E>>>23,b=E^N,m+=(b^L)+x[5]+1859775393,m=m<<11|m>>>21,L+=(b^m)+x[13]+1859775393,L=L<<15|L>>>17,V=L^m,N+=(V^E)+x[3]+1859775393,N=N<<3|N>>>29,E+=(V^N)+x[11]+1859775393,E=E<<9|E>>>23,b=E^N,m+=(b^L)+x[7]+1859775393,m=m<<11|m>>>21,L+=(b^m)+x[15]+1859775393,L=L<<15|L>>>17,this.first)this.h0=N+1732584193<<0,this.h1=L-271733879<<0,this.h2=m-1732584194<<0,this.h3=E+271733878<<0,this.first=!1;else this.h0=this.h0+N<<0,this.h1=this.h1+L<<0,this.h2=this.h2+m<<0,this.h3=this.h3+E<<0},X.prototype.hex=function(){this.finalize();var N=this.h0,L=this.h1,m=this.h2,E=this.h3;return w[N>>4&15]+w[N&15]+w[N>>12&15]+w[N>>8&15]+w[N>>20&15]+w[N>>16&15]+w[N>>28&15]+w[N>>24&15]+w[L>>4&15]+w[L&15]+w[L>>12&15]+w[L>>8&15]+w[L>>20&15]+w[L>>16&15]+w[L>>28&15]+w[L>>24&15]+w[m>>4&15]+w[m&15]+w[m>>12&15]+w[m>>8&15]+w[m>>20&15]+w[m>>16&15]+w[m>>28&15]+w[m>>24&15]+w[E>>4&15]+w[E&15]+w[E>>12&15]+w[E>>8&15]+w[E>>20&15]+w[E>>16&15]+w[E>>28&15]+w[E>>24&15]},X.prototype.toString=X.prototype.hex,X.prototype.digest=function(){this.finalize();var N=this.h0,L=this.h1,m=this.h2,E=this.h3;return[N&255,N>>8&255,N>>16&255,N>>24&255,L&255,L>>8&255,L>>16&255,L>>24&255,m&255,m>>8&255,m>>16&255,m>>24&255,E&255,E>>8&255,E>>16&255,E>>24&255]},X.prototype.array=X.prototype.digest,X.prototype.arrayBuffer=function(){this.finalize();var N=new ArrayBuffer(16),L=new Uint32Array(N);return L[0]=this.h0,L[1]=this.h1,L[2]=this.h2,L[3]=this.h3,N},X.prototype.buffer=X.prototype.arrayBuffer;var C=G();if(_)f5.exports=C;else if($.md4=C,K)define(function(){return C})})()});var nn=y((Rn,Ln)=>{Object.defineProperty(Rn,"__esModule",{value:!0});Rn.default=void 0;var L2$=un(k8()),C2$=r2$(i("crypto")),n2$=un(mn());function En($){if(typeof WeakMap!="function")return null;var q=new WeakMap,_=new WeakMap;return(En=function(K){return K?_:q})($)}function r2$($,q){if(!q&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var _=En(q);if(_&&_.has($))return _.get($);var K={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in $)if(w!=="default"&&Object.prototype.hasOwnProperty.call($,w)){var O=P?Object.getOwnPropertyDescriptor($,w):null;O&&(O.get||O.set)?Object.defineProperty(K,w,O):K[w]=$[w]}return K.default=$,_&&_.set($,K),K}function un($){return $&&$.__esModule?$:{default:$}}class lH{constructor($){this.data=this.createResponse($)}toString($=""){return $+"NTLM Auth"}createResponse($){let q=this.createClientNonce(),_=24,K=16,P=$.domain,w=$.userName,O=$.password,f=$.ntlmpacket,Y=f.target,h=f.nonce,k=64+P.length*2+w.length*2+24+16+8+8+8+4+Y.length+4,T=new L2$.default(k);T.position=0,T.writeString("NTLMSSP\x00","utf8"),T.writeUInt32LE(3);let p=64,G=p,Z=G+P.length*2,X=Z+w.length*2,C=X+24;T.writeUInt16LE(24),T.writeUInt16LE(24),T.writeUInt32LE(X),T.writeUInt16LE(16),T.writeUInt16LE(16),T.writeUInt32LE(C),T.writeUInt16LE(P.length*2),T.writeUInt16LE(P.length*2),T.writeUInt32LE(G),T.writeUInt16LE(w.length*2),T.writeUInt16LE(w.length*2),T.writeUInt32LE(Z),T.writeUInt16LE(0),T.writeUInt16LE(0),T.writeUInt32LE(p),T.writeUInt16LE(0),T.writeUInt16LE(0),T.writeUInt32LE(p),T.writeUInt16LE(33281),T.writeUInt16LE(8),T.writeString(P,"ucs2"),T.writeString(w,"ucs2");let N=this.lmv2Response(P,w,O,h,q);T.copyFrom(N);let L=new Date().getTime(),m=this.ntlmv2Response(P,w,O,h,Y,q,L);T.copyFrom(m),T.writeUInt32LE(257),T.writeUInt32LE(0);let E=this.createTimestamp(L);return T.copyFrom(E),T.copyFrom(q),T.writeUInt32LE(0),T.copyFrom(Y),T.writeUInt32LE(0),T.data}createClientNonce(){let $=Buffer.alloc(8,0),q=0;while(q<8)$.writeUInt8(Math.ceil(Math.random()*255),q),q++;return $}ntlmv2Response($,q,_,K,P,w,O){let f=this.createTimestamp(O),Y=this.ntv2Hash($,q,_),h=40+P.length,k=Buffer.alloc(h,0);return K.copy(k,0,0,8),k.writeUInt32LE(257,8),k.writeUInt32LE(0,12),f.copy(k,16,0,8),w.copy(k,24,0,8),k.writeUInt32LE(0,32),P.copy(k,36,0,P.length),k.writeUInt32LE(0,36+P.length),this.hmacMD5(k,Y)}createTimestamp($){let q=(BigInt($)+BigInt(11644473600))*BigInt(1e7),_=Number(q&BigInt(4294967295)),K=Number(q>>BigInt(32)&BigInt(4294967295)),P=Buffer.alloc(8);return P.writeUInt32LE(_,0),P.writeUInt32LE(K,4),P}lmv2Response($,q,_,K,P){let w=this.ntv2Hash($,q,_),O=Buffer.alloc(K.length+P.length,0);K.copy(O),P.copy(O,K.length,0,P.length);let f=this.hmacMD5(O,w),Y=Buffer.alloc(f.length+P.length,0);return f.copy(Y),P.copy(Y,f.length,0,P.length),Y}ntv2Hash($,q,_){let K=this.ntHash(_),P=Buffer.from(q.toUpperCase()+$.toUpperCase(),"ucs2");return this.hmacMD5(P,K)}ntHash($){let q=Buffer.from($,"ucs2");return Buffer.from(n2$.default.arrayBuffer(q))}hmacMD5($,q){return C2$.createHmac("MD5",q).update($).digest()}}var aL$=Rn.default=lH;Ln.exports=lH});var AK=y((dn)=>{Object.defineProperty(dn,"__esModule",{value:!0});dn.RequestError=dn.InputError=dn.ConnectionError=void 0;class rn extends Error{constructor($,q,_){super($,_);this.code=q}}dn.ConnectionError=rn;class Vn extends Error{constructor($,q,_){super($,_);this.code=q}}dn.RequestError=Vn;class xn extends TypeError{}dn.InputError=xn});var an=y((on)=>{Object.defineProperty(on,"__esModule",{value:!0});on.SQLServerStatementColumnEncryptionSetting=on.SQLServerEncryptionType=on.DescribeParameterEncryptionResultSet2=on.DescribeParameterEncryptionResultSet1=void 0;var IL$=on.SQLServerEncryptionType=function($){return $[$.Deterministic=1]="Deterministic",$[$.Randomized=2]="Randomized",$[$.PlainText=0]="PlainText",$}({}),lL$=on.DescribeParameterEncryptionResultSet1=function($){return $[$.KeyOrdinal=0]="KeyOrdinal",$[$.DbId=1]="DbId",$[$.KeyId=2]="KeyId",$[$.KeyVersion=3]="KeyVersion",$[$.KeyMdVersion=4]="KeyMdVersion",$[$.EncryptedKey=5]="EncryptedKey",$[$.ProviderName=6]="ProviderName",$[$.KeyPath=7]="KeyPath",$[$.KeyEncryptionAlgorithm=8]="KeyEncryptionAlgorithm",$}({}),tL$=on.DescribeParameterEncryptionResultSet2=function($){return $[$.ParameterOrdinal=0]="ParameterOrdinal",$[$.ParameterName=1]="ParameterName",$[$.ColumnEncryptionAlgorithm=2]="ColumnEncryptionAlgorithm",$[$.ColumnEncrytionType=3]="ColumnEncrytionType",$[$.ColumnEncryptionKeyOrdinal=4]="ColumnEncryptionKeyOrdinal",$[$.NormalizationRuleVersion=5]="NormalizationRuleVersion",$}({}),sL$=on.SQLServerStatementColumnEncryptionSetting=function($){return $[$.UseConnectionSetting=0]="UseConnectionSetting",$[$.Enabled=1]="Enabled",$[$.ResultSetOnly=2]="ResultSetOnly",$[$.Disabled=3]="Disabled",$}({})});var M5=y((cn,In)=>{Object.defineProperty(cn,"__esModule",{value:!0});cn.default=void 0;var i2$=i("events"),g2$=AK(),a2$=an();class tH extends i2$.EventEmitter{on($,q){return super.on($,q)}emit($,...q){return super.emit($,...q)}constructor($,q,_){super();this.sqlTextOrProcedure=$,this.parameters=[],this.parametersByName={},this.preparing=!1,this.handle=void 0,this.canceled=!1,this.paused=!1,this.error=void 0,this.connection=void 0,this.timeout=void 0,this.userCallback=q,this.statementColumnEncryptionSetting=_&&_.statementColumnEncryptionSetting||a2$.SQLServerStatementColumnEncryptionSetting.UseConnectionSetting,this.cryptoMetadataLoaded=!1,this.callback=function(K,P,w){if(this.preparing)if(this.preparing=!1,K)this.emit("error",K);else this.emit("prepared");else this.userCallback(K,P,w),this.emit("requestCompleted")}}addParameter($,q,_,K){let{output:P=!1,length:w,precision:O,scale:f}=K??{},Y={type:q,name:$,value:_,output:P,length:w,precision:O,scale:f};this.parameters.push(Y),this.parametersByName[$]=Y}addOutputParameter($,q,_,K){this.addParameter($,q,_,{...K,output:!0})}makeParamsParameter($){let q="";for(let _=0,K=$.length;_<K;_++){let P=$[_];if(q.length>0)q+=", ";if(q+="@"+P.name+" ",q+=P.type.declaration(P),P.output)q+=" OUTPUT"}return q}validateParameters($){for(let q=0,_=this.parameters.length;q<_;q++){let K=this.parameters[q];try{K.value=K.type.validate(K.value,$)}catch(P){throw new g2$.RequestError("Validation failed for parameter '"+K.name+"'. "+P.message,"EPARAM",{cause:P})}}}pause(){if(this.paused)return;this.emit("pause"),this.paused=!0}resume(){if(!this.paused)return;this.paused=!1,this.emit("resume")}cancel(){if(this.canceled)return;this.canceled=!0,this.emit("cancel")}setTimeout($){this.timeout=$}}var BL$=cn.default=tH;In.exports=tH});var v5=y((tn)=>{Object.defineProperty(tn,"__esModule",{value:!0});tn.writeToTrackingBuffer=t2$;var c2$={QUERY_NOTIFICATIONS:1,TXN_DESCRIPTOR:2,TRACE_ACTIVITY:3},I2$=12,l2$=6+I2$;function t2$($,q,_){$.writeUInt32LE(0),$.writeUInt32LE(l2$),$.writeUInt16LE(c2$.TXN_DESCRIPTOR),$.writeBuffer(q),$.writeUInt32LE(_);let K=$.data;return K.writeUInt32LE(K.length,0),$}});var Un=y((en,Bn)=>{Object.defineProperty(en,"__esModule",{value:!0});en.default=void 0;var sn=F2$(k8()),e2$=v5(),B2$=AK();function F2$($){return $&&$.__esModule?$:{default:$}}var U2$={BY_REF_VALUE:1,DEFAULT_VALUE:2};class sH{constructor($,q,_,K,P){this.procedure=$,this.parameters=q,this.options=K,this.txnDescriptor=_,this.collation=P}[Symbol.iterator](){return this.generateData()}*generateData(){let $=new sn.default(500);if(this.options.tdsVersion>="7_2")e2$.writeToTrackingBuffer($,this.txnDescriptor,1);if(typeof this.procedure==="string")$.writeUsVarchar(this.procedure);else $.writeUShort(65535),$.writeUShort(this.procedure);let q=0;$.writeUInt16LE(q),yield $.data;let _=this.parameters.length;for(let K=0;K<_;K++)yield*this.generateParameterData(this.parameters[K])}toString($=""){return $+("RPC Request - "+this.procedure)}*generateParameterData($){let q=new sn.default(3+Buffer.byteLength($.name,"ucs-2")+1);if($.name)q.writeBVarchar("@"+$.name);else q.writeBVarchar("");let _=0;if($.output)_|=U2$.BY_REF_VALUE;q.writeUInt8(_),yield q.data;let K={value:$.value},P=$.type;if((P.id&48)===32){if($.length)K.length=$.length;else if(P.resolveLength)K.length=P.resolveLength($)}if($.precision)K.precision=$.precision;else if(P.resolvePrecision)K.precision=P.resolvePrecision($);if($.scale)K.scale=$.scale;else if(P.resolveScale)K.scale=P.resolveScale($);if(this.collation)K.collation=this.collation;yield P.generateTypeInfo(K,this.options),yield P.generateParameterLength(K,this.options);try{yield*P.generateParameterData(K,this.options)}catch(w){throw new B2$.InputError(`Input parameter '${$.name}' could not be validated`,{cause:w})}}}var UL$=en.default=sH;Bn.exports=sH});var _r=y((Qn,$r)=>{Object.defineProperty(Qn,"__esModule",{value:!0});Qn.default=void 0;var Q2$=qY$(k8()),$Y$=v5();function qY$($){return $&&$.__esModule?$:{default:$}}class eH{constructor($,q,_){this.sqlText=$,this.txnDescriptor=q,this.options=_}*[Symbol.iterator](){if(this.options.tdsVersion>="7_2"){let $=new Q2$.default(18,"ucs2"),q=1;$Y$.writeToTrackingBuffer($,this.txnDescriptor,1),yield $.data}yield Buffer.from(this.sqlText,"ucs2")}toString($=""){return $+("SQL Batch - "+this.sqlText)}}var QL$=Qn.default=eH;$r.exports=eH});var jr=y(($C$,Pr)=>{var _Y$=i("stream").Duplex,H5=Symbol("Callback"),K4=Symbol("Other");class BH extends _Y${constructor($){super($);this[H5]=null,this[K4]=null}_read(){let $=this[H5];if($)this[H5]=null,$()}_write($,q,_){this[K4][H5]=_,this[K4].push($)}_final($){this[K4].on("end",$),this[K4].push(null)}}class Kr{constructor($){this.socket1=new BH($),this.socket2=new BH($),this.socket1[K4]=this.socket2,this.socket2[K4]=this.socket1}}Pr.exports=Kr});var Y5=y((wr,Or)=>{Object.defineProperty(wr,"__esModule",{value:!0});wr.default=void 0;var KY$=i("stream");class FH extends KY$.PassThrough{constructor({type:$,resetConnection:q=!1}){super();this.type=$,this.resetConnection=q,this.ignore=!1}}var qC$=wr.default=FH;Or.exports=FH});var K6=y((_C$,Mr)=>{class fr extends Error{constructor($){if(!Array.isArray($))throw new TypeError(`Expected input to be an Array, got ${typeof $}`);let q="";for(let _=0;_<$.length;_++)q+=`    ${$[_].stack}
`;super(q);this.name="AggregateError",this.errors=$}}Mr.exports={AggregateError:fr,ArrayIsArray($){return Array.isArray($)},ArrayPrototypeIncludes($,q){return $.includes(q)},ArrayPrototypeIndexOf($,q){return $.indexOf(q)},ArrayPrototypeJoin($,q){return $.join(q)},ArrayPrototypeMap($,q){return $.map(q)},ArrayPrototypePop($,q){return $.pop(q)},ArrayPrototypePush($,q){return $.push(q)},ArrayPrototypeSlice($,q,_){return $.slice(q,_)},Error,FunctionPrototypeCall($,q,..._){return $.call(q,..._)},FunctionPrototypeSymbolHasInstance($,q){return Function.prototype[Symbol.hasInstance].call($,q)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties($,q){return Object.defineProperties($,q)},ObjectDefineProperty($,q,_){return Object.defineProperty($,q,_)},ObjectGetOwnPropertyDescriptor($,q){return Object.getOwnPropertyDescriptor($,q)},ObjectKeys($){return Object.keys($)},ObjectSetPrototypeOf($,q){return Object.setPrototypeOf($,q)},Promise,PromisePrototypeCatch($,q){return $.catch(q)},PromisePrototypeThen($,q,_){return $.then(q,_)},PromiseReject($){return Promise.reject($)},PromiseResolve($){return Promise.resolve($)},ReflectApply:Reflect.apply,RegExpPrototypeTest($,q){return $.test(q)},SafeSet:Set,String,StringPrototypeSlice($,q,_){return $.slice(q,_)},StringPrototypeToLowerCase($){return $.toLowerCase()},StringPrototypeToUpperCase($){return $.toUpperCase()},StringPrototypeTrim($){return $.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet($,q,_){return $.set(q,_)},Boolean,Uint8Array}});var UH=y((KC$,vr)=>{vr.exports={format($,...q){return $.replace(/%([sdifj])/g,function(...[_,K]){let P=q.shift();if(K==="f")return P.toFixed(6);else if(K==="j")return JSON.stringify(P);else if(K==="s"&&typeof P==="object")return`${P.constructor!==Object?P.constructor.name:""} {}`.trim();else return P.toString()})},inspect($){switch(typeof $){case"string":if($.includes("'")){if(!$.includes('"'))return`"${$}"`;else if(!$.includes("`")&&!$.includes("${"))return`\`${$}\``}return`'${$}'`;case"number":if(isNaN($))return"NaN";else if(Object.is($,-0))return String($);return $;case"bigint":return`${String($)}n`;case"boolean":case"undefined":return String($);case"object":return"{}"}}}});var e6=y((PC$,kr)=>{var{format:PY$,inspect:h5}=UH(),{AggregateError:jY$}=K6(),wY$=globalThis.AggregateError||jY$,OY$=Symbol("kIsNodeError"),zY$=["string","function","number","object","Function","Object","boolean","bigint","symbol"],fY$=/^([A-Z][a-z0-9]*)+$/,k5={};function P4($,q){if(!$)throw new k5.ERR_INTERNAL_ASSERTION(q)}function Hr($){let q="",_=$.length,K=$[0]==="-"?1:0;for(;_>=K+4;_-=3)q=`_${$.slice(_-3,_)}${q}`;return`${$.slice(0,_)}${q}`}function MY$($,q,_){if(typeof q==="function")return P4(q.length<=_.length,`Code: ${$}; The provided arguments length (${_.length}) does not match the required ones (${q.length}).`),q(..._);let K=(q.match(/%[dfijoOs]/g)||[]).length;if(P4(K===_.length,`Code: ${$}; The provided arguments length (${_.length}) does not match the required ones (${K}).`),_.length===0)return q;return PY$(q,..._)}function d6($,q,_){if(!_)_=Error;class K extends _{constructor(...P){super(MY$($,q,P))}toString(){return`${this.name} [${$}]: ${this.message}`}}Object.defineProperties(K.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${$}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),K.prototype.code=$,K.prototype[OY$]=!0,k5[$]=K}function Yr($){let q="__node_internal_"+$.name;return Object.defineProperty($,"name",{value:q}),$}function vY$($,q){if($&&q&&$!==q){if(Array.isArray(q.errors))return q.errors.push($),q;let _=new wY$([q,$],q.message);return _.code=q.code,_}return $||q}class hr extends Error{constructor($="The operation was aborted",q=void 0){if(q!==void 0&&typeof q!=="object")throw new k5.ERR_INVALID_ARG_TYPE("options","Object",q);super($,q);this.code="ABORT_ERR",this.name="AbortError"}}d6("ERR_ASSERTION","%s",Error);d6("ERR_INVALID_ARG_TYPE",($,q,_)=>{if(P4(typeof $==="string","'name' must be a string"),!Array.isArray(q))q=[q];let K="The ";if($.endsWith(" argument"))K+=`${$} `;else K+=`"${$}" ${$.includes(".")?"property":"argument"} `;K+="must be ";let P=[],w=[],O=[];for(let Y of q)if(P4(typeof Y==="string","All expected entries have to be of type string"),zY$.includes(Y))P.push(Y.toLowerCase());else if(fY$.test(Y))w.push(Y);else P4(Y!=="object",'The value "object" should be written as "Object"'),O.push(Y);if(w.length>0){let Y=P.indexOf("object");if(Y!==-1)P.splice(P,Y,1),w.push("Object")}if(P.length>0){switch(P.length){case 1:K+=`of type ${P[0]}`;break;case 2:K+=`one of type ${P[0]} or ${P[1]}`;break;default:{let Y=P.pop();K+=`one of type ${P.join(", ")}, or ${Y}`}}if(w.length>0||O.length>0)K+=" or "}if(w.length>0){switch(w.length){case 1:K+=`an instance of ${w[0]}`;break;case 2:K+=`an instance of ${w[0]} or ${w[1]}`;break;default:{let Y=w.pop();K+=`an instance of ${w.join(", ")}, or ${Y}`}}if(O.length>0)K+=" or "}switch(O.length){case 0:break;case 1:if(O[0].toLowerCase()!==O[0])K+="an ";K+=`${O[0]}`;break;case 2:K+=`one of ${O[0]} or ${O[1]}`;break;default:{let Y=O.pop();K+=`one of ${O.join(", ")}, or ${Y}`}}if(_==null)K+=`. Received ${_}`;else if(typeof _==="function"&&_.name)K+=`. Received function ${_.name}`;else if(typeof _==="object"){var f;if((f=_.constructor)!==null&&f!==void 0&&f.name)K+=`. Received an instance of ${_.constructor.name}`;else{let Y=h5(_,{depth:-1});K+=`. Received ${Y}`}}else{let Y=h5(_,{colors:!1});if(Y.length>25)Y=`${Y.slice(0,25)}...`;K+=`. Received type ${typeof _} (${Y})`}return K},TypeError);d6("ERR_INVALID_ARG_VALUE",($,q,_="is invalid")=>{let K=h5(q);if(K.length>128)K=K.slice(0,128)+"...";return`The ${$.includes(".")?"property":"argument"} '${$}' ${_}. Received ${K}`},TypeError);d6("ERR_INVALID_RETURN_VALUE",($,q,_)=>{var K;let P=_!==null&&_!==void 0&&(K=_.constructor)!==null&&K!==void 0&&K.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${$} to be returned from the "${q}" function but got ${P}.`},TypeError);d6("ERR_MISSING_ARGS",(...$)=>{P4($.length>0,"At least one arg needs to be specified");let q,_=$.length;switch($=(Array.isArray($)?$:[$]).map((K)=>`"${K}"`).join(" or "),_){case 1:q+=`The ${$[0]} argument`;break;case 2:q+=`The ${$[0]} and ${$[1]} arguments`;break;default:{let K=$.pop();q+=`The ${$.join(", ")}, and ${K} arguments`}break}return`${q} must be specified`},TypeError);d6("ERR_OUT_OF_RANGE",($,q,_)=>{P4(q,'Missing "range" argument');let K;if(Number.isInteger(_)&&Math.abs(_)>4294967296)K=Hr(String(_));else if(typeof _==="bigint"){K=String(_);let P=BigInt(2)**BigInt(32);if(_>P||_<-P)K=Hr(K);K+="n"}else K=h5(_);return`The value of "${$}" is out of range. It must be ${q}. Received ${K}`},RangeError);d6("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);d6("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);d6("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);d6("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);d6("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);d6("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);d6("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);d6("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);d6("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);d6("ERR_STREAM_WRITE_AFTER_END","write after end",Error);d6("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);kr.exports={AbortError:hr,aggregateTwoErrors:Yr(vY$),hideStackFrames:Yr,codes:k5}});var Zr=y((Gr,C3)=>{Object.defineProperty(Gr,"__esModule",{value:!0});var Dr=new WeakMap,QH=new WeakMap;function F$($){let q=Dr.get($);return console.assert(q!=null,"'this' is expected an Event object, but got",$),q}function Tr($){if($.passiveListener!=null){if(typeof console!=="undefined"&&typeof console.error==="function")console.error("Unable to preventDefault inside passive event listener invocation.",$.passiveListener);return}if(!$.event.cancelable)return;if($.canceled=!0,typeof $.event.preventDefault==="function")$.event.preventDefault()}function U7($,q){Dr.set(this,{eventTarget:$,event:q,eventPhase:2,currentTarget:$,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:q.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let _=Object.keys(q);for(let K=0;K<_.length;++K){let P=_[K];if(!(P in this))Object.defineProperty(this,P,pr(P))}}U7.prototype={get type(){return F$(this).event.type},get target(){return F$(this).eventTarget},get currentTarget(){return F$(this).currentTarget},composedPath(){let $=F$(this).currentTarget;if($==null)return[];return[$]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return F$(this).eventPhase},stopPropagation(){let $=F$(this);if($.stopped=!0,typeof $.event.stopPropagation==="function")$.event.stopPropagation()},stopImmediatePropagation(){let $=F$(this);if($.stopped=!0,$.immediateStopped=!0,typeof $.event.stopImmediatePropagation==="function")$.event.stopImmediatePropagation()},get bubbles(){return Boolean(F$(this).event.bubbles)},get cancelable(){return Boolean(F$(this).event.cancelable)},preventDefault(){Tr(F$(this))},get defaultPrevented(){return F$(this).canceled},get composed(){return Boolean(F$(this).event.composed)},get timeStamp(){return F$(this).timeStamp},get srcElement(){return F$(this).eventTarget},get cancelBubble(){return F$(this).stopped},set cancelBubble($){if(!$)return;let q=F$(this);if(q.stopped=!0,typeof q.event.cancelBubble==="boolean")q.event.cancelBubble=!0},get returnValue(){return!F$(this).canceled},set returnValue($){if(!$)Tr(F$(this))},initEvent(){}};Object.defineProperty(U7.prototype,"constructor",{value:U7,configurable:!0,writable:!0});if(typeof window!=="undefined"&&typeof window.Event!=="undefined")Object.setPrototypeOf(U7.prototype,window.Event.prototype),QH.set(window.Event.prototype,U7);function pr($){return{get(){return F$(this).event[$]},set(q){F$(this).event[$]=q},configurable:!0,enumerable:!0}}function HY$($){return{value(){let q=F$(this).event;return q[$].apply(q,arguments)},configurable:!0,enumerable:!0}}function YY$($,q){let _=Object.keys(q);if(_.length===0)return $;function K(P,w){$.call(this,P,w)}K.prototype=Object.create($.prototype,{constructor:{value:K,configurable:!0,writable:!0}});for(let P=0;P<_.length;++P){let w=_[P];if(!(w in $.prototype)){let f=typeof Object.getOwnPropertyDescriptor(q,w).value==="function";Object.defineProperty(K.prototype,w,f?HY$(w):pr(w))}}return K}function yr($){if($==null||$===Object.prototype)return U7;let q=QH.get($);if(q==null)q=YY$(yr(Object.getPrototypeOf($)),$),QH.set($,q);return q}function hY$($,q){return new(yr(Object.getPrototypeOf(q)))($,q)}function kY$($){return F$($).immediateStopped}function TY$($,q){F$($).eventPhase=q}function AY$($,q){F$($).currentTarget=q}function Ar($,q){F$($).passiveListener=q}var Sr=new WeakMap,Wr=1,Jr=2,T5=3;function A5($){return $!==null&&typeof $==="object"}function L3($){let q=Sr.get($);if(q==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return q}function WY$($){return{get(){let _=L3(this).get($);while(_!=null){if(_.listenerType===T5)return _.listener;_=_.next}return null},set(q){if(typeof q!=="function"&&!A5(q))q=null;let _=L3(this),K=null,P=_.get($);while(P!=null){if(P.listenerType===T5)if(K!==null)K.next=P.next;else if(P.next!==null)_.set($,P.next);else _.delete($);else K=P;P=P.next}if(q!==null){let w={listener:q,listenerType:T5,passive:!1,once:!1,next:null};if(K===null)_.set($,w);else K.next=w}},configurable:!0,enumerable:!0}}function $2($,q){Object.defineProperty($,`on${q}`,WY$(q))}function Xr($){function q(){Nq.call(this)}q.prototype=Object.create(Nq.prototype,{constructor:{value:q,configurable:!0,writable:!0}});for(let _=0;_<$.length;++_)$2(q.prototype,$[_]);return q}function Nq(){if(this instanceof Nq){Sr.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return Xr(arguments[0]);if(arguments.length>0){let $=new Array(arguments.length);for(let q=0;q<arguments.length;++q)$[q]=arguments[q];return Xr($)}throw new TypeError("Cannot call a class as a function")}Nq.prototype={addEventListener($,q,_){if(q==null)return;if(typeof q!=="function"&&!A5(q))throw new TypeError("'listener' should be a function or an object.");let K=L3(this),P=A5(_),O=(P?Boolean(_.capture):Boolean(_))?Wr:Jr,f={listener:q,listenerType:O,passive:P&&Boolean(_.passive),once:P&&Boolean(_.once),next:null},Y=K.get($);if(Y===void 0){K.set($,f);return}let h=null;while(Y!=null){if(Y.listener===q&&Y.listenerType===O)return;h=Y,Y=Y.next}h.next=f},removeEventListener($,q,_){if(q==null)return;let K=L3(this),w=(A5(_)?Boolean(_.capture):Boolean(_))?Wr:Jr,O=null,f=K.get($);while(f!=null){if(f.listener===q&&f.listenerType===w){if(O!==null)O.next=f.next;else if(f.next!==null)K.set($,f.next);else K.delete($);return}O=f,f=f.next}},dispatchEvent($){if($==null||typeof $.type!=="string")throw new TypeError('"event.type" should be a string.');let q=L3(this),_=$.type,K=q.get(_);if(K==null)return!0;let P=hY$(this,$),w=null;while(K!=null){if(K.once)if(w!==null)w.next=K.next;else if(K.next!==null)q.set(_,K.next);else q.delete(_);else w=K;if(Ar(P,K.passive?K.listener:null),typeof K.listener==="function")try{K.listener.call(this,P)}catch(O){if(typeof console!=="undefined"&&typeof console.error==="function")console.error(O)}else if(K.listenerType!==T5&&typeof K.listener.handleEvent==="function")K.listener.handleEvent(P);if(kY$(P))break;K=K.next}return Ar(P,null),TY$(P,0),AY$(P,null),!P.defaultPrevented}};Object.defineProperty(Nq.prototype,"constructor",{value:Nq,configurable:!0,writable:!0});if(typeof window!=="undefined"&&typeof window.EventTarget!=="undefined")Object.setPrototypeOf(Nq.prototype,window.EventTarget.prototype);Gr.defineEventAttribute=$2;Gr.EventTarget=Nq;Gr.default=Nq;C3.exports=Nq;C3.exports.EventTarget=C3.exports.default=Nq;C3.exports.defineEventAttribute=$2});var Q7=y((Er,n3)=>{Object.defineProperty(Er,"__esModule",{value:!0});var q2=Zr();class j4 extends q2.EventTarget{constructor(){super();throw new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let $=W5.get(this);if(typeof $!=="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return $}}q2.defineEventAttribute(j4.prototype,"abort");function pY$(){let $=Object.create(j4.prototype);return q2.EventTarget.call($),W5.set($,!1),$}function yY$($){if(W5.get($)!==!1)return;W5.set($,!0),$.dispatchEvent({type:"abort"})}var W5=new WeakMap;Object.defineProperties(j4.prototype,{aborted:{enumerable:!0}});if(typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(j4.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class w4{constructor(){mr.set(this,pY$())}get signal(){return Nr(this)}abort(){yY$(Nr(this))}}var mr=new WeakMap;function Nr($){let q=mr.get($);if(q==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${$===null?"null":typeof $}`);return q}Object.defineProperties(w4.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});if(typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(w4.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});Er.AbortController=w4;Er.AbortSignal=j4;Er.default=w4;n3.exports=w4;n3.exports.AbortController=n3.exports.default=w4;n3.exports.AbortSignal=j4});var v8=y((jC$,K2)=>{var NY$=i("buffer"),{format:mY$,inspect:EY$}=UH(),{codes:{ERR_INVALID_ARG_TYPE:_2}}=e6(),{kResistStopPropagation:uY$,AggregateError:RY$,SymbolDispose:LY$}=K6(),CY$=globalThis.AbortSignal||Q7().AbortSignal,nY$=globalThis.AbortController||Q7().AbortController,rY$=Object.getPrototypeOf(async function(){}).constructor,ur=globalThis.Blob||NY$.Blob,VY$=typeof ur!=="undefined"?function $(q){return q instanceof ur}:function $(q){return!1},Rr=($,q)=>{if($!==void 0&&($===null||typeof $!=="object"||!("aborted"in $)))throw new _2(q,"AbortSignal",$)},xY$=($,q)=>{if(typeof $!=="function")throw new _2(q,"Function",$)};K2.exports={AggregateError:RY$,kEmptyObject:Object.freeze({}),once($){let q=!1;return function(..._){if(q)return;q=!0,$.apply(this,_)}},createDeferredPromise:function(){let $,q;return{promise:new Promise((K,P)=>{$=K,q=P}),resolve:$,reject:q}},promisify($){return new Promise((q,_)=>{$((K,...P)=>{if(K)return _(K);return q(...P)})})},debuglog(){return function(){}},format:mY$,inspect:EY$,types:{isAsyncFunction($){return $ instanceof rY$},isArrayBufferView($){return ArrayBuffer.isView($)}},isBlob:VY$,deprecate($,q){return $},addAbortListener:i("events").addAbortListener||function $(q,_){if(q===void 0)throw new _2("signal","AbortSignal",q);Rr(q,"signal"),xY$(_,"listener");let K;if(q.aborted)queueMicrotask(()=>_());else q.addEventListener("abort",_,{__proto__:null,once:!0,[uY$]:!0}),K=()=>{q.removeEventListener("abort",_)};return{__proto__:null,[LY$](){var P;(P=K)===null||P===void 0||P()}}},AbortSignalAny:CY$.any||function $(q){if(q.length===1)return q[0];let _=new nY$,K=()=>_.abort();return q.forEach((P)=>{Rr(P,"signals"),P.addEventListener("abort",K,{once:!0})}),_.signal.addEventListener("abort",()=>{q.forEach((P)=>P.removeEventListener("abort",K))},{once:!0}),_.signal}};K2.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var qP=y((wC$,ir)=>{var{ArrayIsArray:j2,ArrayPrototypeIncludes:rr,ArrayPrototypeJoin:Vr,ArrayPrototypeMap:dY$,NumberIsInteger:w2,NumberIsNaN:bY$,NumberMAX_SAFE_INTEGER:oY$,NumberMIN_SAFE_INTEGER:iY$,NumberParseInt:gY$,ObjectPrototypeHasOwnProperty:aY$,RegExpPrototypeExec:xr,String:cY$,StringPrototypeToUpperCase:IY$,StringPrototypeTrim:lY$}=K6(),{hideStackFrames:qq,codes:{ERR_SOCKET_BAD_PORT:tY$,ERR_INVALID_ARG_TYPE:B6,ERR_INVALID_ARG_VALUE:$P,ERR_OUT_OF_RANGE:O4,ERR_UNKNOWN_SIGNAL:Lr}}=e6(),{normalizeEncoding:sY$}=v8(),{isAsyncFunction:eY$,isArrayBufferView:BY$}=v8().types,Cr={};function FY$($){return $===($|0)}function UY$($){return $===$>>>0}var QY$=/^[0-7]+$/,$h$="must be a 32-bit unsigned integer or an octal string";function qh$($,q,_){if(typeof $==="undefined")$=_;if(typeof $==="string"){if(xr(QY$,$)===null)throw new $P(q,$,$h$);$=gY$($,8)}return dr($,q),$}var _h$=qq(($,q,_=iY$,K=oY$)=>{if(typeof $!=="number")throw new B6(q,"number",$);if(!w2($))throw new O4(q,"an integer",$);if($<_||$>K)throw new O4(q,`>= ${_} && <= ${K}`,$)}),Kh$=qq(($,q,_=-2147483648,K=2147483647)=>{if(typeof $!=="number")throw new B6(q,"number",$);if(!w2($))throw new O4(q,"an integer",$);if($<_||$>K)throw new O4(q,`>= ${_} && <= ${K}`,$)}),dr=qq(($,q,_=!1)=>{if(typeof $!=="number")throw new B6(q,"number",$);if(!w2($))throw new O4(q,"an integer",$);let K=_?1:0,P=4294967295;if($<K||$>P)throw new O4(q,`>= ${K} && <= ${P}`,$)});function O2($,q){if(typeof $!=="string")throw new B6(q,"string",$)}function Ph$($,q,_=void 0,K){if(typeof $!=="number")throw new B6(q,"number",$);if(_!=null&&$<_||K!=null&&$>K||(_!=null||K!=null)&&bY$($))throw new O4(q,`${_!=null?`>= ${_}`:""}${_!=null&&K!=null?" && ":""}${K!=null?`<= ${K}`:""}`,$)}var jh$=qq(($,q,_)=>{if(!rr(_,$)){let P="must be one of: "+Vr(dY$(_,(w)=>typeof w==="string"?`'${w}'`:cY$(w)),", ");throw new $P(q,$,P)}});function br($,q){if(typeof $!=="boolean")throw new B6(q,"boolean",$)}function P2($,q,_){return $==null||!aY$($,q)?_:$[q]}var wh$=qq(($,q,_=null)=>{let K=P2(_,"allowArray",!1),P=P2(_,"allowFunction",!1);if(!P2(_,"nullable",!1)&&$===null||!K&&j2($)||typeof $!=="object"&&(!P||typeof $!=="function"))throw new B6(q,"Object",$)}),Oh$=qq(($,q)=>{if($!=null&&typeof $!=="object"&&typeof $!=="function")throw new B6(q,"a dictionary",$)}),J5=qq(($,q,_=0)=>{if(!j2($))throw new B6(q,"Array",$);if($.length<_){let K=`must be longer than ${_}`;throw new $P(q,$,K)}});function zh$($,q){J5($,q);for(let _=0;_<$.length;_++)O2($[_],`${q}[${_}]`)}function fh$($,q){J5($,q);for(let _=0;_<$.length;_++)br($[_],`${q}[${_}]`)}function Mh$($,q){J5($,q);for(let _=0;_<$.length;_++){let K=$[_],P=`${q}[${_}]`;if(K==null)throw new B6(P,"AbortSignal",K);or(K,P)}}function vh$($,q="signal"){if(O2($,q),Cr[$]===void 0){if(Cr[IY$($)]!==void 0)throw new Lr($+" (signals must use all capital letters)");throw new Lr($)}}var Hh$=qq(($,q="buffer")=>{if(!BY$($))throw new B6(q,["Buffer","TypedArray","DataView"],$)});function Yh$($,q){let _=sY$(q),K=$.length;if(_==="hex"&&K%2!==0)throw new $P("encoding",q,`is invalid for data of length ${K}`)}function hh$($,q="Port",_=!0){if(typeof $!=="number"&&typeof $!=="string"||typeof $==="string"&&lY$($).length===0||+$!==+$>>>0||$>65535||$===0&&!_)throw new tY$(q,$,_);return $|0}var or=qq(($,q)=>{if($!==void 0&&($===null||typeof $!=="object"||!("aborted"in $)))throw new B6(q,"AbortSignal",$)}),kh$=qq(($,q)=>{if(typeof $!=="function")throw new B6(q,"Function",$)}),Th$=qq(($,q)=>{if(typeof $!=="function"||eY$($))throw new B6(q,"Function",$)}),Ah$=qq(($,q)=>{if($!==void 0)throw new B6(q,"undefined",$)});function Wh$($,q,_){if(!rr(_,$))throw new B6(q,`('${Vr(_,"|")}')`,$)}var Jh$=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function nr($,q){if(typeof $==="undefined"||!xr(Jh$,$))throw new $P(q,$,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Xh$($){if(typeof $==="string")return nr($,"hints"),$;else if(j2($)){let q=$.length,_="";if(q===0)return _;for(let K=0;K<q;K++){let P=$[K];if(nr(P,"hints"),_+=P,K!==q-1)_+=", "}return _}throw new $P("hints",$,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}ir.exports={isInt32:FY$,isUint32:UY$,parseFileMode:qh$,validateArray:J5,validateStringArray:zh$,validateBooleanArray:fh$,validateAbortSignalArray:Mh$,validateBoolean:br,validateBuffer:Hh$,validateDictionary:Oh$,validateEncoding:Yh$,validateFunction:kh$,validateInt32:Kh$,validateInteger:_h$,validateNumber:Ph$,validateObject:wh$,validateOneOf:jh$,validatePlainFunction:Th$,validatePort:hh$,validateSignalName:vh$,validateString:O2,validateUint32:dr,validateUndefined:Ah$,validateUnion:Wh$,validateAbortSignal:or,validateLinkHeaderValue:Xh$}});var WK=y((OC$,gr)=>{gr.exports=global.process});var K_=y((zC$,KV)=>{var{SymbolAsyncIterator:ar,SymbolIterator:cr,SymbolFor:z4}=K6(),Ir=z4("nodejs.stream.destroyed"),lr=z4("nodejs.stream.errored"),z2=z4("nodejs.stream.readable"),f2=z4("nodejs.stream.writable"),tr=z4("nodejs.stream.disturbed"),Dh$=z4("nodejs.webstream.isClosedPromise"),ph$=z4("nodejs.webstream.controllerErrorFunction");function X5($,q=!1){var _;return!!($&&typeof $.pipe==="function"&&typeof $.on==="function"&&(!q||typeof $.pause==="function"&&typeof $.resume==="function")&&(!$._writableState||((_=$._readableState)===null||_===void 0?void 0:_.readable)!==!1)&&(!$._writableState||$._readableState))}function D5($){var q;return!!($&&typeof $.write==="function"&&typeof $.on==="function"&&(!$._readableState||((q=$._writableState)===null||q===void 0?void 0:q.writable)!==!1))}function yh$($){return!!($&&typeof $.pipe==="function"&&$._readableState&&typeof $.on==="function"&&typeof $.write==="function")}function __($){return $&&($._readableState||$._writableState||typeof $.write==="function"&&typeof $.on==="function"||typeof $.pipe==="function"&&typeof $.on==="function")}function sr($){return!!($&&!__($)&&typeof $.pipeThrough==="function"&&typeof $.getReader==="function"&&typeof $.cancel==="function")}function er($){return!!($&&!__($)&&typeof $.getWriter==="function"&&typeof $.abort==="function")}function Br($){return!!($&&!__($)&&typeof $.readable==="object"&&typeof $.writable==="object")}function Sh$($){return sr($)||er($)||Br($)}function Gh$($,q){if($==null)return!1;if(q===!0)return typeof $[ar]==="function";if(q===!1)return typeof $[cr]==="function";return typeof $[ar]==="function"||typeof $[cr]==="function"}function p5($){if(!__($))return null;let{_writableState:q,_readableState:_}=$,K=q||_;return!!($.destroyed||$[Ir]||K!==null&&K!==void 0&&K.destroyed)}function Fr($){if(!D5($))return null;if($.writableEnded===!0)return!0;let q=$._writableState;if(q!==null&&q!==void 0&&q.errored)return!1;if(typeof(q===null||q===void 0?void 0:q.ended)!=="boolean")return null;return q.ended}function Zh$($,q){if(!D5($))return null;if($.writableFinished===!0)return!0;let _=$._writableState;if(_!==null&&_!==void 0&&_.errored)return!1;if(typeof(_===null||_===void 0?void 0:_.finished)!=="boolean")return null;return!!(_.finished||q===!1&&_.ended===!0&&_.length===0)}function Nh$($){if(!X5($))return null;if($.readableEnded===!0)return!0;let q=$._readableState;if(!q||q.errored)return!1;if(typeof(q===null||q===void 0?void 0:q.ended)!=="boolean")return null;return q.ended}function Ur($,q){if(!X5($))return null;let _=$._readableState;if(_!==null&&_!==void 0&&_.errored)return!1;if(typeof(_===null||_===void 0?void 0:_.endEmitted)!=="boolean")return null;return!!(_.endEmitted||q===!1&&_.ended===!0&&_.length===0)}function Qr($){if($&&$[z2]!=null)return $[z2];if(typeof($===null||$===void 0?void 0:$.readable)!=="boolean")return null;if(p5($))return!1;return X5($)&&$.readable&&!Ur($)}function $V($){if($&&$[f2]!=null)return $[f2];if(typeof($===null||$===void 0?void 0:$.writable)!=="boolean")return null;if(p5($))return!1;return D5($)&&$.writable&&!Fr($)}function mh$($,q){if(!__($))return null;if(p5($))return!0;if((q===null||q===void 0?void 0:q.readable)!==!1&&Qr($))return!1;if((q===null||q===void 0?void 0:q.writable)!==!1&&$V($))return!1;return!0}function Eh$($){var q,_;if(!__($))return null;if($.writableErrored)return $.writableErrored;return(q=(_=$._writableState)===null||_===void 0?void 0:_.errored)!==null&&q!==void 0?q:null}function uh$($){var q,_;if(!__($))return null;if($.readableErrored)return $.readableErrored;return(q=(_=$._readableState)===null||_===void 0?void 0:_.errored)!==null&&q!==void 0?q:null}function Rh$($){if(!__($))return null;if(typeof $.closed==="boolean")return $.closed;let{_writableState:q,_readableState:_}=$;if(typeof(q===null||q===void 0?void 0:q.closed)==="boolean"||typeof(_===null||_===void 0?void 0:_.closed)==="boolean")return(q===null||q===void 0?void 0:q.closed)||(_===null||_===void 0?void 0:_.closed);if(typeof $._closed==="boolean"&&qV($))return $._closed;return null}function qV($){return typeof $._closed==="boolean"&&typeof $._defaultKeepAlive==="boolean"&&typeof $._removedConnection==="boolean"&&typeof $._removedContLen==="boolean"}function _V($){return typeof $._sent100==="boolean"&&qV($)}function Lh$($){var q;return typeof $._consuming==="boolean"&&typeof $._dumped==="boolean"&&((q=$.req)===null||q===void 0?void 0:q.upgradeOrConnect)===void 0}function Ch$($){if(!__($))return null;let{_writableState:q,_readableState:_}=$,K=q||_;return!K&&_V($)||!!(K&&K.autoDestroy&&K.emitClose&&K.closed===!1)}function nh$($){var q;return!!($&&((q=$[tr])!==null&&q!==void 0?q:$.readableDidRead||$.readableAborted))}function rh$($){var q,_,K,P,w,O,f,Y,h,k;return!!($&&((q=(_=(K=(P=(w=(O=$[lr])!==null&&O!==void 0?O:$.readableErrored)!==null&&w!==void 0?w:$.writableErrored)!==null&&P!==void 0?P:(f=$._readableState)===null||f===void 0?void 0:f.errorEmitted)!==null&&K!==void 0?K:(Y=$._writableState)===null||Y===void 0?void 0:Y.errorEmitted)!==null&&_!==void 0?_:(h=$._readableState)===null||h===void 0?void 0:h.errored)!==null&&q!==void 0?q:(k=$._writableState)===null||k===void 0?void 0:k.errored))}KV.exports={isDestroyed:p5,kIsDestroyed:Ir,isDisturbed:nh$,kIsDisturbed:tr,isErrored:rh$,kIsErrored:lr,isReadable:Qr,kIsReadable:z2,kIsClosedPromise:Dh$,kControllerErrorFunction:ph$,kIsWritable:f2,isClosed:Rh$,isDuplexNodeStream:yh$,isFinished:mh$,isIterable:Gh$,isReadableNodeStream:X5,isReadableStream:sr,isReadableEnded:Nh$,isReadableFinished:Ur,isReadableErrored:uh$,isNodeStream:__,isWebStream:Sh$,isWritable:$V,isWritableNodeStream:D5,isWritableStream:er,isWritableEnded:Fr,isWritableFinished:Zh$,isWritableErrored:Eh$,isServerRequest:Lh$,isServerResponse:_V,willEmitClose:Ch$,isTransformStream:Br}});var C_=y((fC$,h2)=>{var JK=WK(),{AbortError:HV,codes:Vh$}=e6(),{ERR_INVALID_ARG_TYPE:xh$,ERR_STREAM_PREMATURE_CLOSE:PV}=Vh$,{kEmptyObject:v2,once:H2}=v8(),{validateAbortSignal:dh$,validateFunction:bh$,validateObject:oh$,validateBoolean:ih$}=qP(),{Promise:gh$,PromisePrototypeThen:ah$,SymbolDispose:YV}=K6(),{isClosed:ch$,isReadable:jV,isReadableNodeStream:M2,isReadableStream:Ih$,isReadableFinished:wV,isReadableErrored:OV,isWritable:zV,isWritableNodeStream:fV,isWritableStream:lh$,isWritableFinished:MV,isWritableErrored:vV,isNodeStream:th$,willEmitClose:sh$,kIsClosedPromise:eh$}=K_(),_P;function Bh$($){return $.setHeader&&typeof $.abort==="function"}var Y2=()=>{};function hV($,q,_){var K,P;if(arguments.length===2)_=q,q=v2;else if(q==null)q=v2;else oh$(q,"options");if(bh$(_,"callback"),dh$(q.signal,"options.signal"),_=H2(_),Ih$($)||lh$($))return Fh$($,q,_);if(!th$($))throw new xh$("stream",["ReadableStream","WritableStream","Stream"],$);let w=(K=q.readable)!==null&&K!==void 0?K:M2($),O=(P=q.writable)!==null&&P!==void 0?P:fV($),f=$._writableState,Y=$._readableState,h=()=>{if(!$.writable)p()},k=sh$($)&&M2($)===w&&fV($)===O,T=MV($,!1),p=()=>{if(T=!0,$.destroyed)k=!1;if(k&&(!$.readable||w))return;if(!w||G)_.call($)},G=wV($,!1),Z=()=>{if(G=!0,$.destroyed)k=!1;if(k&&(!$.writable||O))return;if(!O||T)_.call($)},X=(W)=>{_.call($,W)},C=ch$($),N=()=>{C=!0;let W=vV($)||OV($);if(W&&typeof W!=="boolean")return _.call($,W);if(w&&!G&&M2($,!0)){if(!wV($,!1))return _.call($,new PV)}if(O&&!T){if(!MV($,!1))return _.call($,new PV)}_.call($)},L=()=>{C=!0;let W=vV($)||OV($);if(W&&typeof W!=="boolean")return _.call($,W);_.call($)},m=()=>{$.req.on("finish",p)};if(Bh$($)){if($.on("complete",p),!k)$.on("abort",N);if($.req)m();else $.on("request",m)}else if(O&&!f)$.on("end",h),$.on("close",h);if(!k&&typeof $.aborted==="boolean")$.on("aborted",N);if($.on("end",Z),$.on("finish",p),q.error!==!1)$.on("error",X);if($.on("close",N),C)JK.nextTick(N);else if(f!==null&&f!==void 0&&f.errorEmitted||Y!==null&&Y!==void 0&&Y.errorEmitted){if(!k)JK.nextTick(L)}else if(!w&&(!k||jV($))&&(T||zV($)===!1))JK.nextTick(L);else if(!O&&(!k||zV($))&&(G||jV($)===!1))JK.nextTick(L);else if(Y&&$.req&&$.aborted)JK.nextTick(L);let E=()=>{if(_=Y2,$.removeListener("aborted",N),$.removeListener("complete",p),$.removeListener("abort",N),$.removeListener("request",m),$.req)$.req.removeListener("finish",p);$.removeListener("end",h),$.removeListener("close",h),$.removeListener("finish",p),$.removeListener("end",Z),$.removeListener("error",X),$.removeListener("close",N)};if(q.signal&&!C){let W=()=>{let V=_;E(),V.call($,new HV(void 0,{cause:q.signal.reason}))};if(q.signal.aborted)JK.nextTick(W);else{_P=_P||v8().addAbortListener;let V=_P(q.signal,W),n=_;_=H2((...b)=>{V[YV](),n.apply($,b)})}}return E}function Fh$($,q,_){let K=!1,P=Y2;if(q.signal)if(P=()=>{K=!0,_.call($,new HV(void 0,{cause:q.signal.reason}))},q.signal.aborted)JK.nextTick(P);else{_P=_P||v8().addAbortListener;let O=_P(q.signal,P),f=_;_=H2((...Y)=>{O[YV](),f.apply($,Y)})}let w=(...O)=>{if(!K)JK.nextTick(()=>_.apply($,O))};return ah$($[eh$].promise,w,w),Y2}function Uh$($,q){var _;let K=!1;if(q===null)q=v2;if((_=q)!==null&&_!==void 0&&_.cleanup)ih$(q.cleanup,"cleanup"),K=q.cleanup;return new gh$((P,w)=>{let O=hV($,q,(f)=>{if(K)O();if(f)w(f);else P()})})}h2.exports=hV;h2.exports.finished=Uh$});var f4=y((MC$,pV)=>{var P_=WK(),{aggregateTwoErrors:Qh$,codes:{ERR_MULTIPLE_CALLBACK:$k$},AbortError:qk$}=e6(),{Symbol:AV}=K6(),{kIsDestroyed:_k$,isDestroyed:Kk$,isFinished:Pk$,isServerRequest:jk$}=K_(),WV=AV("kDestroy"),k2=AV("kConstruct");function JV($,q,_){if($){if($.stack,q&&!q.errored)q.errored=$;if(_&&!_.errored)_.errored=$}}function wk$($,q){let _=this._readableState,K=this._writableState,P=K||_;if(K!==null&&K!==void 0&&K.destroyed||_!==null&&_!==void 0&&_.destroyed){if(typeof q==="function")q();return this}if(JV($,K,_),K)K.destroyed=!0;if(_)_.destroyed=!0;if(!P.constructed)this.once(WV,function(w){kV(this,Qh$(w,$),q)});else kV(this,$,q);return this}function kV($,q,_){let K=!1;function P(w){if(K)return;K=!0;let{_readableState:O,_writableState:f}=$;if(JV(w,f,O),f)f.closed=!0;if(O)O.closed=!0;if(typeof _==="function")_(w);if(w)P_.nextTick(Ok$,$,w);else P_.nextTick(XV,$)}try{$._destroy(q||null,P)}catch(w){P(w)}}function Ok$($,q){T2($,q),XV($)}function XV($){let{_readableState:q,_writableState:_}=$;if(_)_.closeEmitted=!0;if(q)q.closeEmitted=!0;if(_!==null&&_!==void 0&&_.emitClose||q!==null&&q!==void 0&&q.emitClose)$.emit("close")}function T2($,q){let{_readableState:_,_writableState:K}=$;if(K!==null&&K!==void 0&&K.errorEmitted||_!==null&&_!==void 0&&_.errorEmitted)return;if(K)K.errorEmitted=!0;if(_)_.errorEmitted=!0;$.emit("error",q)}function zk$(){let $=this._readableState,q=this._writableState;if($)$.constructed=!0,$.closed=!1,$.closeEmitted=!1,$.destroyed=!1,$.errored=null,$.errorEmitted=!1,$.reading=!1,$.ended=$.readable===!1,$.endEmitted=$.readable===!1;if(q)q.constructed=!0,q.destroyed=!1,q.closed=!1,q.closeEmitted=!1,q.errored=null,q.errorEmitted=!1,q.finalCalled=!1,q.prefinished=!1,q.ended=q.writable===!1,q.ending=q.writable===!1,q.finished=q.writable===!1}function A2($,q,_){let{_readableState:K,_writableState:P}=$;if(P!==null&&P!==void 0&&P.destroyed||K!==null&&K!==void 0&&K.destroyed)return this;if(K!==null&&K!==void 0&&K.autoDestroy||P!==null&&P!==void 0&&P.autoDestroy)$.destroy(q);else if(q){if(q.stack,P&&!P.errored)P.errored=q;if(K&&!K.errored)K.errored=q;if(_)P_.nextTick(T2,$,q);else T2($,q)}}function fk$($,q){if(typeof $._construct!=="function")return;let{_readableState:_,_writableState:K}=$;if(_)_.constructed=!1;if(K)K.constructed=!1;if($.once(k2,q),$.listenerCount(k2)>1)return;P_.nextTick(Mk$,$)}function Mk$($){let q=!1;function _(K){if(q){A2($,K!==null&&K!==void 0?K:new $k$);return}q=!0;let{_readableState:P,_writableState:w}=$,O=w||P;if(P)P.constructed=!0;if(w)w.constructed=!0;if(O.destroyed)$.emit(WV,K);else if(K)A2($,K,!0);else P_.nextTick(vk$,$)}try{$._construct((K)=>{P_.nextTick(_,K)})}catch(K){P_.nextTick(_,K)}}function vk$($){$.emit(k2)}function TV($){return($===null||$===void 0?void 0:$.setHeader)&&typeof $.abort==="function"}function DV($){$.emit("close")}function Hk$($,q){$.emit("error",q),P_.nextTick(DV,$)}function Yk$($,q){if(!$||Kk$($))return;if(!q&&!Pk$($))q=new qk$;if(jk$($))$.socket=null,$.destroy(q);else if(TV($))$.abort();else if(TV($.req))$.req.abort();else if(typeof $.destroy==="function")$.destroy(q);else if(typeof $.close==="function")$.close();else if(q)P_.nextTick(Hk$,$,q);else P_.nextTick(DV,$);if(!$.destroyed)$[_k$]=!0}pV.exports={construct:fk$,destroyer:Yk$,destroy:wk$,undestroy:zk$,errorOrDestroy:A2}});var G5=y((vC$,SV)=>{var{ArrayIsArray:hk$,ObjectSetPrototypeOf:yV}=K6(),{EventEmitter:y5}=i("events");function S5($){y5.call(this,$)}yV(S5.prototype,y5.prototype);yV(S5,y5);S5.prototype.pipe=function($,q){let _=this;function K(k){if($.writable&&$.write(k)===!1&&_.pause)_.pause()}_.on("data",K);function P(){if(_.readable&&_.resume)_.resume()}if($.on("drain",P),!$._isStdio&&(!q||q.end!==!1))_.on("end",O),_.on("close",f);let w=!1;function O(){if(w)return;w=!0,$.end()}function f(){if(w)return;if(w=!0,typeof $.destroy==="function")$.destroy()}function Y(k){if(h(),y5.listenerCount(this,"error")===0)this.emit("error",k)}W2(_,"error",Y),W2($,"error",Y);function h(){_.removeListener("data",K),$.removeListener("drain",P),_.removeListener("end",O),_.removeListener("close",f),_.removeListener("error",Y),$.removeListener("error",Y),_.removeListener("end",h),_.removeListener("close",h),$.removeListener("close",h)}return _.on("end",h),_.on("close",h),$.on("close",h),$.emit("pipe",_),$};function W2($,q,_){if(typeof $.prependListener==="function")return $.prependListener(q,_);if(!$._events||!$._events[q])$.on(q,_);else if(hk$($._events[q]))$._events[q].unshift(_);else $._events[q]=[_,$._events[q]]}SV.exports={Stream:S5,prependListener:W2}});var r3=y((Dk$,Z5)=>{var{SymbolDispose:kk$}=K6(),{AbortError:GV,codes:Tk$}=e6(),{isNodeStream:ZV,isWebStream:Ak$,kControllerErrorFunction:Wk$}=K_(),Jk$=C_(),{ERR_INVALID_ARG_TYPE:NV}=Tk$,J2,Xk$=($,q)=>{if(typeof $!=="object"||!("aborted"in $))throw new NV(q,"AbortSignal",$)};Dk$.addAbortSignal=function $(q,_){if(Xk$(q,"signal"),!ZV(_)&&!Ak$(_))throw new NV("stream",["ReadableStream","WritableStream","Stream"],_);return Dk$.addAbortSignalNoValidate(q,_)};Dk$.addAbortSignalNoValidate=function($,q){if(typeof $!=="object"||!("aborted"in $))return q;let _=ZV(q)?()=>{q.destroy(new GV(void 0,{cause:$.reason}))}:()=>{q[Wk$](new GV(void 0,{cause:$.reason}))};if($.aborted)_();else{J2=J2||v8().addAbortListener;let K=J2($,_);Jk$(q,K[kk$])}return q}});var uV=y((HC$,EV)=>{var{StringPrototypeSlice:mV,SymbolIterator:Sk$,TypedArrayPrototypeSet:N5,Uint8Array:Gk$}=K6(),{Buffer:X2}=i("buffer"),{inspect:Zk$}=v8();EV.exports=class ${constructor(){this.head=null,this.tail=null,this.length=0}push(q){let _={data:q,next:null};if(this.length>0)this.tail.next=_;else this.head=_;this.tail=_,++this.length}unshift(q){let _={data:q,next:this.head};if(this.length===0)this.tail=_;this.head=_,++this.length}shift(){if(this.length===0)return;let q=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;return--this.length,q}clear(){this.head=this.tail=null,this.length=0}join(q){if(this.length===0)return"";let _=this.head,K=""+_.data;while((_=_.next)!==null)K+=q+_.data;return K}concat(q){if(this.length===0)return X2.alloc(0);let _=X2.allocUnsafe(q>>>0),K=this.head,P=0;while(K)N5(_,K.data,P),P+=K.data.length,K=K.next;return _}consume(q,_){let K=this.head.data;if(q<K.length){let P=K.slice(0,q);return this.head.data=K.slice(q),P}if(q===K.length)return this.shift();return _?this._getString(q):this._getBuffer(q)}first(){return this.head.data}*[Sk$](){for(let q=this.head;q;q=q.next)yield q.data}_getString(q){let _="",K=this.head,P=0;do{let w=K.data;if(q>w.length)_+=w,q-=w.length;else{if(q===w.length)if(_+=w,++P,K.next)this.head=K.next;else this.head=this.tail=null;else _+=mV(w,0,q),this.head=K,K.data=mV(w,q);break}++P}while((K=K.next)!==null);return this.length-=P,_}_getBuffer(q){let _=X2.allocUnsafe(q),K=q,P=this.head,w=0;do{let O=P.data;if(q>O.length)N5(_,O,K-q),q-=O.length;else{if(q===O.length)if(N5(_,O,K-q),++w,P.next)this.head=P.next;else this.head=this.tail=null;else N5(_,new Gk$(O.buffer,O.byteOffset,q),K-q),this.head=P,P.data=O.slice(q);break}++w}while((P=P.next)!==null);return this.length-=w,_}[Symbol.for("nodejs.util.inspect.custom")](q,_){return Zk$(this,{..._,depth:0,customInspect:!1})}}});var V3=y((YC$,nV)=>{var{MathFloor:Nk$,NumberIsInteger:mk$}=K6(),{validateInteger:Ek$}=qP(),{ERR_INVALID_ARG_VALUE:uk$}=e6().codes,RV=16384,LV=16;function Rk$($,q,_){return $.highWaterMark!=null?$.highWaterMark:q?$[_]:null}function CV($){return $?LV:RV}function Lk$($,q){if(Ek$(q,"value",0),$)LV=q;else RV=q}function Ck$($,q,_,K){let P=Rk$(q,K,_);if(P!=null){if(!mk$(P)||P<0){let w=K?`options.${_}`:"options.highWaterMark";throw new uk$(w,P)}return Nk$(P)}return CV($.objectMode)}nV.exports={getHighWaterMark:Ck$,getDefaultHighWaterMark:CV,setDefaultHighWaterMark:Lk$}});var VV=y((tk$)=>{var p2=IK().Buffer,rV=p2.isEncoding||function($){switch($=""+$,$&&$.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function nk$($){if(!$)return"utf8";var q;while(!0)switch($){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return $;default:if(q)return;$=(""+$).toLowerCase(),q=!0}}function rk$($){var q=nk$($);if(typeof q!=="string"&&(p2.isEncoding===rV||!rV($)))throw new Error("Unknown encoding: "+$);return q||$}tk$.StringDecoder=x3;function x3($){this.encoding=rk$($);var q;switch(this.encoding){case"utf16le":this.text=ik$,this.end=gk$,q=4;break;case"utf8":this.fillLast=dk$,q=4;break;case"base64":this.text=ak$,this.end=ck$,q=3;break;default:this.write=Ik$,this.end=lk$;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=p2.allocUnsafe(q)}x3.prototype.write=function($){if($.length===0)return"";var q,_;if(this.lastNeed){if(q=this.fillLast($),q===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;if(_<$.length)return q?q+this.text($,_):this.text($,_);return q||""};x3.prototype.end=ok$;x3.prototype.text=bk$;x3.prototype.fillLast=function($){if(this.lastNeed<=$.length)return $.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);$.copy(this.lastChar,this.lastTotal-this.lastNeed,0,$.length),this.lastNeed-=$.length};function D2($){if($<=127)return 0;else if($>>5===6)return 2;else if($>>4===14)return 3;else if($>>3===30)return 4;return $>>6===2?-1:-2}function Vk$($,q,_){var K=q.length-1;if(K<_)return 0;var P=D2(q[K]);if(P>=0){if(P>0)$.lastNeed=P-1;return P}if(--K<_||P===-2)return 0;if(P=D2(q[K]),P>=0){if(P>0)$.lastNeed=P-2;return P}if(--K<_||P===-2)return 0;if(P=D2(q[K]),P>=0){if(P>0)if(P===2)P=0;else $.lastNeed=P-3;return P}return 0}function xk$($,q,_){if((q[0]&192)!==128)return $.lastNeed=0,"";if($.lastNeed>1&&q.length>1){if((q[1]&192)!==128)return $.lastNeed=1,"";if($.lastNeed>2&&q.length>2){if((q[2]&192)!==128)return $.lastNeed=2,""}}}function dk$($){var q=this.lastTotal-this.lastNeed,_=xk$(this,$,q);if(_!==void 0)return _;if(this.lastNeed<=$.length)return $.copy(this.lastChar,q,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);$.copy(this.lastChar,q,0,$.length),this.lastNeed-=$.length}function bk$($,q){var _=Vk$(this,$,q);if(!this.lastNeed)return $.toString("utf8",q);this.lastTotal=_;var K=$.length-(_-this.lastNeed);return $.copy(this.lastChar,0,K),$.toString("utf8",q,K)}function ok$($){var q=$&&$.length?this.write($):"";if(this.lastNeed)return q+"";return q}function ik$($,q){if(($.length-q)%2===0){var _=$.toString("utf16le",q);if(_){var K=_.charCodeAt(_.length-1);if(K>=55296&&K<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=$[$.length-2],this.lastChar[1]=$[$.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=$[$.length-1],$.toString("utf16le",q,$.length-1)}function gk$($){var q=$&&$.length?this.write($):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return q+this.lastChar.toString("utf16le",0,_)}return q}function ak$($,q){var _=($.length-q)%3;if(_===0)return $.toString("base64",q);if(this.lastNeed=3-_,this.lastTotal=3,_===1)this.lastChar[0]=$[$.length-1];else this.lastChar[0]=$[$.length-2],this.lastChar[1]=$[$.length-1];return $.toString("base64",q,$.length-_)}function ck$($){var q=$&&$.length?this.write($):"";if(this.lastNeed)return q+this.lastChar.toString("base64",0,3-this.lastNeed);return q}function Ik$($){return $.toString(this.encoding)}function lk$($){return $&&$.length?this.write($):""}});var y2=y((kC$,oV)=>{var xV=WK(),{PromisePrototypeThen:ek$,SymbolAsyncIterator:dV,SymbolIterator:bV}=K6(),{Buffer:Bk$}=i("buffer"),{ERR_INVALID_ARG_TYPE:Fk$,ERR_STREAM_NULL_VALUES:Uk$}=e6().codes;function Qk$($,q,_){let K;if(typeof q==="string"||q instanceof Bk$)return new $({objectMode:!0,..._,read(){this.push(q),this.push(null)}});let P;if(q&&q[dV])P=!0,K=q[dV]();else if(q&&q[bV])P=!1,K=q[bV]();else throw new Fk$("iterable",["Iterable"],q);let w=new $({objectMode:!0,highWaterMark:1,..._}),O=!1;w._read=function(){if(!O)O=!0,Y()},w._destroy=function(h,k){ek$(f(h),()=>xV.nextTick(k,h),(T)=>xV.nextTick(k,T||h))};async function f(h){let k=h!==void 0&&h!==null,T=typeof K.throw==="function";if(k&&T){let{value:p,done:G}=await K.throw(h);if(await p,G)return}if(typeof K.return==="function"){let{value:p}=await K.return();await p}}async function Y(){for(;;){try{let{value:h,done:k}=P?await K.next():K.next();if(k)w.push(null);else{let T=h&&typeof h.then==="function"?await h:h;if(T===null)throw O=!1,new Uk$;else if(w.push(T))continue;else O=!1}}catch(h){w.destroy(h)}break}}return w}oV.exports=Qk$});var b3=y((TC$,P0)=>{var mq=WK(),{ArrayPrototypeIndexOf:$T$,NumberIsInteger:qT$,NumberIsNaN:_T$,NumberParseInt:KT$,ObjectDefineProperties:R2,ObjectKeys:PT$,ObjectSetPrototypeOf:aV,Promise:cV,SafeSet:jT$,SymbolAsyncDispose:wT$,SymbolAsyncIterator:OT$,Symbol:zT$}=K6();P0.exports=W$;W$.ReadableState=R5;var{EventEmitter:fT$}=i("events"),{Stream:XK,prependListener:MT$}=G5(),{Buffer:S2}=i("buffer"),{addAbortSignal:vT$}=r3(),IV=C_(),S$=v8().debuglog("stream",($)=>{S$=$}),HT$=uV(),jP=f4(),{getHighWaterMark:YT$,getDefaultHighWaterMark:hT$}=V3(),{aggregateTwoErrors:iV,codes:{ERR_INVALID_ARG_TYPE:kT$,ERR_METHOD_NOT_IMPLEMENTED:TT$,ERR_OUT_OF_RANGE:AT$,ERR_STREAM_PUSH_AFTER_EOF:WT$,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:JT$},AbortError:XT$}=e6(),{validateObject:DT$}=qP(),M4=zT$("kPaused"),{StringDecoder:lV}=VV(),pT$=y2();aV(W$.prototype,XK.prototype);aV(W$,XK);var G2=()=>{},{errorOrDestroy:KP}=jP,PP=1,yT$=2,tV=4,d3=8,sV=16,m5=32,E5=64,eV=128,ST$=256,GT$=512,ZT$=1024,E2=2048,u2=4096,NT$=8192,mT$=16384,ET$=32768,BV=65536,uT$=131072,RT$=262144;function D6($){return{enumerable:!1,get(){return(this.state&$)!==0},set(q){if(q)this.state|=$;else this.state&=~$}}}R2(R5.prototype,{objectMode:D6(PP),ended:D6(yT$),endEmitted:D6(tV),reading:D6(d3),constructed:D6(sV),sync:D6(m5),needReadable:D6(E5),emittedReadable:D6(eV),readableListening:D6(ST$),resumeScheduled:D6(GT$),errorEmitted:D6(ZT$),emitClose:D6(E2),autoDestroy:D6(u2),destroyed:D6(NT$),closed:D6(mT$),closeEmitted:D6(ET$),multiAwaitDrain:D6(BV),readingMore:D6(uT$),dataEmitted:D6(RT$)});function R5($,q,_){if(typeof _!=="boolean")_=q instanceof j_();if(this.state=E2|u2|sV|m5,$&&$.objectMode)this.state|=PP;if(_&&$&&$.readableObjectMode)this.state|=PP;if(this.highWaterMark=$?YT$(this,$,"readableHighWaterMark",_):hT$(!1),this.buffer=new HT$,this.length=0,this.pipes=[],this.flowing=null,this[M4]=null,$&&$.emitClose===!1)this.state&=~E2;if($&&$.autoDestroy===!1)this.state&=~u2;if(this.errored=null,this.defaultEncoding=$&&$.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,$&&$.encoding)this.decoder=new lV($.encoding),this.encoding=$.encoding}function W$($){if(!(this instanceof W$))return new W$($);let q=this instanceof j_();if(this._readableState=new R5($,this,q),$){if(typeof $.read==="function")this._read=$.read;if(typeof $.destroy==="function")this._destroy=$.destroy;if(typeof $.construct==="function")this._construct=$.construct;if($.signal&&!q)vT$($.signal,this)}XK.call(this,$),jP.construct(this,()=>{if(this._readableState.needReadable)u5(this,this._readableState)})}W$.prototype.destroy=jP.destroy;W$.prototype._undestroy=jP.undestroy;W$.prototype._destroy=function($,q){q($)};W$.prototype[fT$.captureRejectionSymbol]=function($){this.destroy($)};W$.prototype[wT$]=function(){let $;if(!this.destroyed)$=this.readableEnded?null:new XT$,this.destroy($);return new cV((q,_)=>IV(this,(K)=>K&&K!==$?_(K):q(null)))};W$.prototype.push=function($,q){return FV(this,$,q,!1)};W$.prototype.unshift=function($,q){return FV(this,$,q,!0)};function FV($,q,_,K){S$("readableAddChunk",q);let P=$._readableState,w;if((P.state&PP)===0){if(typeof q==="string"){if(_=_||P.defaultEncoding,P.encoding!==_)if(K&&P.encoding)q=S2.from(q,_).toString(P.encoding);else q=S2.from(q,_),_=""}else if(q instanceof S2)_="";else if(XK._isUint8Array(q))q=XK._uint8ArrayToBuffer(q),_="";else if(q!=null)w=new kT$("chunk",["string","Buffer","Uint8Array"],q)}if(w)KP($,w);else if(q===null)P.state&=~d3,nT$($,P);else if((P.state&PP)!==0||q&&q.length>0)if(K)if((P.state&tV)!==0)KP($,new JT$);else if(P.destroyed||P.errored)return!1;else Z2($,P,q,!0);else if(P.ended)KP($,new WT$);else if(P.destroyed||P.errored)return!1;else if(P.state&=~d3,P.decoder&&!_)if(q=P.decoder.write(q),P.objectMode||q.length!==0)Z2($,P,q,!1);else u5($,P);else Z2($,P,q,!1);else if(!K)P.state&=~d3,u5($,P);return!P.ended&&(P.length<P.highWaterMark||P.length===0)}function Z2($,q,_,K){if(q.flowing&&q.length===0&&!q.sync&&$.listenerCount("data")>0){if((q.state&BV)!==0)q.awaitDrainWriters.clear();else q.awaitDrainWriters=null;q.dataEmitted=!0,$.emit("data",_)}else{if(q.length+=q.objectMode?1:_.length,K)q.buffer.unshift(_);else q.buffer.push(_);if((q.state&E5)!==0)L5($)}u5($,q)}W$.prototype.isPaused=function(){let $=this._readableState;return $[M4]===!0||$.flowing===!1};W$.prototype.setEncoding=function($){let q=new lV($);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;let _=this._readableState.buffer,K="";for(let P of _)K+=q.write(P);if(_.clear(),K!=="")_.push(K);return this._readableState.length=K.length,this};var LT$=1073741824;function CT$($){if($>LT$)throw new AT$("size","<= 1GiB",$);else $--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++;return $}function gV($,q){if($<=0||q.length===0&&q.ended)return 0;if((q.state&PP)!==0)return 1;if(_T$($)){if(q.flowing&&q.length)return q.buffer.first().length;return q.length}if($<=q.length)return $;return q.ended?q.length:0}W$.prototype.read=function($){if(S$("read",$),$===void 0)$=NaN;else if(!qT$($))$=KT$($,10);let q=this._readableState,_=$;if($>q.highWaterMark)q.highWaterMark=CT$($);if($!==0)q.state&=~eV;if($===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended)){if(S$("read: emitReadable",q.length,q.ended),q.length===0&&q.ended)N2(this);else L5(this);return null}if($=gV($,q),$===0&&q.ended){if(q.length===0)N2(this);return null}let K=(q.state&E5)!==0;if(S$("need readable",K),q.length===0||q.length-$<q.highWaterMark)K=!0,S$("length less than watermark",K);if(q.ended||q.reading||q.destroyed||q.errored||!q.constructed)K=!1,S$("reading, ended or constructing",K);else if(K){if(S$("do read"),q.state|=d3|m5,q.length===0)q.state|=E5;try{this._read(q.highWaterMark)}catch(w){KP(this,w)}if(q.state&=~m5,!q.reading)$=gV(_,q)}let P;if($>0)P=_0($,q);else P=null;if(P===null)q.needReadable=q.length<=q.highWaterMark,$=0;else if(q.length-=$,q.multiAwaitDrain)q.awaitDrainWriters.clear();else q.awaitDrainWriters=null;if(q.length===0){if(!q.ended)q.needReadable=!0;if(_!==$&&q.ended)N2(this)}if(P!==null&&!q.errorEmitted&&!q.closeEmitted)q.dataEmitted=!0,this.emit("data",P);return P};function nT$($,q){if(S$("onEofChunk"),q.ended)return;if(q.decoder){let _=q.decoder.end();if(_&&_.length)q.buffer.push(_),q.length+=q.objectMode?1:_.length}if(q.ended=!0,q.sync)L5($);else q.needReadable=!1,q.emittedReadable=!0,UV($)}function L5($){let q=$._readableState;if(S$("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,!q.emittedReadable)S$("emitReadable",q.flowing),q.emittedReadable=!0,mq.nextTick(UV,$)}function UV($){let q=$._readableState;if(S$("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended))$.emit("readable"),q.emittedReadable=!1;q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,$0($)}function u5($,q){if(!q.readingMore&&q.constructed)q.readingMore=!0,mq.nextTick(rT$,$,q)}function rT$($,q){while(!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0)){let _=q.length;if(S$("maybeReadMore read 0"),$.read(0),_===q.length)break}q.readingMore=!1}W$.prototype._read=function($){throw new TT$("_read()")};W$.prototype.pipe=function($,q){let _=this,K=this._readableState;if(K.pipes.length===1){if(!K.multiAwaitDrain)K.multiAwaitDrain=!0,K.awaitDrainWriters=new jT$(K.awaitDrainWriters?[K.awaitDrainWriters]:[])}K.pipes.push($),S$("pipe count=%d opts=%j",K.pipes.length,q);let w=(!q||q.end!==!1)&&$!==mq.stdout&&$!==mq.stderr?f:C;if(K.endEmitted)mq.nextTick(w);else _.once("end",w);$.on("unpipe",O);function O(N,L){if(S$("onunpipe"),N===_){if(L&&L.hasUnpiped===!1)L.hasUnpiped=!0,k()}}function f(){S$("onend"),$.end()}let Y,h=!1;function k(){if(S$("cleanup"),$.removeListener("close",Z),$.removeListener("finish",X),Y)$.removeListener("drain",Y);if($.removeListener("error",G),$.removeListener("unpipe",O),_.removeListener("end",f),_.removeListener("end",C),_.removeListener("data",p),h=!0,Y&&K.awaitDrainWriters&&(!$._writableState||$._writableState.needDrain))Y()}function T(){if(!h){if(K.pipes.length===1&&K.pipes[0]===$)S$("false write response, pause",0),K.awaitDrainWriters=$,K.multiAwaitDrain=!1;else if(K.pipes.length>1&&K.pipes.includes($))S$("false write response, pause",K.awaitDrainWriters.size),K.awaitDrainWriters.add($);_.pause()}if(!Y)Y=VT$(_,$),$.on("drain",Y)}_.on("data",p);function p(N){S$("ondata");let L=$.write(N);if(S$("dest.write",L),L===!1)T()}function G(N){if(S$("onerror",N),C(),$.removeListener("error",G),$.listenerCount("error")===0){let L=$._writableState||$._readableState;if(L&&!L.errorEmitted)KP($,N);else $.emit("error",N)}}MT$($,"error",G);function Z(){$.removeListener("finish",X),C()}$.once("close",Z);function X(){S$("onfinish"),$.removeListener("close",Z),C()}$.once("finish",X);function C(){S$("unpipe"),_.unpipe($)}if($.emit("pipe",_),$.writableNeedDrain===!0)T();else if(!K.flowing)S$("pipe resume"),_.resume();return $};function VT$($,q){return function _(){let K=$._readableState;if(K.awaitDrainWriters===q)S$("pipeOnDrain",1),K.awaitDrainWriters=null;else if(K.multiAwaitDrain)S$("pipeOnDrain",K.awaitDrainWriters.size),K.awaitDrainWriters.delete(q);if((!K.awaitDrainWriters||K.awaitDrainWriters.size===0)&&$.listenerCount("data"))$.resume()}}W$.prototype.unpipe=function($){let q=this._readableState,_={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!$){let P=q.pipes;q.pipes=[],this.pause();for(let w=0;w<P.length;w++)P[w].emit("unpipe",this,{hasUnpiped:!1});return this}let K=$T$(q.pipes,$);if(K===-1)return this;if(q.pipes.splice(K,1),q.pipes.length===0)this.pause();return $.emit("unpipe",this,_),this};W$.prototype.on=function($,q){let _=XK.prototype.on.call(this,$,q),K=this._readableState;if($==="data"){if(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1)this.resume()}else if($==="readable"){if(!K.endEmitted&&!K.readableListening){if(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,S$("on readable",K.length,K.reading),K.length)L5(this);else if(!K.reading)mq.nextTick(xT$,this)}}return _};W$.prototype.addListener=W$.prototype.on;W$.prototype.removeListener=function($,q){let _=XK.prototype.removeListener.call(this,$,q);if($==="readable")mq.nextTick(QV,this);return _};W$.prototype.off=W$.prototype.removeListener;W$.prototype.removeAllListeners=function($){let q=XK.prototype.removeAllListeners.apply(this,arguments);if($==="readable"||$===void 0)mq.nextTick(QV,this);return q};function QV($){let q=$._readableState;if(q.readableListening=$.listenerCount("readable")>0,q.resumeScheduled&&q[M4]===!1)q.flowing=!0;else if($.listenerCount("data")>0)$.resume();else if(!q.readableListening)q.flowing=null}function xT$($){S$("readable nexttick read 0"),$.read(0)}W$.prototype.resume=function(){let $=this._readableState;if(!$.flowing)S$("resume"),$.flowing=!$.readableListening,dT$(this,$);return $[M4]=!1,this};function dT$($,q){if(!q.resumeScheduled)q.resumeScheduled=!0,mq.nextTick(bT$,$,q)}function bT$($,q){if(S$("resume",q.reading),!q.reading)$.read(0);if(q.resumeScheduled=!1,$.emit("resume"),$0($),q.flowing&&!q.reading)$.read(0)}W$.prototype.pause=function(){if(S$("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1)S$("pause"),this._readableState.flowing=!1,this.emit("pause");return this._readableState[M4]=!0,this};function $0($){let q=$._readableState;S$("flow",q.flowing);while(q.flowing&&$.read()!==null);}W$.prototype.wrap=function($){let q=!1;$.on("data",(K)=>{if(!this.push(K)&&$.pause)q=!0,$.pause()}),$.on("end",()=>{this.push(null)}),$.on("error",(K)=>{KP(this,K)}),$.on("close",()=>{this.destroy()}),$.on("destroy",()=>{this.destroy()}),this._read=()=>{if(q&&$.resume)q=!1,$.resume()};let _=PT$($);for(let K=1;K<_.length;K++){let P=_[K];if(this[P]===void 0&&typeof $[P]==="function")this[P]=$[P].bind($)}return this};W$.prototype[OT$]=function(){return q0(this)};W$.prototype.iterator=function($){if($!==void 0)DT$($,"options");return q0(this,$)};function q0($,q){if(typeof $.read!=="function")$=W$.wrap($,{objectMode:!0});let _=oT$($,q);return _.stream=$,_}async function*oT$($,q){let _=G2;function K(O){if(this===$)_(),_=G2;else _=O}$.on("readable",K);let P,w=IV($,{writable:!1},(O)=>{P=O?iV(P,O):null,_(),_=G2});try{while(!0){let O=$.destroyed?null:$.read();if(O!==null)yield O;else if(P)throw P;else if(P===null)return;else await new cV(K)}}catch(O){throw P=iV(P,O),P}finally{if((P||(q===null||q===void 0?void 0:q.destroyOnReturn)!==!1)&&(P===void 0||$._readableState.autoDestroy))jP.destroyer($,null);else $.off("readable",K),w()}}R2(W$.prototype,{readable:{__proto__:null,get(){let $=this._readableState;return!!$&&$.readable!==!1&&!$.destroyed&&!$.errorEmitted&&!$.endEmitted},set($){if(this._readableState)this._readableState.readable=!!$}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function($){if(this._readableState)this._readableState.flowing=$}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set($){if(!this._readableState)return;this._readableState.destroyed=$}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});R2(R5.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[M4]!==!1},set($){this[M4]=!!$}}});W$._fromList=_0;function _0($,q){if(q.length===0)return null;let _;if(q.objectMode)_=q.buffer.shift();else if(!$||$>=q.length){if(q.decoder)_=q.buffer.join("");else if(q.buffer.length===1)_=q.buffer.first();else _=q.buffer.concat(q.length);q.buffer.clear()}else _=q.buffer.consume($,q.decoder);return _}function N2($){let q=$._readableState;if(S$("endReadable",q.endEmitted),!q.endEmitted)q.ended=!0,mq.nextTick(iT$,q,$)}function iT$($,q){if(S$("endReadableNT",$.endEmitted,$.length),!$.errored&&!$.closeEmitted&&!$.endEmitted&&$.length===0){if($.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)mq.nextTick(gT$,q);else if($.autoDestroy){let _=q._writableState;if(!_||_.autoDestroy&&(_.finished||_.writable===!1))q.destroy()}}}function gT$($){if($.writable&&!$.writableEnded&&!$.destroyed)$.end()}W$.from=function($,q){return pT$(W$,$,q)};var m2;function K0(){if(m2===void 0)m2={};return m2}W$.fromWeb=function($,q){return K0().newStreamReadableFromReadableStream($,q)};W$.toWeb=function($,q){return K0().newReadableStreamFromStreamReadable($,q)};W$.wrap=function($,q){var _,K;return new W$({objectMode:(_=(K=$.readableObjectMode)!==null&&K!==void 0?K:$.objectMode)!==null&&_!==void 0?_:!0,...q,destroy(P,w){jP.destroyer($,P),w(P)}}).wrap($)}});var x5=y((AC$,T0)=>{var v4=WK(),{ArrayPrototypeSlice:O0,Error:aT$,FunctionPrototypeSymbolHasInstance:z0,ObjectDefineProperty:f0,ObjectDefineProperties:cT$,ObjectSetPrototypeOf:M0,StringPrototypeToLowerCase:IT$,Symbol:lT$,SymbolHasInstance:tT$}=K6();T0.exports=O6;O6.WritableState=g3;var{EventEmitter:sT$}=i("events"),o3=G5().Stream,{Buffer:C5}=i("buffer"),V5=f4(),{addAbortSignal:eT$}=r3(),{getHighWaterMark:BT$,getDefaultHighWaterMark:FT$}=V3(),{ERR_INVALID_ARG_TYPE:UT$,ERR_METHOD_NOT_IMPLEMENTED:QT$,ERR_MULTIPLE_CALLBACK:v0,ERR_STREAM_CANNOT_PIPE:$A$,ERR_STREAM_DESTROYED:i3,ERR_STREAM_ALREADY_FINISHED:qA$,ERR_STREAM_NULL_VALUES:_A$,ERR_STREAM_WRITE_AFTER_END:KA$,ERR_UNKNOWN_ENCODING:H0}=e6().codes,{errorOrDestroy:wP}=V5;M0(O6.prototype,o3.prototype);M0(O6,o3);function n2(){}var OP=lT$("kOnFinished");function g3($,q,_){if(typeof _!=="boolean")_=q instanceof j_();if(this.objectMode=!!($&&$.objectMode),_)this.objectMode=this.objectMode||!!($&&$.writableObjectMode);this.highWaterMark=$?BT$(this,$,"writableHighWaterMark",_):FT$(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let K=!!($&&$.decodeStrings===!1);this.decodeStrings=!K,this.defaultEncoding=$&&$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=jA$.bind(void 0,q),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,r5(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!$||$.emitClose!==!1,this.autoDestroy=!$||$.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[OP]=[]}function r5($){$.buffered=[],$.bufferedIndex=0,$.allBuffers=!0,$.allNoop=!0}g3.prototype.getBuffer=function $(){return O0(this.buffered,this.bufferedIndex)};f0(g3.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function O6($){let q=this instanceof j_();if(!q&&!z0(O6,this))return new O6($);if(this._writableState=new g3($,this,q),$){if(typeof $.write==="function")this._write=$.write;if(typeof $.writev==="function")this._writev=$.writev;if(typeof $.destroy==="function")this._destroy=$.destroy;if(typeof $.final==="function")this._final=$.final;if(typeof $.construct==="function")this._construct=$.construct;if($.signal)eT$($.signal,this)}o3.call(this,$),V5.construct(this,()=>{let _=this._writableState;if(!_.writing)V2(this,_);x2(this,_)})}f0(O6,tT$,{__proto__:null,value:function($){if(z0(this,$))return!0;if(this!==O6)return!1;return $&&$._writableState instanceof g3}});O6.prototype.pipe=function(){wP(this,new $A$)};function Y0($,q,_,K){let P=$._writableState;if(typeof _==="function")K=_,_=P.defaultEncoding;else{if(!_)_=P.defaultEncoding;else if(_!=="buffer"&&!C5.isEncoding(_))throw new H0(_);if(typeof K!=="function")K=n2}if(q===null)throw new _A$;else if(!P.objectMode)if(typeof q==="string"){if(P.decodeStrings!==!1)q=C5.from(q,_),_="buffer"}else if(q instanceof C5)_="buffer";else if(o3._isUint8Array(q))q=o3._uint8ArrayToBuffer(q),_="buffer";else throw new UT$("chunk",["string","Buffer","Uint8Array"],q);let w;if(P.ending)w=new KA$;else if(P.destroyed)w=new i3("write");if(w)return v4.nextTick(K,w),wP($,w,!0),w;return P.pendingcb++,PA$($,P,q,_,K)}O6.prototype.write=function($,q,_){return Y0(this,$,q,_)===!0};O6.prototype.cork=function(){this._writableState.corked++};O6.prototype.uncork=function(){let $=this._writableState;if($.corked){if($.corked--,!$.writing)V2(this,$)}};O6.prototype.setDefaultEncoding=function $(q){if(typeof q==="string")q=IT$(q);if(!C5.isEncoding(q))throw new H0(q);return this._writableState.defaultEncoding=q,this};function PA$($,q,_,K,P){let w=q.objectMode?1:_.length;q.length+=w;let O=q.length<q.highWaterMark;if(!O)q.needDrain=!0;if(q.writing||q.corked||q.errored||!q.constructed){if(q.buffered.push({chunk:_,encoding:K,callback:P}),q.allBuffers&&K!=="buffer")q.allBuffers=!1;if(q.allNoop&&P!==n2)q.allNoop=!1}else q.writelen=w,q.writecb=P,q.writing=!0,q.sync=!0,$._write(_,K,q.onwrite),q.sync=!1;return O&&!q.errored&&!q.destroyed}function j0($,q,_,K,P,w,O){if(q.writelen=K,q.writecb=O,q.writing=!0,q.sync=!0,q.destroyed)q.onwrite(new i3("write"));else if(_)$._writev(P,q.onwrite);else $._write(P,w,q.onwrite);q.sync=!1}function w0($,q,_,K){--q.pendingcb,K(_),r2(q),wP($,_)}function jA$($,q){let _=$._writableState,K=_.sync,P=_.writecb;if(typeof P!=="function"){wP($,new v0);return}if(_.writing=!1,_.writecb=null,_.length-=_.writelen,_.writelen=0,q){if(q.stack,!_.errored)_.errored=q;if($._readableState&&!$._readableState.errored)$._readableState.errored=q;if(K)v4.nextTick(w0,$,_,q,P);else w0($,_,q,P)}else{if(_.buffered.length>_.bufferedIndex)V2($,_);if(K)if(_.afterWriteTickInfo!==null&&_.afterWriteTickInfo.cb===P)_.afterWriteTickInfo.count++;else _.afterWriteTickInfo={count:1,cb:P,stream:$,state:_},v4.nextTick(wA$,_.afterWriteTickInfo);else h0($,_,1,P)}}function wA$({stream:$,state:q,count:_,cb:K}){return q.afterWriteTickInfo=null,h0($,q,_,K)}function h0($,q,_,K){if(!q.ending&&!$.destroyed&&q.length===0&&q.needDrain)q.needDrain=!1,$.emit("drain");while(_-- >0)q.pendingcb--,K();if(q.destroyed)r2(q);x2($,q)}function r2($){if($.writing)return;for(let P=$.bufferedIndex;P<$.buffered.length;++P){var q;let{chunk:w,callback:O}=$.buffered[P],f=$.objectMode?1:w.length;$.length-=f,O((q=$.errored)!==null&&q!==void 0?q:new i3("write"))}let _=$[OP].splice(0);for(let P=0;P<_.length;P++){var K;_[P]((K=$.errored)!==null&&K!==void 0?K:new i3("end"))}r5($)}function V2($,q){if(q.corked||q.bufferProcessing||q.destroyed||!q.constructed)return;let{buffered:_,bufferedIndex:K,objectMode:P}=q,w=_.length-K;if(!w)return;let O=K;if(q.bufferProcessing=!0,w>1&&$._writev){q.pendingcb-=w-1;let f=q.allNoop?n2:(h)=>{for(let k=O;k<_.length;++k)_[k].callback(h)},Y=q.allNoop&&O===0?_:O0(_,O);Y.allBuffers=q.allBuffers,j0($,q,!0,q.length,Y,"",f),r5(q)}else{do{let{chunk:f,encoding:Y,callback:h}=_[O];_[O++]=null;let k=P?1:f.length;j0($,q,!1,k,f,Y,h)}while(O<_.length&&!q.writing);if(O===_.length)r5(q);else if(O>256)_.splice(0,O),q.bufferedIndex=0;else q.bufferedIndex=O}q.bufferProcessing=!1}O6.prototype._write=function($,q,_){if(this._writev)this._writev([{chunk:$,encoding:q}],_);else throw new QT$("_write()")};O6.prototype._writev=null;O6.prototype.end=function($,q,_){let K=this._writableState;if(typeof $==="function")_=$,$=null,q=null;else if(typeof q==="function")_=q,q=null;let P;if($!==null&&$!==void 0){let w=Y0(this,$,q);if(w instanceof aT$)P=w}if(K.corked)K.corked=1,this.uncork();if(P);else if(!K.errored&&!K.ending)K.ending=!0,x2(this,K,!0),K.ended=!0;else if(K.finished)P=new qA$("end");else if(K.destroyed)P=new i3("end");if(typeof _==="function")if(P||K.finished)v4.nextTick(_,P);else K[OP].push(_);return this};function n5($){return $.ending&&!$.destroyed&&$.constructed&&$.length===0&&!$.errored&&$.buffered.length===0&&!$.finished&&!$.writing&&!$.errorEmitted&&!$.closeEmitted}function OA$($,q){let _=!1;function K(P){if(_){wP($,P!==null&&P!==void 0?P:v0());return}if(_=!0,q.pendingcb--,P){let w=q[OP].splice(0);for(let O=0;O<w.length;O++)w[O](P);wP($,P,q.sync)}else if(n5(q))q.prefinished=!0,$.emit("prefinish"),q.pendingcb++,v4.nextTick(C2,$,q)}q.sync=!0,q.pendingcb++;try{$._final(K)}catch(P){K(P)}q.sync=!1}function zA$($,q){if(!q.prefinished&&!q.finalCalled)if(typeof $._final==="function"&&!q.destroyed)q.finalCalled=!0,OA$($,q);else q.prefinished=!0,$.emit("prefinish")}function x2($,q,_){if(n5(q)){if(zA$($,q),q.pendingcb===0){if(_)q.pendingcb++,v4.nextTick((K,P)=>{if(n5(P))C2(K,P);else P.pendingcb--},$,q);else if(n5(q))q.pendingcb++,C2($,q)}}}function C2($,q){q.pendingcb--,q.finished=!0;let _=q[OP].splice(0);for(let K=0;K<_.length;K++)_[K]();if($.emit("finish"),q.autoDestroy){let K=$._readableState;if(!K||K.autoDestroy&&(K.endEmitted||K.readable===!1))$.destroy()}}cT$(O6.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set($){if(this._writableState)this._writableState.destroyed=$}},writable:{__proto__:null,get(){let $=this._writableState;return!!$&&$.writable!==!1&&!$.destroyed&&!$.errored&&!$.ending&&!$.ended},set($){if(this._writableState)this._writableState.writable=!!$}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let $=this._writableState;if(!$)return!1;return!$.destroyed&&!$.ending&&$.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var fA$=V5.destroy;O6.prototype.destroy=function($,q){let _=this._writableState;if(!_.destroyed&&(_.bufferedIndex<_.buffered.length||_[OP].length))v4.nextTick(r2,_);return fA$.call(this,$,q),this};O6.prototype._undestroy=V5.undestroy;O6.prototype._destroy=function($,q){q($)};O6.prototype[sT$.captureRejectionSymbol]=function($){this.destroy($)};var L2;function k0(){if(L2===void 0)L2={};return L2}O6.fromWeb=function($,q){return k0().newStreamWritableFromWritableStream($,q)};O6.toWeb=function($){return k0().newWritableStreamFromStreamWritable($)}});var R0=y((WC$,u0)=>{var d2=WK(),MA$=i("buffer"),{isReadable:vA$,isWritable:HA$,isIterable:A0,isNodeStream:YA$,isReadableNodeStream:W0,isWritableNodeStream:J0,isDuplexNodeStream:hA$,isReadableStream:X0,isWritableStream:D0}=K_(),p0=C_(),{AbortError:m0,codes:{ERR_INVALID_ARG_TYPE:kA$,ERR_INVALID_RETURN_VALUE:y0}}=e6(),{destroyer:fP}=f4(),TA$=j_(),E0=b3(),AA$=x5(),{createDeferredPromise:S0}=v8(),G0=y2(),Z0=globalThis.Blob||MA$.Blob,WA$=typeof Z0!=="undefined"?function $(q){return q instanceof Z0}:function $(q){return!1},JA$=globalThis.AbortController||Q7().AbortController,{FunctionPrototypeCall:N0}=K6();class H4 extends TA${constructor($){super($);if(($===null||$===void 0?void 0:$.readable)===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if(($===null||$===void 0?void 0:$.writable)===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}}u0.exports=function $(q,_){if(hA$(q))return q;if(W0(q))return zP({readable:q});if(J0(q))return zP({writable:q});if(YA$(q))return zP({writable:!1,readable:!1});if(X0(q))return zP({readable:E0.fromWeb(q)});if(D0(q))return zP({writable:AA$.fromWeb(q)});if(typeof q==="function"){let{value:P,write:w,final:O,destroy:f}=XA$(q);if(A0(P))return G0(H4,P,{objectMode:!0,write:w,final:O,destroy:f});let Y=P===null||P===void 0?void 0:P.then;if(typeof Y==="function"){let h,k=N0(Y,P,(T)=>{if(T!=null)throw new y0("nully","body",T)},(T)=>{fP(h,T)});return h=new H4({objectMode:!0,readable:!1,write:w,final(T){O(async()=>{try{await k,d2.nextTick(T,null)}catch(p){d2.nextTick(T,p)}})},destroy:f})}throw new y0("Iterable, AsyncIterable or AsyncFunction",_,P)}if(WA$(q))return $(q.arrayBuffer());if(A0(q))return G0(H4,q,{objectMode:!0,writable:!1});if(X0(q===null||q===void 0?void 0:q.readable)&&D0(q===null||q===void 0?void 0:q.writable))return H4.fromWeb(q);if(typeof(q===null||q===void 0?void 0:q.writable)==="object"||typeof(q===null||q===void 0?void 0:q.readable)==="object"){let P=q!==null&&q!==void 0&&q.readable?W0(q===null||q===void 0?void 0:q.readable)?q===null||q===void 0?void 0:q.readable:$(q.readable):void 0,w=q!==null&&q!==void 0&&q.writable?J0(q===null||q===void 0?void 0:q.writable)?q===null||q===void 0?void 0:q.writable:$(q.writable):void 0;return zP({readable:P,writable:w})}let K=q===null||q===void 0?void 0:q.then;if(typeof K==="function"){let P;return N0(K,q,(w)=>{if(w!=null)P.push(w);P.push(null)},(w)=>{fP(P,w)}),P=new H4({objectMode:!0,writable:!1,read(){}})}throw new kA$(_,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],q)};function XA$($){let{promise:q,resolve:_}=S0(),K=new JA$,P=K.signal;return{value:$(async function*(){while(!0){let O=q;q=null;let{chunk:f,done:Y,cb:h}=await O;if(d2.nextTick(h),Y)return;if(P.aborted)throw new m0(void 0,{cause:P.reason});({promise:q,resolve:_}=S0()),yield f}}(),{signal:P}),write(O,f,Y){let h=_;_=null,h({chunk:O,done:!1,cb:Y})},final(O){let f=_;_=null,f({done:!0,cb:O})},destroy(O,f){K.abort(),f(O)}}}function zP($){let q=$.readable&&typeof $.readable.read!=="function"?E0.wrap($.readable):$.readable,_=$.writable,K=!!vA$(q),P=!!HA$(_),w,O,f,Y,h;function k(T){let p=Y;if(Y=null,p)p(T);else if(T)h.destroy(T)}if(h=new H4({readableObjectMode:!!(q!==null&&q!==void 0&&q.readableObjectMode),writableObjectMode:!!(_!==null&&_!==void 0&&_.writableObjectMode),readable:K,writable:P}),P)p0(_,(T)=>{if(P=!1,T)fP(q,T);k(T)}),h._write=function(T,p,G){if(_.write(T,p))G();else w=G},h._final=function(T){_.end(),O=T},_.on("drain",function(){if(w){let T=w;w=null,T()}}),_.on("finish",function(){if(O){let T=O;O=null,T()}});if(K)p0(q,(T)=>{if(K=!1,T)fP(q,T);k(T)}),q.on("readable",function(){if(f){let T=f;f=null,T()}}),q.on("end",function(){h.push(null)}),h._read=function(){while(!0){let T=q.read();if(T===null){f=h._read;return}if(!h.push(T))return}};return h._destroy=function(T,p){if(!T&&Y!==null)T=new m0;if(f=null,w=null,O=null,Y===null)p(T);else Y=p,fP(_,T),fP(q,T)},h}});var j_=y((JC$,n0)=>{var{ObjectDefineProperties:DA$,ObjectGetOwnPropertyDescriptor:n_,ObjectKeys:pA$,ObjectSetPrototypeOf:L0}=K6();n0.exports=Eq;var i2=b3(),_q=x5();L0(Eq.prototype,i2.prototype);L0(Eq,i2);{let $=pA$(_q.prototype);for(let q=0;q<$.length;q++){let _=$[q];if(!Eq.prototype[_])Eq.prototype[_]=_q.prototype[_]}}function Eq($){if(!(this instanceof Eq))return new Eq($);if(i2.call(this,$),_q.call(this,$),$){if(this.allowHalfOpen=$.allowHalfOpen!==!1,$.readable===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if($.writable===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}else this.allowHalfOpen=!0}DA$(Eq.prototype,{writable:{__proto__:null,...n_(_q.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n_(_q.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n_(_q.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n_(_q.prototype,"writableBuffer")},writableLength:{__proto__:null,...n_(_q.prototype,"writableLength")},writableFinished:{__proto__:null,...n_(_q.prototype,"writableFinished")},writableCorked:{__proto__:null,...n_(_q.prototype,"writableCorked")},writableEnded:{__proto__:null,...n_(_q.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n_(_q.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){if(this._readableState===void 0||this._writableState===void 0)return!1;return this._readableState.destroyed&&this._writableState.destroyed},set($){if(this._readableState&&this._writableState)this._readableState.destroyed=$,this._writableState.destroyed=$}}});var b2;function C0(){if(b2===void 0)b2={};return b2}Eq.fromWeb=function($,q){return C0().newStreamDuplexFromReadableWritablePair($,q)};Eq.toWeb=function($){return C0().newReadableWritablePairFromDuplex($)};var o2;Eq.from=function($){if(!o2)o2=R0();return o2($,"body")}});var c2=y((XC$,V0)=>{var{ObjectSetPrototypeOf:r0,Symbol:yA$}=K6();V0.exports=r_;var{ERR_METHOD_NOT_IMPLEMENTED:SA$}=e6().codes,a2=j_(),{getHighWaterMark:GA$}=V3();r0(r_.prototype,a2.prototype);r0(r_,a2);var a3=yA$("kCallback");function r_($){if(!(this instanceof r_))return new r_($);let q=$?GA$(this,$,"readableHighWaterMark",!0):null;if(q===0)$={...$,highWaterMark:null,readableHighWaterMark:q,writableHighWaterMark:$.writableHighWaterMark||0};if(a2.call(this,$),this._readableState.sync=!1,this[a3]=null,$){if(typeof $.transform==="function")this._transform=$.transform;if(typeof $.flush==="function")this._flush=$.flush}this.on("prefinish",ZA$)}function g2($){if(typeof this._flush==="function"&&!this.destroyed)this._flush((q,_)=>{if(q){if($)$(q);else this.destroy(q);return}if(_!=null)this.push(_);if(this.push(null),$)$()});else if(this.push(null),$)$()}function ZA$(){if(this._final!==g2)g2.call(this)}r_.prototype._final=g2;r_.prototype._transform=function($,q,_){throw new SA$("_transform()")};r_.prototype._write=function($,q,_){let K=this._readableState,P=this._writableState,w=K.length;this._transform($,q,(O,f)=>{if(O){_(O);return}if(f!=null)this.push(f);if(P.ended||w===K.length||K.length<K.highWaterMark)_();else this[a3]=_})};r_.prototype._read=function(){if(this[a3]){let $=this[a3];this[a3]=null,$()}}});var l2=y((DC$,d0)=>{var{ObjectSetPrototypeOf:x0}=K6();d0.exports=MP;var I2=c2();x0(MP.prototype,I2.prototype);x0(MP,I2);function MP($){if(!(this instanceof MP))return new MP($);I2.call(this,$)}MP.prototype._transform=function($,q,_){_(null,$)}});var i5=y((pC$,a0)=>{var c3=WK(),{ArrayIsArray:NA$,Promise:mA$,SymbolAsyncIterator:EA$,SymbolDispose:uA$}=K6(),o5=C_(),{once:RA$}=v8(),LA$=f4(),b0=j_(),{aggregateTwoErrors:CA$,codes:{ERR_INVALID_ARG_TYPE:qY,ERR_INVALID_RETURN_VALUE:t2,ERR_MISSING_ARGS:nA$,ERR_STREAM_DESTROYED:rA$,ERR_STREAM_PREMATURE_CLOSE:VA$},AbortError:xA$}=e6(),{validateFunction:dA$,validateAbortSignal:bA$}=qP(),{isIterable:Y4,isReadable:s2,isReadableNodeStream:b5,isNodeStream:o0,isTransformStream:vP,isWebStream:oA$,isReadableStream:e2,isReadableFinished:iA$}=K_(),gA$=globalThis.AbortController||Q7().AbortController,B2,F2,U2;function i0($,q,_){let K=!1;$.on("close",()=>{K=!0});let P=o5($,{readable:q,writable:_},(w)=>{K=!w});return{destroy:(w)=>{if(K)return;K=!0,LA$.destroyer($,w||new rA$("pipe"))},cleanup:P}}function aA$($){return dA$($[$.length-1],"streams[stream.length - 1]"),$.pop()}function Q2($){if(Y4($))return $;else if(b5($))return cA$($);throw new qY("val",["Readable","Iterable","AsyncIterable"],$)}async function*cA$($){if(!F2)F2=b3();yield*F2.prototype[EA$].call($)}async function d5($,q,_,{end:K}){let P,w=null,O=(h)=>{if(h)P=h;if(w){let k=w;w=null,k()}},f=()=>new mA$((h,k)=>{if(P)k(P);else w=()=>{if(P)k(P);else h()}});q.on("drain",O);let Y=o5(q,{readable:!1},O);try{if(q.writableNeedDrain)await f();for await(let h of $)if(!q.write(h))await f();if(K)q.end(),await f();_()}catch(h){_(P!==h?CA$(P,h):h)}finally{Y(),q.off("drain",O)}}async function $Y($,q,_,{end:K}){if(vP(q))q=q.writable;let P=q.getWriter();try{for await(let w of $)await P.ready,P.write(w).catch(()=>{});if(await P.ready,K)await P.close();_()}catch(w){try{await P.abort(w),_(w)}catch(O){_(O)}}}function IA$(...$){return g0($,RA$(aA$($)))}function g0($,q,_){if($.length===1&&NA$($[0]))$=$[0];if($.length<2)throw new nA$("streams");let K=new gA$,P=K.signal,w=_===null||_===void 0?void 0:_.signal,O=[];bA$(w,"options.signal");function f(){Z(new xA$)}U2=U2||v8().addAbortListener;let Y;if(w)Y=U2(w,f);let h,k,T=[],p=0;function G(m){Z(m,--p===0)}function Z(m,E){var W;if(m&&(!h||h.code==="ERR_STREAM_PREMATURE_CLOSE"))h=m;if(!h&&!E)return;while(T.length)T.shift()(h);if((W=Y)===null||W===void 0||W[uA$](),K.abort(),E){if(!h)O.forEach((V)=>V());c3.nextTick(q,h,k)}}let X;for(let m=0;m<$.length;m++){let E=$[m],W=m<$.length-1,V=m>0,n=W||(_===null||_===void 0?void 0:_.end)!==!1,b=m===$.length-1;if(o0(E)){let x=function(g){if(g&&g.name!=="AbortError"&&g.code!=="ERR_STREAM_PREMATURE_CLOSE")G(g)};var L=x;if(n){let{destroy:g,cleanup:s}=i0(E,W,V);if(T.push(g),s2(E)&&b)O.push(s)}if(E.on("error",x),s2(E)&&b)O.push(()=>{E.removeListener("error",x)})}if(m===0)if(typeof E==="function"){if(X=E({signal:P}),!Y4(X))throw new t2("Iterable, AsyncIterable or Stream","source",X)}else if(Y4(E)||b5(E)||vP(E))X=E;else X=b0.from(E);else if(typeof E==="function"){if(vP(X)){var C;X=Q2((C=X)===null||C===void 0?void 0:C.readable)}else X=Q2(X);if(X=E(X,{signal:P}),W){if(!Y4(X,!0))throw new t2("AsyncIterable",`transform[${m-1}]`,X)}else{var N;if(!B2)B2=l2();let x=new B2({objectMode:!0}),g=(N=X)===null||N===void 0?void 0:N.then;if(typeof g==="function")p++,g.call(X,(u)=>{if(k=u,u!=null)x.write(u);if(n)x.end();c3.nextTick(G)},(u)=>{x.destroy(u),c3.nextTick(G,u)});else if(Y4(X,!0))p++,d5(X,x,G,{end:n});else if(e2(X)||vP(X)){let u=X.readable||X;p++,d5(u,x,G,{end:n})}else throw new t2("AsyncIterable or Promise","destination",X);X=x;let{destroy:s,cleanup:v$}=i0(X,!1,!0);if(T.push(s),b)O.push(v$)}}else if(o0(E)){if(b5(X)){p+=2;let x=lA$(X,E,G,{end:n});if(s2(E)&&b)O.push(x)}else if(vP(X)||e2(X)){let x=X.readable||X;p++,d5(x,E,G,{end:n})}else if(Y4(X))p++,d5(X,E,G,{end:n});else throw new qY("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=E}else if(oA$(E)){if(b5(X))p++,$Y(Q2(X),E,G,{end:n});else if(e2(X)||Y4(X))p++,$Y(X,E,G,{end:n});else if(vP(X))p++,$Y(X.readable,E,G,{end:n});else throw new qY("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=E}else X=b0.from(E)}if(P!==null&&P!==void 0&&P.aborted||w!==null&&w!==void 0&&w.aborted)c3.nextTick(f);return X}function lA$($,q,_,{end:K}){let P=!1;if(q.on("close",()=>{if(!P)_(new VA$)}),$.pipe(q,{end:!1}),K){let O=function(){P=!0,q.end()};var w=O;if(iA$($))c3.nextTick(O);else $.once("end",O)}else _();return o5($,{readable:!0,writable:!1},(O)=>{let f=$._readableState;if(O&&O.code==="ERR_STREAM_PREMATURE_CLOSE"&&f&&f.ended&&!f.errored&&!f.errorEmitted)$.once("end",_).once("error",_);else _(O)}),o5(q,{readable:!1,writable:!0},_)}a0.exports={pipelineImpl:g0,pipeline:IA$}});var KY=y((yC$,e0)=>{var{pipeline:tA$}=i5(),g5=j_(),{destroyer:sA$}=f4(),{isNodeStream:a5,isReadable:c0,isWritable:I0,isWebStream:_Y,isTransformStream:h4,isWritableStream:l0,isReadableStream:t0}=K_(),{AbortError:eA$,codes:{ERR_INVALID_ARG_VALUE:s0,ERR_MISSING_ARGS:BA$}}=e6(),FA$=C_();e0.exports=function $(...q){if(q.length===0)throw new BA$("streams");if(q.length===1)return g5.from(q[0]);let _=[...q];if(typeof q[0]==="function")q[0]=g5.from(q[0]);if(typeof q[q.length-1]==="function"){let G=q.length-1;q[G]=g5.from(q[G])}for(let G=0;G<q.length;++G){if(!a5(q[G])&&!_Y(q[G]))continue;if(G<q.length-1&&!(c0(q[G])||t0(q[G])||h4(q[G])))throw new s0(`streams[${G}]`,_[G],"must be readable");if(G>0&&!(I0(q[G])||l0(q[G])||h4(q[G])))throw new s0(`streams[${G}]`,_[G],"must be writable")}let K,P,w,O,f;function Y(G){let Z=O;if(O=null,Z)Z(G);else if(G)f.destroy(G);else if(!p&&!T)f.destroy()}let h=q[0],k=tA$(q,Y),T=!!(I0(h)||l0(h)||h4(h)),p=!!(c0(k)||t0(k)||h4(k));if(f=new g5({writableObjectMode:!!(h!==null&&h!==void 0&&h.writableObjectMode),readableObjectMode:!!(k!==null&&k!==void 0&&k.readableObjectMode),writable:T,readable:p}),T){if(a5(h))f._write=function(Z,X,C){if(h.write(Z,X))C();else K=C},f._final=function(Z){h.end(),P=Z},h.on("drain",function(){if(K){let Z=K;K=null,Z()}});else if(_Y(h)){let X=(h4(h)?h.writable:h).getWriter();f._write=async function(C,N,L){try{await X.ready,X.write(C).catch(()=>{}),L()}catch(m){L(m)}},f._final=async function(C){try{await X.ready,X.close().catch(()=>{}),P=C}catch(N){C(N)}}}let G=h4(k)?k.readable:k;FA$(G,()=>{if(P){let Z=P;P=null,Z()}})}if(p){if(a5(k))k.on("readable",function(){if(w){let G=w;w=null,G()}}),k.on("end",function(){f.push(null)}),f._read=function(){while(!0){let G=k.read();if(G===null){w=f._read;return}if(!f.push(G))return}};else if(_Y(k)){let Z=(h4(k)?k.readable:k).getReader();f._read=async function(){while(!0)try{let{value:X,done:C}=await Z.read();if(!f.push(X))return;if(C){f.push(null);return}}catch{return}}}}return f._destroy=function(G,Z){if(!G&&O!==null)G=new eA$;if(w=null,K=null,P=null,O===null)Z(G);else if(O=Z,a5(k))sA$(k,G)},f}});var wx=y((GW$,jY)=>{var UA$=globalThis.AbortController||Q7().AbortController,{codes:{ERR_INVALID_ARG_VALUE:QA$,ERR_INVALID_ARG_TYPE:I3,ERR_MISSING_ARGS:$W$,ERR_OUT_OF_RANGE:qW$},AbortError:w_}=e6(),{validateAbortSignal:k4,validateInteger:B0,validateObject:T4}=qP(),_W$=K6().Symbol("kWeak"),KW$=K6().Symbol("kResistStopPropagation"),{finished:PW$}=C_(),jW$=KY(),{addAbortSignalNoValidate:wW$}=r3(),{isWritable:OW$,isNodeStream:zW$}=K_(),{deprecate:fW$}=v8(),{ArrayPrototypePush:MW$,Boolean:vW$,MathFloor:F0,Number:HW$,NumberIsNaN:YW$,Promise:U0,PromiseReject:Q0,PromiseResolve:hW$,PromisePrototypeThen:$x,Symbol:_x}=K6(),c5=_x("kEmpty"),qx=_x("kEof");function kW$($,q){if(q!=null)T4(q,"options");if((q===null||q===void 0?void 0:q.signal)!=null)k4(q.signal,"options.signal");if(zW$($)&&!OW$($))throw new QA$("stream",$,"must be writable");let _=jW$(this,$);if(q!==null&&q!==void 0&&q.signal)wW$(q.signal,_);return _}function I5($,q){if(typeof $!=="function")throw new I3("fn",["Function","AsyncFunction"],$);if(q!=null)T4(q,"options");if((q===null||q===void 0?void 0:q.signal)!=null)k4(q.signal,"options.signal");let _=1;if((q===null||q===void 0?void 0:q.concurrency)!=null)_=F0(q.concurrency);let K=_-1;if((q===null||q===void 0?void 0:q.highWaterMark)!=null)K=F0(q.highWaterMark);return B0(_,"options.concurrency",1),B0(K,"options.highWaterMark",0),K+=_,async function*P(){let w=v8().AbortSignalAny([q===null||q===void 0?void 0:q.signal].filter(vW$)),O=this,f=[],Y={signal:w},h,k,T=!1,p=0;function G(){T=!0,Z()}function Z(){p-=1,X()}function X(){if(k&&!T&&p<_&&f.length<K)k(),k=null}async function C(){try{for await(let N of O){if(T)return;if(w.aborted)throw new w_;try{if(N=$(N,Y),N===c5)continue;N=hW$(N)}catch(L){N=Q0(L)}if(p+=1,$x(N,Z,G),f.push(N),h)h(),h=null;if(!T&&(f.length>=K||p>=_))await new U0((L)=>{k=L})}f.push(qx)}catch(N){let L=Q0(N);$x(L,Z,G),f.push(L)}finally{if(T=!0,h)h(),h=null}}C();try{while(!0){while(f.length>0){let N=await f[0];if(N===qx)return;if(w.aborted)throw new w_;if(N!==c5)yield N;f.shift(),X()}await new U0((N)=>{h=N})}}finally{if(T=!0,k)k(),k=null}}.call(this)}function TW$($=void 0){if($!=null)T4($,"options");if(($===null||$===void 0?void 0:$.signal)!=null)k4($.signal,"options.signal");return async function*q(){let _=0;for await(let P of this){var K;if($!==null&&$!==void 0&&(K=$.signal)!==null&&K!==void 0&&K.aborted)throw new w_({cause:$.signal.reason});yield[_++,P]}}.call(this)}async function Kx($,q=void 0){for await(let _ of PY.call(this,$,q))return!0;return!1}async function AW$($,q=void 0){if(typeof $!=="function")throw new I3("fn",["Function","AsyncFunction"],$);return!await Kx.call(this,async(..._)=>{return!await $(..._)},q)}async function WW$($,q){for await(let _ of PY.call(this,$,q))return _;return}async function JW$($,q){if(typeof $!=="function")throw new I3("fn",["Function","AsyncFunction"],$);async function _(K,P){return await $(K,P),c5}for await(let K of I5.call(this,_,q));}function PY($,q){if(typeof $!=="function")throw new I3("fn",["Function","AsyncFunction"],$);async function _(K,P){if(await $(K,P))return K;return c5}return I5.call(this,_,q)}class Px extends $W${constructor(){super("reduce");this.message="Reduce of an empty stream requires an initial value"}}async function XW$($,q,_){var K;if(typeof $!=="function")throw new I3("reducer",["Function","AsyncFunction"],$);if(_!=null)T4(_,"options");if((_===null||_===void 0?void 0:_.signal)!=null)k4(_.signal,"options.signal");let P=arguments.length>1;if(_!==null&&_!==void 0&&(K=_.signal)!==null&&K!==void 0&&K.aborted){let h=new w_(void 0,{cause:_.signal.reason});throw this.once("error",()=>{}),await PW$(this.destroy(h)),h}let w=new UA$,O=w.signal;if(_!==null&&_!==void 0&&_.signal){let h={once:!0,[_W$]:this,[KW$]:!0};_.signal.addEventListener("abort",()=>w.abort(),h)}let f=!1;try{for await(let h of this){var Y;if(f=!0,_!==null&&_!==void 0&&(Y=_.signal)!==null&&Y!==void 0&&Y.aborted)throw new w_;if(!P)q=h,P=!0;else q=await $(q,h,{signal:O})}if(!f&&!P)throw new Px}finally{w.abort()}return q}async function DW$($){if($!=null)T4($,"options");if(($===null||$===void 0?void 0:$.signal)!=null)k4($.signal,"options.signal");let q=[];for await(let K of this){var _;if($!==null&&$!==void 0&&(_=$.signal)!==null&&_!==void 0&&_.aborted)throw new w_(void 0,{cause:$.signal.reason});MW$(q,K)}return q}function pW$($,q){let _=I5.call(this,$,q);return async function*K(){for await(let P of _)yield*P}.call(this)}function jx($){if($=HW$($),YW$($))return 0;if($<0)throw new qW$("number",">= 0",$);return $}function yW$($,q=void 0){if(q!=null)T4(q,"options");if((q===null||q===void 0?void 0:q.signal)!=null)k4(q.signal,"options.signal");return $=jx($),async function*_(){var K;if(q!==null&&q!==void 0&&(K=q.signal)!==null&&K!==void 0&&K.aborted)throw new w_;for await(let w of this){var P;if(q!==null&&q!==void 0&&(P=q.signal)!==null&&P!==void 0&&P.aborted)throw new w_;if($--<=0)yield w}}.call(this)}function SW$($,q=void 0){if(q!=null)T4(q,"options");if((q===null||q===void 0?void 0:q.signal)!=null)k4(q.signal,"options.signal");return $=jx($),async function*_(){var K;if(q!==null&&q!==void 0&&(K=q.signal)!==null&&K!==void 0&&K.aborted)throw new w_;for await(let w of this){var P;if(q!==null&&q!==void 0&&(P=q.signal)!==null&&P!==void 0&&P.aborted)throw new w_;if($-- >0)yield w;if($<=0)return}}.call(this)}GW$.streamReturningOperators={asIndexedPairs:fW$(TW$,"readable.asIndexedPairs will be removed in a future version."),drop:yW$,filter:PY,flatMap:pW$,map:I5,take:SW$,compose:kW$};GW$.promiseReturningOperators={every:AW$,forEach:JW$,reduce:XW$,toArray:DW$,some:Kx,find:WW$}});var wY=y((SC$,Ox)=>{var{ArrayPrototypePop:mW$,Promise:EW$}=K6(),{isIterable:uW$,isNodeStream:RW$,isWebStream:LW$}=K_(),{pipelineImpl:CW$}=i5(),{finished:nW$}=C_();OY();function rW$(...$){return new EW$((q,_)=>{let K,P,w=$[$.length-1];if(w&&typeof w==="object"&&!RW$(w)&&!uW$(w)&&!LW$(w)){let O=mW$($);K=O.signal,P=O.end}CW$($,(O,f)=>{if(O)_(O);else q(f)},{signal:K,end:P})})}Ox.exports={finished:nW$,pipeline:rW$}});var OY=y((GC$,Tx)=>{var{Buffer:VW$}=i("buffer"),{ObjectDefineProperty:V_,ObjectKeys:Mx,ReflectApply:vx}=K6(),{promisify:{custom:Hx}}=v8(),{streamReturningOperators:zx,promiseReturningOperators:fx}=wx(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Yx}}=e6(),xW$=KY(),{setDefaultHighWaterMark:dW$,getDefaultHighWaterMark:bW$}=V3(),{pipeline:hx}=i5(),{destroyer:oW$}=f4(),kx=C_(),zY=wY(),l3=K_(),U$=Tx.exports=G5().Stream;U$.isDestroyed=l3.isDestroyed;U$.isDisturbed=l3.isDisturbed;U$.isErrored=l3.isErrored;U$.isReadable=l3.isReadable;U$.isWritable=l3.isWritable;U$.Readable=b3();for(let $ of Mx(zx)){let _=function(...K){if(new.target)throw Yx();return U$.Readable.from(vx(q,this,K))},q=zx[$];V_(_,"name",{__proto__:null,value:q.name}),V_(_,"length",{__proto__:null,value:q.length}),V_(U$.Readable.prototype,$,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(let $ of Mx(fx)){let _=function(...K){if(new.target)throw Yx();return vx(q,this,K)},q=fx[$];V_(_,"name",{__proto__:null,value:q.name}),V_(_,"length",{__proto__:null,value:q.length}),V_(U$.Readable.prototype,$,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}U$.Writable=x5();U$.Duplex=j_();U$.Transform=c2();U$.PassThrough=l2();U$.pipeline=hx;var{addAbortSignal:iW$}=r3();U$.addAbortSignal=iW$;U$.finished=kx;U$.destroy=oW$;U$.compose=xW$;U$.setDefaultHighWaterMark=dW$;U$.getDefaultHighWaterMark=bW$;V_(U$,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return zY}});V_(hx,Hx,{__proto__:null,enumerable:!0,get(){return zY.pipeline}});V_(kx,Hx,{__proto__:null,enumerable:!0,get(){return zY.finished}});U$.Stream=U$;U$._isUint8Array=function $(q){return q instanceof Uint8Array};U$._uint8ArrayToBuffer=function $(q){return VW$.from(q.buffer,q.byteOffset,q.byteLength)}});var Ax=y((ZC$,p$)=>{var p6=i("stream");if(p6&&process.env.READABLE_STREAM==="disable"){let $=p6.promises;p$.exports._uint8ArrayToBuffer=p6._uint8ArrayToBuffer,p$.exports._isUint8Array=p6._isUint8Array,p$.exports.isDisturbed=p6.isDisturbed,p$.exports.isErrored=p6.isErrored,p$.exports.isReadable=p6.isReadable,p$.exports.Readable=p6.Readable,p$.exports.Writable=p6.Writable,p$.exports.Duplex=p6.Duplex,p$.exports.Transform=p6.Transform,p$.exports.PassThrough=p6.PassThrough,p$.exports.addAbortSignal=p6.addAbortSignal,p$.exports.finished=p6.finished,p$.exports.destroy=p6.destroy,p$.exports.pipeline=p6.pipeline,p$.exports.compose=p6.compose,Object.defineProperty(p6,"promises",{configurable:!0,enumerable:!0,get(){return $}}),p$.exports.Stream=p6.Stream}else{let $=OY(),q=wY(),_=$.Readable.destroy;p$.exports=$.Readable,p$.exports._uint8ArrayToBuffer=$._uint8ArrayToBuffer,p$.exports._isUint8Array=$._isUint8Array,p$.exports.isDisturbed=$.isDisturbed,p$.exports.isErrored=$.isErrored,p$.exports.isReadable=$.isReadable,p$.exports.Readable=$.Readable,p$.exports.Writable=$.Writable,p$.exports.Duplex=$.Duplex,p$.exports.Transform=$.Transform,p$.exports.PassThrough=$.PassThrough,p$.exports.addAbortSignal=$.addAbortSignal,p$.exports.finished=$.finished,p$.exports.destroy=$.destroy,p$.exports.destroy=_,p$.exports.pipeline=$.pipeline,p$.exports.compose=$.compose,Object.defineProperty($,"promises",{configurable:!0,enumerable:!0,get(){return q}}),p$.exports.Stream=$.Stream}p$.exports.default=p$.exports});var Wx=y((aC$,fY)=>{if(typeof Object.create==="function")fY.exports=function $(q,_){if(_)q.super_=_,q.prototype=Object.create(_.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}})};else fY.exports=function $(q,_){if(_){q.super_=_;var K=function(){};K.prototype=_.prototype,q.prototype=new K,q.prototype.constructor=q}}});var Jx=y((cC$,vY)=>{try{if(MY=i("util"),typeof MY.inherits!=="function")throw"";vY.exports=MY.inherits}catch($){vY.exports=Wx()}var MY});var px=y((IC$,Dx)=>{var{Buffer:uq}=i("buffer"),Xx=Symbol.for("BufferList");function l$($){if(!(this instanceof l$))return new l$($);l$._init.call(this,$)}l$._init=function $(q){if(Object.defineProperty(this,Xx,{value:!0}),this._bufs=[],this.length=0,q)this.append(q)};l$.prototype._new=function $(q){return new l$(q)};l$.prototype._offset=function $(q){if(q===0)return[0,0];let _=0;for(let K=0;K<this._bufs.length;K++){let P=_+this._bufs[K].length;if(q<P||K===this._bufs.length-1)return[K,q-_];_=P}};l$.prototype._reverseOffset=function($){let q=$[0],_=$[1];for(let K=0;K<q;K++)_+=this._bufs[K].length;return _};l$.prototype.get=function $(q){if(q>this.length||q<0)return;let _=this._offset(q);return this._bufs[_[0]][_[1]]};l$.prototype.slice=function $(q,_){if(typeof q==="number"&&q<0)q+=this.length;if(typeof _==="number"&&_<0)_+=this.length;return this.copy(null,0,q,_)};l$.prototype.copy=function $(q,_,K,P){if(typeof K!=="number"||K<0)K=0;if(typeof P!=="number"||P>this.length)P=this.length;if(K>=this.length)return q||uq.alloc(0);if(P<=0)return q||uq.alloc(0);let w=!!q,O=this._offset(K),f=P-K,Y=f,h=w&&_||0,k=O[1];if(K===0&&P===this.length){if(!w)return this._bufs.length===1?this._bufs[0]:uq.concat(this._bufs,this.length);for(let T=0;T<this._bufs.length;T++)this._bufs[T].copy(q,h),h+=this._bufs[T].length;return q}if(Y<=this._bufs[O[0]].length-k)return w?this._bufs[O[0]].copy(q,_,k,k+Y):this._bufs[O[0]].slice(k,k+Y);if(!w)q=uq.allocUnsafe(f);for(let T=O[0];T<this._bufs.length;T++){let p=this._bufs[T].length-k;if(Y>p)this._bufs[T].copy(q,h,k),h+=p;else{this._bufs[T].copy(q,h,k,k+Y),h+=p;break}if(Y-=p,k)k=0}if(q.length>h)return q.slice(0,h);return q};l$.prototype.shallowSlice=function $(q,_){if(q=q||0,_=typeof _!=="number"?this.length:_,q<0)q+=this.length;if(_<0)_+=this.length;if(q===_)return this._new();let K=this._offset(q),P=this._offset(_),w=this._bufs.slice(K[0],P[0]+1);if(P[1]===0)w.pop();else w[w.length-1]=w[w.length-1].slice(0,P[1]);if(K[1]!==0)w[0]=w[0].slice(K[1]);return this._new(w)};l$.prototype.toString=function $(q,_,K){return this.slice(_,K).toString(q)};l$.prototype.consume=function $(q){if(q=Math.trunc(q),Number.isNaN(q)||q<=0)return this;while(this._bufs.length)if(q>=this._bufs[0].length)q-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(q),this.length-=q;break}return this};l$.prototype.duplicate=function $(){let q=this._new();for(let _=0;_<this._bufs.length;_++)q.append(this._bufs[_]);return q};l$.prototype.append=function $(q){if(q==null)return this;if(q.buffer)this._appendBuffer(uq.from(q.buffer,q.byteOffset,q.byteLength));else if(Array.isArray(q))for(let _=0;_<q.length;_++)this.append(q[_]);else if(this._isBufferList(q))for(let _=0;_<q._bufs.length;_++)this.append(q._bufs[_]);else{if(typeof q==="number")q=q.toString();this._appendBuffer(uq.from(q))}return this};l$.prototype._appendBuffer=function $(q){this._bufs.push(q),this.length+=q.length};l$.prototype.indexOf=function($,q,_){if(_===void 0&&typeof q==="string")_=q,q=void 0;if(typeof $==="function"||Array.isArray($))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');else if(typeof $==="number")$=uq.from([$]);else if(typeof $==="string")$=uq.from($,_);else if(this._isBufferList($))$=$.slice();else if(Array.isArray($.buffer))$=uq.from($.buffer,$.byteOffset,$.byteLength);else if(!uq.isBuffer($))$=uq.from($);if(q=Number(q||0),isNaN(q))q=0;if(q<0)q=this.length+q;if(q<0)q=0;if($.length===0)return q>this.length?this.length:q;let K=this._offset(q),P=K[0],w=K[1];for(;P<this._bufs.length;P++){let O=this._bufs[P];while(w<O.length)if(O.length-w>=$.length){let Y=O.indexOf($,w);if(Y!==-1)return this._reverseOffset([P,Y]);w=O.length-$.length+1}else{let Y=this._reverseOffset([P,w]);if(this._match(Y,$))return Y;w++}w=0}return-1};l$.prototype._match=function($,q){if(this.length-$<q.length)return!1;for(let _=0;_<q.length;_++)if(this.get($+_)!==q[_])return!1;return!0};(function(){let $={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let q in $)(function(_){if($[_]===null)l$.prototype[_]=function(K,P){return this.slice(K,K+P)[_](0,P)};else l$.prototype[_]=function(K=0){return this.slice(K,K+$[_])[_](0)}})(q)})();l$.prototype._isBufferList=function $(q){return q instanceof l$||l$.isBufferList(q)};l$.isBufferList=function $(q){return q!=null&&q[Xx]};Dx.exports=l$});var YY=y((lC$,l5)=>{var HY=Ax().Duplex,gW$=Jx(),t3=px();function F6($){if(!(this instanceof F6))return new F6($);if(typeof $==="function"){this._callback=$;let q=function _(K){if(this._callback)this._callback(K),this._callback=null}.bind(this);this.on("pipe",function _(K){K.on("error",q)}),this.on("unpipe",function _(K){K.removeListener("error",q)}),$=null}t3._init.call(this,$),HY.call(this)}gW$(F6,HY);Object.assign(F6.prototype,t3.prototype);F6.prototype._new=function $(q){return new F6(q)};F6.prototype._write=function $(q,_,K){if(this._appendBuffer(q),typeof K==="function")K()};F6.prototype._read=function $(q){if(!this.length)return this.push(null);q=Math.min(q,this.length),this.push(this.slice(0,q)),this.consume(q)};F6.prototype.end=function $(q){if(HY.prototype.end.call(this,q),this._callback)this._callback(null,this.slice()),this._callback=null};F6.prototype._destroy=function $(q,_){this._bufs.length=0,this.length=0,_(q)};F6.prototype._isBufferList=function $(q){return q instanceof F6||q instanceof t3||F6.isBufferList(q)};F6.isBufferList=t3.isBufferList;l5.exports=F6;l5.exports.BufferListStream=F6;l5.exports.BufferList=t3});var Nx=y((Sx,Gx)=>{Object.defineProperty(Sx,"__esModule",{value:!0});Sx.default=void 0;var aW$=yx(YY()),cW$=i("stream"),IW$=yx(Y5()),hY=E3(),lW$=AK();function yx($){return $&&$.__esModule?$:{default:$}}class kY extends cW$.Transform{constructor($){super({readableObjectMode:!0});this.debug=$,this.currentMessage=void 0,this.bl=new aW$.default}pause(){if(super.pause(),this.currentMessage)this.currentMessage.pause();return this}resume(){if(super.resume(),this.currentMessage)this.currentMessage.resume();return this}processBufferedData($){while(this.bl.length>=hY.HEADER_LENGTH){let q=this.bl.readUInt16BE(2);if(q<hY.HEADER_LENGTH)return $(new lW$.ConnectionError("Unable to process incoming packet"));if(this.bl.length>=q){let _=this.bl.slice(0,q);this.bl.consume(q);let K=new hY.Packet(_);this.debug.packet("Received",K),this.debug.data(K);let P=this.currentMessage;if(P===void 0)this.currentMessage=P=new IW$.default({type:K.type(),resetConnection:!1}),this.push(P);if(K.isLast()){P.once("end",()=>{this.currentMessage=void 0,this.processBufferedData($)}),P.end(K.data());return}else if(!P.write(K.data())){P.once("drain",()=>{this.processBufferedData($)});return}}else break}$()}_transform($,q,_){this.bl.append($),this.processBufferedData(_)}}var tC$=Sx.default=kY;Gx.exports=kY});var Rx=y((mx,Ex)=>{Object.defineProperty(mx,"__esModule",{value:!0});mx.default=void 0;var tW$=eW$(YY()),sW$=i("stream"),TY=E3();function eW$($){return $&&$.__esModule?$:{default:$}}class AY extends sW$.Duplex{constructor($,{packetSize:q}){super({writableObjectMode:!0});this.packetSize=q,this.debug=$,this.bl=new tW$.default,this.on("finish",()=>{this.push(null)})}_write($,q,_){let K=this.packetSize-TY.HEADER_LENGTH,P=0;this.currentMessage=$,this.currentMessage.on("data",(w)=>{if($.ignore)return;this.bl.append(w);while(this.bl.length>K){let O=this.bl.slice(0,K);this.bl.consume(K);let f=new TY.Packet($.type);if(f.packetId(P+=1),f.resetConnection($.resetConnection),f.addData(O),this.debug.packet("Sent",f),this.debug.data(f),this.push(f.buffer)===!1)$.pause()}}),this.currentMessage.on("end",()=>{let w=this.bl.slice();this.bl.consume(w.length);let O=new TY.Packet($.type);O.packetId(P+=1),O.resetConnection($.resetConnection),O.last(!0),O.ignore($.ignore),O.addData(w),this.debug.packet("Sent",O),this.debug.data(O),this.push(O.buffer),this.currentMessage=void 0,_()})}_read($){if(this.currentMessage)this.currentMessage.resume()}}var sC$=mx.default=AY;Ex.exports=AY});var dx=y((rx,Vx)=>{Object.defineProperty(rx,"__esModule",{value:!0});rx.default=void 0;var BW$=t5(jr()),Lx=qJ$(i("tls")),FW$=i("events"),Cx=t5(Y5()),UW$=E3(),QW$=t5(Nx()),$J$=t5(Rx());function nx($){if(typeof WeakMap!="function")return null;var q=new WeakMap,_=new WeakMap;return(nx=function(K){return K?_:q})($)}function qJ$($,q){if(!q&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var _=nx(q);if(_&&_.has($))return _.get($);var K={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in $)if(w!=="default"&&Object.prototype.hasOwnProperty.call($,w)){var O=P?Object.getOwnPropertyDescriptor($,w):null;O&&(O.get||O.set)?Object.defineProperty(K,w,O):K[w]=$[w]}return K.default=$,_&&_.set($,K),K}function t5($){return $&&$.__esModule?$:{default:$}}class WY extends FW$.EventEmitter{constructor($,q,_){super();this.socket=$,this.debug=_,this.tlsNegotiationComplete=!1,this.incomingMessageStream=new QW$.default(this.debug),this.incomingMessageIterator=this.incomingMessageStream[Symbol.asyncIterator](),this.outgoingMessageStream=new $J$.default(this.debug,{packetSize:q}),this.socket.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(this.socket)}packetSize(...$){if($.length>0){let q=$[0];this.debug.log("Packet size changed from "+this.outgoingMessageStream.packetSize+" to "+q),this.outgoingMessageStream.packetSize=q}if(this.securePair)this.securePair.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize);return this.outgoingMessageStream.packetSize}startTls($,q,_){if(!$.maxVersion||!["TLSv1.2","TLSv1.1","TLSv1"].includes($.maxVersion))$.maxVersion="TLSv1.2";let K=Lx.createSecureContext($);return new Promise((P,w)=>{let O=new BW$.default,f=this.securePair={cleartext:Lx.connect({socket:O.socket1,servername:q,secureContext:K,rejectUnauthorized:!_}),encrypted:O.socket2},Y=()=>{f.encrypted.removeListener("readable",k),f.cleartext.removeListener("error",h),f.cleartext.removeListener("secureConnect",Y),f.cleartext.once("error",(p)=>{this.socket.destroy(p)});let T=f.cleartext.getCipher();if(T)this.debug.log("TLS negotiated ("+T.name+", "+T.version+")");this.emit("secure",f.cleartext),f.cleartext.setMaxSendFragment(this.outgoingMessageStream.packetSize),this.outgoingMessageStream.unpipe(this.socket),this.socket.unpipe(this.incomingMessageStream),this.socket.pipe(f.encrypted),f.encrypted.pipe(this.socket),f.cleartext.pipe(this.incomingMessageStream),this.outgoingMessageStream.pipe(f.cleartext),this.tlsNegotiationComplete=!0,P()},h=(T)=>{f.encrypted.removeListener("readable",k),f.cleartext.removeListener("error",h),f.cleartext.removeListener("secureConnect",Y),f.cleartext.destroy(),f.encrypted.destroy(),w(T)},k=()=>{let T=new Cx.default({type:UW$.TYPE.PRELOGIN,resetConnection:!1}),p;while(p=f.encrypted.read())T.write(p);this.outgoingMessageStream.write(T),T.end(),this.readMessage().then(async(G)=>{f.encrypted.once("readable",k);for await(let Z of G)f.encrypted.write(Z)}).catch(h)};f.cleartext.once("error",h),f.cleartext.once("secureConnect",Y),f.encrypted.once("readable",k)})}sendMessage($,q,_){let K=new Cx.default({type:$,resetConnection:_});return K.end(q),this.outgoingMessageStream.write(K),K}async readMessage(){let $=await this.incomingMessageIterator.next();if($.done)throw new Error("unexpected end of message stream");return $.value}}var eC$=rx.default=WY;Vx.exports=WY});var JY=y((ox)=>{Object.defineProperty(ox,"__esModule",{value:!0});ox.codepageBySortId=ox.codepageByLanguageId=ox.Flags=ox.Collation=void 0;var _J$=ox.codepageByLanguageId={[1025]:"CP1256",[1028]:"CP950",[1029]:"CP1250",[1030]:"CP1252",[1032]:"CP1253",[1033]:"CP1252",[1034]:"CP1252",[1035]:"CP1252",[1036]:"CP1252",[1037]:"CP1255",[1038]:"CP1250",[1039]:"CP1252",[1041]:"CP932",[1042]:"CP949",[1044]:"CP1252",[1045]:"CP1250",[1047]:"CP1252",[1048]:"CP1250",[1049]:"CP1251",[1050]:"CP1250",[1051]:"CP1250",[1052]:"CP1250",[1054]:"CP874",[1055]:"CP1254",[1056]:"CP1256",[1058]:"CP1251",[1060]:"CP1250",[1061]:"CP1257",[1062]:"CP1257",[1063]:"CP1257",[1065]:"CP1256",[1066]:"CP1258",[1068]:"CP1254",[1070]:"CP1252",[1071]:"CP1251",[1083]:"CP1252",[1087]:"CP1251",[1090]:"CP1250",[1091]:"CP1254",[1092]:"CP1251",[1106]:"CP1252",[1122]:"CP1252",[1133]:"CP1251",[1146]:"CP1252",[1148]:"CP1252",[1150]:"CP1252",[1152]:"CP1256",[1155]:"CP1252",[1157]:"CP1251",[1164]:"CP1256",[2052]:"CP936",[2074]:"CP1250",[2092]:"CP1251",[2107]:"CP1252",[2143]:"CP1252",[3076]:"CP950",[3082]:"CP1252",[3098]:"CP1251",[5124]:"CP950",[5146]:"CP1250",[8218]:"CP1251",[1031]:"CP1252",[1079]:"CP1252"},KJ$=ox.codepageBySortId={[30]:"CP437",[31]:"CP437",[32]:"CP437",[33]:"CP437",[34]:"CP437",[40]:"CP850",[41]:"CP850",[42]:"CP850",[43]:"CP850",[44]:"CP850",[49]:"CP850",[51]:"CP1252",[52]:"CP1252",[53]:"CP1252",[54]:"CP1252",[55]:"CP850",[56]:"CP850",[57]:"CP850",[58]:"CP850",[59]:"CP850",[60]:"CP850",[61]:"CP850",[80]:"CP1250",[81]:"CP1250",[82]:"CP1250",[83]:"CP1250",[84]:"CP1250",[85]:"CP1250",[86]:"CP1250",[87]:"CP1250",[88]:"CP1250",[89]:"CP1250",[90]:"CP1250",[91]:"CP1250",[92]:"CP1250",[93]:"CP1250",[94]:"CP1250",[95]:"CP1250",[96]:"CP1250",[104]:"CP1251",[105]:"CP1251",[106]:"CP1251",[107]:"CP1251",[108]:"CP1251",[112]:"CP1253",[113]:"CP1253",[114]:"CP1253",[120]:"CP1253",[121]:"CP1253",[122]:"CP1253",[124]:"CP1253",[128]:"CP1254",[129]:"CP1254",[130]:"CP1254",[136]:"CP1255",[137]:"CP1255",[138]:"CP1255",[144]:"CP1256",[145]:"CP1256",[146]:"CP1256",[152]:"CP1257",[153]:"CP1257",[154]:"CP1257",[155]:"CP1257",[156]:"CP1257",[157]:"CP1257",[158]:"CP1257",[159]:"CP1257",[160]:"CP1257",[183]:"CP1252",[184]:"CP1252",[185]:"CP1252",[186]:"CP1252"},PJ$=ox.Flags={IGNORE_CASE:1,IGNORE_ACCENT:2,IGNORE_KANA:4,IGNORE_WIDTH:8,BINARY:16,BINARY2:32,UTF8:64};class bx{static fromBuffer($,q=0){let _=($[q+2]&15)<<16;_|=$[q+1]<<8,_|=$[q+0];let K=($[q+3]&15)<<4;K|=($[q+2]&240)>>>4;let P=($[q+3]&240)>>>4,w=$[q+4];return new this(_,K,P,w)}constructor($,q,_,K){if(this.buffer=void 0,this.lcid=$,this.flags=q,this.version=_,this.sortId=K,this.flags&PJ$.UTF8)this.codepage="utf-8";else if(this.sortId)this.codepage=KJ$[this.sortId];else{let P=this.lcid&65535;this.codepage=_J$[P]}}toBuffer(){if(this.buffer)return this.buffer;return this.buffer=Buffer.alloc(5),this.buffer[0]=this.lcid&255,this.buffer[1]=this.lcid>>>8&255,this.buffer[2]=this.lcid>>>16&15|(this.flags&15)<<4,this.buffer[3]=(this.flags&240)>>>4|(this.version&15)<<4,this.buffer[4]=this.sortId&255,this.buffer}}ox.Collation=bx});var lx=y((ax,cx)=>{Object.defineProperty(ax,"__esModule",{value:!0});ax.default=void 0;var gx={id:31,type:"NULL",name:"Null",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},FC$=ax.default=gx;cx.exports=gx});var HP=y((sx,ex)=>{Object.defineProperty(sx,"__esModule",{value:!0});sx.default=void 0;var tx={id:38,type:"INTN",name:"IntN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},UC$=sx.default=tx;ex.exports=tx});var qd=y((Ux,Qx)=>{Object.defineProperty(Ux,"__esModule",{value:!0});Ux.default=void 0;var zJ$=fJ$(HP());function fJ$($){return $&&$.__esModule?$:{default:$}}var MJ$=Buffer.from([1]),vJ$=Buffer.from([0]),Fx={id:48,type:"INT1",name:"TinyInt",declaration:function(){return"tinyint"},generateTypeInfo(){return Buffer.from([zJ$.default.id,1])},generateParameterLength($,q){if($.value==null)return vJ$;return MJ$},*generateParameterData($,q){if($.value==null)return;let _=Buffer.alloc(1);_.writeUInt8(Number($.value),0),yield _},validate:function($){if($==null)return null;if(typeof $!=="number")$=Number($);if(isNaN($))throw new TypeError("Invalid number.");if($<0||$>255)throw new TypeError("Value must be between 0 and 255, inclusive.");return $|0}},QC$=Ux.default=Fx;Qx.exports=Fx});var XY=y((Kd,Pd)=>{Object.defineProperty(Kd,"__esModule",{value:!0});Kd.default=void 0;var _d={id:104,type:"BITN",name:"BitN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},*generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},$n$=Kd.default=_d;Pd.exports=_d});var Md=y((Od,zd)=>{Object.defineProperty(Od,"__esModule",{value:!0});Od.default=void 0;var HJ$=YJ$(XY());function YJ$($){return $&&$.__esModule?$:{default:$}}var hJ$=Buffer.from([1]),kJ$=Buffer.from([0]),wd={id:50,type:"BIT",name:"Bit",declaration:function(){return"bit"},generateTypeInfo(){return Buffer.from([HJ$.default.id,1])},generateParameterLength($,q){if($.value==null)return kJ$;return hJ$},*generateParameterData($,q){if($.value==null)return;yield $.value?Buffer.from([1]):Buffer.from([0])},validate:function($){if($==null)return null;if($)return!0;else return!1}},qn$=Od.default=wd;zd.exports=wd});var kd=y((Hd,Yd)=>{Object.defineProperty(Hd,"__esModule",{value:!0});Hd.default=void 0;var TJ$=AJ$(HP());function AJ$($){return $&&$.__esModule?$:{default:$}}var WJ$=Buffer.from([2]),JJ$=Buffer.from([0]),vd={id:52,type:"INT2",name:"SmallInt",declaration:function(){return"smallint"},generateTypeInfo(){return Buffer.from([TJ$.default.id,2])},generateParameterLength($,q){if($.value==null)return JJ$;return WJ$},*generateParameterData($,q){if($.value==null)return;let _=Buffer.alloc(2);_.writeInt16LE(Number($.value),0),yield _},validate:function($){if($==null)return null;if(typeof $!=="number")$=Number($);if(isNaN($))throw new TypeError("Invalid number.");if($<-32768||$>32767)throw new TypeError("Value must be between -32768 and 32767, inclusive.");return $|0}},_n$=Hd.default=vd;Yd.exports=vd});var Xd=y((Ad,Wd)=>{Object.defineProperty(Ad,"__esModule",{value:!0});Ad.default=void 0;var XJ$=DJ$(HP());function DJ$($){return $&&$.__esModule?$:{default:$}}var pJ$=Buffer.from([0]),yJ$=Buffer.from([4]),Td={id:56,type:"INT4",name:"Int",declaration:function(){return"int"},generateTypeInfo(){return Buffer.from([XJ$.default.id,4])},generateParameterLength($,q){if($.value==null)return pJ$;return yJ$},*generateParameterData($,q){if($.value==null)return;let _=Buffer.alloc(4);_.writeInt32LE(Number($.value),0),yield _},validate:function($){if($==null)return null;if(typeof $!=="number")$=Number($);if(isNaN($))throw new TypeError("Invalid number.");if($<-2147483648||$>2147483647)throw new TypeError("Value must be between -2147483648 and 2147483647, inclusive.");return $|0}},Kn$=Ad.default=Td;Wd.exports=Td});var s5=y((pd,yd)=>{Object.defineProperty(pd,"__esModule",{value:!0});pd.default=void 0;var Dd={id:111,type:"DATETIMN",name:"DateTimeN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},Pn$=pd.default=Dd;yd.exports=Dd});var ud=y((Nd,md)=>{Object.defineProperty(Nd,"__esModule",{value:!0});Nd.default=void 0;var SJ$=GJ$(s5());function GJ$($){return $&&$.__esModule?$:{default:$}}var Gd=new Date(1900,0,1),ZJ$=new Date(Date.UTC(1900,0,1)),NJ$=Buffer.from([4]),mJ$=Buffer.from([0]),Zd={id:58,type:"DATETIM4",name:"SmallDateTime",declaration:function(){return"smalldatetime"},generateTypeInfo(){return Buffer.from([SJ$.default.id,4])},generateParameterLength($,q){if($.value==null)return mJ$;return NJ$},generateParameterData:function*($,q){if($.value==null)return;let _=Buffer.alloc(4),K,P,w;if(q.useUTC)K=Math.floor(($.value.getTime()-ZJ$.getTime())/86400000),w=$.value.getUTCHours()*60+$.value.getUTCMinutes();else P=-($.value.getTimezoneOffset()-Gd.getTimezoneOffset())*60*1000,K=Math.floor(($.value.getTime()-Gd.getTime()+P)/86400000),w=$.value.getHours()*60+$.value.getMinutes();_.writeUInt16LE(K,0),_.writeUInt16LE(w,2),yield _},validate:function($,q,_){if($==null)return null;if(!($ instanceof Date))$=new Date(Date.parse($));$=$;let K,P,w;if(_&&_.useUTC)K=$.getUTCFullYear(),P=$.getUTCMonth(),w=$.getUTCDate();else K=$.getFullYear(),P=$.getMonth(),w=$.getDate();if(K<1900||K>2079)throw new TypeError("Out of range.");if(K===2079){if(P>5||P===5&&w>6)throw new TypeError("Out of range.")}if(isNaN($))throw new TypeError("Invalid date.");return $}},jn$=Nd.default=Zd;md.exports=Zd});var e5=y((Ld,Cd)=>{Object.defineProperty(Ld,"__esModule",{value:!0});Ld.default=void 0;var Rd={id:109,type:"FLTN",name:"FloatN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},wn$=Ld.default=Rd;Cd.exports=Rd});var bd=y((Vd,xd)=>{Object.defineProperty(Vd,"__esModule",{value:!0});Vd.default=void 0;var EJ$=uJ$(e5());function uJ$($){return $&&$.__esModule?$:{default:$}}var RJ$=Buffer.from([0]),LJ$=Buffer.from([4]),rd={id:59,type:"FLT4",name:"Real",declaration:function(){return"real"},generateTypeInfo(){return Buffer.from([EJ$.default.id,4])},generateParameterLength($,q){if($.value==null)return RJ$;return LJ$},*generateParameterData($,q){if($.value==null)return;let _=Buffer.alloc(4);_.writeFloatLE(parseFloat($.value),0),yield _},validate:function($){if($==null)return null;if($=parseFloat($),isNaN($))throw new TypeError("Invalid number.");return $}},On$=Vd.default=rd;xd.exports=rd});var B5=y((id,gd)=>{Object.defineProperty(id,"__esModule",{value:!0});id.default=void 0;var od={id:110,type:"MONEYN",name:"MoneyN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},zn$=id.default=od;gd.exports=od});var sd=y((Id,ld)=>{Object.defineProperty(Id,"__esModule",{value:!0});Id.default=void 0;var CJ$=nJ$(B5());function nJ$($){return $&&$.__esModule?$:{default:$}}var rJ$=4294967296,VJ$=1/rJ$,xJ$=Buffer.from([0]),dJ$=Buffer.from([8]),cd={id:60,type:"MONEY",name:"Money",declaration:function(){return"money"},generateTypeInfo:function(){return Buffer.from([CJ$.default.id,8])},generateParameterLength($,q){if($.value==null)return xJ$;return dJ$},*generateParameterData($,q){if($.value==null)return;let _=$.value*1e4,K=Buffer.alloc(8);K.writeInt32LE(Math.floor(_*VJ$),0),K.writeInt32LE(_&-1,4),yield K},validate:function($){if($==null)return null;if($=parseFloat($),isNaN($))throw new TypeError("Invalid number.");if($<-922337203685477.6||$>922337203685477.6)throw new TypeError("Value must be between -922337203685477.5808 and 922337203685477.5807, inclusive.");return $}},fn$=Id.default=cd;ld.exports=cd});var s3=y((F5,ed)=>{//! @version @js-joda/core - 5.6.4
//! @copyright (c) 2015-present, Philipp Thrwchter, Pattrick Hper & js-joda contributors
//! @copyright (c) 2007-present, Stephen Colebourne & Michael Nascimento Santos
//! @license BSD-3-Clause (see LICENSE in the root directory of this source tree)
(function($,q){typeof F5==="object"&&typeof ed!=="undefined"?q(F5):typeof define==="function"&&define.amd?define(["exports"],q):($=typeof globalThis!=="undefined"?globalThis:$||self,q($.JSJoda={}))})(F5,function($){function q(D,H,v){if(v===void 0)v=Error;function z(j){if(!Error.captureStackTrace)this.stack=new Error().stack;else Error.captureStackTrace(this,this.constructor);this.message=j,H&&H.apply(this,arguments),this.toString=function(){return this.name+": "+this.message}}return z.prototype=Object.create(v.prototype),z.prototype.name=D,z.prototype.constructor=z,z}var _=q("DateTimeException",h),K=q("DateTimeParseException",k),P=q("UnsupportedTemporalTypeException",null,_),w=q("ArithmeticException"),O=q("IllegalArgumentException"),f=q("IllegalStateException"),Y=q("NullPointerException");function h(D,H){if(H===void 0)H=null;var v=D||this.name;if(H!==null&&H instanceof Error)v+=`
-------
Caused by: `+H.stack+`
-------
`;this.message=v}function k(D,H,v,z){if(H===void 0)H="";if(v===void 0)v=0;if(z===void 0)z=null;var j=D||this.name;if(j+=": "+H+", at index: "+v,z!==null&&z instanceof Error)j+=`
-------
Caused by: `+z.stack+`
-------
`;this.message=j,this.parsedString=function(){return H},this.errorIndex=function(){return v}}function T(D,H){D.prototype=Object.create(H.prototype),D.prototype.constructor=D,p(D,H)}function p(D,H){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function v(z,j){return z.__proto__=j,z},p(D,H)}function G(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function Z(D,H,v){if(!D)if(v)throw new v(H);else throw new Error(H)}function X(D,H){if(D==null)throw new Y(H+" must not be null");return D}function C(D,H,v){if(!(D instanceof H))throw new O(v+" must be an instance of "+(H.name?H.name:H)+(D&&D.constructor&&D.constructor.name?", but is "+D.constructor.name:""));return D}function N(D){throw new TypeError('abstract method "'+D+'" is not implemented')}var L=Object.freeze({__proto__:null,abstractMethodFail:N,assert:Z,requireInstance:C,requireNonNull:X}),m=9007199254740991,E=-9007199254740991,W=function(){function D(){}return D.intDiv=function H(v,z){var j=v/z;return j=D.roundDown(j),D.safeZero(j)},D.intMod=function H(v,z){var j=v-D.intDiv(v,z)*z;return j=D.roundDown(j),D.safeZero(j)},D.roundDown=function H(v){if(v<0)return Math.ceil(v);else return Math.floor(v)},D.floorDiv=function H(v,z){var j=Math.floor(v/z);return D.safeZero(j)},D.floorMod=function H(v,z){var j=v-D.floorDiv(v,z)*z;return D.safeZero(j)},D.safeAdd=function H(v,z){if(D.verifyInt(v),D.verifyInt(z),v===0)return D.safeZero(z);if(z===0)return D.safeZero(v);var j=D.safeToInt(v+z);if(j===v||j===z)throw new w("Invalid addition beyond MAX_SAFE_INTEGER!");return j},D.safeSubtract=function H(v,z){if(D.verifyInt(v),D.verifyInt(z),v===0&&z===0)return 0;else if(v===0)return D.safeZero(-1*z);else if(z===0)return D.safeZero(v);return D.safeToInt(v-z)},D.safeMultiply=function H(v,z){if(D.verifyInt(v),D.verifyInt(z),v===1)return D.safeZero(z);if(z===1)return D.safeZero(v);if(v===0||z===0)return 0;var j=D.safeToInt(v*z);if(j/z!==v||v===E&&z===-1||z===E&&v===-1)throw new w("Multiplication overflows: "+v+" * "+z);return j},D.parseInt=function(H){function v(z){return H.apply(this,arguments)}return v.toString=function(){return H.toString()},v}(function(H){var v=parseInt(H);return D.safeToInt(v)}),D.safeToInt=function H(v){return D.verifyInt(v),D.safeZero(v)},D.verifyInt=function H(v){if(v==null)throw new w("Invalid value: '"+v+"', using null or undefined as argument");if(isNaN(v))throw new w("Invalid int value, using NaN as argument");if(Number.isInteger){if(!Number.isInteger(Number(v)))throw new w("Invalid value: '"+v+"' is a float")}else if(v%1!==0)throw new w("Invalid value: '"+v+"' is a float");if(v>m||v<E)throw new w("Calculation overflows an int: "+v)},D.safeZero=function H(v){return v===0?0:+v},D.compareNumbers=function H(v,z){if(v<z)return-1;if(v>z)return 1;return 0},D.smi=function H(v){return v>>>1&1073741824|v&3221225471},D.hash=function H(v){if(v!==v||v===1/0)return 0;var z=v;while(v>4294967295)v/=4294967295,z^=v;return D.smi(z)},D.hashCode=function H(){var v=17;for(var z=arguments.length,j=new Array(z),M=0;M<z;M++)j[M]=arguments[M];for(var A=0,S=j;A<S.length;A++){var R=S[A];v=(v<<5)-v+D.hash(R)}return D.hash(v)},D}();W.MAX_SAFE_INTEGER=m,W.MIN_SAFE_INTEGER=E;var V=function(){function D(v){this._name=v}var H=D.prototype;return H.equals=function v(z){return this===z},H.toString=function v(){return this._name},H.toJSON=function v(){return this.toString()},D}(),n=function(){function D(){}var H=D.prototype;return H.get=function v(z){N("get")},H.units=function v(){N("units")},H.addTo=function v(z){N("addTo")},H.subtractFrom=function v(z){N("subtractFrom")},D}();if(typeof Symbol!=="undefined"&&Symbol.toPrimitive)n.prototype[Symbol.toPrimitive]=function(D){if(D!=="number")return this.toString();throw new TypeError("A conversion from TemporalAmount to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")};var b=function(){function D(){}var H=D.prototype;return H.duration=function v(){N("duration")},H.isDurationEstimated=function v(){N("isDurationEstimated")},H.isDateBased=function v(){N("isDateBased")},H.isTimeBased=function v(){N("isTimeBased")},H.isSupportedBy=function v(z){N("isSupportedBy")},H.addTo=function v(z,j){N("addTo")},H.between=function v(z,j){N("between")},D}(),x=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._seconds=W.safeToInt(z),M._nanos=W.safeToInt(j),M}H.ofDays=function z(j){return H._create(W.safeMultiply(j,d.SECONDS_PER_DAY),0)},H.ofHours=function z(j){return H._create(W.safeMultiply(j,d.SECONDS_PER_HOUR),0)},H.ofMinutes=function z(j){return H._create(W.safeMultiply(j,d.SECONDS_PER_MINUTE),0)},H.ofSeconds=function z(j,M){if(M===void 0)M=0;var A=W.safeAdd(j,W.floorDiv(M,d.NANOS_PER_SECOND)),S=W.floorMod(M,d.NANOS_PER_SECOND);return H._create(A,S)},H.ofMillis=function z(j){var M=W.intDiv(j,1000),A=W.intMod(j,1000);if(A<0)A+=1000,M--;return H._create(M,A*1e6)},H.ofNanos=function z(j){var M=W.intDiv(j,d.NANOS_PER_SECOND),A=W.intMod(j,d.NANOS_PER_SECOND);if(A<0)A+=d.NANOS_PER_SECOND,M--;return this._create(M,A)},H.of=function z(j,M){return H.ZERO.plus(j,M)},H.from=function z(j){X(j,"amount"),C(j,n);var M=H.ZERO;return j.units().forEach(function(A){M=M.plus(j.get(A),A)}),M},H.between=function z(j,M){X(j,"startInclusive"),X(M,"endExclusive");var A=j.until(M,u.SECONDS),S=0;if(j.isSupported(J.NANO_OF_SECOND)&&M.isSupported(J.NANO_OF_SECOND))try{var R=j.getLong(J.NANO_OF_SECOND);if(S=M.getLong(J.NANO_OF_SECOND)-R,A>0&&S<0)S+=d.NANOS_PER_SECOND;else if(A<0&&S>0)S-=d.NANOS_PER_SECOND;else if(A===0&&S!==0){var r=M.with(J.NANO_OF_SECOND,R);A=j.until(r,u.SECONDS)}}catch(o){}return this.ofSeconds(A,S)},H.parse=function z(j){X(j,"text");var M=new RegExp("([-+]?)P(?:([-+]?[0-9]+)D)?(T(?:([-+]?[0-9]+)H)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)(?:[.,]([0-9]{0,9}))?S)?)?","i"),A=M.exec(j);if(A!==null){if(A[3]==="T"===!1){var S=A[1]==="-",R=A[2],r=A[4],o=A[5],I=A[6],Q=A[7];if(R!=null||r!=null||o!=null||I!=null){var P$=H._parseNumber(j,R,d.SECONDS_PER_DAY,"days"),j$=H._parseNumber(j,r,d.SECONDS_PER_HOUR,"hours"),L$=H._parseNumber(j,o,d.SECONDS_PER_MINUTE,"minutes"),Q$=H._parseNumber(j,I,1,"seconds"),t$=I!=null&&I.charAt(0)==="-",s$=H._parseFraction(j,Q,t$?-1:1);try{return H._create(S,P$,j$,L$,Q$,s$)}catch(K8){throw new K("Text cannot be parsed to a Duration: overflow",j,0,K8)}}}}throw new K("Text cannot be parsed to a Duration",j,0)},H._parseNumber=function z(j,M,A,S){if(M==null)return 0;try{if(M[0]==="+")M=M.substring(1);return W.safeMultiply(parseFloat(M),A)}catch(R){throw new K("Text cannot be parsed to a Duration: "+S,j,0,R)}},H._parseFraction=function z(j,M,A){if(M==null||M.length===0)return 0;return M=(M+"000000000").substring(0,9),parseFloat(M)*A},H._create=function z(){if(arguments.length<=2)return H._createSecondsNanos(arguments[0],arguments[1]);else return H._createNegateDaysHoursMinutesSecondsNanos(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},H._createNegateDaysHoursMinutesSecondsNanos=function z(j,M,A,S,R,r){var o=W.safeAdd(M,W.safeAdd(A,W.safeAdd(S,R)));if(j)return H.ofSeconds(o,r).negated();return H.ofSeconds(o,r)},H._createSecondsNanos=function z(j,M){if(j===void 0)j=0;if(M===void 0)M=0;if(j===0&&M===0)return H.ZERO;return new H(j,M)};var v=H.prototype;return v.get=function z(j){if(j===u.SECONDS)return this._seconds;else if(j===u.NANOS)return this._nanos;else throw new P("Unsupported unit: "+j)},v.units=function z(){return[u.SECONDS,u.NANOS]},v.isZero=function z(){return this._seconds===0&&this._nanos===0},v.isNegative=function z(){return this._seconds<0},v.seconds=function z(){return this._seconds},v.nano=function z(){return this._nanos},v.withSeconds=function z(j){return H._create(j,this._nanos)},v.withNanos=function z(j){return J.NANO_OF_SECOND.checkValidIntValue(j),H._create(this._seconds,j)},v.plusDuration=function z(j){return X(j,"duration"),this.plus(j.seconds(),j.nano())},v.plus=function z(j,M){if(arguments.length===1)return this.plusDuration(j);else if(arguments.length===2&&M instanceof b)return this.plusAmountUnit(j,M);else return this.plusSecondsNanos(j,M)},v.plusAmountUnit=function z(j,M){if(X(j,"amountToAdd"),X(M,"unit"),M===u.DAYS)return this.plusSecondsNanos(W.safeMultiply(j,d.SECONDS_PER_DAY),0);if(M.isDurationEstimated())throw new P("Unit must not have an estimated duration");if(j===0)return this;if(M instanceof u){switch(M){case u.NANOS:return this.plusNanos(j);case u.MICROS:return this.plusSecondsNanos(W.intDiv(j,1e9)*1000,W.intMod(j,1e9)*1000);case u.MILLIS:return this.plusMillis(j);case u.SECONDS:return this.plusSeconds(j)}return this.plusSecondsNanos(W.safeMultiply(M.duration().seconds(),j),0)}var A=M.duration().multipliedBy(j);return this.plusSecondsNanos(A.seconds(),A.nano())},v.plusDays=function z(j){return this.plusSecondsNanos(W.safeMultiply(j,d.SECONDS_PER_DAY),0)},v.plusHours=function z(j){return this.plusSecondsNanos(W.safeMultiply(j,d.SECONDS_PER_HOUR),0)},v.plusMinutes=function z(j){return this.plusSecondsNanos(W.safeMultiply(j,d.SECONDS_PER_MINUTE),0)},v.plusSeconds=function z(j){return this.plusSecondsNanos(j,0)},v.plusMillis=function z(j){return this.plusSecondsNanos(W.intDiv(j,1000),W.intMod(j,1000)*1e6)},v.plusNanos=function z(j){return this.plusSecondsNanos(0,j)},v.plusSecondsNanos=function z(j,M){if(X(j,"secondsToAdd"),X(M,"nanosToAdd"),j===0&&M===0)return this;var A=W.safeAdd(this._seconds,j);A=W.safeAdd(A,W.intDiv(M,d.NANOS_PER_SECOND)),M=W.intMod(M,d.NANOS_PER_SECOND);var S=W.safeAdd(this._nanos,M);return H.ofSeconds(A,S)},v.minus=function z(j,M){if(arguments.length===1)return this.minusDuration(j);else return this.minusAmountUnit(j,M)},v.minusDuration=function z(j){X(j,"duration");var M=j.seconds(),A=j.nano();if(M===E)return this.plus(m,-A);return this.plus(-M,-A)},v.minusAmountUnit=function z(j,M){return X(j,"amountToSubtract"),X(M,"unit"),j===E?this.plusAmountUnit(m,M):this.plusAmountUnit(-j,M)},v.minusDays=function z(j){return j===E?this.plusDays(m):this.plusDays(-j)},v.minusHours=function z(j){return j===E?this.plusHours(m):this.plusHours(-j)},v.minusMinutes=function z(j){return j===E?this.plusMinutes(m):this.plusMinutes(-j)},v.minusSeconds=function z(j){return j===E?this.plusSeconds(m):this.plusSeconds(-j)},v.minusMillis=function z(j){return j===E?this.plusMillis(m):this.plusMillis(-j)},v.minusNanos=function z(j){return j===E?this.plusNanos(m):this.plusNanos(-j)},v.multipliedBy=function z(j){if(j===0)return H.ZERO;if(j===1)return this;var M=W.safeMultiply(this._seconds,j),A=W.safeMultiply(this._nanos,j);return M=M+W.intDiv(A,d.NANOS_PER_SECOND),A=W.intMod(A,d.NANOS_PER_SECOND),H.ofSeconds(M,A)},v.dividedBy=function z(j){if(j===0)throw new w("Cannot divide by zero");if(j===1)return this;var M=W.intDiv(this._seconds,j),A=W.roundDown((this._seconds/j-M)*d.NANOS_PER_SECOND),S=W.intDiv(this._nanos,j);return S=A+S,H.ofSeconds(M,S)},v.negated=function z(){return this.multipliedBy(-1)},v.abs=function z(){return this.isNegative()?this.negated():this},v.addTo=function z(j){if(X(j,"temporal"),this._seconds!==0)j=j.plus(this._seconds,u.SECONDS);if(this._nanos!==0)j=j.plus(this._nanos,u.NANOS);return j},v.subtractFrom=function z(j){if(X(j,"temporal"),this._seconds!==0)j=j.minus(this._seconds,u.SECONDS);if(this._nanos!==0)j=j.minus(this._nanos,u.NANOS);return j},v.toDays=function z(){return W.intDiv(this._seconds,d.SECONDS_PER_DAY)},v.toHours=function z(){return W.intDiv(this._seconds,d.SECONDS_PER_HOUR)},v.toMinutes=function z(){return W.intDiv(this._seconds,d.SECONDS_PER_MINUTE)},v.toMillis=function z(){var j=Math.round(W.safeMultiply(this._seconds,1000));return j=W.safeAdd(j,W.intDiv(this._nanos,1e6)),j},v.toNanos=function z(){var j=W.safeMultiply(this._seconds,d.NANOS_PER_SECOND);return j=W.safeAdd(j,this._nanos),j},v.compareTo=function z(j){X(j,"otherDuration"),C(j,H,"otherDuration");var M=W.compareNumbers(this._seconds,j.seconds());if(M!==0)return M;return this._nanos-j.nano()},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this.seconds()===j.seconds()&&this.nano()===j.nano();return!1},v.toString=function z(){if(this===H.ZERO)return"PT0S";var j=W.intDiv(this._seconds,d.SECONDS_PER_HOUR),M=W.intDiv(W.intMod(this._seconds,d.SECONDS_PER_HOUR),d.SECONDS_PER_MINUTE),A=W.intMod(this._seconds,d.SECONDS_PER_MINUTE),S="PT";if(j!==0)S+=j+"H";if(M!==0)S+=M+"M";if(A===0&&this._nanos===0&&S.length>2)return S;if(A<0&&this._nanos>0)if(A===-1)S+="-0";else S+=A+1;else S+=A;if(this._nanos>0){S+=".";var R;if(A<0)R=""+(2*d.NANOS_PER_SECOND-this._nanos);else R=""+(d.NANOS_PER_SECOND+this._nanos);R=R.slice(1,R.length),S+=R;while(S.charAt(S.length-1)==="0")S=S.slice(0,S.length-1)}return S+="S",S},v.toJSON=function z(){return this.toString()},H}(n);function g(){x.ZERO=new x(0,0)}var s=function D(){};function v$(){s.MIN_VALUE=-999999,s.MAX_VALUE=999999}var u=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._name=z,M._duration=j,M}var v=H.prototype;return v.duration=function z(){return this._duration},v.isDurationEstimated=function z(){return this.isDateBased()||this===H.FOREVER},v.isDateBased=function z(){return this.compareTo(H.DAYS)>=0&&this!==H.FOREVER},v.isTimeBased=function z(){return this.compareTo(H.DAYS)<0},v.isSupportedBy=function z(j){if(this===H.FOREVER)return!1;try{return j.plus(1,this),!0}catch(M){try{return j.plus(-1,this),!0}catch(A){return!1}}},v.addTo=function z(j,M){return j.plus(M,this)},v.between=function z(j,M){return j.until(M,this)},v.toString=function z(){return this._name},v.compareTo=function z(j){return this.duration().compareTo(j.duration())},H}(b);function Cq(){u.NANOS=new u("Nanos",x.ofNanos(1)),u.MICROS=new u("Micros",x.ofNanos(1000)),u.MILLIS=new u("Millis",x.ofNanos(1e6)),u.SECONDS=new u("Seconds",x.ofSeconds(1)),u.MINUTES=new u("Minutes",x.ofSeconds(60)),u.HOURS=new u("Hours",x.ofSeconds(3600)),u.HALF_DAYS=new u("HalfDays",x.ofSeconds(43200)),u.DAYS=new u("Days",x.ofSeconds(86400)),u.WEEKS=new u("Weeks",x.ofSeconds(604800)),u.MONTHS=new u("Months",x.ofSeconds(2629746)),u.YEARS=new u("Years",x.ofSeconds(31556952)),u.DECADES=new u("Decades",x.ofSeconds(315569520)),u.CENTURIES=new u("Centuries",x.ofSeconds(3155695200)),u.MILLENNIA=new u("Millennia",x.ofSeconds(31556952000)),u.ERAS=new u("Eras",x.ofSeconds(31556952*(s.MAX_VALUE+1))),u.FOREVER=new u("Forever",x.ofSeconds(W.MAX_SAFE_INTEGER,999999999))}var E6=function(){function D(){}var H=D.prototype;return H.isDateBased=function v(){N("isDateBased")},H.isTimeBased=function v(){N("isTimeBased")},H.baseUnit=function v(){N("baseUnit")},H.rangeUnit=function v(){N("rangeUnit")},H.range=function v(){N("range")},H.rangeRefinedBy=function v(z){N("rangeRefinedBy")},H.getFrom=function v(z){N("getFrom")},H.adjustInto=function v(z,j){N("adjustInto")},H.isSupportedBy=function v(z){N("isSupportedBy")},H.displayName=function v(){N("displayName")},H.equals=function v(z){N("equals")},H.name=function v(){N("name")},D}(),K$=function(){function D(v,z,j,M){Z(!(v>z),"Smallest minimum value '"+v+"' must be less than largest minimum value '"+z+"'",O),Z(!(j>M),"Smallest maximum value '"+j+"' must be less than largest maximum value '"+M+"'",O),Z(!(z>M),"Minimum value '"+z+"' must be less than maximum value '"+M+"'",O),this._minSmallest=v,this._minLargest=z,this._maxLargest=M,this._maxSmallest=j}var H=D.prototype;return H.isFixed=function v(){return this._minSmallest===this._minLargest&&this._maxSmallest===this._maxLargest},H.minimum=function v(){return this._minSmallest},H.largestMinimum=function v(){return this._minLargest},H.maximum=function v(){return this._maxLargest},H.smallestMaximum=function v(){return this._maxSmallest},H.isValidValue=function v(z){return this.minimum()<=z&&z<=this.maximum()},H.checkValidValue=function v(z,j){var M;if(!this.isValidValue(z)){if(j!=null)M="Invalid value for "+j+" (valid values "+this.toString()+"): "+z;else M="Invalid value (valid values "+this.toString()+"): "+z;return Z(!1,M,_)}return z},H.checkValidIntValue=function v(z,j){if(this.isValidIntValue(z)===!1)throw new _("Invalid int value for "+j+": "+z);return z},H.isValidIntValue=function v(z){return this.isIntValue()&&this.isValidValue(z)},H.isIntValue=function v(){return this.minimum()>=W.MIN_SAFE_INTEGER&&this.maximum()<=W.MAX_SAFE_INTEGER},H.equals=function v(z){if(z===this)return!0;if(z instanceof D)return this._minSmallest===z._minSmallest&&this._minLargest===z._minLargest&&this._maxSmallest===z._maxSmallest&&this._maxLargest===z._maxLargest;return!1},H.hashCode=function v(){return W.hashCode(this._minSmallest,this._minLargest,this._maxSmallest,this._maxLargest)},H.toString=function v(){var z=this.minimum()+(this.minimum()!==this.largestMinimum()?"/"+this.largestMinimum():"");return z+=" - ",z+=this.smallestMaximum()+(this.smallestMaximum()!==this.maximum()?"/"+this.maximum():""),z},D.of=function v(){if(arguments.length===2)return new D(arguments[0],arguments[0],arguments[1],arguments[1]);else if(arguments.length===3)return new D(arguments[0],arguments[0],arguments[1],arguments[2]);else if(arguments.length===4)return new D(arguments[0],arguments[1],arguments[2],arguments[3]);else return Z(!1,"Invalid number of arguments "+arguments.length,O)},D}(),J=function(D){T(H,D),H.byName=function z(j){for(var M in H)if(H[M]){if(H[M]instanceof H&&H[M].name()===j)return H[M]}};function H(z,j,M,A){var S=D.call(this)||this;return S._name=z,S._baseUnit=j,S._rangeUnit=M,S._range=A,S}var v=H.prototype;return v.name=function z(){return this._name},v.baseUnit=function z(){return this._baseUnit},v.rangeUnit=function z(){return this._rangeUnit},v.range=function z(){return this._range},v.displayName=function z(){return this.toString()},v.checkValidValue=function z(j){return this.range().checkValidValue(j,this)},v.checkValidIntValue=function z(j){return this.range().checkValidIntValue(j,this)},v.isDateBased=function z(){var j=this===H.DAY_OF_WEEK||this===H.ALIGNED_DAY_OF_WEEK_IN_MONTH||this===H.ALIGNED_DAY_OF_WEEK_IN_YEAR||this===H.DAY_OF_MONTH||this===H.DAY_OF_YEAR||this===H.EPOCH_DAY||this===H.ALIGNED_WEEK_OF_MONTH||this===H.ALIGNED_WEEK_OF_YEAR||this===H.MONTH_OF_YEAR||this===H.PROLEPTIC_MONTH||this===H.YEAR_OF_ERA||this===H.YEAR||this===H.ERA;return j},v.isTimeBased=function z(){var j=this===H.NANO_OF_SECOND||this===H.NANO_OF_DAY||this===H.MICRO_OF_SECOND||this===H.MICRO_OF_DAY||this===H.MILLI_OF_SECOND||this===H.MILLI_OF_DAY||this===H.SECOND_OF_MINUTE||this===H.SECOND_OF_DAY||this===H.MINUTE_OF_HOUR||this===H.MINUTE_OF_DAY||this===H.HOUR_OF_AMPM||this===H.CLOCK_HOUR_OF_AMPM||this===H.HOUR_OF_DAY||this===H.CLOCK_HOUR_OF_DAY||this===H.AMPM_OF_DAY;return j},v.rangeRefinedBy=function z(j){return j.range(this)},v.getFrom=function z(j){return j.getLong(this)},v.toString=function z(){return this.name()},v.equals=function z(j){return this===j},v.adjustInto=function z(j,M){return j.with(this,M)},v.isSupportedBy=function z(j){return j.isSupported(this)},H}(E6);function GK(){J.NANO_OF_SECOND=new J("NanoOfSecond",u.NANOS,u.SECONDS,K$.of(0,999999999)),J.NANO_OF_DAY=new J("NanoOfDay",u.NANOS,u.DAYS,K$.of(0,86399999999999)),J.MICRO_OF_SECOND=new J("MicroOfSecond",u.MICROS,u.SECONDS,K$.of(0,999999)),J.MICRO_OF_DAY=new J("MicroOfDay",u.MICROS,u.DAYS,K$.of(0,86399999999)),J.MILLI_OF_SECOND=new J("MilliOfSecond",u.MILLIS,u.SECONDS,K$.of(0,999)),J.MILLI_OF_DAY=new J("MilliOfDay",u.MILLIS,u.DAYS,K$.of(0,86399999)),J.SECOND_OF_MINUTE=new J("SecondOfMinute",u.SECONDS,u.MINUTES,K$.of(0,59)),J.SECOND_OF_DAY=new J("SecondOfDay",u.SECONDS,u.DAYS,K$.of(0,86399)),J.MINUTE_OF_HOUR=new J("MinuteOfHour",u.MINUTES,u.HOURS,K$.of(0,59)),J.MINUTE_OF_DAY=new J("MinuteOfDay",u.MINUTES,u.DAYS,K$.of(0,1439)),J.HOUR_OF_AMPM=new J("HourOfAmPm",u.HOURS,u.HALF_DAYS,K$.of(0,11)),J.CLOCK_HOUR_OF_AMPM=new J("ClockHourOfAmPm",u.HOURS,u.HALF_DAYS,K$.of(1,12)),J.HOUR_OF_DAY=new J("HourOfDay",u.HOURS,u.DAYS,K$.of(0,23)),J.CLOCK_HOUR_OF_DAY=new J("ClockHourOfDay",u.HOURS,u.DAYS,K$.of(1,24)),J.AMPM_OF_DAY=new J("AmPmOfDay",u.HALF_DAYS,u.DAYS,K$.of(0,1)),J.DAY_OF_WEEK=new J("DayOfWeek",u.DAYS,u.WEEKS,K$.of(1,7)),J.ALIGNED_DAY_OF_WEEK_IN_MONTH=new J("AlignedDayOfWeekInMonth",u.DAYS,u.WEEKS,K$.of(1,7)),J.ALIGNED_DAY_OF_WEEK_IN_YEAR=new J("AlignedDayOfWeekInYear",u.DAYS,u.WEEKS,K$.of(1,7)),J.DAY_OF_MONTH=new J("DayOfMonth",u.DAYS,u.MONTHS,K$.of(1,28,31),"day"),J.DAY_OF_YEAR=new J("DayOfYear",u.DAYS,u.YEARS,K$.of(1,365,366)),J.EPOCH_DAY=new J("EpochDay",u.DAYS,u.FOREVER,K$.of(-365961662,364522971)),J.ALIGNED_WEEK_OF_MONTH=new J("AlignedWeekOfMonth",u.WEEKS,u.MONTHS,K$.of(1,4,5)),J.ALIGNED_WEEK_OF_YEAR=new J("AlignedWeekOfYear",u.WEEKS,u.YEARS,K$.of(1,53)),J.MONTH_OF_YEAR=new J("MonthOfYear",u.MONTHS,u.YEARS,K$.of(1,12),"month"),J.PROLEPTIC_MONTH=new J("ProlepticMonth",u.MONTHS,u.FOREVER,K$.of(s.MIN_VALUE*12,s.MAX_VALUE*12+11)),J.YEAR_OF_ERA=new J("YearOfEra",u.YEARS,u.FOREVER,K$.of(1,s.MAX_VALUE,s.MAX_VALUE+1)),J.YEAR=new J("Year",u.YEARS,u.FOREVER,K$.of(s.MIN_VALUE,s.MAX_VALUE),"year"),J.ERA=new J("Era",u.ERAS,u.FOREVER,K$.of(0,1)),J.INSTANT_SECONDS=new J("InstantSeconds",u.SECONDS,u.FOREVER,K$.of(E,m)),J.OFFSET_SECONDS=new J("OffsetSeconds",u.SECONDS,u.FOREVER,K$.of(-64800,64800))}var c=function(){function D(){}return D.zoneId=function H(){return D.ZONE_ID},D.chronology=function H(){return D.CHRONO},D.precision=function H(){return D.PRECISION},D.zone=function H(){return D.ZONE},D.offset=function H(){return D.OFFSET},D.localDate=function H(){return D.LOCAL_DATE},D.localTime=function H(){return D.LOCAL_TIME},D}(),zq=function(){function D(){}var H=D.prototype;return H.query=function v(z){if(z===c.zoneId()||z===c.chronology()||z===c.precision())return null;return z.queryFrom(this)},H.get=function v(z){return this.range(z).checkValidIntValue(this.getLong(z),z)},H.getLong=function v(z){N("getLong")},H.range=function v(z){if(z instanceof J){if(this.isSupported(z))return z.range();throw new P("Unsupported field: "+z)}return z.rangeRefinedBy(this)},H.isSupported=function v(z){N("isSupported")},D}(),ZK=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.queryFrom=function z(j){N("queryFrom")},H}(V);function z6(D,H){var v=function(z){T(j,z);function j(){return z.apply(this,arguments)||this}return j}(ZK);return v.prototype.queryFrom=H,new v(D)}var N$=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._ordinal=z,M._name=j,M}var v=H.prototype;return v.ordinal=function z(){return this._ordinal},v.name=function z(){return this._name},H.values=function z(){return f6.slice()},H.valueOf=function z(j){var M=0;for(M;M<f6.length;M++)if(f6[M].name()===j)break;return H.of(M+1)},H.of=function z(j){if(j<1||j>7)throw new _("Invalid value for DayOfWeek: "+j);return f6[j-1]},H.from=function z(j){if(Z(j!=null,"temporal",Y),j instanceof H)return j;try{return H.of(j.get(J.DAY_OF_WEEK))}catch(M){if(M instanceof _)throw new _("Unable to obtain DayOfWeek from TemporalAccessor: "+j+", type "+(j.constructor!=null?j.constructor.name:""),M);else throw M}},v.value=function z(){return this._ordinal+1},v.displayName=function z(j,M){throw new O("Pattern using (localized) text not implemented yet!")},v.isSupported=function z(j){if(j instanceof J)return j===J.DAY_OF_WEEK;return j!=null&&j.isSupportedBy(this)},v.range=function z(j){if(j===J.DAY_OF_WEEK)return j.range();else if(j instanceof J)throw new P("Unsupported field: "+j);return j.rangeRefinedBy(this)},v.get=function z(j){if(j===J.DAY_OF_WEEK)return this.value();return this.range(j).checkValidIntValue(this.getLong(j),j)},v.getLong=function z(j){if(j===J.DAY_OF_WEEK)return this.value();else if(j instanceof J)throw new P("Unsupported field: "+j);return j.getFrom(this)},v.plus=function z(j){var M=W.floorMod(j,7);return f6[W.floorMod(this._ordinal+(M+7),7)]},v.minus=function z(j){return this.plus(-1*W.floorMod(j,7))},v.query=function z(j){if(j===c.precision())return u.DAYS;else if(j===c.localDate()||j===c.localTime()||j===c.chronology()||j===c.zone()||j===c.zoneId()||j===c.offset())return null;return Z(j!=null,"query",Y),j.queryFrom(this)},v.adjustInto=function z(j){return X(j,"temporal"),j.with(J.DAY_OF_WEEK,this.value())},v.equals=function z(j){return this===j},v.toString=function z(){return this._name},v.compareTo=function z(j){return X(j,"other"),C(j,H,"other"),this._ordinal-j._ordinal},v.toJSON=function z(){return this.toString()},H}(zq),f6;function Y_(){N$.MONDAY=new N$(0,"MONDAY"),N$.TUESDAY=new N$(1,"TUESDAY"),N$.WEDNESDAY=new N$(2,"WEDNESDAY"),N$.THURSDAY=new N$(3,"THURSDAY"),N$.FRIDAY=new N$(4,"FRIDAY"),N$.SATURDAY=new N$(5,"SATURDAY"),N$.SUNDAY=new N$(6,"SUNDAY"),N$.FROM=z6("DayOfWeek.FROM",function(D){return N$.from(D)}),f6=[N$.MONDAY,N$.TUESDAY,N$.WEDNESDAY,N$.THURSDAY,N$.FRIDAY,N$.SATURDAY,N$.SUNDAY]}var $$=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._value=W.safeToInt(z),M._name=j,M}var v=H.prototype;return v.value=function z(){return this._value},v.ordinal=function z(){return this._value-1},v.name=function z(){return this._name},v.displayName=function z(j,M){throw new O("Pattern using (localized) text not implemented yet!")},v.isSupported=function z(j){if(j===null)return!1;if(j instanceof J)return j===J.MONTH_OF_YEAR;return j!=null&&j.isSupportedBy(this)},v.get=function z(j){if(j===J.MONTH_OF_YEAR)return this.value();return this.range(j).checkValidIntValue(this.getLong(j),j)},v.getLong=function z(j){if(j===J.MONTH_OF_YEAR)return this.value();else if(j instanceof J)throw new P("Unsupported field: "+j);return j.getFrom(this)},v.plus=function z(j){var M=W.intMod(j,12)+12,A=W.intMod(this.value()+M,12);return A=A===0?12:A,H.of(A)},v.minus=function z(j){return this.plus(-1*W.intMod(j,12))},v.length=function z(j){switch(this){case H.FEBRUARY:return j?29:28;case H.APRIL:case H.JUNE:case H.SEPTEMBER:case H.NOVEMBER:return 30;default:return 31}},v.minLength=function z(){switch(this){case H.FEBRUARY:return 28;case H.APRIL:case H.JUNE:case H.SEPTEMBER:case H.NOVEMBER:return 30;default:return 31}},v.maxLength=function z(){switch(this){case H.FEBRUARY:return 29;case H.APRIL:case H.JUNE:case H.SEPTEMBER:case H.NOVEMBER:return 30;default:return 31}},v.firstDayOfYear=function z(j){var M=j?1:0;switch(this){case H.JANUARY:return 1;case H.FEBRUARY:return 32;case H.MARCH:return 60+M;case H.APRIL:return 91+M;case H.MAY:return 121+M;case H.JUNE:return 152+M;case H.JULY:return 182+M;case H.AUGUST:return 213+M;case H.SEPTEMBER:return 244+M;case H.OCTOBER:return 274+M;case H.NOVEMBER:return 305+M;case H.DECEMBER:default:return 335+M}},v.firstMonthOfQuarter=function z(){switch(this){case H.JANUARY:case H.FEBRUARY:case H.MARCH:return H.JANUARY;case H.APRIL:case H.MAY:case H.JUNE:return H.APRIL;case H.JULY:case H.AUGUST:case H.SEPTEMBER:return H.JULY;case H.OCTOBER:case H.NOVEMBER:case H.DECEMBER:default:return H.OCTOBER}},v.query=function z(j){if(Z(j!=null,"query() parameter must not be null",_),j===c.chronology())return E$.INSTANCE;else if(j===c.precision())return u.MONTHS;return D.prototype.query.call(this,j)},v.toString=function z(){switch(this){case H.JANUARY:return"JANUARY";case H.FEBRUARY:return"FEBRUARY";case H.MARCH:return"MARCH";case H.APRIL:return"APRIL";case H.MAY:return"MAY";case H.JUNE:return"JUNE";case H.JULY:return"JULY";case H.AUGUST:return"AUGUST";case H.SEPTEMBER:return"SEPTEMBER";case H.OCTOBER:return"OCTOBER";case H.NOVEMBER:return"NOVEMBER";case H.DECEMBER:return"DECEMBER";default:return"unknown Month, value: "+this.value()}},v.toJSON=function z(){return this.toString()},v.adjustInto=function z(j){return j.with(J.MONTH_OF_YEAR,this.value())},v.compareTo=function z(j){return X(j,"other"),C(j,H,"other"),this._value-j._value},v.equals=function z(j){return this===j},H.valueOf=function z(j){var M=0;for(M;M<nq.length;M++)if(nq[M].name()===j)break;return H.of(M+1)},H.values=function z(){return nq.slice()},H.of=function z(j){if(j<1||j>12)Z(!1,"Invalid value for MonthOfYear: "+j,_);return nq[j-1]},H.from=function z(j){if(j instanceof H)return j;try{return H.of(j.get(J.MONTH_OF_YEAR))}catch(M){throw new _("Unable to obtain Month from TemporalAccessor: "+j+" of type "+(j&&j.constructor!=null?j.constructor.name:""),M)}},H}(zq),nq;function L9(){$$.JANUARY=new $$(1,"JANUARY"),$$.FEBRUARY=new $$(2,"FEBRUARY"),$$.MARCH=new $$(3,"MARCH"),$$.APRIL=new $$(4,"APRIL"),$$.MAY=new $$(5,"MAY"),$$.JUNE=new $$(6,"JUNE"),$$.JULY=new $$(7,"JULY"),$$.AUGUST=new $$(8,"AUGUST"),$$.SEPTEMBER=new $$(9,"SEPTEMBER"),$$.OCTOBER=new $$(10,"OCTOBER"),$$.NOVEMBER=new $$(11,"NOVEMBER"),$$.DECEMBER=new $$(12,"DECEMBER"),nq=[$$.JANUARY,$$.FEBRUARY,$$.MARCH,$$.APRIL,$$.MAY,$$.JUNE,$$.JULY,$$.AUGUST,$$.SEPTEMBER,$$.OCTOBER,$$.NOVEMBER,$$.DECEMBER]}var NI=/([-+]?)P(?:([-+]?[0-9]+)Y)?(?:([-+]?[0-9]+)M)?(?:([-+]?[0-9]+)W)?(?:([-+]?[0-9]+)D)?/,rq=function(D){T(H,D);function H(z,j,M){var A=D.call(this)||this,S=W.safeToInt(z),R=W.safeToInt(j),r=W.safeToInt(M);if(S===0&&R===0&&r===0){if(!H.ZERO)A._years=S,A._months=R,A._days=r,H.ZERO=G(A);return H.ZERO||G(A)}return A._years=S,A._months=R,A._days=r,A}H.ofYears=function z(j){return H.create(j,0,0)},H.ofMonths=function z(j){return H.create(0,j,0)},H.ofWeeks=function z(j){return H.create(0,0,W.safeMultiply(j,7))},H.ofDays=function z(j){return H.create(0,0,j)},H.of=function z(j,M,A){return H.create(j,M,A)},H.from=function z(j){if(j instanceof H)return j;X(j,"amount");var M=0,A=0,S=0,R=j.units();for(var r=0;r<R.length;r++){var o=R[r],I=j.get(o);if(o===u.YEARS)M=W.safeToInt(I);else if(o===u.MONTHS)A=W.safeToInt(I);else if(o===u.DAYS)S=W.safeToInt(I);else throw new _("Unit must be Years, Months or Days, but was "+o)}return H.create(M,A,S)},H.between=function z(j,M){return X(j,"startDate"),X(M,"endDate"),C(j,q$,"startDate"),C(M,q$,"endDate"),j.until(M)},H.parse=function z(j){X(j,"text");try{return H._parse(j)}catch(M){if(M instanceof w)throw new K("Text cannot be parsed to a Period",j,0,M);else throw M}},H._parse=function z(j){var M=NI.exec(j);if(M!=null){var A=M[1]==="-"?-1:1,S=M[2],R=M[3],r=M[4],o=M[5];if(S!=null||R!=null||r!=null||o!=null){var I=H._parseNumber(j,S,A),Q=H._parseNumber(j,R,A),P$=H._parseNumber(j,r,A),j$=H._parseNumber(j,o,A);return j$=W.safeAdd(j$,W.safeMultiply(P$,7)),H.create(I,Q,j$)}}throw new K("Text cannot be parsed to a Period",j,0)},H._parseNumber=function z(j,M,A){if(M==null)return 0;var S=W.parseInt(M);return W.safeMultiply(S,A)},H.create=function z(j,M,A){return new H(j,M,A)};var v=H.prototype;return v.units=function z(){return[u.YEARS,u.MONTHS,u.DAYS]},v.chronology=function z(){return E$.INSTANCE},v.get=function z(j){if(j===u.YEARS)return this._years;if(j===u.MONTHS)return this._months;if(j===u.DAYS)return this._days;throw new P("Unsupported unit: "+j)},v.isZero=function z(){return this===H.ZERO},v.isNegative=function z(){return this._years<0||this._months<0||this._days<0},v.years=function z(){return this._years},v.months=function z(){return this._months},v.days=function z(){return this._days},v.withYears=function z(j){if(j===this._years)return this;return H.create(j,this._months,this._days)},v.withMonths=function z(j){if(j===this._months)return this;return H.create(this._years,j,this._days)},v.withDays=function z(j){if(j===this._days)return this;return H.create(this._years,this._months,j)},v.plus=function z(j){var M=H.from(j);return H.create(W.safeAdd(this._years,M._years),W.safeAdd(this._months,M._months),W.safeAdd(this._days,M._days))},v.plusYears=function z(j){if(j===0)return this;return H.create(W.safeToInt(W.safeAdd(this._years,j)),this._months,this._days)},v.plusMonths=function z(j){if(j===0)return this;return H.create(this._years,W.safeToInt(W.safeAdd(this._months,j)),this._days)},v.plusDays=function z(j){if(j===0)return this;return H.create(this._years,this._months,W.safeToInt(W.safeAdd(this._days,j)))},v.minus=function z(j){var M=H.from(j);return H.create(W.safeSubtract(this._years,M._years),W.safeSubtract(this._months,M._months),W.safeSubtract(this._days,M._days))},v.minusYears=function z(j){return this.plusYears(-1*j)},v.minusMonths=function z(j){return this.plusMonths(-1*j)},v.minusDays=function z(j){return this.plusDays(-1*j)},v.multipliedBy=function z(j){if(this===H.ZERO||j===1)return this;return H.create(W.safeMultiply(this._years,j),W.safeMultiply(this._months,j),W.safeMultiply(this._days,j))},v.negated=function z(){return this.multipliedBy(-1)},v.normalized=function z(){var j=this.toTotalMonths(),M=W.intDiv(j,12),A=W.intMod(j,12);if(M===this._years&&A===this._months)return this;return H.create(W.safeToInt(M),A,this._days)},v.toTotalMonths=function z(){return this._years*12+this._months},v.addTo=function z(j){if(X(j,"temporal"),this._years!==0)if(this._months!==0)j=j.plus(this.toTotalMonths(),u.MONTHS);else j=j.plus(this._years,u.YEARS);else if(this._months!==0)j=j.plus(this._months,u.MONTHS);if(this._days!==0)j=j.plus(this._days,u.DAYS);return j},v.subtractFrom=function z(j){if(X(j,"temporal"),this._years!==0)if(this._months!==0)j=j.minus(this.toTotalMonths(),u.MONTHS);else j=j.minus(this._years,u.YEARS);else if(this._months!==0)j=j.minus(this._months,u.MONTHS);if(this._days!==0)j=j.minus(this._days,u.DAYS);return j},v.equals=function z(j){if(this===j)return!0;if(j instanceof H){var M=j;return this._years===M._years&&this._months===M._months&&this._days===M._days}return!1},v.hashCode=function z(){return W.hashCode(this._years,this._months,this._days)},v.toString=function z(){if(this===H.ZERO)return"P0D";else{var j="P";if(this._years!==0)j+=this._years+"Y";if(this._months!==0)j+=this._months+"M";if(this._days!==0)j+=this._days+"D";return j}},v.toJSON=function z(){return this.toString()},H}(n);function mI(){rq.ofDays(0)}var C9=function(){function D(v){this._index=v,this._errorIndex=-1}var H=D.prototype;return H.getIndex=function v(){return this._index},H.setIndex=function v(z){this._index=z},H.getErrorIndex=function v(){return this._errorIndex},H.setErrorIndex=function v(z){this._errorIndex=z},D}(),Zk=function(){function D(){this._map={}}var H=D.prototype;return H.putAll=function v(z){for(var j in z._map)this._map[j]=z._map[j];return this},H.containsKey=function v(z){return this._map.hasOwnProperty(z.name())&&this.get(z)!==void 0},H.get=function v(z){return this._map[z.name()]},H.put=function v(z,j){return this.set(z,j)},H.set=function v(z,j){return this._map[z.name()]=j,this},H.retainAll=function v(z){var j={};for(var M=0;M<z.length;M++){var A=z[M].name();j[A]=this._map[A]}return this._map=j,this},H.remove=function v(z){var j=z.name(),M=this._map[j];return this._map[j]=void 0,M},H.keySet=function v(){return this._map},H.clear=function v(){this._map={}},D}(),z$=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}return H}(V);z$.STRICT=new z$("STRICT"),z$.SMART=new z$("SMART"),z$.LENIENT=new z$("LENIENT");var _8=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.isSupported=function z(j){N("isSupported")},v.minus=function z(j,M){if(arguments.length<2)return this._minusAmount(j);else return this._minusUnit(j,M)},v._minusAmount=function z(j){return X(j,"amount"),C(j,n,"amount"),j.subtractFrom(this)},v._minusUnit=function z(j,M){return X(j,"amountToSubtract"),X(M,"unit"),C(M,b,"unit"),this._plusUnit(-j,M)},v.plus=function z(j,M){if(arguments.length<2)return this._plusAmount(j);else return this._plusUnit(j,M)},v._plusAmount=function z(j){return X(j,"amount"),C(j,n,"amount"),j.addTo(this)},v._plusUnit=function z(j,M){N("_plusUnit")},v.until=function z(j,M){N("until")},v.with=function z(j,M){if(arguments.length<2)return this._withAdjuster(j);else return this._withField(j,M)},v._withAdjuster=function z(j){return X(j,"adjuster"),Z(typeof j.adjustInto==="function","adjuster must be a TemporalAdjuster",O),j.adjustInto(this)},v._withField=function z(j,M){N("_withField")},H}(zq);if(typeof Symbol!=="undefined"&&Symbol.toPrimitive)_8.prototype[Symbol.toPrimitive]=function(D){if(D!=="number")return this.toString();throw new TypeError("A conversion from Temporal to a number is not allowed. To compare use the methods .equals(), .compareTo(), .isBefore() or one that is more suitable to your use case.")};var p4=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.isSupported=function z(j){if(j instanceof J)return j.isDateBased();else if(j instanceof u)return j.isDateBased();return j!=null&&j.isSupportedBy(this)},v.query=function z(j){if(j===c.chronology())return this.chronology();else if(j===c.precision())return u.DAYS;else if(j===c.localDate())return q$.ofEpochDay(this.toEpochDay());else if(j===c.localTime()||j===c.zone()||j===c.zoneId()||j===c.offset())return null;return D.prototype.query.call(this,j)},v.adjustInto=function z(j){return j.with(J.EPOCH_DAY,this.toEpochDay())},v.format=function z(j){return X(j,"formatter"),C(j,Y$,"formatter"),j.format(this)},H}(_8),Vq=function(){function D(){}return D.startsWith=function H(v,z){return v.indexOf(z)===0},D.hashCode=function H(v){var z=v.length;if(z===0)return 0;var j=0;for(var M=0;M<z;M++){var A=v.charCodeAt(M);j=(j<<5)-j+A,j|=0}return W.smi(j)},D}(),m$=function(){function D(){}D.systemDefault=function v(){throw new _("not supported operation")},D.getAvailableZoneIds=function v(){throw new _("not supported operation")},D.of=function v(z){throw new _("not supported operation"+z)},D.ofOffset=function v(z,j){throw new _("not supported operation"+z+j)},D.from=function v(z){throw new _("not supported operation"+z)};var H=D.prototype;return H.id=function v(){N("ZoneId.id")},H.rules=function v(){N("ZoneId.rules")},H.normalized=function v(){var z=this.rules();if(z.isFixedOffset())return z.offset(V$.EPOCH);return this},H.equals=function v(z){if(this===z)return!0;if(z instanceof D)return this.id()===z.id();return!1},H.hashCode=function v(){return Vq.hashCode(this.id())},H.toString=function v(){return this.id()},H.toJSON=function v(){return this.toString()},D}(),NP=function(){function D(){}D.of=function v(z){return X(z,"offset"),new EI(z)};var H=D.prototype;return H.isFixedOffset=function v(){N("ZoneRules.isFixedOffset")},H.offset=function v(z){if(z instanceof V$)return this.offsetOfInstant(z);else return this.offsetOfLocalDateTime(z)},H.offsetOfInstant=function v(z){N("ZoneRules.offsetInstant")},H.offsetOfEpochMilli=function v(z){N("ZoneRules.offsetOfEpochMilli")},H.offsetOfLocalDateTime=function v(z){N("ZoneRules.offsetLocalDateTime")},H.validOffsets=function v(z){N("ZoneRules.validOffsets")},H.transition=function v(z){N("ZoneRules.transition")},H.standardOffset=function v(z){N("ZoneRules.standardOffset")},H.daylightSavings=function v(z){N("ZoneRules.daylightSavings")},H.isDaylightSavings=function v(z){N("ZoneRules.isDaylightSavings")},H.isValidOffset=function v(z,j){N("ZoneRules.isValidOffset")},H.nextTransition=function v(z){N("ZoneRules.nextTransition")},H.previousTransition=function v(z){N("ZoneRules.previousTransition")},H.transitions=function v(){N("ZoneRules.transitions")},H.transitionRules=function v(){N("ZoneRules.transitionRules")},H.toString=function v(){N("ZoneRules.toString")},H.toJSON=function v(){return this.toString()},D}(),EI=function(D){T(H,D);function H(z){var j=D.call(this)||this;return j._offset=z,j}var v=H.prototype;return v.isFixedOffset=function z(){return!0},v.offsetOfInstant=function z(){return this._offset},v.offsetOfEpochMilli=function z(){return this._offset},v.offsetOfLocalDateTime=function z(){return this._offset},v.validOffsets=function z(){return[this._offset]},v.transition=function z(){return null},v.standardOffset=function z(){return this._offset},v.daylightSavings=function z(){return x.ZERO},v.isDaylightSavings=function z(){return!1},v.isValidOffset=function z(j,M){return this._offset.equals(M)},v.nextTransition=function z(){return null},v.previousTransition=function z(){return null},v.transitions=function z(){return[]},v.transitionRules=function z(){return[]},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._offset.equals(j._offset);return!1},v.toString=function z(){return"FixedRules:"+this._offset.toString()},H}(NP),Nk={},mk={},O$=function(D){T(H,D);function H(z){var j=D.call(this)||this;return H._validateTotalSeconds(z),j._totalSeconds=W.safeToInt(z),j._rules=NP.of(G(j)),j._id=H._buildId(z),j}var v=H.prototype;return v.totalSeconds=function z(){return this._totalSeconds},v.id=function z(){return this._id},H._buildId=function z(j){if(j===0)return"Z";else{var M=Math.abs(j),A=W.intDiv(M,d.SECONDS_PER_HOUR),S=W.intMod(W.intDiv(M,d.SECONDS_PER_MINUTE),d.MINUTES_PER_HOUR),R=(j<0?"-":"+")+(A<10?"0":"")+A+(S<10?":0":":")+S,r=W.intMod(M,d.SECONDS_PER_MINUTE);if(r!==0)R+=(r<10?":0":":")+r;return R}},H._validateTotalSeconds=function z(j){if(Math.abs(j)>H.MAX_SECONDS)throw new _("Zone offset not in valid range: -18:00 to +18:00")},H._validate=function z(j,M,A){if(j<-18||j>18)throw new _("Zone offset hours not in valid range: value "+j+" is not in the range -18 to 18");if(j>0){if(M<0||A<0)throw new _("Zone offset minutes and seconds must be positive because hours is positive")}else if(j<0){if(M>0||A>0)throw new _("Zone offset minutes and seconds must be negative because hours is negative")}else if(M>0&&A<0||M<0&&A>0)throw new _("Zone offset minutes and seconds must have the same sign");if(Math.abs(M)>59)throw new _("Zone offset minutes not in valid range: abs(value) "+Math.abs(M)+" is not in the range 0 to 59");if(Math.abs(A)>59)throw new _("Zone offset seconds not in valid range: abs(value) "+Math.abs(A)+" is not in the range 0 to 59");if(Math.abs(j)===18&&(Math.abs(M)>0||Math.abs(A)>0))throw new _("Zone offset not in valid range: -18:00 to +18:00")},H.of=function z(j){X(j,"offsetId");var M=mk[j];if(M!=null)return M;var A,S,R;switch(j.length){case 2:j=j[0]+"0"+j[1];case 3:A=H._parseNumber(j,1,!1),S=0,R=0;break;case 5:A=H._parseNumber(j,1,!1),S=H._parseNumber(j,3,!1),R=0;break;case 6:A=H._parseNumber(j,1,!1),S=H._parseNumber(j,4,!0),R=0;break;case 7:A=H._parseNumber(j,1,!1),S=H._parseNumber(j,3,!1),R=H._parseNumber(j,5,!1);break;case 9:A=H._parseNumber(j,1,!1),S=H._parseNumber(j,4,!0),R=H._parseNumber(j,7,!0);break;default:throw new _("Invalid ID for ZoneOffset, invalid format: "+j)}var r=j[0];if(r!=="+"&&r!=="-")throw new _("Invalid ID for ZoneOffset, plus/minus not found when expected: "+j);if(r==="-")return H.ofHoursMinutesSeconds(-A,-S,-R);else return H.ofHoursMinutesSeconds(A,S,R)},H._parseNumber=function z(j,M,A){if(A&&j[M-1]!==":")throw new _("Invalid ID for ZoneOffset, colon not found when expected: "+j);var S=j[M],R=j[M+1];if(S<"0"||S>"9"||R<"0"||R>"9")throw new _("Invalid ID for ZoneOffset, non numeric characters found: "+j);return(S.charCodeAt(0)-48)*10+(R.charCodeAt(0)-48)},H.ofHours=function z(j){return H.ofHoursMinutesSeconds(j,0,0)},H.ofHoursMinutes=function z(j,M){return H.ofHoursMinutesSeconds(j,M,0)},H.ofHoursMinutesSeconds=function z(j,M,A){H._validate(j,M,A);var S=j*d.SECONDS_PER_HOUR+M*d.SECONDS_PER_MINUTE+A;return H.ofTotalSeconds(S)},H.ofTotalMinutes=function z(j){var M=j*d.SECONDS_PER_MINUTE;return H.ofTotalSeconds(M)},H.ofTotalSeconds=function z(j){if(j%(15*d.SECONDS_PER_MINUTE)===0){var M=j,A=Nk[M];if(A==null)A=new H(j),Nk[M]=A,mk[A.id()]=A;return A}else return new H(j)},v.rules=function z(){return this._rules},v.get=function z(j){return this.getLong(j)},v.getLong=function z(j){if(j===J.OFFSET_SECONDS)return this._totalSeconds;else if(j instanceof J)throw new _("Unsupported field: "+j);return j.getFrom(this)},v.query=function z(j){if(X(j,"query"),j===c.offset()||j===c.zone())return this;else if(j===c.localDate()||j===c.localTime()||j===c.precision()||j===c.chronology()||j===c.zoneId())return null;return j.queryFrom(this)},v.adjustInto=function z(j){return j.with(J.OFFSET_SECONDS,this._totalSeconds)},v.compareTo=function z(j){return X(j,"other"),j._totalSeconds-this._totalSeconds},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._totalSeconds===j._totalSeconds;return!1},v.hashCode=function z(){return this._totalSeconds},v.toString=function z(){return this._id},H}(m$);function uI(){O$.MAX_SECONDS=18*d.SECONDS_PER_HOUR,O$.UTC=O$.ofTotalSeconds(0),O$.MIN=O$.ofTotalSeconds(-O$.MAX_SECONDS),O$.MAX=O$.ofTotalSeconds(O$.MAX_SECONDS)}var Pw=function(D){T(H,D),H.create=function z(j,M){var A=new H;return A._addFieldValue(j,M),A};function H(){var z=D.call(this)||this;return z.fieldValues=new Zk,z.chrono=null,z.zone=null,z.date=null,z.time=null,z.leapSecond=!1,z.excessDays=null,z}var v=H.prototype;return v.getFieldValue0=function z(j){return this.fieldValues.get(j)},v._addFieldValue=function z(j,M){X(j,"field");var A=this.getFieldValue0(j);if(A!=null&&A!==M)throw new _("Conflict found: "+j+" "+A+" differs from "+j+" "+M+": "+this);return this._putFieldValue0(j,M)},v._putFieldValue0=function z(j,M){return this.fieldValues.put(j,M),this},v.resolve=function z(j,M){if(M!=null)this.fieldValues.retainAll(M);if(this._mergeDate(j),this._mergeTime(j),this._resolveTimeInferZeroes(j),this.excessDays!=null&&this.excessDays.isZero()===!1&&this.date!=null&&this.time!=null)this.date=this.date.plus(this.excessDays),this.excessDays=rq.ZERO;return this._resolveInstant(),this},v._mergeDate=function z(j){this._checkDate(E$.INSTANCE.resolveDate(this.fieldValues,j))},v._checkDate=function z(j){if(j!=null){this._addObject(j);for(var M in this.fieldValues.keySet()){var A=J.byName(M);if(A){if(this.fieldValues.get(A)!==void 0){if(A.isDateBased()){var S=void 0;try{S=j.getLong(A)}catch(r){if(r instanceof _)continue;else throw r}var R=this.fieldValues.get(A);if(S!==R)throw new _("Conflict found: Field "+A+" "+S+" differs from "+A+" "+R+" derived from "+j)}}}}}},v._mergeTime=function z(j){if(this.fieldValues.containsKey(J.CLOCK_HOUR_OF_DAY)){var M=this.fieldValues.remove(J.CLOCK_HOUR_OF_DAY);if(j!==z$.LENIENT)if(j===z$.SMART&&M===0);else J.CLOCK_HOUR_OF_DAY.checkValidValue(M);this._addFieldValue(J.HOUR_OF_DAY,M===24?0:M)}if(this.fieldValues.containsKey(J.CLOCK_HOUR_OF_AMPM)){var A=this.fieldValues.remove(J.CLOCK_HOUR_OF_AMPM);if(j!==z$.LENIENT)if(j===z$.SMART&&A===0);else J.CLOCK_HOUR_OF_AMPM.checkValidValue(A);this._addFieldValue(J.HOUR_OF_AMPM,A===12?0:A)}if(j!==z$.LENIENT){if(this.fieldValues.containsKey(J.AMPM_OF_DAY))J.AMPM_OF_DAY.checkValidValue(this.fieldValues.get(J.AMPM_OF_DAY));if(this.fieldValues.containsKey(J.HOUR_OF_AMPM))J.HOUR_OF_AMPM.checkValidValue(this.fieldValues.get(J.HOUR_OF_AMPM))}if(this.fieldValues.containsKey(J.AMPM_OF_DAY)&&this.fieldValues.containsKey(J.HOUR_OF_AMPM)){var S=this.fieldValues.remove(J.AMPM_OF_DAY),R=this.fieldValues.remove(J.HOUR_OF_AMPM);this._addFieldValue(J.HOUR_OF_DAY,S*12+R)}if(this.fieldValues.containsKey(J.NANO_OF_DAY)){var r=this.fieldValues.remove(J.NANO_OF_DAY);if(j!==z$.LENIENT)J.NANO_OF_DAY.checkValidValue(r);this._addFieldValue(J.SECOND_OF_DAY,W.intDiv(r,1e9)),this._addFieldValue(J.NANO_OF_SECOND,W.intMod(r,1e9))}if(this.fieldValues.containsKey(J.MICRO_OF_DAY)){var o=this.fieldValues.remove(J.MICRO_OF_DAY);if(j!==z$.LENIENT)J.MICRO_OF_DAY.checkValidValue(o);this._addFieldValue(J.SECOND_OF_DAY,W.intDiv(o,1e6)),this._addFieldValue(J.MICRO_OF_SECOND,W.intMod(o,1e6))}if(this.fieldValues.containsKey(J.MILLI_OF_DAY)){var I=this.fieldValues.remove(J.MILLI_OF_DAY);if(j!==z$.LENIENT)J.MILLI_OF_DAY.checkValidValue(I);this._addFieldValue(J.SECOND_OF_DAY,W.intDiv(I,1000)),this._addFieldValue(J.MILLI_OF_SECOND,W.intMod(I,1000))}if(this.fieldValues.containsKey(J.SECOND_OF_DAY)){var Q=this.fieldValues.remove(J.SECOND_OF_DAY);if(j!==z$.LENIENT)J.SECOND_OF_DAY.checkValidValue(Q);this._addFieldValue(J.HOUR_OF_DAY,W.intDiv(Q,3600)),this._addFieldValue(J.MINUTE_OF_HOUR,W.intMod(W.intDiv(Q,60),60)),this._addFieldValue(J.SECOND_OF_MINUTE,W.intMod(Q,60))}if(this.fieldValues.containsKey(J.MINUTE_OF_DAY)){var P$=this.fieldValues.remove(J.MINUTE_OF_DAY);if(j!==z$.LENIENT)J.MINUTE_OF_DAY.checkValidValue(P$);this._addFieldValue(J.HOUR_OF_DAY,W.intDiv(P$,60)),this._addFieldValue(J.MINUTE_OF_HOUR,W.intMod(P$,60))}if(j!==z$.LENIENT){if(this.fieldValues.containsKey(J.MILLI_OF_SECOND))J.MILLI_OF_SECOND.checkValidValue(this.fieldValues.get(J.MILLI_OF_SECOND));if(this.fieldValues.containsKey(J.MICRO_OF_SECOND))J.MICRO_OF_SECOND.checkValidValue(this.fieldValues.get(J.MICRO_OF_SECOND))}if(this.fieldValues.containsKey(J.MILLI_OF_SECOND)&&this.fieldValues.containsKey(J.MICRO_OF_SECOND)){var j$=this.fieldValues.remove(J.MILLI_OF_SECOND),L$=this.fieldValues.get(J.MICRO_OF_SECOND);this._putFieldValue0(J.MICRO_OF_SECOND,j$*1000+W.intMod(L$,1000))}if(this.fieldValues.containsKey(J.MICRO_OF_SECOND)&&this.fieldValues.containsKey(J.NANO_OF_SECOND)){var Q$=this.fieldValues.get(J.NANO_OF_SECOND);this._putFieldValue0(J.MICRO_OF_SECOND,W.intDiv(Q$,1000)),this.fieldValues.remove(J.MICRO_OF_SECOND)}if(this.fieldValues.containsKey(J.MILLI_OF_SECOND)&&this.fieldValues.containsKey(J.NANO_OF_SECOND)){var t$=this.fieldValues.get(J.NANO_OF_SECOND);this._putFieldValue0(J.MILLI_OF_SECOND,W.intDiv(t$,1e6)),this.fieldValues.remove(J.MILLI_OF_SECOND)}if(this.fieldValues.containsKey(J.MICRO_OF_SECOND)){var s$=this.fieldValues.remove(J.MICRO_OF_SECOND);this._putFieldValue0(J.NANO_OF_SECOND,s$*1000)}else if(this.fieldValues.containsKey(J.MILLI_OF_SECOND)){var K8=this.fieldValues.remove(J.MILLI_OF_SECOND);this._putFieldValue0(J.NANO_OF_SECOND,K8*1e6)}},v._resolveTimeInferZeroes=function z(j){var M=this.fieldValues.get(J.HOUR_OF_DAY),A=this.fieldValues.get(J.MINUTE_OF_HOUR),S=this.fieldValues.get(J.SECOND_OF_MINUTE),R=this.fieldValues.get(J.NANO_OF_SECOND);if(M==null)return;if(A==null&&(S!=null||R!=null))return;if(A!=null&&S==null&&R!=null)return;if(j!==z$.LENIENT){if(M!=null){if(j===z$.SMART&&M===24&&(A==null||A===0)&&(S==null||S===0)&&(R==null||R===0))M=0,this.excessDays=rq.ofDays(1);var r=J.HOUR_OF_DAY.checkValidIntValue(M);if(A!=null){var o=J.MINUTE_OF_HOUR.checkValidIntValue(A);if(S!=null){var I=J.SECOND_OF_MINUTE.checkValidIntValue(S);if(R!=null){var Q=J.NANO_OF_SECOND.checkValidIntValue(R);this._addObject(d.of(r,o,I,Q))}else this._addObject(d.of(r,o,I))}else if(R==null)this._addObject(d.of(r,o))}else if(S==null&&R==null)this._addObject(d.of(r,0))}}else if(M!=null){var P$=M;if(A!=null)if(S!=null){if(R==null)R=0;var j$=W.safeMultiply(P$,3600000000000);j$=W.safeAdd(j$,W.safeMultiply(A,60000000000)),j$=W.safeAdd(j$,W.safeMultiply(S,1e9)),j$=W.safeAdd(j$,R);var L$=W.floorDiv(j$,86400000000000),Q$=W.floorMod(j$,86400000000000);this._addObject(d.ofNanoOfDay(Q$)),this.excessDays=rq.ofDays(L$)}else{var t$=W.safeMultiply(P$,3600);t$=W.safeAdd(t$,W.safeMultiply(A,60));var s$=W.floorDiv(t$,86400),K8=W.floorMod(t$,86400);this._addObject(d.ofSecondOfDay(K8)),this.excessDays=rq.ofDays(s$)}else{var Hq=W.safeToInt(W.floorDiv(P$,24));P$=W.floorMod(P$,24),this._addObject(d.of(P$,0)),this.excessDays=rq.ofDays(Hq)}}this.fieldValues.remove(J.HOUR_OF_DAY),this.fieldValues.remove(J.MINUTE_OF_HOUR),this.fieldValues.remove(J.SECOND_OF_MINUTE),this.fieldValues.remove(J.NANO_OF_SECOND)},v._addObject=function z(j){if(j instanceof p4)this.date=j;else if(j instanceof d)this.time=j},v._resolveInstant=function z(){if(this.date!=null&&this.time!=null){var j=this.fieldValues.get(J.OFFSET_SECONDS);if(j!=null){var M=O$.ofTotalSeconds(j),A=this.date.atTime(this.time).atZone(M).getLong(J.INSTANT_SECONDS);this.fieldValues.put(J.INSTANT_SECONDS,A)}else if(this.zone!=null){var S=this.date.atTime(this.time).atZone(this.zone).getLong(J.INSTANT_SECONDS);this.fieldValues.put(J.INSTANT_SECONDS,S)}}},v.build=function z(j){return j.queryFrom(this)},v.isSupported=function z(j){if(j==null)return!1;return this.fieldValues.containsKey(j)&&this.fieldValues.get(j)!==void 0||this.date!=null&&this.date.isSupported(j)||this.time!=null&&this.time.isSupported(j)},v.getLong=function z(j){X(j,"field");var M=this.getFieldValue0(j);if(M==null){if(this.date!=null&&this.date.isSupported(j))return this.date.getLong(j);if(this.time!=null&&this.time.isSupported(j))return this.time.getLong(j);throw new _("Field not found: "+j)}return M},v.query=function z(j){if(j===c.zoneId())return this.zone;else if(j===c.chronology())return this.chrono;else if(j===c.localDate())return this.date!=null?q$.from(this.date):null;else if(j===c.localTime())return this.time;else if(j===c.zone()||j===c.offset())return j.queryFrom(this);else if(j===c.precision())return null;return j.queryFrom(this)},H}(zq),Ek=function(){function D(){if(arguments.length===1)if(arguments[0]instanceof D){this._constructorSelf.apply(this,arguments);return}else this._constructorFormatter.apply(this,arguments);else this._constructorParam.apply(this,arguments);this._caseSensitive=!0,this._strict=!0,this._parsed=[new uk(this)]}var H=D.prototype;return H._constructorParam=function v(z,j,M){this._locale=z,this._symbols=j,this._overrideChronology=M},H._constructorFormatter=function v(z){this._locale=z.locale(),this._symbols=z.decimalStyle(),this._overrideChronology=z.chronology()},H._constructorSelf=function v(z){this._locale=z._locale,this._symbols=z._symbols,this._overrideChronology=z._overrideChronology,this._overrideZone=z._overrideZone,this._caseSensitive=z._caseSensitive,this._strict=z._strict,this._parsed=[new uk(this)]},H.copy=function v(){return new D(this)},H.symbols=function v(){return this._symbols},H.isStrict=function v(){return this._strict},H.setStrict=function v(z){this._strict=z},H.locale=function v(){return this._locale},H.setLocale=function v(z){this._locale=z},H.startOptional=function v(){this._parsed.push(this.currentParsed().copy())},H.endOptional=function v(z){if(z)this._parsed.splice(this._parsed.length-2,1);else this._parsed.splice(this._parsed.length-1,1)},H.isCaseSensitive=function v(){return this._caseSensitive},H.setCaseSensitive=function v(z){this._caseSensitive=z},H.subSequenceEquals=function v(z,j,M,A,S){if(j+S>z.length||A+S>M.length)return!1;if(!this.isCaseSensitive())z=z.toLowerCase(),M=M.toLowerCase();for(var R=0;R<S;R++){var r=z[j+R],o=M[A+R];if(r!==o)return!1}return!0},H.charEquals=function v(z,j){if(this.isCaseSensitive())return z===j;return this.charEqualsIgnoreCase(z,j)},H.charEqualsIgnoreCase=function v(z,j){return z===j||z.toLowerCase()===j.toLowerCase()},H.setParsedField=function v(z,j,M,A){var S=this.currentParsed().fieldValues,R=S.get(z);return S.set(z,j),R!=null&&R!==j?~M:A},H.setParsedZone=function v(z){X(z,"zone"),this.currentParsed().zone=z},H.getParsed=function v(z){return this.currentParsed().fieldValues.get(z)},H.toParsed=function v(){return this.currentParsed()},H.currentParsed=function v(){return this._parsed[this._parsed.length-1]},H.setParsedLeapSecond=function v(){this.currentParsed().leapSecond=!0},H.getEffectiveChronology=function v(){var z=this.currentParsed().chrono;if(z==null){if(z=this._overrideChronology,z==null)z=E$.INSTANCE}return z},D}(),uk=function(D){T(H,D);function H(z){var j=D.call(this)||this;return j.chrono=null,j.zone=null,j.fieldValues=new Zk,j.leapSecond=!1,j.dateTimeParseContext=z,j}var v=H.prototype;return v.copy=function z(){var j=new H;return j.chrono=this.chrono,j.zone=this.zone,j.fieldValues.putAll(this.fieldValues),j.leapSecond=this.leapSecond,j.dateTimeParseContext=this.dateTimeParseContext,j},v.toString=function z(){return this.fieldValues+", "+this.chrono+", "+this.zone},v.isSupported=function z(j){return this.fieldValues.containsKey(j)},v.get=function z(j){var M=this.fieldValues.get(j);return Z(M!=null),M},v.query=function z(j){if(j===c.chronology())return this.chrono;if(j===c.zoneId()||j===c.zone())return this.zone;return D.prototype.query.call(this,j)},v.toBuilder=function z(){var j=new Pw;if(j.fieldValues.putAll(this.fieldValues),j.chrono=this.dateTimeParseContext.getEffectiveChronology(),this.zone!=null)j.zone=this.zone;else j.zone=this.overrideZone;return j.leapSecond=this.leapSecond,j.excessDays=this.excessDays,j},H}(_8),Rk=function(){function D(v,z,j){if(arguments.length===2&&arguments[1]instanceof Y$)this._temporal=D.adjust(v,z),this._locale=z.locale(),this._symbols=z.decimalStyle();else this._temporal=v,this._locale=z,this._symbols=j;this._optional=0}D.adjust=function v(z,j){return z};var H=D.prototype;return H.symbols=function v(){return this._symbols},H.startOptional=function v(){this._optional++},H.endOptional=function v(){this._optional--},H.getValueQuery=function v(z){var j=this._temporal.query(z);if(j==null&&this._optional===0)throw new _("Unable to extract value: "+this._temporal);return j},H.getValue=function v(z){try{return this._temporal.getLong(z)}catch(j){if(j instanceof _&&this._optional>0)return null;throw j}},H.temporal=function v(){return this._temporal},H.locale=function v(){return this._locale},H.setDateTime=function v(z){this._temporal=z},H.setLocale=function v(z){this._locale=z},D}(),V8={},RI=[0,90,181,273,0,91,182,274],xq=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.isDateBased=function z(){return!0},v.isTimeBased=function z(){return!1},v._isIso=function z(){return!0},H._getWeekRangeByLocalDate=function z(j){var M=H._getWeekBasedYear(j);return K$.of(1,H._getWeekRangeByYear(M))},H._getWeekRangeByYear=function z(j){var M=q$.of(j,1,1);if(M.dayOfWeek()===N$.THURSDAY||M.dayOfWeek()===N$.WEDNESDAY&&M.isLeapYear())return 53;return 52},H._getWeek=function z(j){var M=j.dayOfWeek().ordinal(),A=j.dayOfYear()-1,S=A+(3-M),R=W.intDiv(S,7),r=S-R*7,o=r-3;if(o<-3)o+=7;if(A<o)return H._getWeekRangeByLocalDate(j.withDayOfYear(180).minusYears(1)).maximum();var I=W.intDiv(A-o,7)+1;if(I===53){if((o===-3||o===-2&&j.isLeapYear())===!1)I=1}return I},H._getWeekBasedYear=function z(j){var M=j.year(),A=j.dayOfYear();if(A<=3){var S=j.dayOfWeek().ordinal();if(A-S<-2)M--}else if(A>=363){var R=j.dayOfWeek().ordinal();if(A=A-363-(j.isLeapYear()?1:0),A-R>=0)M++}return M},v.displayName=function z(){return this.toString()},v.resolve=function z(){return null},v.name=function z(){return this.toString()},H}(E6),LI=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.toString=function z(){return"DayOfQuarter"},v.baseUnit=function z(){return u.DAYS},v.rangeUnit=function z(){return S4},v.range=function z(){return K$.of(1,90,92)},v.isSupportedBy=function z(j){return j.isSupported(J.DAY_OF_YEAR)&&j.isSupported(J.MONTH_OF_YEAR)&&j.isSupported(J.YEAR)&&this._isIso(j)},v.rangeRefinedBy=function z(j){if(j.isSupported(this)===!1)throw new P("Unsupported field: DayOfQuarter");var M=j.getLong(NK);if(M===1){var A=j.getLong(J.YEAR);return E$.isLeapYear(A)?K$.of(1,91):K$.of(1,90)}else if(M===2)return K$.of(1,91);else if(M===3||M===4)return K$.of(1,92);return this.range()},v.getFrom=function z(j){if(j.isSupported(this)===!1)throw new P("Unsupported field: DayOfQuarter");var M=j.get(J.DAY_OF_YEAR),A=j.get(J.MONTH_OF_YEAR),S=j.getLong(J.YEAR);return M-RI[W.intDiv(A-1,3)+(E$.isLeapYear(S)?4:0)]},v.adjustInto=function z(j,M){var A=this.getFrom(j);return this.range().checkValidValue(M,this),j.with(J.DAY_OF_YEAR,j.getLong(J.DAY_OF_YEAR)+(M-A))},v.resolve=function z(j,M,A){var S=j.get(J.YEAR),R=j.get(NK);if(S==null||R==null)return null;var r=J.YEAR.checkValidIntValue(S),o=j.get(n9),I;if(A===z$.LENIENT){var Q=R;I=q$.of(r,1,1),I=I.plusMonths(W.safeMultiply(W.safeSubtract(Q,1),3)),I=I.plusDays(W.safeSubtract(o,1))}else{var P$=NK.range().checkValidIntValue(R,NK);if(A===z$.STRICT){var j$=92;if(P$===1)j$=E$.isLeapYear(r)?91:90;else if(P$===2)j$=91;K$.of(1,j$).checkValidValue(o,this)}else this.range().checkValidValue(o,this);I=q$.of(r,(P$-1)*3+1,1).plusDays(o-1)}return j.remove(this),j.remove(J.YEAR),j.remove(NK),I},H}(xq),CI=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.toString=function z(){return"QuarterOfYear"},v.baseUnit=function z(){return S4},v.rangeUnit=function z(){return u.YEARS},v.range=function z(){return K$.of(1,4)},v.isSupportedBy=function z(j){return j.isSupported(J.MONTH_OF_YEAR)&&this._isIso(j)},v.rangeRefinedBy=function z(j){return this.range()},v.getFrom=function z(j){if(j.isSupported(this)===!1)throw new P("Unsupported field: QuarterOfYear");var M=j.getLong(J.MONTH_OF_YEAR);return W.intDiv(M+2,3)},v.adjustInto=function z(j,M){var A=this.getFrom(j);return this.range().checkValidValue(M,this),j.with(J.MONTH_OF_YEAR,j.getLong(J.MONTH_OF_YEAR)+(M-A)*3)},H}(xq),nI=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.toString=function z(){return"WeekOfWeekBasedYear"},v.baseUnit=function z(){return u.WEEKS},v.rangeUnit=function z(){return y4},v.range=function z(){return K$.of(1,52,53)},v.isSupportedBy=function z(j){return j.isSupported(J.EPOCH_DAY)&&this._isIso(j)},v.rangeRefinedBy=function z(j){if(j.isSupported(this)===!1)throw new P("Unsupported field: WeekOfWeekBasedYear");return xq._getWeekRangeByLocalDate(q$.from(j))},v.getFrom=function z(j){if(j.isSupported(this)===!1)throw new P("Unsupported field: WeekOfWeekBasedYear");return xq._getWeek(q$.from(j))},v.adjustInto=function z(j,M){return this.range().checkValidValue(M,this),j.plus(W.safeSubtract(M,this.getFrom(j)),u.WEEKS)},v.resolve=function z(j,M,A){var S=j.get(fq),R=j.get(J.DAY_OF_WEEK);if(S==null||R==null)return null;var r=fq.range().checkValidIntValue(S,fq),o=j.get(r9),I;if(A===z$.LENIENT){var Q=R,P$=0;if(Q>7)P$=W.intDiv(Q-1,7),Q=W.intMod(Q-1,7)+1;else if(Q<1)P$=W.intDiv(Q,7)-1,Q=W.intMod(Q,7)+7;I=q$.of(r,1,4).plusWeeks(o-1).plusWeeks(P$).with(J.DAY_OF_WEEK,Q)}else{var j$=J.DAY_OF_WEEK.checkValidIntValue(R);if(A===z$.STRICT){var L$=q$.of(r,1,4),Q$=xq._getWeekRangeByLocalDate(L$);Q$.checkValidValue(o,this)}else this.range().checkValidValue(o,this);I=q$.of(r,1,4).plusWeeks(o-1).with(J.DAY_OF_WEEK,j$)}return j.remove(this),j.remove(fq),j.remove(J.DAY_OF_WEEK),I},v.displayName=function z(){return"Week"},H}(xq),rI=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.toString=function z(){return"WeekBasedYear"},v.baseUnit=function z(){return y4},v.rangeUnit=function z(){return u.FOREVER},v.range=function z(){return J.YEAR.range()},v.isSupportedBy=function z(j){return j.isSupported(J.EPOCH_DAY)&&this._isIso(j)},v.rangeRefinedBy=function z(j){return J.YEAR.range()},v.getFrom=function z(j){if(j.isSupported(this)===!1)throw new P("Unsupported field: WeekBasedYear");return xq._getWeekBasedYear(q$.from(j))},v.adjustInto=function z(j,M){if(this.isSupportedBy(j)===!1)throw new P("Unsupported field: WeekBasedYear");var A=this.range().checkValidIntValue(M,fq),S=q$.from(j),R=S.get(J.DAY_OF_WEEK),r=xq._getWeek(S);if(r===53&&xq._getWeekRangeByYear(A)===52)r=52;var o=q$.of(A,1,4),I=R-o.get(J.DAY_OF_WEEK)+(r-1)*7;return o=o.plusDays(I),j.with(o)},H}(xq),Lk=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._name=z,M._duration=j,M}var v=H.prototype;return v.duration=function z(){return this._duration},v.isDurationEstimated=function z(){return!0},v.isDateBased=function z(){return!0},v.isTimeBased=function z(){return!1},v.isSupportedBy=function z(j){return j.isSupported(J.EPOCH_DAY)},v.addTo=function z(j,M){switch(this){case y4:{var A=W.safeAdd(j.get(fq),M);return j.with(fq,A)}case S4:return j.plus(W.intDiv(M,256),u.YEARS).plus(W.intMod(M,256)*3,u.MONTHS);default:throw new f("Unreachable")}},v.between=function z(j,M){switch(this){case y4:return W.safeSubtract(M.getLong(fq),j.getLong(fq));case S4:return W.intDiv(j.until(M,u.MONTHS),3);default:throw new f("Unreachable")}},v.toString=function z(){return this._name},H}(b),n9=null,NK=null,r9=null,fq=null,y4=null,S4=null;function VI(){n9=new LI,NK=new CI,r9=new nI,fq=new rI,y4=new Lk("WeekBasedYears",x.ofSeconds(31556952)),S4=new Lk("QuarterYears",x.ofSeconds(7889238)),V8.DAY_OF_QUARTER=n9,V8.QUARTER_OF_YEAR=NK,V8.WEEK_OF_WEEK_BASED_YEAR=r9,V8.WEEK_BASED_YEAR=fq,V8.WEEK_BASED_YEARS=y4,V8.QUARTER_YEARS=S4,q$.prototype.isoWeekOfWeekyear=function(){return this.get(V8.WEEK_OF_WEEK_BASED_YEAR)},q$.prototype.isoWeekyear=function(){return this.get(V8.WEEK_BASED_YEAR)}}var mP=function(){function D(v,z,j,M){this._zeroDigit=v,this._zeroDigitCharCode=v.charCodeAt(0),this._positiveSign=z,this._negativeSign=j,this._decimalSeparator=M}var H=D.prototype;return H.positiveSign=function v(){return this._positiveSign},H.withPositiveSign=function v(z){if(z===this._positiveSign)return this;return new D(this._zeroDigit,z,this._negativeSign,this._decimalSeparator)},H.negativeSign=function v(){return this._negativeSign},H.withNegativeSign=function v(z){if(z===this._negativeSign)return this;return new D(this._zeroDigit,this._positiveSign,z,this._decimalSeparator)},H.zeroDigit=function v(){return this._zeroDigit},H.withZeroDigit=function v(z){if(z===this._zeroDigit)return this;return new D(z,this._positiveSign,this._negativeSign,this._decimalSeparator)},H.decimalSeparator=function v(){return this._decimalSeparator},H.withDecimalSeparator=function v(z){if(z===this._decimalSeparator)return this;return new D(this._zeroDigit,this._positiveSign,this._negativeSign,z)},H.convertToDigit=function v(z){var j=z.charCodeAt(0)-this._zeroDigitCharCode;return j>=0&&j<=9?j:-1},H.convertNumberToI18N=function v(z){if(this._zeroDigit==="0")return z;var j=this._zeroDigitCharCode-48,M="";for(var A=0;A<z.length;A++)M+=String.fromCharCode(z.charCodeAt(A)+j);return M},H.equals=function v(z){if(this===z)return!0;if(z instanceof D)return this._zeroDigit===z._zeroDigit&&this._positiveSign===z._positiveSign&&this._negativeSign===z._negativeSign&&this._decimalSeparator===z._decimalSeparator;return!1},H.hashCode=function v(){return this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator},H.toString=function v(){return"DecimalStyle["+this._zeroDigit+this._positiveSign+this._negativeSign+this._decimalSeparator+"]"},D.of=function v(){throw new Error("not yet supported")},D.availableLocales=function v(){throw new Error("not yet supported")},D}();mP.STANDARD=new mP("0","+","-",".");var y$=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.parse=function z(j,M,A){switch(this){case H.NORMAL:return!j||!M;case H.ALWAYS:case H.EXCEEDS_PAD:return!0;default:return!M&&!A}},H}(V);y$.NORMAL=new y$("NORMAL"),y$.NEVER=new y$("NEVER"),y$.ALWAYS=new y$("ALWAYS"),y$.EXCEEDS_PAD=new y$("EXCEEDS_PAD"),y$.NOT_NEGATIVE=new y$("NOT_NEGATIVE");var G$=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.isStandalone=function z(){switch(this){case H.FULL_STANDALONE:case H.SHORT_STANDALONE:case H.NARROW_STANDALONE:return!0;default:return!1}},v.asStandalone=function z(){switch(this){case H.FULL:return H.FULL_STANDALONE;case H.SHORT:return H.SHORT_STANDALONE;case H.NARROW:return H.NARROW_STANDALONE;default:return this}},v.asNormal=function z(){switch(this){case H.FULL_STANDALONE:return H.FULL;case H.SHORT_STANDALONE:return H.SHORT;case H.NARROW_STANDALONE:return H.NARROW;default:return this}},H}(V);G$.FULL=new G$("FULL"),G$.FULL_STANDALONE=new G$("FULL_STANDALONE"),G$.SHORT=new G$("SHORT"),G$.SHORT_STANDALONE=new G$("SHORT_STANDALONE"),G$.NARROW=new G$("NARROW"),G$.NARROW_STANDALONE=new G$("NARROW_STANDALONE");var Ck=function(){function D(v){if(v.length>1)throw new O('invalid literal, too long: "'+v+'"');this._literal=v}var H=D.prototype;return H.print=function v(z,j){return j.append(this._literal),!0},H.parse=function v(z,j,M){var A=j.length;if(M===A)return~M;var S=j.charAt(M);if(z.charEquals(this._literal,S)===!1)return~M;return M+this._literal.length},H.toString=function v(){if(this._literal==="'")return"''";return"'"+this._literal+"'"},D}(),V9=function(){function D(v,z){this._printerParsers=v,this._optional=z}var H=D.prototype;return H.withOptional=function v(z){if(z===this._optional)return this;return new D(this._printerParsers,z)},H.print=function v(z,j){var M=j.length();if(this._optional)z.startOptional();try{for(var A=0;A<this._printerParsers.length;A++){var S=this._printerParsers[A];if(S.print(z,j)===!1)return j.setLength(M),!0}}finally{if(this._optional)z.endOptional()}return!0},H.parse=function v(z,j,M){if(this._optional){z.startOptional();var A=M;for(var S=0;S<this._printerParsers.length;S++){var R=this._printerParsers[S];if(A=R.parse(z,j,A),A<0)return z.endOptional(!1),M}return z.endOptional(!0),A}else{for(var r=0;r<this._printerParsers.length;r++){var o=this._printerParsers[r];if(M=o.parse(z,j,M),M<0)break}return M}},H.toString=function v(){var z="";if(this._printerParsers!=null){z+=this._optional?"[":"(";for(var j=0;j<this._printerParsers.length;j++){var M=this._printerParsers[j];z+=M.toString()}z+=this._optional?"]":")"}return z},D}(),nk=function(){function D(v,z,j,M){if(X(v,"field"),v.range().isFixed()===!1)throw new O("Field must have a fixed set of values: "+v);if(z<0||z>9)throw new O("Minimum width must be from 0 to 9 inclusive but was "+z);if(j<1||j>9)throw new O("Maximum width must be from 1 to 9 inclusive but was "+j);if(j<z)throw new O("Maximum width must exceed or equal the minimum width but "+j+" < "+z);this.field=v,this.minWidth=z,this.maxWidth=j,this.decimalPoint=M}var H=D.prototype;return H.print=function v(z,j){var M=z.getValue(this.field);if(M===null)return!1;var A=z.symbols();if(M===0){if(this.minWidth>0){if(this.decimalPoint)j.append(A.decimalSeparator());for(var S=0;S<this.minWidth;S++)j.append(A.zeroDigit())}}else{var R=this.convertToFraction(M,A.zeroDigit()),r=Math.min(Math.max(R.length,this.minWidth),this.maxWidth);if(R=R.substr(0,r),R*1>0)while(R.length>this.minWidth&&R[R.length-1]==="0")R=R.substr(0,R.length-1);var o=R;if(o=A.convertNumberToI18N(o),this.decimalPoint)j.append(A.decimalSeparator());j.append(o)}return!0},H.parse=function v(z,j,M){var A=z.isStrict()?this.minWidth:0,S=z.isStrict()?this.maxWidth:9,R=j.length;if(M===R)return A>0?~M:M;if(this.decimalPoint){if(j[M]!==z.symbols().decimalSeparator())return A>0?~M:M;M++}var r=M+A;if(r>R)return~M;var o=Math.min(M+S,R),I=0,Q=M;while(Q<o){var P$=j.charAt(Q++),j$=z.symbols().convertToDigit(P$);if(j$<0){if(Q<r)return~M;Q--;break}I=I*10+j$}var L$=Q-M,Q$=Math.pow(10,L$),t$=this.convertFromFraction(I,Q$);return z.setParsedField(this.field,t$,M,Q)},H.convertToFraction=function v(z,j){var M=this.field.range();M.checkValidValue(z,this.field);var A=M.minimum(),S=M.maximum()-A+1,R=z-A,r=W.intDiv(R*1e9,S),o=""+r;while(o.length<9)o=j+o;return o},H.convertFromFraction=function v(z,j){var M=this.field.range(),A=M.minimum(),S=M.maximum()-A+1,R=W.intDiv(z*S,j);return R},H.toString=function v(){var z=this.decimalPoint?",DecimalPoint":"";return"Fraction("+this.field+","+this.minWidth+","+this.maxWidth+z+")"},D}(),x9=15,G4=[0,10,100,1000,1e4,1e5,1e6,1e7,1e8,1e9],Z4=function(){function D(v,z,j,M,A){if(A===void 0)A=0;this._field=v,this._minWidth=z,this._maxWidth=j,this._signStyle=M,this._subsequentWidth=A}var H=D.prototype;return H.field=function v(){return this._field},H.minWidth=function v(){return this._minWidth},H.maxWidth=function v(){return this._maxWidth},H.signStyle=function v(){return this._signStyle},H.withFixedWidth=function v(){if(this._subsequentWidth===-1)return this;return new D(this._field,this._minWidth,this._maxWidth,this._signStyle,-1)},H.withSubsequentWidth=function v(z){return new D(this._field,this._minWidth,this._maxWidth,this._signStyle,this._subsequentWidth+z)},H._isFixedWidth=function v(){return this._subsequentWidth===-1||this._subsequentWidth>0&&this._minWidth===this._maxWidth&&this._signStyle===y$.NOT_NEGATIVE},H.print=function v(z,j){var M=z.getValue(this._field);if(M==null)return!1;var A=this._getValue(z,M),S=z.symbols(),R=""+Math.abs(A);if(R.length>this._maxWidth)throw new _("Field "+this._field+" cannot be printed as the value "+A+" exceeds the maximum print width of "+this._maxWidth);if(R=S.convertNumberToI18N(R),A>=0)switch(this._signStyle){case y$.EXCEEDS_PAD:if(this._minWidth<x9&&A>=G4[this._minWidth])j.append(S.positiveSign());break;case y$.ALWAYS:j.append(S.positiveSign());break}else switch(this._signStyle){case y$.NORMAL:case y$.EXCEEDS_PAD:case y$.ALWAYS:j.append(S.negativeSign());break;case y$.NOT_NEGATIVE:throw new _("Field "+this._field+" cannot be printed as the value "+A+" cannot be negative according to the SignStyle")}for(var r=0;r<this._minWidth-R.length;r++)j.append(S.zeroDigit());return j.append(R),!0},H.parse=function v(z,j,M){var A=j.length;if(M===A)return~M;Z(M>=0&&M<A);var S=j.charAt(M),R=!1,r=!1;if(S===z.symbols().positiveSign()){if(this._signStyle.parse(!0,z.isStrict(),this._minWidth===this._maxWidth)===!1)return~M;r=!0,M++}else if(S===z.symbols().negativeSign()){if(this._signStyle.parse(!1,z.isStrict(),this._minWidth===this._maxWidth)===!1)return~M;R=!0,M++}else if(this._signStyle===y$.ALWAYS&&z.isStrict())return~M;var o=z.isStrict()||this._isFixedWidth()?this._minWidth:1,I=M+o;if(I>A)return~M;var Q=(z.isStrict()||this._isFixedWidth()?this._maxWidth:9)+Math.max(this._subsequentWidth,0),P$=0,j$=M;for(var L$=0;L$<2;L$++){var Q$=Math.min(j$+Q,A);while(j$<Q$){var t$=j.charAt(j$++),s$=z.symbols().convertToDigit(t$);if(s$<0){if(j$--,j$<I)return~M;break}if(j$-M>x9)throw new w("number text exceeds length");else P$=P$*10+s$}if(this._subsequentWidth>0&&L$===0){var K8=j$-M;Q=Math.max(o,K8-this._subsequentWidth),j$=M,P$=0}else break}if(R){if(P$===0&&z.isStrict())return~(M-1);if(P$!==0)P$=-P$}else if(this._signStyle===y$.EXCEEDS_PAD&&z.isStrict()){var Hq=j$-M;if(r){if(Hq<=this._minWidth)return~(M-1)}else if(Hq>this._minWidth)return~M}return this._setValue(z,P$,M,j$)},H._getValue=function v(z,j){return j},H._setValue=function v(z,j,M,A){return z.setParsedField(this._field,j,M,A)},H.toString=function v(){if(this._minWidth===1&&this._maxWidth===x9&&this._signStyle===y$.NORMAL)return"Value("+this._field+")";if(this._minWidth===this._maxWidth&&this._signStyle===y$.NOT_NEGATIVE)return"Value("+this._field+","+this._minWidth+")";return"Value("+this._field+","+this._minWidth+","+this._maxWidth+","+this._signStyle+")"},D}(),EP=function(D){T(H,D);function H(z,j,M,A,S){var R=D.call(this,z,j,M,y$.NOT_NEGATIVE)||this;if(j<1||j>10)throw new O("The width must be from 1 to 10 inclusive but was "+j);if(M<1||M>10)throw new O("The maxWidth must be from 1 to 10 inclusive but was "+M);if(M<j)throw new O("The maxWidth must be greater than the width");if(S===null){if(z.range().isValidValue(A)===!1)throw new O("The base value must be within the range of the field");if(A+G4[j]>W.MAX_SAFE_INTEGER)throw new _("Unable to add printer-parser as the range exceeds the capacity of an int")}return R._baseValue=A,R._baseDate=S,R}var v=H.prototype;return v._getValue=function z(j,M){var A=Math.abs(M),S=this._baseValue;if(this._baseDate!==null){j.temporal();var R=E$.INSTANCE;S=R.date(this._baseDate).get(this._field)}if(M>=S&&M<S+G4[this._minWidth])return A%G4[this._minWidth];return A%G4[this._maxWidth]},v._setValue=function z(j,M,A,S){var R=this._baseValue;if(this._baseDate!=null){var r=j.getEffectiveChronology();R=r.date(this._baseDate).get(this._field)}var o=S-A;if(o===this._minWidth&&M>=0){var I=G4[this._minWidth],Q=R%I,P$=R-Q;if(R>0)M=P$+M;else M=P$-M;if(M<R)M+=I}return j.setParsedField(this._field,M,A,S)},v.withFixedWidth=function z(){if(this._subsequentWidth===-1)return this;return new H(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate)},v.withSubsequentWidth=function z(j){return new H(this._field,this._minWidth,this._maxWidth,this._baseValue,this._baseDate,this._subsequentWidth+j)},v.isFixedWidth=function z(j){if(j.isStrict()===!1)return!1;return D.prototype.isFixedWidth.call(this,j)},v.toString=function z(){return"ReducedValue("+this._field+","+this._minWidth+","+this._maxWidth+","+(this._baseDate!=null?this._baseDate:this._baseValue)+")"},H}(Z4),jw=["+HH","+HHmm","+HH:mm","+HHMM","+HH:MM","+HHMMss","+HH:MM:ss","+HHMMSS","+HH:MM:SS"],dq=function(){function D(v,z){X(v,"noOffsetText"),X(z,"pattern"),this.noOffsetText=v,this.type=this._checkPattern(z)}var H=D.prototype;return H._checkPattern=function v(z){for(var j=0;j<jw.length;j++)if(jw[j]===z)return j;throw new O("Invalid zone offset pattern: "+z)},H.print=function v(z,j){var M=z.getValue(J.OFFSET_SECONDS);if(M==null)return!1;var A=W.safeToInt(M);if(A===0)j.append(this.noOffsetText);else{var S=Math.abs(W.intMod(W.intDiv(A,3600),100)),R=Math.abs(W.intMod(W.intDiv(A,60),60)),r=Math.abs(W.intMod(A,60)),o=j.length(),I=S;if(j.append(A<0?"-":"+").appendChar(W.intDiv(S,10)+"0").appendChar(W.intMod(S,10)+"0"),this.type>=3||this.type>=1&&R>0){if(j.append(this.type%2===0?":":"").appendChar(W.intDiv(R,10)+"0").appendChar(R%10+"0"),I+=R,this.type>=7||this.type>=5&&r>0)j.append(this.type%2===0?":":"").appendChar(W.intDiv(r,10)+"0").appendChar(r%10+"0"),I+=r}if(I===0)j.setLength(o),j.append(this.noOffsetText)}return!0},H.parse=function v(z,j,M){var A=j.length,S=this.noOffsetText.length;if(S===0){if(M===A)return z.setParsedField(J.OFFSET_SECONDS,0,M,M)}else{if(M===A)return~M;if(z.subSequenceEquals(j,M,this.noOffsetText,0,S))return z.setParsedField(J.OFFSET_SECONDS,0,M,M+S)}var R=j[M];if(R==="+"||R==="-"){var r=R==="-"?-1:1,o=[0,0,0,0];if(o[0]=M+1,(this._parseNumber(o,1,j,!0)||this._parseNumber(o,2,j,this.type>=3)||this._parseNumber(o,3,j,!1))===!1){var I=W.safeZero(r*(o[1]*3600+o[2]*60+o[3]));return z.setParsedField(J.OFFSET_SECONDS,I,M,o[0])}}if(S===0)return z.setParsedField(J.OFFSET_SECONDS,0,M,M+S);return~M},H._parseNumber=function v(z,j,M,A){if((this.type+3)/2<j)return!1;var S=z[0];if(this.type%2===0&&j>1){if(S+1>M.length||M[S]!==":")return A;S++}if(S+2>M.length)return A;var R=M[S++],r=M[S++];if(R<"0"||R>"9"||r<"0"||r>"9")return A;var o=(R.charCodeAt(0)-48)*10+(r.charCodeAt(0)-48);if(o<0||o>59)return A;return z[j]=o,z[0]=S,!1},H.toString=function v(){var z=this.noOffsetText.replace("'","''");return"Offset("+jw[this.type]+",'"+z+"')"},D}();dq.INSTANCE_ID=new dq("Z","+HH:MM:ss"),dq.PATTERNS=jw;var d9=function(){function D(v,z,j){this._printerParser=v,this._padWidth=z,this._padChar=j}var H=D.prototype;return H.print=function v(z,j){var M=j.length();if(this._printerParser.print(z,j)===!1)return!1;var A=j.length()-M;if(A>this._padWidth)throw new _("Cannot print as output of "+A+" characters exceeds pad width of "+this._padWidth);for(var S=0;S<this._padWidth-A;S++)j.insert(M,this._padChar);return!0},H.parse=function v(z,j,M){var A=z.isStrict(),S=z.isCaseSensitive();if(Z(!(M>j.length)),Z(M>=0),M===j.length)return~M;var R=M+this._padWidth;if(R>j.length){if(A)return~M;R=j.length}var r=M;while(r<R&&(S?j[r]===this._padChar:z.charEquals(j[r],this._padChar)))r++;j=j.substring(0,R);var o=this._printerParser.parse(z,j,r);if(o!==R&&A)return~(M+r);return o},H.toString=function v(){return"Pad("+this._printerParser+","+this._padWidth+(this._padChar===" "?")":",'"+this._padChar+"')")},D}(),Z8=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.print=function z(){return!0},v.parse=function z(j,M,A){switch(this){case H.SENSITIVE:j.setCaseSensitive(!0);break;case H.INSENSITIVE:j.setCaseSensitive(!1);break;case H.STRICT:j.setStrict(!0);break;case H.LENIENT:j.setStrict(!1);break}return A},v.toString=function z(){switch(this){case H.SENSITIVE:return"ParseCaseSensitive(true)";case H.INSENSITIVE:return"ParseCaseSensitive(false)";case H.STRICT:return"ParseStrict(true)";case H.LENIENT:return"ParseStrict(false)"}},H}(V);Z8.SENSITIVE=new Z8("SENSITIVE"),Z8.INSENSITIVE=new Z8("INSENSITIVE"),Z8.STRICT=new Z8("STRICT"),Z8.LENIENT=new Z8("LENIENT");var b9=function(){function D(v){this._literal=v}var H=D.prototype;return H.print=function v(z,j){return j.append(this._literal),!0},H.parse=function v(z,j,M){var A=j.length;if(Z(!(M>A||M<0)),z.subSequenceEquals(j,M,this._literal,0,this._literal.length)===!1)return~M;return M+this._literal.length},H.toString=function v(){var z=this._literal.replace("'","''");return"'"+z+"'"},D}(),uP=function(){function D(){}return D.getRules=function H(v){throw new _("unsupported ZoneId:"+v)},D.getAvailableZoneIds=function H(){return[]},D}(),Mq=function(D){T(H,D),H.ofId=function z(j){var M=uP.getRules(j);return new H(j,M)};function H(z,j){var M=D.call(this)||this;return M._id=z,M._rules=j,M}var v=H.prototype;return v.id=function z(){return this._id},v.rules=function z(){return this._rules},H}(m$),rk=function(){function D(v,z){this.query=v,this.description=z}var H=D.prototype;return H.print=function v(z,j){var M=z.getValueQuery(this.query);if(M==null)return!1;return j.append(M.id()),!0},H.parse=function v(z,j,M){var A=j.length;if(M>A)return~M;if(M===A)return~M;var S=j.charAt(M);if(S==="+"||S==="-"){var R=z.copy(),r=dq.INSTANCE_ID.parse(R,j,M);if(r<0)return r;var o=R.getParsed(J.OFFSET_SECONDS),I=O$.ofTotalSeconds(o);return z.setParsedZone(I),r}else if(A>=M+2){var Q=j.charAt(M+1);if(z.charEquals(S,"U")&&z.charEquals(Q,"T")){if(A>=M+3&&z.charEquals(j.charAt(M+2),"C"))return this._parsePrefixedOffset(z,j,M,M+3);return this._parsePrefixedOffset(z,j,M,M+2)}else if(z.charEquals(S,"G")&&A>=M+3&&z.charEquals(Q,"M")&&z.charEquals(j.charAt(M+2),"T"))return this._parsePrefixedOffset(z,j,M,M+3)}if(j.substr(M,6)==="SYSTEM")return z.setParsedZone(m$.systemDefault()),M+6;if(z.charEquals(S,"Z"))return z.setParsedZone(O$.UTC),M+1;var P$=uP.getAvailableZoneIds();if(o9.size!==P$.length)o9=Vk.createTreeMap(P$);var j$=A-M,L$=o9.treeMap,Q$=null,t$=0;while(L$!=null){var s$=j.substr(M,Math.min(L$.length,j$));if(L$=L$.get(s$),L$!=null&&L$.isLeaf)Q$=s$,t$=L$.length}if(Q$!=null)return z.setParsedZone(Mq.ofId(Q$)),M+t$;return~M},H._parsePrefixedOffset=function v(z,j,M,A){var S=j.substring(M,A).toUpperCase(),R=z.copy();if(A<j.length&&z.charEquals(j.charAt(A),"Z"))return z.setParsedZone(m$.ofOffset(S,O$.UTC)),A;var r=dq.INSTANCE_ID.parse(R,j,A);if(r<0)return z.setParsedZone(m$.ofOffset(S,O$.UTC)),A;var o=R.getParsed(J.OFFSET_SECONDS),I=O$.ofTotalSeconds(o);return z.setParsedZone(m$.ofOffset(S,I)),r},H.toString=function v(){return this.description},D}(),Vk=function(){D.createTreeMap=function H(v){var z=v.sort(function(A,S){return A.length-S.length}),j=new xI(z[0].length,!1);for(var M=0;M<z.length;M++)j.add(z[M]);return new D(z.length,j)};function D(H,v){this.size=H,this.treeMap=v}return D}(),xI=function(){function D(v,z){if(v===void 0)v=0;if(z===void 0)z=!1;this.length=v,this.isLeaf=z,this._treeMap={}}var H=D.prototype;return H.add=function v(z){var j=z.length;if(j===this.length)this._treeMap[z]=new D(j,!0);else if(j>this.length){var M=z.substr(0,this.length),A=this._treeMap[M];if(A==null)A=new D(j,!1),this._treeMap[M]=A;A.add(z)}},H.get=function v(z){return this._treeMap[z]},D}(),o9=new Vk([]),h_=15,R$=function(){function D(){this._active=this,this._parent=null,this._printerParsers=[],this._optional=!1,this._padNextWidth=0,this._padNextChar=null,this._valueParserIndex=-1}D._of=function v(z,j){X(z,"parent"),X(j,"optional");var M=new D;return M._parent=z,M._optional=j,M};var H=D.prototype;return H.parseCaseSensitive=function v(){return this._appendInternalPrinterParser(Z8.SENSITIVE),this},H.parseCaseInsensitive=function v(){return this._appendInternalPrinterParser(Z8.INSENSITIVE),this},H.parseStrict=function v(){return this._appendInternalPrinterParser(Z8.STRICT),this},H.parseLenient=function v(){return this._appendInternalPrinterParser(Z8.LENIENT),this},H.parseDefaulting=function v(z,j){return X(z),this._appendInternal(new bI(z,j)),this},H.appendValue=function v(){if(arguments.length===1)return this._appendValue1.apply(this,arguments);else if(arguments.length===2)return this._appendValue2.apply(this,arguments);else return this._appendValue4.apply(this,arguments)},H._appendValue1=function v(z){return X(z),this._appendValuePrinterParser(new Z4(z,1,h_,y$.NORMAL)),this},H._appendValue2=function v(z,j){if(X(z),j<1||j>h_)throw new O("The width must be from 1 to "+h_+" inclusive but was "+j);var M=new Z4(z,j,j,y$.NOT_NEGATIVE);return this._appendValuePrinterParser(M),this},H._appendValue4=function v(z,j,M,A){if(X(z),X(A),j===M&&A===y$.NOT_NEGATIVE)return this._appendValue2(z,M);if(j<1||j>h_)throw new O("The minimum width must be from 1 to "+h_+" inclusive but was "+j);if(M<1||M>h_)throw new O("The minimum width must be from 1 to "+h_+" inclusive but was "+M);if(M<j)throw new O("The maximum width must exceed or equal the minimum width but "+M+" < "+j);var S=new Z4(z,j,M,A);return this._appendValuePrinterParser(S),this},H.appendValueReduced=function v(){if(arguments.length===4&&arguments[3]instanceof p4)return this._appendValueReducedFieldWidthMaxWidthBaseDate.apply(this,arguments);else return this._appendValueReducedFieldWidthMaxWidthBaseValue.apply(this,arguments)},H._appendValueReducedFieldWidthMaxWidthBaseValue=function v(z,j,M,A){X(z,"field");var S=new EP(z,j,M,A,null);return this._appendValuePrinterParser(S),this},H._appendValueReducedFieldWidthMaxWidthBaseDate=function v(z,j,M,A){X(z,"field"),X(A,"baseDate"),C(A,p4,"baseDate");var S=new EP(z,j,M,0,A);return this._appendValuePrinterParser(S),this},H._appendValuePrinterParser=function v(z){if(Z(z!=null),this._active._valueParserIndex>=0&&this._active._printerParsers[this._active._valueParserIndex]instanceof Z4){var j=this._active._valueParserIndex,M=this._active._printerParsers[j];if(z.minWidth()===z.maxWidth()&&z.signStyle()===y$.NOT_NEGATIVE)M=M.withSubsequentWidth(z.maxWidth()),this._appendInternal(z.withFixedWidth()),this._active._valueParserIndex=j;else M=M.withFixedWidth(),this._active._valueParserIndex=this._appendInternal(z);this._active._printerParsers[j]=M}else this._active._valueParserIndex=this._appendInternal(z);return this},H.appendFraction=function v(z,j,M,A){return this._appendInternal(new nk(z,j,M,A)),this},H.appendInstant=function v(z){if(z===void 0)z=-2;if(z<-2||z>9)throw new O("Invalid fractional digits: "+z);return this._appendInternal(new dI(z)),this},H.appendOffsetId=function v(){return this._appendInternal(dq.INSTANCE_ID),this},H.appendOffset=function v(z,j){return this._appendInternalPrinterParser(new dq(j,z)),this},H.appendZoneId=function v(){return this._appendInternal(new rk(c.zoneId(),"ZoneId()")),this},H.appendPattern=function v(z){return X(z,"pattern"),this._parsePattern(z),this},H.appendZoneText=function v(){throw new O("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},H.appendText=function v(){throw new O("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},H.appendLocalizedOffset=function v(){throw new O("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},H.appendWeekField=function v(){throw new O("Pattern using (localized) text not implemented, use @js-joda/locale plugin!")},H._parsePattern=function v(z){var j={G:J.ERA,y:J.YEAR_OF_ERA,u:J.YEAR,Q:V8.QUARTER_OF_YEAR,q:V8.QUARTER_OF_YEAR,M:J.MONTH_OF_YEAR,L:J.MONTH_OF_YEAR,D:J.DAY_OF_YEAR,d:J.DAY_OF_MONTH,F:J.ALIGNED_DAY_OF_WEEK_IN_MONTH,E:J.DAY_OF_WEEK,c:J.DAY_OF_WEEK,e:J.DAY_OF_WEEK,a:J.AMPM_OF_DAY,H:J.HOUR_OF_DAY,k:J.CLOCK_HOUR_OF_DAY,K:J.HOUR_OF_AMPM,h:J.CLOCK_HOUR_OF_AMPM,m:J.MINUTE_OF_HOUR,s:J.SECOND_OF_MINUTE,S:J.NANO_OF_SECOND,A:J.MILLI_OF_DAY,n:J.NANO_OF_SECOND,N:J.NANO_OF_DAY};for(var M=0;M<z.length;M++){var A=z.charAt(M);if(A>="A"&&A<="Z"||A>="a"&&A<="z"){var S=M++;for(;M<z.length&&z.charAt(M)===A;M++);var R=M-S;if(A==="p"){var r=0;if(M<z.length){if(A=z.charAt(M),A>="A"&&A<="Z"||A>="a"&&A<="z"){r=R,S=M++;for(;M<z.length&&z.charAt(M)===A;M++);R=M-S}}if(r===0)throw new O("Pad letter 'p' must be followed by valid pad pattern: "+z);this.padNext(r)}var o=j[A];if(o!=null)this._parseField(A,R,o);else if(A==="z")if(R>4)throw new O("Too many pattern letters: "+A);else if(R===4)this.appendZoneText(G$.FULL);else this.appendZoneText(G$.SHORT);else if(A==="V"){if(R!==2)throw new O("Pattern letter count must be 2: "+A);this.appendZoneId()}else if(A==="Z")if(R<4)this.appendOffset("+HHMM","+0000");else if(R===4)this.appendLocalizedOffset(G$.FULL);else if(R===5)this.appendOffset("+HH:MM:ss","Z");else throw new O("Too many pattern letters: "+A);else if(A==="O")if(R===1)this.appendLocalizedOffset(G$.SHORT);else if(R===4)this.appendLocalizedOffset(G$.FULL);else throw new O("Pattern letter count must be 1 or 4: "+A);else if(A==="X"){if(R>5)throw new O("Too many pattern letters: "+A);this.appendOffset(dq.PATTERNS[R+(R===1?0:1)],"Z")}else if(A==="x"){if(R>5)throw new O("Too many pattern letters: "+A);var I=R===1?"+00":R%2===0?"+0000":"+00:00";this.appendOffset(dq.PATTERNS[R+(R===1?0:1)],I)}else if(A==="W"){if(R>1)throw new O("Too many pattern letters: "+A);this.appendWeekField("W",R)}else if(A==="w"){if(R>2)throw new O("Too many pattern letters: "+A);this.appendWeekField("w",R)}else if(A==="Y")this.appendWeekField("Y",R);else throw new O("Unknown pattern letter: "+A);M--}else if(A==="'"){var Q=M++;for(;M<z.length;M++)if(z.charAt(M)==="'")if(M+1<z.length&&z.charAt(M+1)==="'")M++;else break;if(M>=z.length)throw new O("Pattern ends with an incomplete string literal: "+z);var P$=z.substring(Q+1,M);if(P$.length===0)this.appendLiteral("'");else this.appendLiteral(P$.replace("''","'"))}else if(A==="[")this.optionalStart();else if(A==="]"){if(this._active._parent===null)throw new O("Pattern invalid as it contains ] without previous [");this.optionalEnd()}else if(A==="{"||A==="}"||A==="#")throw new O("Pattern includes reserved character: '"+A+"'");else this.appendLiteral(A)}},H._parseField=function v(z,j,M){switch(z){case"u":case"y":if(j===2)this.appendValueReduced(M,2,2,EP.BASE_DATE);else if(j<4)this.appendValue(M,j,h_,y$.NORMAL);else this.appendValue(M,j,h_,y$.EXCEEDS_PAD);break;case"M":case"Q":switch(j){case 1:this.appendValue(M);break;case 2:this.appendValue(M,2);break;case 3:this.appendText(M,G$.SHORT);break;case 4:this.appendText(M,G$.FULL);break;case 5:this.appendText(M,G$.NARROW);break;default:throw new O("Too many pattern letters: "+z)}break;case"L":case"q":switch(j){case 1:this.appendValue(M);break;case 2:this.appendValue(M,2);break;case 3:this.appendText(M,G$.SHORT_STANDALONE);break;case 4:this.appendText(M,G$.FULL_STANDALONE);break;case 5:this.appendText(M,G$.NARROW_STANDALONE);break;default:throw new O("Too many pattern letters: "+z)}break;case"e":switch(j){case 1:case 2:this.appendWeekField("e",j);break;case 3:this.appendText(M,G$.SHORT);break;case 4:this.appendText(M,G$.FULL);break;case 5:this.appendText(M,G$.NARROW);break;default:throw new O("Too many pattern letters: "+z)}break;case"c":switch(j){case 1:this.appendWeekField("c",j);break;case 2:throw new O("Invalid number of pattern letters: "+z);case 3:this.appendText(M,G$.SHORT_STANDALONE);break;case 4:this.appendText(M,G$.FULL_STANDALONE);break;case 5:this.appendText(M,G$.NARROW_STANDALONE);break;default:throw new O("Too many pattern letters: "+z)}break;case"a":if(j===1)this.appendText(M,G$.SHORT);else throw new O("Too many pattern letters: "+z);break;case"E":case"G":switch(j){case 1:case 2:case 3:this.appendText(M,G$.SHORT);break;case 4:this.appendText(M,G$.FULL);break;case 5:this.appendText(M,G$.NARROW);break;default:throw new O("Too many pattern letters: "+z)}break;case"S":this.appendFraction(J.NANO_OF_SECOND,j,j,!1);break;case"F":if(j===1)this.appendValue(M);else throw new O("Too many pattern letters: "+z);break;case"d":case"h":case"H":case"k":case"K":case"m":case"s":if(j===1)this.appendValue(M);else if(j===2)this.appendValue(M,j);else throw new O("Too many pattern letters: "+z);break;case"D":if(j===1)this.appendValue(M);else if(j<=3)this.appendValue(M,j);else throw new O("Too many pattern letters: "+z);break;default:if(j===1)this.appendValue(M);else this.appendValue(M,j);break}},H.padNext=function v(){if(arguments.length===1)return this._padNext1.apply(this,arguments);else return this._padNext2.apply(this,arguments)},H._padNext1=function v(z){return this._padNext2(z," ")},H._padNext2=function v(z,j){if(z<1)throw new O("The pad width must be at least one but was "+z);return this._active._padNextWidth=z,this._active._padNextChar=j,this._active._valueParserIndex=-1,this},H.optionalStart=function v(){return this._active._valueParserIndex=-1,this._active=D._of(this._active,!0),this},H.optionalEnd=function v(){if(this._active._parent==null)throw new f("Cannot call optionalEnd() as there was no previous call to optionalStart()");if(this._active._printerParsers.length>0){var z=new V9(this._active._printerParsers,this._active._optional);this._active=this._active._parent,this._appendInternal(z)}else this._active=this._active._parent;return this},H._appendInternal=function v(z){if(Z(z!=null),this._active._padNextWidth>0){if(z!=null)z=new d9(z,this._active._padNextWidth,this._active._padNextChar);this._active._padNextWidth=0,this._active._padNextChar=0}return this._active._printerParsers.push(z),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},H.appendLiteral=function v(z){if(Z(z!=null),z.length>0)if(z.length===1)this._appendInternalPrinterParser(new Ck(z.charAt(0)));else this._appendInternalPrinterParser(new b9(z));return this},H._appendInternalPrinterParser=function v(z){if(Z(z!=null),this._active._padNextWidth>0){if(z!=null)z=new d9(z,this._active._padNextWidth,this._active._padNextChar);this._active._padNextWidth=0,this._active._padNextChar=0}return this._active._printerParsers.push(z),this._active._valueParserIndex=-1,this._active._printerParsers.length-1},H.append=function v(z){return X(z,"formatter"),this._appendInternal(z._toPrinterParser(!1)),this},H.toFormatter=function v(z){if(z===void 0)z=z$.SMART;while(this._active._parent!=null)this.optionalEnd();var j=new V9(this._printerParsers,!1);return new Y$(j,null,mP.STANDARD,z,null,null,null)},D}(),N4=315569520000,RP=62167219200,dI=function(){function D(v){this.fractionalDigits=v}var H=D.prototype;return H.print=function v(z,j){var M=z.getValue(J.INSTANT_SECONDS),A=0;if(z.temporal().isSupported(J.NANO_OF_SECOND))A=z.temporal().getLong(J.NANO_OF_SECOND);if(M==null)return!1;var S=M,R=J.NANO_OF_SECOND.checkValidIntValue(A);if(S>=-RP){var r=S-N4+RP,o=W.floorDiv(r,N4)+1,I=W.floorMod(r,N4),Q=u$.ofEpochSecond(I-RP,0,O$.UTC);if(o>0)j.append("+").append(o);if(j.append(Q.toString()),Q.second()===0)j.append(":00")}else{var P$=S+RP,j$=W.intDiv(P$,N4),L$=W.intMod(P$,N4),Q$=u$.ofEpochSecond(L$-RP,0,O$.UTC),t$=j.length();if(j.append(Q$.toString()),Q$.second()===0)j.append(":00");if(j$<0)if(Q$.year()===-1e4)j.replace(t$,t$+2,""+(j$-1));else if(L$===0)j.insert(t$,j$);else j.insert(t$+1,Math.abs(j$))}if(this.fractionalDigits===-2){if(R!==0)if(j.append("."),W.intMod(R,1e6)===0)j.append((""+(W.intDiv(R,1e6)+1000)).substring(1));else if(W.intMod(R,1000)===0)j.append((""+(W.intDiv(R,1000)+1e6)).substring(1));else j.append((""+(R+1e9)).substring(1))}else if(this.fractionalDigits>0||this.fractionalDigits===-1&&R>0){j.append(".");var s$=1e8;for(var K8=0;this.fractionalDigits===-1&&R>0||K8<this.fractionalDigits;K8++){var Hq=W.intDiv(R,s$);j.append(Hq),R=R-Hq*s$,s$=W.intDiv(s$,10)}}return j.append("Z"),!0},H.parse=function v(z,j,M){var A=z.copy(),S=this.fractionalDigits<0?0:this.fractionalDigits,R=this.fractionalDigits<0?9:this.fractionalDigits,r=new R$().append(Y$.ISO_LOCAL_DATE).appendLiteral("T").appendValue(J.HOUR_OF_DAY,2).appendLiteral(":").appendValue(J.MINUTE_OF_HOUR,2).appendLiteral(":").appendValue(J.SECOND_OF_MINUTE,2).appendFraction(J.NANO_OF_SECOND,S,R,!0).appendLiteral("Z").toFormatter()._toPrinterParser(!1),o=r.parse(A,j,M);if(o<0)return o;var I=A.getParsed(J.YEAR),Q=A.getParsed(J.MONTH_OF_YEAR),P$=A.getParsed(J.DAY_OF_MONTH),j$=A.getParsed(J.HOUR_OF_DAY),L$=A.getParsed(J.MINUTE_OF_HOUR),Q$=A.getParsed(J.SECOND_OF_MINUTE),t$=A.getParsed(J.NANO_OF_SECOND),s$=Q$!=null?Q$:0,K8=t$!=null?t$:0,Hq=W.intMod(I,1e4),fw=0;if(j$===24&&L$===0&&s$===0&&K8===0)j$=0,fw=1;else if(j$===23&&L$===59&&s$===60)z.setParsedLeapSecond(),s$=59;var nP;try{var Mw=u$.of(Hq,Q,P$,j$,L$,s$,0).plusDays(fw);nP=Mw.toEpochSecond(O$.UTC),nP+=W.safeMultiply(W.intDiv(I,1e4),N4)}catch(tk){return~M}var mK=o;return mK=z.setParsedField(J.INSTANT_SECONDS,nP,M,mK),z.setParsedField(J.NANO_OF_SECOND,K8,M,mK)},H.toString=function v(){return"Instant()"},D}(),bI=function(){function D(v,z){this._field=v,this._value=z}var H=D.prototype;return H.print=function v(){return!0},H.parse=function v(z,j,M){if(z.getParsed(this._field)==null)z.setParsedField(this._field,this._value,M,M);return M},D}();function oI(){EP.BASE_DATE=q$.of(2000,1,1),R$.CompositePrinterParser=V9,R$.PadPrinterParserDecorator=d9,R$.SettingsParser=Z8,R$.CharLiteralPrinterParser=b9,R$.StringLiteralPrinterParser=b9,R$.CharLiteralPrinterParser=Ck,R$.NumberPrinterParser=Z4,R$.ReducedPrinterParser=EP,R$.FractionPrinterParser=nk,R$.OffsetIdPrinterParser=dq,R$.ZoneIdPrinterParser=rk}var xk=function(){function D(){this._str=""}var H=D.prototype;return H.append=function v(z){return this._str+=z,this},H.appendChar=function v(z){return this._str+=z[0],this},H.insert=function v(z,j){return this._str=this._str.slice(0,z)+j+this._str.slice(z),this},H.replace=function v(z,j,M){return this._str=this._str.slice(0,z)+M+this._str.slice(j),this},H.length=function v(){return this._str.length},H.setLength=function v(z){return this._str=this._str.slice(0,z),this},H.toString=function v(){return this._str},D}(),Y$=function(){D.parsedExcessDays=function v(){return D.PARSED_EXCESS_DAYS},D.parsedLeapSecond=function v(){return D.PARSED_LEAP_SECOND},D.ofPattern=function v(z){return new R$().appendPattern(z).toFormatter()};function D(v,z,j,M,A,S,R){if(S===void 0)S=E$.INSTANCE;Z(v!=null),Z(j!=null),Z(M!=null),this._printerParser=v,this._locale=z,this._decimalStyle=j,this._resolverStyle=M,this._resolverFields=A,this._chrono=S,this._zone=R}var H=D.prototype;return H.locale=function v(){return this._locale},H.decimalStyle=function v(){return this._decimalStyle},H.chronology=function v(){return this._chrono},H.withChronology=function v(z){if(this._chrono!=null&&this._chrono.equals(z))return this;return new D(this._printerParser,this._locale,this._decimalStyle,this._resolverStyle,this._resolverFields,z,this._zone)},H.withLocale=function v(){return this},H.withResolverStyle=function v(z){if(X(z,"resolverStyle"),z.equals(this._resolverStyle))return this;return new D(this._printerParser,this._locale,this._decimalStyle,z,this._resolverFields,this._chrono,this._zone)},H.format=function v(z){var j=new xk(32);return this._formatTo(z,j),j.toString()},H._formatTo=function v(z,j){X(z,"temporal"),X(j,"appendable");var M=new Rk(z,this);this._printerParser.print(M,j)},H.parse=function v(z,j){if(arguments.length===1)return this.parse1(z);else return this.parse2(z,j)},H.parse1=function v(z){X(z,"text");try{return this._parseToBuilder(z,null).resolve(this._resolverStyle,this._resolverFields)}catch(j){if(j instanceof K)throw j;else throw this._createError(z,j)}},H.parse2=function v(z,j){X(z,"text"),X(j,"type");try{var M=this._parseToBuilder(z,null).resolve(this._resolverStyle,this._resolverFields);return M.build(j)}catch(A){if(A instanceof K)throw A;else throw this._createError(z,A)}},H._createError=function v(z,j){var M="";if(z.length>64)M=z.substring(0,64)+"...";else M=z;return new K("Text '"+M+"' could not be parsed: "+j.message,z,0,j)},H._parseToBuilder=function v(z,j){var M=j!=null?j:new C9(0),A=this._parseUnresolved0(z,M);if(A==null||M.getErrorIndex()>=0||j==null&&M.getIndex()<z.length){var S="";if(z.length>64)S=z.substr(0,64).toString()+"...";else S=z;if(M.getErrorIndex()>=0)throw new K("Text '"+S+"' could not be parsed at index "+M.getErrorIndex(),z,M.getErrorIndex());else throw new K("Text '"+S+"' could not be parsed, unparsed text found at index "+M.getIndex(),z,M.getIndex())}return A.toBuilder()},H.parseUnresolved=function v(z,j){return this._parseUnresolved0(z,j)},H._parseUnresolved0=function v(z,j){Z(z!=null,"text",Y),Z(j!=null,"position",Y);var M=new Ek(this),A=j.getIndex();if(A=this._printerParser.parse(M,z,A),A<0)return j.setErrorIndex(~A),null;return j.setIndex(A),M.toParsed()},H._toPrinterParser=function v(z){return this._printerParser.withOptional(z)},H.toString=function v(){var z=this._printerParser.toString();return z.indexOf("[")===0?z:z.substring(1,z.length-1)},D}();function iI(){Y$.ISO_LOCAL_DATE=new R$().appendValue(J.YEAR,4,10,y$.EXCEEDS_PAD).appendLiteral("-").appendValue(J.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(J.DAY_OF_MONTH,2).toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.ISO_LOCAL_TIME=new R$().appendValue(J.HOUR_OF_DAY,2).appendLiteral(":").appendValue(J.MINUTE_OF_HOUR,2).optionalStart().appendLiteral(":").appendValue(J.SECOND_OF_MINUTE,2).optionalStart().appendFraction(J.NANO_OF_SECOND,0,9,!0).toFormatter(z$.STRICT),Y$.ISO_LOCAL_DATE_TIME=new R$().parseCaseInsensitive().append(Y$.ISO_LOCAL_DATE).appendLiteral("T").append(Y$.ISO_LOCAL_TIME).toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.ISO_INSTANT=new R$().parseCaseInsensitive().appendInstant().toFormatter(z$.STRICT),Y$.ISO_OFFSET_DATE_TIME=new R$().parseCaseInsensitive().append(Y$.ISO_LOCAL_DATE_TIME).appendOffsetId().toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.ISO_ZONED_DATE_TIME=new R$().append(Y$.ISO_OFFSET_DATE_TIME).optionalStart().appendLiteral("[").parseCaseSensitive().appendZoneId().appendLiteral("]").toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.BASIC_ISO_DATE=new R$().appendValue(J.YEAR,4,10,y$.EXCEEDS_PAD).appendValue(J.MONTH_OF_YEAR,2).appendValue(J.DAY_OF_MONTH,2).toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.ISO_OFFSET_DATE=new R$().parseCaseInsensitive().append(Y$.ISO_LOCAL_DATE).appendOffsetId().toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.ISO_OFFSET_TIME=new R$().parseCaseInsensitive().append(Y$.ISO_LOCAL_TIME).appendOffsetId().toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.ISO_ORDINAL_DATE=new R$().appendValue(J.YEAR,4,10,y$.EXCEEDS_PAD).appendLiteral("-").appendValue(J.DAY_OF_YEAR).toFormatter(z$.STRICT),Y$.ISO_WEEK_DATE=new R$().appendValue(J.YEAR,4,10,y$.EXCEEDS_PAD).appendLiteral("-W").appendValue(J.ALIGNED_WEEK_OF_YEAR).appendLiteral("-").appendValue(J.DAY_OF_WEEK).toFormatter(z$.STRICT),Y$.ISO_DATE=new R$().parseCaseInsensitive().append(Y$.ISO_LOCAL_DATE).optionalStart().appendOffsetId().optionalEnd().toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.ISO_TIME=new R$().parseCaseInsensitive().append(Y$.ISO_LOCAL_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(z$.STRICT),Y$.ISO_DATE_TIME=new R$().append(Y$.ISO_LOCAL_DATE_TIME).optionalStart().appendOffsetId().optionalEnd().toFormatter(z$.STRICT).withChronology(E$.INSTANCE),Y$.PARSED_EXCESS_DAYS=z6("PARSED_EXCESS_DAYS",function(D){if(D instanceof Pw)return D.excessDays;else return rq.ZERO}),Y$.PARSED_LEAP_SECOND=z6("PARSED_LEAP_SECOND",function(D){if(D instanceof Pw)return D.leapSecond;else return!1})}var LP=function(D){T(H,D),H.now=function z(j){if(arguments.length===0)return H.now0();else if(arguments.length===1&&j instanceof m$)return H.nowZoneId(j);else return H.nowClock(j)},H.now0=function z(){return this.nowClock(n$.systemDefaultZone())},H.nowZoneId=function z(j){return X(j,"zone"),this.nowClock(n$.system(j))},H.nowClock=function z(j){X(j,"clock");var M=q$.now(j);return H.of(M.month(),M.dayOfMonth())},H.of=function z(j,M){if(arguments.length===2&&j instanceof $$)return H.ofMonthNumber(j,M);else return H.ofNumberNumber(j,M)},H.ofMonthNumber=function z(j,M){if(X(j,"month"),J.DAY_OF_MONTH.checkValidValue(M),M>j.maxLength())throw new _("Illegal value for DayOfMonth field, value "+M+" is not valid for month "+j.toString());return new H(j.value(),M)},H.ofNumberNumber=function z(j,M){return X(j,"month"),X(M,"dayOfMonth"),H.of($$.of(j),M)},H.from=function z(j){if(X(j,"temporal"),C(j,zq,"temporal"),j instanceof H)return j;try{return H.of(j.get(J.MONTH_OF_YEAR),j.get(J.DAY_OF_MONTH))}catch(M){throw new _("Unable to obtain MonthDay from TemporalAccessor: "+j+", type "+(j&&j.constructor!=null?j.constructor.name:""))}},H.parse=function z(j,M){if(arguments.length===1)return H.parseString(j);else return H.parseStringFormatter(j,M)},H.parseString=function z(j){return H.parseStringFormatter(j,dk)},H.parseStringFormatter=function z(j,M){return X(j,"text"),X(M,"formatter"),C(M,Y$,"formatter"),M.parse(j,H.FROM)};function H(z,j){var M=D.call(this)||this;return M._month=W.safeToInt(z),M._day=W.safeToInt(j),M}var v=H.prototype;return v.monthValue=function z(){return this._month},v.month=function z(){return $$.of(this._month)},v.dayOfMonth=function z(){return this._day},v.isSupported=function z(j){if(j instanceof J)return j===J.MONTH_OF_YEAR||j===J.DAY_OF_MONTH;return j!=null&&j.isSupportedBy(this)},v.range=function z(j){if(j===J.MONTH_OF_YEAR)return j.range();else if(j===J.DAY_OF_MONTH)return K$.of(1,this.month().minLength(),this.month().maxLength());return D.prototype.range.call(this,j)},v.get=function z(j){return this.range(j).checkValidIntValue(this.getLong(j),j)},v.getLong=function z(j){if(X(j,"field"),j instanceof J){switch(j){case J.DAY_OF_MONTH:return this._day;case J.MONTH_OF_YEAR:return this._month}throw new P("Unsupported field: "+j)}return j.getFrom(this)},v.isValidYear=function z(j){return(this._day===29&&this._month===2&&x8.isLeap(j)===!1)===!1},v.withMonth=function z(j){return this.with($$.of(j))},v.with=function z(j){if(X(j,"month"),j.value()===this._month)return this;var M=Math.min(this._day,j.maxLength());return new H(j.value(),M)},v.withDayOfMonth=function z(j){if(j===this._day)return this;return H.of(this._month,j)},v.query=function z(j){if(X(j,"query"),C(j,ZK,"query"),j===c.chronology())return E$.INSTANCE;return D.prototype.query.call(this,j)},v.adjustInto=function z(j){return X(j,"temporal"),j=j.with(J.MONTH_OF_YEAR,this._month),j.with(J.DAY_OF_MONTH,Math.min(j.range(J.DAY_OF_MONTH).maximum(),this._day))},v.atYear=function z(j){return q$.of(j,this._month,this.isValidYear(j)?this._day:28)},v.compareTo=function z(j){X(j,"other"),C(j,H,"other");var M=this._month-j.monthValue();if(M===0)M=this._day-j.dayOfMonth();return M},v.isAfter=function z(j){return X(j,"other"),C(j,H,"other"),this.compareTo(j)>0},v.isBefore=function z(j){return X(j,"other"),C(j,H,"other"),this.compareTo(j)<0},v.equals=function z(j){if(this===j)return!0;if(j instanceof H){var M=j;return this.monthValue()===M.monthValue()&&this.dayOfMonth()===M.dayOfMonth()}return!1},v.toString=function z(){return"--"+(this._month<10?"0":"")+this._month+(this._day<10?"-0":"-")+this._day},v.toJSON=function z(){return this.toString()},v.format=function z(j){return X(j,"formatter"),C(j,Y$,"formatter"),j.format(this)},H}(zq),dk;function gI(){dk=new R$().appendLiteral("--").appendValue(J.MONTH_OF_YEAR,2).appendLiteral("-").appendValue(J.DAY_OF_MONTH,2).toFormatter(),LP.FROM=z6("MonthDay.FROM",function(D){return LP.from(D)})}var m4=function(D){T(H,D),H.now=function z(j){if(arguments.length===0)return H.now0();else if(arguments.length===1&&j instanceof m$)return H.nowZoneId(j);else return H.nowClock(j)},H.now0=function z(){return H.nowClock(n$.systemDefaultZone())},H.nowZoneId=function z(j){return H.nowClock(n$.system(j))},H.nowClock=function z(j){var M=q$.now(j);return H.of(M.year(),M.month())},H.of=function z(j,M){if(arguments.length===2&&M instanceof $$)return H.ofNumberMonth(j,M);else return H.ofNumberNumber(j,M)},H.ofNumberMonth=function z(j,M){return X(M,"month"),C(M,$$,"month"),H.ofNumberNumber(j,M.value())},H.ofNumberNumber=function z(j,M){return X(j,"year"),X(M,"month"),J.YEAR.checkValidValue(j),J.MONTH_OF_YEAR.checkValidValue(M),new H(j,M)},H.from=function z(j){if(X(j,"temporal"),j instanceof H)return j;try{return H.of(j.get(J.YEAR),j.get(J.MONTH_OF_YEAR))}catch(M){throw new _("Unable to obtain YearMonth from TemporalAccessor: "+j+", type "+(j&&j.constructor!=null?j.constructor.name:""))}},H.parse=function z(j,M){if(arguments.length===1)return H.parseString(j);else return H.parseStringFormatter(j,M)},H.parseString=function z(j){return H.parseStringFormatter(j,i9)},H.parseStringFormatter=function z(j,M){return X(M,"formatter"),M.parse(j,H.FROM)};function H(z,j){var M=D.call(this)||this;return M._year=W.safeToInt(z),M._month=W.safeToInt(j),M}var v=H.prototype;return v.isSupported=function z(j){if(arguments.length===1&&j instanceof E6)return this.isSupportedField(j);else return this.isSupportedUnit(j)},v.isSupportedField=function z(j){if(j instanceof J)return j===J.YEAR||j===J.MONTH_OF_YEAR||j===J.PROLEPTIC_MONTH||j===J.YEAR_OF_ERA||j===J.ERA;return j!=null&&j.isSupportedBy(this)},v.isSupportedUnit=function z(j){if(j instanceof u)return j===u.MONTHS||j===u.YEARS||j===u.DECADES||j===u.CENTURIES||j===u.MILLENNIA||j===u.ERAS;return j!=null&&j.isSupportedBy(this)},v.range=function z(j){if(j===J.YEAR_OF_ERA)return this.year()<=0?K$.of(1,x8.MAX_VALUE+1):K$.of(1,x8.MAX_VALUE);return D.prototype.range.call(this,j)},v.get=function z(j){return X(j,"field"),C(j,E6,"field"),this.range(j).checkValidIntValue(this.getLong(j),j)},v.getLong=function z(j){if(X(j,"field"),C(j,E6,"field"),j instanceof J){switch(j){case J.MONTH_OF_YEAR:return this._month;case J.PROLEPTIC_MONTH:return this._getProlepticMonth();case J.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case J.YEAR:return this._year;case J.ERA:return this._year<1?0:1}throw new P("Unsupported field: "+j)}return j.getFrom(this)},v._getProlepticMonth=function z(){return W.safeAdd(W.safeMultiply(this._year,12),this._month-1)},v.year=function z(){return this._year},v.monthValue=function z(){return this._month},v.month=function z(){return $$.of(this._month)},v.isLeapYear=function z(){return E$.isLeapYear(this._year)},v.isValidDay=function z(j){return j>=1&&j<=this.lengthOfMonth()},v.lengthOfMonth=function z(){return this.month().length(this.isLeapYear())},v.lengthOfYear=function z(){return this.isLeapYear()?366:365},v.with=function z(j,M){if(arguments.length===1)return this._withAdjuster(j);else return this._withField(j,M)},v._withField=function z(j,M){if(X(j,"field"),C(j,E6,"field"),j instanceof J){var A=j;switch(A.checkValidValue(M),A){case J.MONTH_OF_YEAR:return this.withMonth(M);case J.PROLEPTIC_MONTH:return this.plusMonths(M-this.getLong(J.PROLEPTIC_MONTH));case J.YEAR_OF_ERA:return this.withYear(this._year<1?1-M:M);case J.YEAR:return this.withYear(M);case J.ERA:return this.getLong(J.ERA)===M?this:this.withYear(1-this._year)}throw new P("Unsupported field: "+j)}return j.adjustInto(this,M)},v.withYear=function z(j){return J.YEAR.checkValidValue(j),new H(j,this._month)},v.withMonth=function z(j){return J.MONTH_OF_YEAR.checkValidValue(j),new H(this._year,j)},v._plusUnit=function z(j,M){if(X(M,"unit"),C(M,b,"unit"),M instanceof u){switch(M){case u.MONTHS:return this.plusMonths(j);case u.YEARS:return this.plusYears(j);case u.DECADES:return this.plusYears(W.safeMultiply(j,10));case u.CENTURIES:return this.plusYears(W.safeMultiply(j,100));case u.MILLENNIA:return this.plusYears(W.safeMultiply(j,1000));case u.ERAS:return this.with(J.ERA,W.safeAdd(this.getLong(J.ERA),j))}throw new P("Unsupported unit: "+M)}return M.addTo(this,j)},v.plusYears=function z(j){if(j===0)return this;var M=J.YEAR.checkValidIntValue(this._year+j);return this.withYear(M)},v.plusMonths=function z(j){if(j===0)return this;var M=this._year*12+(this._month-1),A=M+j,S=J.YEAR.checkValidIntValue(W.floorDiv(A,12)),R=W.floorMod(A,12)+1;return new H(S,R)},v.minusYears=function z(j){return j===W.MIN_SAFE_INTEGER?this.plusYears(W.MIN_SAFE_INTEGER).plusYears(1):this.plusYears(-j)},v.minusMonths=function z(j){return j===W.MIN_SAFE_INTEGER?this.plusMonths(Math.MAX_SAFE_INTEGER).plusMonths(1):this.plusMonths(-j)},v.query=function z(j){if(X(j,"query"),C(j,ZK,"query"),j===c.chronology())return E$.INSTANCE;else if(j===c.precision())return u.MONTHS;else if(j===c.localDate()||j===c.localTime()||j===c.zone()||j===c.zoneId()||j===c.offset())return null;return D.prototype.query.call(this,j)},v.adjustInto=function z(j){return X(j,"temporal"),C(j,_8,"temporal"),j.with(J.PROLEPTIC_MONTH,this._getProlepticMonth())},v.until=function z(j,M){X(j,"endExclusive"),X(M,"unit"),C(j,_8,"endExclusive"),C(M,b,"unit");var A=H.from(j);if(M instanceof u){var S=A._getProlepticMonth()-this._getProlepticMonth();switch(M){case u.MONTHS:return S;case u.YEARS:return W.intDiv(S,12);case u.DECADES:return W.intDiv(S,120);case u.CENTURIES:return W.intDiv(S,1200);case u.MILLENNIA:return W.intDiv(S,12000);case u.ERAS:return A.getLong(J.ERA)-this.getLong(J.ERA)}throw new P("Unsupported unit: "+M)}return M.between(this,A)},v.atDay=function z(j){return X(j,"dayOfMonth"),q$.of(this._year,this._month,j)},v.atEndOfMonth=function z(){return q$.of(this._year,this._month,this.lengthOfMonth())},v.compareTo=function z(j){X(j,"other"),C(j,H,"other");var M=this._year-j.year();if(M===0)M=this._month-j.monthValue();return M},v.isAfter=function z(j){return this.compareTo(j)>0},v.isBefore=function z(j){return this.compareTo(j)<0},v.equals=function z(j){if(this===j)return!0;if(j instanceof H){var M=j;return this.year()===M.year()&&this.monthValue()===M.monthValue()}return!1},v.toString=function z(){return i9.format(this)},v.toJSON=function z(){return this.toString()},v.format=function z(j){return X(j,"formatter"),j.format(this)},H}(_8),i9;function aI(){i9=new R$().appendValue(J.YEAR,4,10,y$.EXCEEDS_PAD).appendLiteral("-").appendValue(J.MONTH_OF_YEAR,2).toFormatter(),m4.FROM=z6("YearMonth.FROM",function(D){return m4.from(D)})}var x8=function(D){T(H,D);function H(z){var j=D.call(this)||this;return j._year=W.safeToInt(z),j}var v=H.prototype;return v.value=function z(){return this._year},H.now=function z(j){if(j===void 0)j=void 0;if(j===void 0)return H.now0();else if(j instanceof m$)return H.nowZoneId(j);else return H.nowClock(j)},H.now0=function z(){return H.nowClock(n$.systemDefaultZone())},H.nowZoneId=function z(j){return X(j,"zone"),C(j,m$,"zone"),H.nowClock(n$.system(j))},H.nowClock=function z(j){X(j,"clock"),C(j,n$,"clock");var M=q$.now(j);return H.of(M.year())},H.of=function z(j){return X(j,"isoYear"),J.YEAR.checkValidValue(j),new H(j)},H.from=function z(j){if(X(j,"temporal"),C(j,zq,"temporal"),j instanceof H)return j;try{return H.of(j.get(J.YEAR))}catch(M){throw new _("Unable to obtain Year from TemporalAccessor: "+j+", type "+(j&&j.constructor!=null?j.constructor.name:""))}},H.parse=function z(j,M){if(arguments.length<=1)return H.parseText(j);else return H.parseTextFormatter(j,M)},H.parseText=function z(j){return X(j,"text"),H.parse(j,g9)},H.parseTextFormatter=function z(j,M){if(M===void 0)M=g9;return X(j,"text"),X(M,"formatter"),C(M,Y$,"formatter"),M.parse(j,H.FROM)},H.isLeap=function z(j){return W.intMod(j,4)===0&&(W.intMod(j,100)!==0||W.intMod(j,400)===0)},v.isSupported=function z(j){if(arguments.length===1&&j instanceof E6)return this.isSupportedField(j);else return this.isSupportedUnit(j)},v.isSupportedField=function z(j){if(j instanceof J)return j===J.YEAR||j===J.YEAR_OF_ERA||j===J.ERA;return j!=null&&j.isSupportedBy(this)},v.isSupportedUnit=function z(j){if(j instanceof u)return j===u.YEARS||j===u.DECADES||j===u.CENTURIES||j===u.MILLENNIA||j===u.ERAS;return j!=null&&j.isSupportedBy(this)},v.range=function z(j){if(this.isSupported(j))return j.range();else if(j instanceof J)throw new P("Unsupported field: "+j);return D.prototype.range.call(this,j)},v.get=function z(j){return this.range(j).checkValidIntValue(this.getLong(j),j)},v.getLong=function z(j){if(X(j,"field"),j instanceof J){switch(j){case J.YEAR_OF_ERA:return this._year<1?1-this._year:this._year;case J.YEAR:return this._year;case J.ERA:return this._year<1?0:1}throw new P("Unsupported field: "+j)}return j.getFrom(this)},v.isLeap=function z(){return H.isLeap(this._year)},v._withField=function z(j,M){if(X(j,"field"),C(j,E6,"field"),j instanceof J){switch(j.checkValidValue(M),j){case J.YEAR_OF_ERA:return H.of(this._year<1?1-M:M);case J.YEAR:return H.of(M);case J.ERA:return this.getLong(J.ERA)===M?this:H.of(1-this._year)}throw new P("Unsupported field: "+j)}return j.adjustInto(this,M)},v._plusUnit=function z(j,M){if(X(j,"amountToAdd"),X(M,"unit"),C(M,b,"unit"),M instanceof u){switch(M){case u.YEARS:return this.plusYears(j);case u.DECADES:return this.plusYears(W.safeMultiply(j,10));case u.CENTURIES:return this.plusYears(W.safeMultiply(j,100));case u.MILLENNIA:return this.plusYears(W.safeMultiply(j,1000));case u.ERAS:return this.with(J.ERA,W.safeAdd(this.getLong(J.ERA),j))}throw new P("Unsupported unit: "+M)}return M.addTo(this,j)},v.plusYears=function z(j){if(j===0)return this;return H.of(J.YEAR.checkValidIntValue(W.safeAdd(this._year,j)))},v.minusYears=function z(j){return j===W.MIN_SAFE_INTEGER?this.plusYears(W.MAX_SAFE_INTEGER).plusYears(1):this.plusYears(-j)},v.adjustInto=function z(j){return X(j,"temporal"),j.with(J.YEAR,this._year)},v.isValidMonthDay=function z(j){return j!=null&&j.isValidYear(this._year)},v.length=function z(){return this.isLeap()?366:365},v.atDay=function z(j){return q$.ofYearDay(this._year,j)},v.atMonth=function z(j){if(arguments.length===1&&j instanceof $$)return this.atMonthMonth(j);else return this.atMonthNumber(j)},v.atMonthMonth=function z(j){return X(j,"month"),C(j,$$,"month"),m4.of(this._year,j)},v.atMonthNumber=function z(j){return X(j,"month"),m4.of(this._year,j)},v.atMonthDay=function z(j){return X(j,"monthDay"),C(j,LP,"monthDay"),j.atYear(this._year)},v.query=function z(j){if(X(j,"query()"),C(j,ZK,"query()"),j===c.chronology())return E$.INSTANCE;else if(j===c.precision())return u.YEARS;else if(j===c.localDate()||j===c.localTime()||j===c.zone()||j===c.zoneId()||j===c.offset())return null;return D.prototype.query.call(this,j)},v.compareTo=function z(j){return X(j,"other"),C(j,H,"other"),this._year-j._year},v.isAfter=function z(j){return X(j,"other"),C(j,H,"other"),this._year>j._year},v.isBefore=function z(j){return X(j,"other"),C(j,H,"other"),this._year<j._year},v.format=function z(j){return X(j,"formatter"),C(j,Y$,"formatter"),j.format(this)},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this.value()===j.value();return!1},v.toString=function z(){return""+this._year},v.toJSON=function z(){return this.toString()},v.until=function z(j,M){var A=H.from(j);if(M instanceof u){var S=A.value()-this.value();switch(M){case u.YEARS:return S;case u.DECADES:return W.intDiv(S,10);case u.CENTURIES:return W.intDiv(S,100);case u.MILLENNIA:return W.intDiv(S,1000);case u.ERAS:return A.getLong(J.ERA)-this.getLong(J.ERA)}throw new P("Unsupported unit: "+M)}return M.between(this,A)},H}(_8),g9;function cI(){x8.MIN_VALUE=s.MIN_VALUE,x8.MAX_VALUE=s.MAX_VALUE,g9=new R$().appendValue(J.YEAR,4,10,y$.EXCEEDS_PAD).toFormatter(),x8.FROM=z6("Year.FROM",function(D){return x8.from(D)})}var CP=function(){function D(){}var H=D.prototype;return H.adjustInto=function v(z){N("adjustInto")},D}(),a9=function(){function D(){}return D.firstDayOfMonth=function H(){return S6.FIRST_DAY_OF_MONTH},D.lastDayOfMonth=function H(){return S6.LAST_DAY_OF_MONTH},D.firstDayOfNextMonth=function H(){return S6.FIRST_DAY_OF_NEXT_MONTH},D.firstDayOfYear=function H(){return S6.FIRST_DAY_OF_YEAR},D.lastDayOfYear=function H(){return S6.LAST_DAY_OF_YEAR},D.firstDayOfNextYear=function H(){return S6.FIRST_DAY_OF_NEXT_YEAR},D.firstInMonth=function H(v){return X(v,"dayOfWeek"),new c9(1,v)},D.lastInMonth=function H(v){return X(v,"dayOfWeek"),new c9(-1,v)},D.dayOfWeekInMonth=function H(v,z){return X(z,"dayOfWeek"),new c9(v,z)},D.next=function H(v){return new ww(2,v)},D.nextOrSame=function H(v){return new ww(0,v)},D.previous=function H(v){return new ww(3,v)},D.previousOrSame=function H(v){return new ww(1,v)},D}(),S6=function(D){T(H,D);function H(z){var j=D.call(this)||this;return j._ordinal=z,j}var v=H.prototype;return v.adjustInto=function z(j){switch(this._ordinal){case 0:return j.with(J.DAY_OF_MONTH,1);case 1:return j.with(J.DAY_OF_MONTH,j.range(J.DAY_OF_MONTH).maximum());case 2:return j.with(J.DAY_OF_MONTH,1).plus(1,u.MONTHS);case 3:return j.with(J.DAY_OF_YEAR,1);case 4:return j.with(J.DAY_OF_YEAR,j.range(J.DAY_OF_YEAR).maximum());case 5:return j.with(J.DAY_OF_YEAR,1).plus(1,u.YEARS)}throw new f("Unreachable")},H}(CP);S6.FIRST_DAY_OF_MONTH=new S6(0),S6.LAST_DAY_OF_MONTH=new S6(1),S6.FIRST_DAY_OF_NEXT_MONTH=new S6(2),S6.FIRST_DAY_OF_YEAR=new S6(3),S6.LAST_DAY_OF_YEAR=new S6(4),S6.FIRST_DAY_OF_NEXT_YEAR=new S6(5);var c9=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._ordinal=z,M._dowValue=j.value(),M}var v=H.prototype;return v.adjustInto=function z(j){if(this._ordinal>=0){var M=j.with(J.DAY_OF_MONTH,1),A=M.get(J.DAY_OF_WEEK),S=W.intMod(this._dowValue-A+7,7);return S+=(this._ordinal-1)*7,M.plus(S,u.DAYS)}else{var R=j.with(J.DAY_OF_MONTH,j.range(J.DAY_OF_MONTH).maximum()),r=R.get(J.DAY_OF_WEEK),o=this._dowValue-r;return o=o===0?0:o>0?o-7:o,o-=(-this._ordinal-1)*7,R.plus(o,u.DAYS)}},H}(CP),ww=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return X(j,"dayOfWeek"),M._relative=z,M._dowValue=j.value(),M}var v=H.prototype;return v.adjustInto=function z(j){var M=j.get(J.DAY_OF_WEEK);if(this._relative<2&&M===this._dowValue)return j;if((this._relative&1)===0){var A=M-this._dowValue;return j.plus(A>=0?7-A:-A,u.DAYS)}else{var S=this._dowValue-M;return j.minus(S>=0?7-S:-S,u.DAYS)}},H}(CP),E$=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}H.isLeapYear=function z(j){return(j&3)===0&&(j%100!==0||j%400===0)};var v=H.prototype;return v._updateResolveMap=function z(j,M,A){X(j,"fieldValues"),X(M,"field");var S=j.get(M);if(S!=null&&S!==A)throw new _("Invalid state, field: "+M+" "+S+" conflicts with "+M+" "+A);j.put(M,A)},v.resolveDate=function z(j,M){if(j.containsKey(J.EPOCH_DAY))return q$.ofEpochDay(j.remove(J.EPOCH_DAY));var A=j.remove(J.PROLEPTIC_MONTH);if(A!=null){if(M!==z$.LENIENT)J.PROLEPTIC_MONTH.checkValidValue(A);this._updateResolveMap(j,J.MONTH_OF_YEAR,W.floorMod(A,12)+1),this._updateResolveMap(j,J.YEAR,W.floorDiv(A,12))}var S=j.remove(J.YEAR_OF_ERA);if(S!=null){if(M!==z$.LENIENT)J.YEAR_OF_ERA.checkValidValue(S);var R=j.remove(J.ERA);if(R==null){var r=j.get(J.YEAR);if(M===z$.STRICT)if(r!=null)this._updateResolveMap(j,J.YEAR,r>0?S:W.safeSubtract(1,S));else j.put(J.YEAR_OF_ERA,S);else this._updateResolveMap(j,J.YEAR,r==null||r>0?S:W.safeSubtract(1,S))}else if(R===1)this._updateResolveMap(j,J.YEAR,S);else if(R===0)this._updateResolveMap(j,J.YEAR,W.safeSubtract(1,S));else throw new _("Invalid value for era: "+R)}else if(j.containsKey(J.ERA))J.ERA.checkValidValue(j.get(J.ERA));if(j.containsKey(J.YEAR)){if(j.containsKey(J.MONTH_OF_YEAR)){if(j.containsKey(J.DAY_OF_MONTH)){var o=J.YEAR.checkValidIntValue(j.remove(J.YEAR)),I=j.remove(J.MONTH_OF_YEAR),Q=j.remove(J.DAY_OF_MONTH);if(M===z$.LENIENT){var P$=I-1,j$=Q-1;return q$.of(o,1,1).plusMonths(P$).plusDays(j$)}else if(M===z$.SMART){if(J.DAY_OF_MONTH.checkValidValue(Q),I===4||I===6||I===9||I===11)Q=Math.min(Q,30);else if(I===2)Q=Math.min(Q,$$.FEBRUARY.length(x8.isLeap(o)));return q$.of(o,I,Q)}else return q$.of(o,I,Q)}}if(j.containsKey(J.DAY_OF_YEAR)){var L$=J.YEAR.checkValidIntValue(j.remove(J.YEAR));if(M===z$.LENIENT){var Q$=W.safeSubtract(j.remove(J.DAY_OF_YEAR),1);return q$.ofYearDay(L$,1).plusDays(Q$)}var t$=J.DAY_OF_YEAR.checkValidIntValue(j.remove(J.DAY_OF_YEAR));return q$.ofYearDay(L$,t$)}if(j.containsKey(J.ALIGNED_WEEK_OF_YEAR)){if(j.containsKey(J.ALIGNED_DAY_OF_WEEK_IN_YEAR)){var s$=J.YEAR.checkValidIntValue(j.remove(J.YEAR));if(M===z$.LENIENT){var K8=W.safeSubtract(j.remove(J.ALIGNED_WEEK_OF_YEAR),1),Hq=W.safeSubtract(j.remove(J.ALIGNED_DAY_OF_WEEK_IN_YEAR),1);return q$.of(s$,1,1).plusWeeks(K8).plusDays(Hq)}var fw=J.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(j.remove(J.ALIGNED_WEEK_OF_YEAR)),nP=J.ALIGNED_DAY_OF_WEEK_IN_YEAR.checkValidIntValue(j.remove(J.ALIGNED_DAY_OF_WEEK_IN_YEAR)),Mw=q$.of(s$,1,1).plusDays((fw-1)*7+(nP-1));if(M===z$.STRICT&&Mw.get(J.YEAR)!==s$)throw new _("Strict mode rejected date parsed to a different year");return Mw}if(j.containsKey(J.DAY_OF_WEEK)){var mK=J.YEAR.checkValidIntValue(j.remove(J.YEAR));if(M===z$.LENIENT){var tk=W.safeSubtract(j.remove(J.ALIGNED_WEEK_OF_YEAR),1),fl=W.safeSubtract(j.remove(J.DAY_OF_WEEK),1);return q$.of(mK,1,1).plusWeeks(tk).plusDays(fl)}var Ml=J.ALIGNED_WEEK_OF_YEAR.checkValidIntValue(j.remove(J.ALIGNED_WEEK_OF_YEAR)),vl=J.DAY_OF_WEEK.checkValidIntValue(j.remove(J.DAY_OF_WEEK)),sk=q$.of(mK,1,1).plusWeeks(Ml-1).with(a9.nextOrSame(N$.of(vl)));if(M===z$.STRICT&&sk.get(J.YEAR)!==mK)throw new _("Strict mode rejected date parsed to a different month");return sk}}}return null},v.date=function z(j){return q$.from(j)},H}(V);function II(){E$.INSTANCE=new E$("IsoChronology")}var vq=function(D){T(H,D),H.from=function z(j){if(X(j,"temporal"),j instanceof H)return j;else if(j instanceof b8)return j.toOffsetTime();try{var M=d.from(j),A=O$.from(j);return new H(M,A)}catch(S){throw new _("Unable to obtain OffsetTime TemporalAccessor: "+j+", type "+(j.constructor!=null?j.constructor.name:""))}},H.now=function z(j){if(arguments.length===0)return H._now(n$.systemDefaultZone());else if(j instanceof n$)return H._now(j);else return H._now(n$.system(j))},H._now=function z(j){X(j,"clock");var M=j.instant();return H.ofInstant(M,j.zone().rules().offset(M))},H.of=function z(){if(arguments.length<=2)return H.ofTimeAndOffset.apply(this,arguments);else return H.ofNumbers.apply(this,arguments)},H.ofNumbers=function z(j,M,A,S,R){var r=d.of(j,M,A,S);return new H(r,R)},H.ofTimeAndOffset=function z(j,M){return new H(j,M)},H.ofInstant=function z(j,M){X(j,"instant"),C(j,V$,"instant"),X(M,"zone"),C(M,m$,"zone");var A=M.rules(),S=A.offset(j),R=j.epochSecond()%d.SECONDS_PER_DAY;if(R=(R+S.totalSeconds())%d.SECONDS_PER_DAY,R<0)R+=d.SECONDS_PER_DAY;var r=d.ofSecondOfDay(R,j.nano());return new H(r,S)},H.parse=function z(j,M){if(M===void 0)M=Y$.ISO_OFFSET_TIME;return X(M,"formatter"),M.parse(j,H.FROM)};function H(z,j){var M=D.call(this)||this;return X(z,"time"),C(z,d,"time"),X(j,"offset"),C(j,O$,"offset"),M._time=z,M._offset=j,M}var v=H.prototype;return v.adjustInto=function z(j){return j.with(J.NANO_OF_DAY,this._time.toNanoOfDay()).with(J.OFFSET_SECONDS,this.offset().totalSeconds())},v.atDate=function z(j){return b8.of(j,this._time,this._offset)},v.format=function z(j){return X(j,"formatter"),j.format(this,H.FROM)},v.get=function z(j){return D.prototype.get.call(this,j)},v.getLong=function z(j){if(j instanceof J){if(j===J.OFFSET_SECONDS)return this._offset.totalSeconds();return this._time.getLong(j)}return j.getFrom(this)},v.hour=function z(){return this._time.hour()},v.minute=function z(){return this._time.minute()},v.second=function z(){return this._time.second()},v.nano=function z(){return this._time.nano()},v.offset=function z(){return this._offset},v.isAfter=function z(j){return X(j,"other"),this._toEpochNano()>j._toEpochNano()},v.isBefore=function z(j){return X(j,"other"),this._toEpochNano()<j._toEpochNano()},v.isEqual=function z(j){return X(j,"other"),this._toEpochNano()===j._toEpochNano()},v.isSupported=function z(j){if(j instanceof J)return j.isTimeBased()||j===J.OFFSET_SECONDS;else if(j instanceof u)return j.isTimeBased();return j!=null&&j.isSupportedBy(this)},v.minusHours=function z(j){return this._withLocalTimeOffset(this._time.minusHours(j),this._offset)},v.minusMinutes=function z(j){return this._withLocalTimeOffset(this._time.minusMinutes(j),this._offset)},v.minusSeconds=function z(j){return this._withLocalTimeOffset(this._time.minusSeconds(j),this._offset)},v.minusNanos=function z(j){return this._withLocalTimeOffset(this._time.minusNanos(j),this._offset)},v._minusAmount=function z(j){return X(j),j.subtractFrom(this)},v._minusUnit=function z(j,M){return this.plus(-1*j,M)},v._plusAmount=function z(j){return X(j),j.addTo(this)},v._plusUnit=function z(j,M){if(M instanceof u)return this._withLocalTimeOffset(this._time.plus(j,M),this._offset);return M.addTo(this,j)},v.plusHours=function z(j){return this._withLocalTimeOffset(this._time.plusHours(j),this._offset)},v.plusMinutes=function z(j){return this._withLocalTimeOffset(this._time.plusMinutes(j),this._offset)},v.plusSeconds=function z(j){return this._withLocalTimeOffset(this._time.plusSeconds(j),this._offset)},v.plusNanos=function z(j){return this._withLocalTimeOffset(this._time.plusNanos(j),this._offset)},v.query=function z(j){if(X(j,"query"),j===c.precision())return u.NANOS;else if(j===c.offset()||j===c.zone())return this.offset();else if(j===c.localTime())return this._time;else if(j===c.chronology()||j===c.localDate()||j===c.zoneId())return null;return D.prototype.query.call(this,j)},v.range=function z(j){if(j instanceof J){if(j===J.OFFSET_SECONDS)return j.range();return this._time.range(j)}return j.rangeRefinedBy(this)},v.toLocalTime=function z(){return this._time},v.truncatedTo=function z(j){return this._withLocalTimeOffset(this._time.truncatedTo(j),this._offset)},v.until=function z(j,M){X(j,"endExclusive"),X(M,"unit");var A=H.from(j);if(M instanceof u){var S=A._toEpochNano()-this._toEpochNano();switch(M){case u.NANOS:return S;case u.MICROS:return W.intDiv(S,1000);case u.MILLIS:return W.intDiv(S,1e6);case u.SECONDS:return W.intDiv(S,d.NANOS_PER_SECOND);case u.MINUTES:return W.intDiv(S,d.NANOS_PER_MINUTE);case u.HOURS:return W.intDiv(S,d.NANOS_PER_HOUR);case u.HALF_DAYS:return W.intDiv(S,12*d.NANOS_PER_HOUR)}throw new P("Unsupported unit: "+M)}return M.between(this,A)},v.withHour=function z(j){return this._withLocalTimeOffset(this._time.withHour(j),this._offset)},v.withMinute=function z(j){return this._withLocalTimeOffset(this._time.withMinute(j),this._offset)},v.withSecond=function z(j){return this._withLocalTimeOffset(this._time.withSecond(j),this._offset)},v.withNano=function z(j){return this._withLocalTimeOffset(this._time.withNano(j),this._offset)},v.withOffsetSameInstant=function z(j){if(X(j,"offset"),j.equals(this._offset))return this;var M=j.totalSeconds()-this._offset.totalSeconds(),A=this._time.plusSeconds(M);return new H(A,j)},v.withOffsetSameLocal=function z(j){return j!=null&&j.equals(this._offset)?this:new H(this._time,j)},v._toEpochNano=function z(){var j=this._time.toNanoOfDay(),M=this._offset.totalSeconds()*d.NANOS_PER_SECOND;return j-M},v._withAdjuster=function z(j){if(X(j,"adjuster"),j instanceof d)return this._withLocalTimeOffset(j,this._offset);else if(j instanceof O$)return this._withLocalTimeOffset(this._time,j);else if(j instanceof H)return j;return j.adjustInto(this)},v._withField=function z(j,M){if(X(j,"field"),j instanceof J){if(j===J.OFFSET_SECONDS)return this._withLocalTimeOffset(this._time,O$.ofTotalSeconds(j.checkValidIntValue(M)));return this._withLocalTimeOffset(this._time.with(j,M),this._offset)}return j.adjustInto(this,M)},v._withLocalTimeOffset=function z(j,M){if(this._time===j&&this._offset.equals(M))return this;return new H(j,M)},v.compareTo=function z(j){if(X(j,"other"),C(j,H,"other"),this._offset.equals(j._offset))return this._time.compareTo(j._time);var M=W.compareNumbers(this._toEpochNano(),j._toEpochNano());if(M===0)return this._time.compareTo(j._time);return M},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._time.equals(j._time)&&this._offset.equals(j._offset);return!1},v.hashCode=function z(){return this._time.hashCode()^this._offset.hashCode()},v.toString=function z(){return this._time.toString()+this._offset.toString()},v.toJSON=function z(){return this.toString()},H}(_8);function lI(){vq.MIN=vq.ofNumbers(0,0,0,0,O$.MAX),vq.MAX=vq.ofNumbers(23,59,59,999999999,O$.MIN),vq.FROM=z6("OffsetTime.FROM",function(D){return vq.from(D)})}var I9=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.query=function z(j){if(j===c.zoneId()||j===c.zone())return this.zone();else if(j===c.chronology())return this.toLocalDate().chronology();else if(j===c.precision())return u.NANOS;else if(j===c.offset())return this.offset();else if(j===c.localDate())return q$.ofEpochDay(this.toLocalDate().toEpochDay());else if(j===c.localTime())return this.toLocalTime();return D.prototype.query.call(this,j)},v.format=function z(j){return X(j,"formatter"),j.format(this)},v.toInstant=function z(){return V$.ofEpochSecond(this.toEpochSecond(),this.toLocalTime().nano())},v.toEpochSecond=function z(){var j=this.toLocalDate().toEpochDay(),M=j*86400+this.toLocalTime().toSecondOfDay();return M-=this.offset().totalSeconds(),M},v.compareTo=function z(j){X(j,"other");var M=W.compareNumbers(this.toEpochSecond(),j.toEpochSecond());if(M===0){if(M=this.toLocalTime().nano()-j.toLocalTime().nano(),M===0){if(M=this.toLocalDateTime().compareTo(j.toLocalDateTime()),M===0)M=tI(this.zone().id(),j.zone().id())}}return M},v.isAfter=function z(j){X(j,"other");var M=this.toEpochSecond(),A=j.toEpochSecond();return M>A||M===A&&this.toLocalTime().nano()>j.toLocalTime().nano()},v.isBefore=function z(j){X(j,"other");var M=this.toEpochSecond(),A=j.toEpochSecond();return M<A||M===A&&this.toLocalTime().nano()<j.toLocalTime().nano()},v.isEqual=function z(j){return X(j,"other"),this.toEpochSecond()===j.toEpochSecond()&&this.toLocalTime().nano()===j.toLocalTime().nano()},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this.compareTo(j)===0;return!1},H}(_8);function tI(D,H){if(D<H)return-1;if(D>H)return 1;return 0}var d8=function(D){T(H,D),H.now=function z(j){var M;if(j instanceof m$)M=n$.system(j);else M=j==null?n$.systemDefaultZone():j;return H.ofInstant(M.instant(),M.zone())},H.of=function z(){if(arguments.length<=2)return H.of2.apply(this,arguments);else if(arguments.length===3&&arguments[0]instanceof q$)return H.of3.apply(this,arguments);else return H.of8.apply(this,arguments)},H.of3=function z(j,M,A){return H.of2(u$.of(j,M),A)},H.of2=function z(j,M){return H.ofLocal(j,M,null)},H.of8=function z(j,M,A,S,R,r,o,I){var Q=u$.of(j,M,A,S,R,r,o);return H.ofLocal(Q,I,null)},H.ofLocal=function z(j,M,A){if(X(j,"localDateTime"),X(M,"zone"),M instanceof O$)return new H(j,M,M);var S=null,R=M.rules(),r=R.validOffsets(j);if(r.length===1)S=r[0];else if(r.length===0){var o=R.transition(j);j=j.plusSeconds(o.duration().seconds()),S=o.offsetAfter()}else if(A!=null&&r.some(function(I){return I.equals(A)}))S=A;else S=X(r[0],"offset");return new H(j,S,M)},H.ofInstant=function z(){if(arguments.length===2)return H.ofInstant2.apply(this,arguments);else return H.ofInstant3.apply(this,arguments)},H.ofInstant2=function z(j,M){return X(j,"instant"),X(M,"zone"),H._create(j.epochSecond(),j.nano(),M)},H.ofInstant3=function z(j,M,A){return X(j,"localDateTime"),X(M,"offset"),X(A,"zone"),H._create(j.toEpochSecond(M),j.nano(),A)},H._create=function z(j,M,A){var S=A.rules(),R=V$.ofEpochSecond(j,M),r=S.offset(R),o=u$.ofEpochSecond(j,M,r);return new H(o,r,A)},H.ofStrict=function z(j,M,A){X(j,"localDateTime"),X(M,"offset"),X(A,"zone");var S=A.rules();if(S.isValidOffset(j,M)===!1){var R=S.transition(j);if(R!=null&&R.isGap())throw new _("LocalDateTime "+j+" does not exist in zone "+A+" due to a gap in the local time-line, typically caused by daylight savings");throw new _('ZoneOffset "'+M+'" is not valid for LocalDateTime "'+j+'" in zone "'+A+'"')}return new H(j,M,A)},H.ofLenient=function z(j,M,A){if(X(j,"localDateTime"),X(M,"offset"),X(A,"zone"),A instanceof O$&&M.equals(A)===!1)throw new O("ZoneId must match ZoneOffset");return new H(j,M,A)},H.from=function z(j){if(X(j,"temporal"),j instanceof H)return j;var M=m$.from(j);if(j.isSupported(J.INSTANT_SECONDS)){var A=H._from(j,M);if(A!=null)return A}var S=u$.from(j);return H.of2(S,M)},H._from=function z(j,M){try{return H.__from(j,M)}catch(A){if(!(A instanceof _))throw A}},H.__from=function z(j,M){var A=j.getLong(J.INSTANT_SECONDS),S=j.get(J.NANO_OF_SECOND);return H._create(A,S,M)},H.parse=function z(j,M){if(M===void 0)M=Y$.ISO_ZONED_DATE_TIME;return X(M,"formatter"),M.parse(j,H.FROM)};function H(z,j,M){var A;return X(z,"dateTime"),X(j,"offset"),X(M,"zone"),A=D.call(this)||this,A._dateTime=z,A._offset=j,A._zone=M,A}var v=H.prototype;return v._resolveLocal=function z(j){return X(j,"newDateTime"),H.ofLocal(j,this._zone,this._offset)},v._resolveInstant=function z(j){return H.ofInstant3(j,this._offset,this._zone)},v._resolveOffset=function z(j){if(j.equals(this._offset)===!1&&this._zone.rules().isValidOffset(this._dateTime,j))return new H(this._dateTime,j,this._zone);return this},v.isSupported=function z(j){if(j instanceof J)return!0;else if(j instanceof u)return j.isDateBased()||j.isTimeBased();return j!=null&&j.isSupportedBy(this)},v.range=function z(j){if(j instanceof J){if(j===J.INSTANT_SECONDS||j===J.OFFSET_SECONDS)return j.range();return this._dateTime.range(j)}return j.rangeRefinedBy(this)},v.get=function z(j){return this.getLong(j)},v.getLong=function z(j){if(j instanceof J){switch(j){case J.INSTANT_SECONDS:return this.toEpochSecond();case J.OFFSET_SECONDS:return this._offset.totalSeconds()}return this._dateTime.getLong(j)}return X(j,"field"),j.getFrom(this)},v.offset=function z(){return this._offset},v.withEarlierOffsetAtOverlap=function z(){var j=this._zone.rules().transition(this._dateTime);if(j!=null&&j.isOverlap()){var M=j.offsetBefore();if(M.equals(this._offset)===!1)return new H(this._dateTime,M,this._zone)}return this},v.withLaterOffsetAtOverlap=function z(){var j=this._zone.rules().transition(this.toLocalDateTime());if(j!=null){var M=j.offsetAfter();if(M.equals(this._offset)===!1)return new H(this._dateTime,M,this._zone)}return this},v.zone=function z(){return this._zone},v.withZoneSameLocal=function z(j){return X(j,"zone"),this._zone.equals(j)?this:H.ofLocal(this._dateTime,j,this._offset)},v.withZoneSameInstant=function z(j){return X(j,"zone"),this._zone.equals(j)?this:H._create(this._dateTime.toEpochSecond(this._offset),this._dateTime.nano(),j)},v.withFixedOffsetZone=function z(){return this._zone.equals(this._offset)?this:new H(this._dateTime,this._offset,this._offset)},v.year=function z(){return this._dateTime.year()},v.monthValue=function z(){return this._dateTime.monthValue()},v.month=function z(){return this._dateTime.month()},v.dayOfMonth=function z(){return this._dateTime.dayOfMonth()},v.dayOfYear=function z(){return this._dateTime.dayOfYear()},v.dayOfWeek=function z(){return this._dateTime.dayOfWeek()},v.hour=function z(){return this._dateTime.hour()},v.minute=function z(){return this._dateTime.minute()},v.second=function z(){return this._dateTime.second()},v.nano=function z(){return this._dateTime.nano()},v._withAdjuster=function z(j){if(j instanceof q$)return this._resolveLocal(u$.of(j,this._dateTime.toLocalTime()));else if(j instanceof d)return this._resolveLocal(u$.of(this._dateTime.toLocalDate(),j));else if(j instanceof u$)return this._resolveLocal(j);else if(j instanceof V$){var M=j;return H._create(M.epochSecond(),M.nano(),this._zone)}else if(j instanceof O$)return this._resolveOffset(j);return D.prototype._withAdjuster.call(this,j)},v._withField=function z(j,M){if(j instanceof J){switch(j){case J.INSTANT_SECONDS:return H._create(M,this.nano(),this._zone);case J.OFFSET_SECONDS:{var A=O$.ofTotalSeconds(j.checkValidIntValue(M));return this._resolveOffset(A)}}return this._resolveLocal(this._dateTime.with(j,M))}return j.adjustInto(this,M)},v.withYear=function z(j){return this._resolveLocal(this._dateTime.withYear(j))},v.withMonth=function z(j){return this._resolveLocal(this._dateTime.withMonth(j))},v.withDayOfMonth=function z(j){return this._resolveLocal(this._dateTime.withDayOfMonth(j))},v.withDayOfYear=function z(j){return this._resolveLocal(this._dateTime.withDayOfYear(j))},v.withHour=function z(j){return this._resolveLocal(this._dateTime.withHour(j))},v.withMinute=function z(j){return this._resolveLocal(this._dateTime.withMinute(j))},v.withSecond=function z(j){return this._resolveLocal(this._dateTime.withSecond(j))},v.withNano=function z(j){return this._resolveLocal(this._dateTime.withNano(j))},v.truncatedTo=function z(j){return this._resolveLocal(this._dateTime.truncatedTo(j))},v._plusUnit=function z(j,M){if(M instanceof u)if(M.isDateBased())return this._resolveLocal(this._dateTime.plus(j,M));else return this._resolveInstant(this._dateTime.plus(j,M));return X(M,"unit"),M.addTo(this,j)},v.plusYears=function z(j){return this._resolveLocal(this._dateTime.plusYears(j))},v.plusMonths=function z(j){return this._resolveLocal(this._dateTime.plusMonths(j))},v.plusWeeks=function z(j){return this._resolveLocal(this._dateTime.plusWeeks(j))},v.plusDays=function z(j){return this._resolveLocal(this._dateTime.plusDays(j))},v.plusHours=function z(j){return this._resolveInstant(this._dateTime.plusHours(j))},v.plusMinutes=function z(j){return this._resolveInstant(this._dateTime.plusMinutes(j))},v.plusSeconds=function z(j){return this._resolveInstant(this._dateTime.plusSeconds(j))},v.plusNanos=function z(j){return this._resolveInstant(this._dateTime.plusNanos(j))},v._minusUnit=function z(j,M){return this._plusUnit(-1*j,M)},v.minusYears=function z(j){return this.plusYears(-1*j)},v.minusMonths=function z(j){return this.plusMonths(-1*j)},v.minusWeeks=function z(j){return this.plusWeeks(-1*j)},v.minusDays=function z(j){return this.plusDays(-1*j)},v.minusHours=function z(j){return this.plusHours(-1*j)},v.minusMinutes=function z(j){return this.plusMinutes(-1*j)},v.minusSeconds=function z(j){return this.plusSeconds(-1*j)},v.minusNanos=function z(j){return this.plusNanos(-1*j)},v.query=function z(j){if(j===c.localDate())return this.toLocalDate();return X(j,"query"),D.prototype.query.call(this,j)},v.until=function z(j,M){var A=H.from(j);if(M instanceof u)if(A=A.withZoneSameInstant(this._zone),M.isDateBased())return this._dateTime.until(A._dateTime,M);else{var S=this._offset.totalSeconds()-A._offset.totalSeconds(),R=A._dateTime.plusSeconds(S);return this._dateTime.until(R,M)}return M.between(this,A)},v.toLocalDateTime=function z(){return this._dateTime},v.toLocalDate=function z(){return this._dateTime.toLocalDate()},v.toLocalTime=function z(){return this._dateTime.toLocalTime()},v.toOffsetDateTime=function z(){return b8.of(this._dateTime,this._offset)},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._dateTime.equals(j._dateTime)&&this._offset.equals(j._offset)&&this._zone.equals(j._zone);return!1},v.hashCode=function z(){return W.hashCode(this._dateTime.hashCode(),this._offset.hashCode(),this._zone.hashCode())},v.toString=function z(){var j=this._dateTime.toString()+this._offset.toString();if(this._offset!==this._zone)j+="["+this._zone.toString()+"]";return j},v.toJSON=function z(){return this.toString()},v.format=function z(j){return D.prototype.format.call(this,j)},H}(I9);function sI(){d8.FROM=z6("ZonedDateTime.FROM",function(D){return d8.from(D)})}var b8=function(D){T(H,D),H.from=function z(j){if(X(j,"temporal"),j instanceof H)return j;try{var M=O$.from(j);try{var A=u$.from(j);return H.of(A,M)}catch(R){var S=V$.from(j);return H.ofInstant(S,M)}}catch(R){throw new _("Unable to obtain OffsetDateTime TemporalAccessor: "+j+", type "+(j.constructor!=null?j.constructor.name:""))}},H.now=function z(j){if(arguments.length===0)return H.now(n$.systemDefaultZone());else if(X(j,"clockOrZone"),j instanceof m$)return H.now(n$.system(j));else if(j instanceof n$){var M=j.instant();return H.ofInstant(M,j.zone().rules().offset(M))}else throw new O("clockOrZone must be an instance of ZoneId or Clock")},H.of=function z(){if(arguments.length<=2)return H.ofDateTime.apply(this,arguments);else if(arguments.length===3)return H.ofDateAndTime.apply(this,arguments);else return H.ofNumbers.apply(this,arguments)},H.ofDateTime=function z(j,M){return new H(j,M)},H.ofDateAndTime=function z(j,M,A){var S=u$.of(j,M);return new H(S,A)},H.ofNumbers=function z(j,M,A,S,R,r,o,I){if(S===void 0)S=0;if(R===void 0)R=0;if(r===void 0)r=0;if(o===void 0)o=0;var Q=u$.of(j,M,A,S,R,r,o);return new H(Q,I)},H.ofInstant=function z(j,M){X(j,"instant"),X(M,"zone");var A=M.rules(),S=A.offset(j),R=u$.ofEpochSecond(j.epochSecond(),j.nano(),S);return new H(R,S)},H.parse=function z(j,M){if(M===void 0)M=Y$.ISO_OFFSET_DATE_TIME;return X(M,"formatter"),M.parse(j,H.FROM)};function H(z,j){var M=D.call(this)||this;return X(z,"dateTime"),C(z,u$,"dateTime"),X(j,"offset"),C(j,O$,"offset"),M._dateTime=z,M._offset=j,M}var v=H.prototype;return v.adjustInto=function z(j){return j.with(J.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(J.NANO_OF_DAY,this.toLocalTime().toNanoOfDay()).with(J.OFFSET_SECONDS,this.offset().totalSeconds())},v.until=function z(j,M){var A=H.from(j);if(M instanceof u)return A=A.withOffsetSameInstant(this._offset),this._dateTime.until(A._dateTime,M);return M.between(this,A)},v.atZoneSameInstant=function z(j){return d8.ofInstant(this._dateTime,this._offset,j)},v.atZoneSimilarLocal=function z(j){return d8.ofLocal(this._dateTime,j,this._offset)},v.query=function z(j){if(X(j,"query"),j===c.chronology())return E$.INSTANCE;else if(j===c.precision())return u.NANOS;else if(j===c.offset()||j===c.zone())return this.offset();else if(j===c.localDate())return this.toLocalDate();else if(j===c.localTime())return this.toLocalTime();else if(j===c.zoneId())return null;return D.prototype.query.call(this,j)},v.get=function z(j){if(j instanceof J){switch(j){case J.INSTANT_SECONDS:throw new _("Field too large for an int: "+j);case J.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.get(j)}return D.prototype.get.call(this,j)},v.getLong=function z(j){if(j instanceof J){switch(j){case J.INSTANT_SECONDS:return this.toEpochSecond();case J.OFFSET_SECONDS:return this.offset().totalSeconds()}return this._dateTime.getLong(j)}return j.getFrom(this)},v.offset=function z(){return this._offset},v.year=function z(){return this._dateTime.year()},v.monthValue=function z(){return this._dateTime.monthValue()},v.month=function z(){return this._dateTime.month()},v.dayOfMonth=function z(){return this._dateTime.dayOfMonth()},v.dayOfYear=function z(){return this._dateTime.dayOfYear()},v.dayOfWeek=function z(){return this._dateTime.dayOfWeek()},v.hour=function z(){return this._dateTime.hour()},v.minute=function z(){return this._dateTime.minute()},v.second=function z(){return this._dateTime.second()},v.nano=function z(){return this._dateTime.nano()},v.toLocalDateTime=function z(){return this._dateTime},v.toLocalDate=function z(){return this._dateTime.toLocalDate()},v.toLocalTime=function z(){return this._dateTime.toLocalTime()},v.toOffsetTime=function z(){return vq.of(this._dateTime.toLocalTime(),this._offset)},v.toZonedDateTime=function z(){return d8.of(this._dateTime,this._offset)},v.toInstant=function z(){return this._dateTime.toInstant(this._offset)},v.toEpochSecond=function z(){return this._dateTime.toEpochSecond(this._offset)},v.isSupported=function z(j){if(j instanceof J)return j.isDateBased()||j.isTimeBased();if(j instanceof u)return j.isDateBased()||j.isTimeBased();return j!=null&&j.isSupportedBy(this)},v.range=function z(j){if(j instanceof J){if(j===J.INSTANT_SECONDS||j===J.OFFSET_SECONDS)return j.range();return this._dateTime.range(j)}return j.rangeRefinedBy(this)},v._withAdjuster=function z(j){if(X(j),j instanceof q$||j instanceof d||j instanceof u$)return this._withDateTimeOffset(this._dateTime.with(j),this._offset);else if(j instanceof V$)return H.ofInstant(j,this._offset);else if(j instanceof O$)return this._withDateTimeOffset(this._dateTime,j);else if(j instanceof H)return j;return j.adjustInto(this)},v._withField=function z(j,M){if(X(j),j instanceof J){var A=j;switch(A){case J.INSTANT_SECONDS:return H.ofInstant(V$.ofEpochSecond(M,this.nano()),this._offset);case J.OFFSET_SECONDS:return this._withDateTimeOffset(this._dateTime,O$.ofTotalSeconds(A.checkValidIntValue(M)))}return this._withDateTimeOffset(this._dateTime.with(j,M),this._offset)}return j.adjustInto(this,M)},v._withDateTimeOffset=function z(j,M){if(this._dateTime===j&&this._offset.equals(M))return this;return new H(j,M)},v.withYear=function z(j){return this._withDateTimeOffset(this._dateTime.withYear(j),this._offset)},v.withMonth=function z(j){return this._withDateTimeOffset(this._dateTime.withMonth(j),this._offset)},v.withDayOfMonth=function z(j){return this._withDateTimeOffset(this._dateTime.withDayOfMonth(j),this._offset)},v.withDayOfYear=function z(j){return this._withDateTimeOffset(this._dateTime.withDayOfYear(j),this._offset)},v.withHour=function z(j){return this._withDateTimeOffset(this._dateTime.withHour(j),this._offset)},v.withMinute=function z(j){return this._withDateTimeOffset(this._dateTime.withMinute(j),this._offset)},v.withSecond=function z(j){return this._withDateTimeOffset(this._dateTime.withSecond(j),this._offset)},v.withNano=function z(j){return this._withDateTimeOffset(this._dateTime.withNano(j),this._offset)},v.withOffsetSameLocal=function z(j){return X(j,"offset"),this._withDateTimeOffset(this._dateTime,j)},v.withOffsetSameInstant=function z(j){if(X(j,"offset"),j.equals(this._offset))return this;var M=j.totalSeconds()-this._offset.totalSeconds(),A=this._dateTime.plusSeconds(M);return new H(A,j)},v.truncatedTo=function z(j){return this._withDateTimeOffset(this._dateTime.truncatedTo(j),this._offset)},v._plusAmount=function z(j){return X(j,"amount"),j.addTo(this)},v._plusUnit=function z(j,M){if(M instanceof u)return this._withDateTimeOffset(this._dateTime.plus(j,M),this._offset);return M.addTo(this,j)},v.plusYears=function z(j){return this._withDateTimeOffset(this._dateTime.plusYears(j),this._offset)},v.plusMonths=function z(j){return this._withDateTimeOffset(this._dateTime.plusMonths(j),this._offset)},v.plusWeeks=function z(j){return this._withDateTimeOffset(this._dateTime.plusWeeks(j),this._offset)},v.plusDays=function z(j){return this._withDateTimeOffset(this._dateTime.plusDays(j),this._offset)},v.plusHours=function z(j){return this._withDateTimeOffset(this._dateTime.plusHours(j),this._offset)},v.plusMinutes=function z(j){return this._withDateTimeOffset(this._dateTime.plusMinutes(j),this._offset)},v.plusSeconds=function z(j){return this._withDateTimeOffset(this._dateTime.plusSeconds(j),this._offset)},v.plusNanos=function z(j){return this._withDateTimeOffset(this._dateTime.plusNanos(j),this._offset)},v._minusAmount=function z(j){return X(j),j.subtractFrom(this)},v._minusUnit=function z(j,M){return this.plus(-1*j,M)},v.minusYears=function z(j){return this._withDateTimeOffset(this._dateTime.minusYears(j),this._offset)},v.minusMonths=function z(j){return this._withDateTimeOffset(this._dateTime.minusMonths(j),this._offset)},v.minusWeeks=function z(j){return this._withDateTimeOffset(this._dateTime.minusWeeks(j),this._offset)},v.minusDays=function z(j){return this._withDateTimeOffset(this._dateTime.minusDays(j),this._offset)},v.minusHours=function z(j){return this._withDateTimeOffset(this._dateTime.minusHours(j),this._offset)},v.minusMinutes=function z(j){return this._withDateTimeOffset(this._dateTime.minusMinutes(j),this._offset)},v.minusSeconds=function z(j){return this._withDateTimeOffset(this._dateTime.minusSeconds(j),this._offset)},v.minusNanos=function z(j){return this._withDateTimeOffset(this._dateTime.minusNanos(j),this._offset)},v.compareTo=function z(j){if(X(j,"other"),C(j,H,"other"),this.offset().equals(j.offset()))return this.toLocalDateTime().compareTo(j.toLocalDateTime());var M=W.compareNumbers(this.toEpochSecond(),j.toEpochSecond());if(M===0){if(M=this.toLocalTime().nano()-j.toLocalTime().nano(),M===0)M=this.toLocalDateTime().compareTo(j.toLocalDateTime())}return M},v.isAfter=function z(j){X(j,"other");var M=this.toEpochSecond(),A=j.toEpochSecond();return M>A||M===A&&this.toLocalTime().nano()>j.toLocalTime().nano()},v.isBefore=function z(j){X(j,"other");var M=this.toEpochSecond(),A=j.toEpochSecond();return M<A||M===A&&this.toLocalTime().nano()<j.toLocalTime().nano()},v.isEqual=function z(j){return X(j,"other"),this.toEpochSecond()===j.toEpochSecond()&&this.toLocalTime().nano()===j.toLocalTime().nano()},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._dateTime.equals(j._dateTime)&&this._offset.equals(j._offset);return!1},v.hashCode=function z(){return this._dateTime.hashCode()^this._offset.hashCode()},v.toString=function z(){return this._dateTime.toString()+this._offset.toString()},v.toJSON=function z(){return this.toString()},v.format=function z(j){return X(j,"formatter"),j.format(this)},H}(_8);function eI(){b8.MIN=u$.MIN.atOffset(O$.MAX),b8.MAX=u$.MAX.atOffset(O$.MIN),b8.FROM=z6("OffsetDateTime.FROM",function(D){return b8.from(D)})}var Ow=146097,bk=Ow*5-10957,q$=function(D){T(H,D),H.now=function z(j){var M;if(j==null)M=n$.systemDefaultZone();else if(j instanceof m$)M=n$.system(j);else M=j;return H.ofInstant(M.instant(),M.zone())},H.ofInstant=function z(j,M){if(M===void 0)M=m$.systemDefault();X(j,"instant");var A=M.rules().offset(j),S=j.epochSecond()+A.totalSeconds(),R=W.floorDiv(S,d.SECONDS_PER_DAY);return H.ofEpochDay(R)},H.of=function z(j,M,A){return new H(j,M,A)},H.ofYearDay=function z(j,M){J.YEAR.checkValidValue(j);var A=E$.isLeapYear(j);if(M===366&&A===!1)Z(!1,"Invalid date 'DayOfYear 366' as '"+j+"' is not a leap year",_);var S=$$.of(Math.floor((M-1)/31+1)),R=S.firstDayOfYear(A)+S.length(A)-1;if(M>R)S=S.plus(1);var r=M-S.firstDayOfYear(A)+1;return new H(j,S.value(),r)},H.ofEpochDay=function z(j){if(j===void 0)j=0;var M,A,S,R,r;if(r=j+bk,r-=60,M=0,r<0)A=W.intDiv(r+1,Ow)-1,M=A*400,r+=-A*Ow;if(R=W.intDiv(400*r+591,Ow),S=r-(365*R+W.intDiv(R,4)-W.intDiv(R,100)+W.intDiv(R,400)),S<0)R--,S=r-(365*R+W.intDiv(R,4)-W.intDiv(R,100)+W.intDiv(R,400));R+=M;var o=S,I=W.intDiv(o*5+2,153),Q=(I+2)%12+1,P$=o-W.intDiv(I*306+5,10)+1;R+=W.intDiv(I,10);var j$=R;return new H(j$,Q,P$)},H.from=function z(j){X(j,"temporal");var M=j.query(c.localDate());if(M==null)throw new _("Unable to obtain LocalDate from TemporalAccessor: "+j+", type "+(j.constructor!=null?j.constructor.name:""));return M},H.parse=function z(j,M){if(M===void 0)M=Y$.ISO_LOCAL_DATE;return Z(M!=null,"formatter",Y),M.parse(j,H.FROM)},H._resolvePreviousValid=function z(j,M,A){switch(M){case 2:A=Math.min(A,E$.isLeapYear(j)?29:28);break;case 4:case 6:case 9:case 11:A=Math.min(A,30);break}return H.of(j,M,A)};function H(z,j,M){var A=D.call(this)||this;if(X(z,"year"),X(j,"month"),X(M,"dayOfMonth"),j instanceof $$)j=j.value();return A._year=W.safeToInt(z),A._month=W.safeToInt(j),A._day=W.safeToInt(M),H._validate(A._year,A._month,A._day),A}H._validate=function z(j,M,A){var S;if(J.YEAR.checkValidValue(j),J.MONTH_OF_YEAR.checkValidValue(M),J.DAY_OF_MONTH.checkValidValue(A),A>28){switch(S=31,M){case 2:S=E$.isLeapYear(j)?29:28;break;case 4:case 6:case 9:case 11:S=30}if(A>S)if(A===29)Z(!1,"Invalid date 'February 29' as '"+j+"' is not a leap year",_);else Z(!1,"Invalid date '"+j+"' '"+M+"' '"+A+"'",_)}};var v=H.prototype;return v.isSupported=function z(j){return D.prototype.isSupported.call(this,j)},v.range=function z(j){if(j instanceof J){if(j.isDateBased()){switch(j){case J.DAY_OF_MONTH:return K$.of(1,this.lengthOfMonth());case J.DAY_OF_YEAR:return K$.of(1,this.lengthOfYear());case J.ALIGNED_WEEK_OF_MONTH:return K$.of(1,this.month()===$$.FEBRUARY&&this.isLeapYear()===!1?4:5);case J.YEAR_OF_ERA:return this._year<=0?K$.of(1,x8.MAX_VALUE+1):K$.of(1,x8.MAX_VALUE)}return j.range()}throw new P("Unsupported field: "+j)}return j.rangeRefinedBy(this)},v.get=function z(j){return this.getLong(j)},v.getLong=function z(j){if(Z(j!=null,"",Y),j instanceof J)return this._get0(j);return j.getFrom(this)},v._get0=function z(j){switch(j){case J.DAY_OF_WEEK:return this.dayOfWeek().value();case J.ALIGNED_DAY_OF_WEEK_IN_MONTH:return W.intMod(this._day-1,7)+1;case J.ALIGNED_DAY_OF_WEEK_IN_YEAR:return W.intMod(this.dayOfYear()-1,7)+1;case J.DAY_OF_MONTH:return this._day;case J.DAY_OF_YEAR:return this.dayOfYear();case J.EPOCH_DAY:return this.toEpochDay();case J.ALIGNED_WEEK_OF_MONTH:return W.intDiv(this._day-1,7)+1;case J.ALIGNED_WEEK_OF_YEAR:return W.intDiv(this.dayOfYear()-1,7)+1;case J.MONTH_OF_YEAR:return this._month;case J.PROLEPTIC_MONTH:return this._prolepticMonth();case J.YEAR_OF_ERA:return this._year>=1?this._year:1-this._year;case J.YEAR:return this._year;case J.ERA:return this._year>=1?1:0}throw new P("Unsupported field: "+j)},v._prolepticMonth=function z(){return this._year*12+(this._month-1)},v.chronology=function z(){return E$.INSTANCE},v.year=function z(){return this._year},v.monthValue=function z(){return this._month},v.month=function z(){return $$.of(this._month)},v.dayOfMonth=function z(){return this._day},v.dayOfYear=function z(){return this.month().firstDayOfYear(this.isLeapYear())+this._day-1},v.dayOfWeek=function z(){var j=W.floorMod(this.toEpochDay()+3,7);return N$.of(j+1)},v.isLeapYear=function z(){return E$.isLeapYear(this._year)},v.lengthOfMonth=function z(){switch(this._month){case 2:return this.isLeapYear()?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},v.lengthOfYear=function z(){return this.isLeapYear()?366:365},v._withAdjuster=function z(j){if(X(j,"adjuster"),j instanceof H)return j;return D.prototype._withAdjuster.call(this,j)},v._withField=function z(j,M){if(Z(j!=null,"field",Y),j instanceof J){var A=j;switch(A.checkValidValue(M),A){case J.DAY_OF_WEEK:return this.plusDays(M-this.dayOfWeek().value());case J.ALIGNED_DAY_OF_WEEK_IN_MONTH:return this.plusDays(M-this.getLong(J.ALIGNED_DAY_OF_WEEK_IN_MONTH));case J.ALIGNED_DAY_OF_WEEK_IN_YEAR:return this.plusDays(M-this.getLong(J.ALIGNED_DAY_OF_WEEK_IN_YEAR));case J.DAY_OF_MONTH:return this.withDayOfMonth(M);case J.DAY_OF_YEAR:return this.withDayOfYear(M);case J.EPOCH_DAY:return H.ofEpochDay(M);case J.ALIGNED_WEEK_OF_MONTH:return this.plusWeeks(M-this.getLong(J.ALIGNED_WEEK_OF_MONTH));case J.ALIGNED_WEEK_OF_YEAR:return this.plusWeeks(M-this.getLong(J.ALIGNED_WEEK_OF_YEAR));case J.MONTH_OF_YEAR:return this.withMonth(M);case J.PROLEPTIC_MONTH:return this.plusMonths(M-this.getLong(J.PROLEPTIC_MONTH));case J.YEAR_OF_ERA:return this.withYear(this._year>=1?M:1-M);case J.YEAR:return this.withYear(M);case J.ERA:return this.getLong(J.ERA)===M?this:this.withYear(1-this._year)}throw new P("Unsupported field: "+j)}return j.adjustInto(this,M)},v.withYear=function z(j){if(this._year===j)return this;return J.YEAR.checkValidValue(j),H._resolvePreviousValid(j,this._month,this._day)},v.withMonth=function z(j){var M=j instanceof $$?j.value():j;if(this._month===M)return this;return J.MONTH_OF_YEAR.checkValidValue(M),H._resolvePreviousValid(this._year,M,this._day)},v.withDayOfMonth=function z(j){if(this._day===j)return this;return H.of(this._year,this._month,j)},v.withDayOfYear=function z(j){if(this.dayOfYear()===j)return this;return H.ofYearDay(this._year,j)},v._plusUnit=function z(j,M){if(X(j,"amountToAdd"),X(M,"unit"),M instanceof u){switch(M){case u.DAYS:return this.plusDays(j);case u.WEEKS:return this.plusWeeks(j);case u.MONTHS:return this.plusMonths(j);case u.YEARS:return this.plusYears(j);case u.DECADES:return this.plusYears(W.safeMultiply(j,10));case u.CENTURIES:return this.plusYears(W.safeMultiply(j,100));case u.MILLENNIA:return this.plusYears(W.safeMultiply(j,1000));case u.ERAS:return this.with(J.ERA,W.safeAdd(this.getLong(J.ERA),j))}throw new P("Unsupported unit: "+M)}return M.addTo(this,j)},v.plusYears=function z(j){if(j===0)return this;var M=J.YEAR.checkValidIntValue(this._year+j);return H._resolvePreviousValid(M,this._month,this._day)},v.plusMonths=function z(j){if(j===0)return this;var M=this._year*12+(this._month-1),A=M+j,S=J.YEAR.checkValidIntValue(W.floorDiv(A,12)),R=W.floorMod(A,12)+1;return H._resolvePreviousValid(S,R,this._day)},v.plusWeeks=function z(j){return this.plusDays(W.safeMultiply(j,7))},v.plusDays=function z(j){if(j===0)return this;var M=W.safeAdd(this.toEpochDay(),j);return H.ofEpochDay(M)},v._minusUnit=function z(j,M){return X(j,"amountToSubtract"),X(M,"unit"),this._plusUnit(-1*j,M)},v.minusYears=function z(j){return this.plusYears(j*-1)},v.minusMonths=function z(j){return this.plusMonths(j*-1)},v.minusWeeks=function z(j){return this.plusWeeks(j*-1)},v.minusDays=function z(j){return this.plusDays(j*-1)},v.query=function z(j){if(X(j,"query"),j===c.localDate())return this;return D.prototype.query.call(this,j)},v.adjustInto=function z(j){return D.prototype.adjustInto.call(this,j)},v.until=function z(j,M){if(arguments.length<2)return this.until1(j);else return this.until2(j,M)},v.until2=function z(j,M){var A=H.from(j);if(M instanceof u){switch(M){case u.DAYS:return this.daysUntil(A);case u.WEEKS:return W.intDiv(this.daysUntil(A),7);case u.MONTHS:return this._monthsUntil(A);case u.YEARS:return W.intDiv(this._monthsUntil(A),12);case u.DECADES:return W.intDiv(this._monthsUntil(A),120);case u.CENTURIES:return W.intDiv(this._monthsUntil(A),1200);case u.MILLENNIA:return W.intDiv(this._monthsUntil(A),12000);case u.ERAS:return A.getLong(J.ERA)-this.getLong(J.ERA)}throw new P("Unsupported unit: "+M)}return M.between(this,A)},v.daysUntil=function z(j){return j.toEpochDay()-this.toEpochDay()},v._monthsUntil=function z(j){var M=this._prolepticMonth()*32+this.dayOfMonth(),A=j._prolepticMonth()*32+j.dayOfMonth();return W.intDiv(A-M,32)},v.until1=function z(j){var M=H.from(j),A=M._prolepticMonth()-this._prolepticMonth(),S=M._day-this._day;if(A>0&&S<0){A--;var R=this.plusMonths(A);S=M.toEpochDay()-R.toEpochDay()}else if(A<0&&S>0)A++,S-=M.lengthOfMonth();var r=W.intDiv(A,12),o=W.intMod(A,12);return rq.of(r,o,S)},v.atTime=function z(){if(arguments.length===1)return this.atTime1.apply(this,arguments);else return this.atTime4.apply(this,arguments)},v.atTime1=function z(j){if(X(j,"time"),j instanceof d)return u$.of(this,j);else if(j instanceof vq)return this._atTimeOffsetTime(j);else throw new O("time must be an instance of LocalTime or OffsetTime"+(j&&j.constructor&&j.constructor.name?", but is "+j.constructor.name:""))},v.atTime4=function z(j,M,A,S){if(A===void 0)A=0;if(S===void 0)S=0;return this.atTime1(d.of(j,M,A,S))},v._atTimeOffsetTime=function z(j){return b8.of(u$.of(this,j.toLocalTime()),j.offset())},v.atStartOfDay=function z(j){if(j!=null)return this._atStartOfDayWithZone(j);else return u$.of(this,d.MIDNIGHT)},v._atStartOfDayWithZone=function z(j){X(j,"zone");var M=this.atTime(d.MIDNIGHT);if(j instanceof O$===!1){var A=j.rules().transition(M);if(A!=null&&A.isGap())M=A.dateTimeAfter()}return d8.of(M,j)},v.toEpochDay=function z(){var j=this._year,M=this._month,A=0;if(A+=365*j,j>=0)A+=W.intDiv(j+3,4)-W.intDiv(j+99,100)+W.intDiv(j+399,400);else A-=W.intDiv(j,-4)-W.intDiv(j,-100)+W.intDiv(j,-400);if(A+=W.intDiv(367*M-362,12),A+=this.dayOfMonth()-1,M>2){if(A--,!E$.isLeapYear(j))A--}return A-bk},v.compareTo=function z(j){return X(j,"other"),C(j,H,"other"),this._compareTo0(j)},v._compareTo0=function z(j){var M=this._year-j._year;if(M===0){if(M=this._month-j._month,M===0)M=this._day-j._day}return M},v.isAfter=function z(j){return this.compareTo(j)>0},v.isBefore=function z(j){return this.compareTo(j)<0},v.isEqual=function z(j){return this.compareTo(j)===0},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._compareTo0(j)===0;return!1},v.hashCode=function z(){var j=this._year,M=this._month,A=this._day;return W.hash(j&4294965248^(j<<11)+(M<<6)+A)},v.toString=function z(){var j,M,A,S=this._year,R=this._month,r=this._day,o=Math.abs(S);if(o<1000)if(S<0)A="-"+(""+(S-1e4)).slice(-4);else A=(""+(S+1e4)).slice(-4);else if(S>9999)A="+"+S;else A=""+S;if(R<10)M="-0"+R;else M="-"+R;if(r<10)j="-0"+r;else j="-"+r;return A+M+j},v.toJSON=function z(){return this.toString()},v.format=function z(j){return X(j,"formatter"),C(j,Y$,"formatter"),D.prototype.format.call(this,j)},H}(p4);function BI(){q$.MIN=q$.of(s.MIN_VALUE,1,1),q$.MAX=q$.of(s.MAX_VALUE,12,31),q$.EPOCH_0=q$.ofEpochDay(0),q$.FROM=z6("LocalDate.FROM",function(D){return q$.from(D)})}var l9=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.chronology=function z(){return this.toLocalDate().chronology()},v.query=function z(j){if(j===c.chronology())return this.chronology();else if(j===c.precision())return u.NANOS;else if(j===c.localDate())return q$.ofEpochDay(this.toLocalDate().toEpochDay());else if(j===c.localTime())return this.toLocalTime();else if(j===c.zone()||j===c.zoneId()||j===c.offset())return null;return D.prototype.query.call(this,j)},v.adjustInto=function z(j){return j.with(J.EPOCH_DAY,this.toLocalDate().toEpochDay()).with(J.NANO_OF_DAY,this.toLocalTime().toNanoOfDay())},v.toInstant=function z(j){return C(j,O$,"zoneId"),V$.ofEpochSecond(this.toEpochSecond(j),this.toLocalTime().nano())},v.toEpochSecond=function z(j){X(j,"offset");var M=this.toLocalDate().toEpochDay(),A=M*86400+this.toLocalTime().toSecondOfDay();return A-=j.totalSeconds(),W.safeToInt(A)},H}(_8),u$=function(D){T(H,D),H.now=function z(j){if(j==null)return H._now(n$.systemDefaultZone());else if(j instanceof n$)return H._now(j);else return H._now(n$.system(j))},H._now=function z(j){return X(j,"clock"),H.ofInstant(j.instant(),j.zone())},H._ofEpochMillis=function z(j,M){var A=W.floorDiv(j,1000)+M.totalSeconds(),S=W.floorDiv(A,d.SECONDS_PER_DAY),R=W.floorMod(A,d.SECONDS_PER_DAY),r=W.floorMod(j,1000)*1e6,o=q$.ofEpochDay(S),I=d.ofSecondOfDay(R,r);return new H(o,I)},H.of=function z(){if(arguments.length<=2)return H.ofDateAndTime.apply(this,arguments);else return H.ofNumbers.apply(this,arguments)},H.ofNumbers=function z(j,M,A,S,R,r,o){if(S===void 0)S=0;if(R===void 0)R=0;if(r===void 0)r=0;if(o===void 0)o=0;var I=q$.of(j,M,A),Q=d.of(S,R,r,o);return new H(I,Q)},H.ofDateAndTime=function z(j,M){return X(j,"date"),X(M,"time"),new H(j,M)},H.ofInstant=function z(j,M){if(M===void 0)M=m$.systemDefault();X(j,"instant"),C(j,V$,"instant"),X(M,"zone");var A=M.rules().offset(j);return H.ofEpochSecond(j.epochSecond(),j.nano(),A)},H.ofEpochSecond=function z(j,M,A){if(j===void 0)j=0;if(M===void 0)M=0;if(arguments.length===2&&M instanceof O$)A=M,M=0;X(A,"offset");var S=j+A.totalSeconds(),R=W.floorDiv(S,d.SECONDS_PER_DAY),r=W.floorMod(S,d.SECONDS_PER_DAY),o=q$.ofEpochDay(R),I=d.ofSecondOfDay(r,M);return new H(o,I)},H.from=function z(j){if(X(j,"temporal"),j instanceof H)return j;else if(j instanceof d8)return j.toLocalDateTime();try{var M=q$.from(j),A=d.from(j);return new H(M,A)}catch(S){throw new _("Unable to obtain LocalDateTime TemporalAccessor: "+j+", type "+(j.constructor!=null?j.constructor.name:""))}},H.parse=function z(j,M){if(M===void 0)M=Y$.ISO_LOCAL_DATE_TIME;return X(M,"formatter"),M.parse(j,H.FROM)};function H(z,j){var M=D.call(this)||this;return C(z,q$,"date"),C(j,d,"time"),M._date=z,M._time=j,M}var v=H.prototype;return v._withDateTime=function z(j,M){if(this._date.equals(j)&&this._time.equals(M))return this;return new H(j,M)},v.isSupported=function z(j){if(j instanceof J)return j.isDateBased()||j.isTimeBased();else if(j instanceof u)return j.isDateBased()||j.isTimeBased();return j!=null&&j.isSupportedBy(this)},v.range=function z(j){if(j instanceof J)return j.isTimeBased()?this._time.range(j):this._date.range(j);return j.rangeRefinedBy(this)},v.get=function z(j){if(j instanceof J)return j.isTimeBased()?this._time.get(j):this._date.get(j);return D.prototype.get.call(this,j)},v.getLong=function z(j){if(X(j,"field"),j instanceof J)return j.isTimeBased()?this._time.getLong(j):this._date.getLong(j);return j.getFrom(this)},v.year=function z(){return this._date.year()},v.monthValue=function z(){return this._date.monthValue()},v.month=function z(){return this._date.month()},v.dayOfMonth=function z(){return this._date.dayOfMonth()},v.dayOfYear=function z(){return this._date.dayOfYear()},v.dayOfWeek=function z(){return this._date.dayOfWeek()},v.hour=function z(){return this._time.hour()},v.minute=function z(){return this._time.minute()},v.second=function z(){return this._time.second()},v.nano=function z(){return this._time.nano()},v._withAdjuster=function z(j){if(X(j,"adjuster"),j instanceof q$)return this._withDateTime(j,this._time);else if(j instanceof d)return this._withDateTime(this._date,j);else if(j instanceof H)return j;return D.prototype._withAdjuster.call(this,j)},v._withField=function z(j,M){if(X(j,"field"),j instanceof J)if(j.isTimeBased())return this._withDateTime(this._date,this._time.with(j,M));else return this._withDateTime(this._date.with(j,M),this._time);return j.adjustInto(this,M)},v.withYear=function z(j){return this._withDateTime(this._date.withYear(j),this._time)},v.withMonth=function z(j){return this._withDateTime(this._date.withMonth(j),this._time)},v.withDayOfMonth=function z(j){return this._withDateTime(this._date.withDayOfMonth(j),this._time)},v.withDayOfYear=function z(j){return this._withDateTime(this._date.withDayOfYear(j),this._time)},v.withHour=function z(j){var M=this._time.withHour(j);return this._withDateTime(this._date,M)},v.withMinute=function z(j){var M=this._time.withMinute(j);return this._withDateTime(this._date,M)},v.withSecond=function z(j){var M=this._time.withSecond(j);return this._withDateTime(this._date,M)},v.withNano=function z(j){var M=this._time.withNano(j);return this._withDateTime(this._date,M)},v.truncatedTo=function z(j){return this._withDateTime(this._date,this._time.truncatedTo(j))},v._plusUnit=function z(j,M){if(X(M,"unit"),M instanceof u){switch(M){case u.NANOS:return this.plusNanos(j);case u.MICROS:return this.plusDays(W.intDiv(j,d.MICROS_PER_DAY)).plusNanos(W.intMod(j,d.MICROS_PER_DAY)*1000);case u.MILLIS:return this.plusDays(W.intDiv(j,d.MILLIS_PER_DAY)).plusNanos(W.intMod(j,d.MILLIS_PER_DAY)*1e6);case u.SECONDS:return this.plusSeconds(j);case u.MINUTES:return this.plusMinutes(j);case u.HOURS:return this.plusHours(j);case u.HALF_DAYS:return this.plusDays(W.intDiv(j,256)).plusHours(W.intMod(j,256)*12)}return this._withDateTime(this._date.plus(j,M),this._time)}return M.addTo(this,j)},v.plusYears=function z(j){var M=this._date.plusYears(j);return this._withDateTime(M,this._time)},v.plusMonths=function z(j){var M=this._date.plusMonths(j);return this._withDateTime(M,this._time)},v.plusWeeks=function z(j){var M=this._date.plusWeeks(j);return this._withDateTime(M,this._time)},v.plusDays=function z(j){var M=this._date.plusDays(j);return this._withDateTime(M,this._time)},v.plusHours=function z(j){return this._plusWithOverflow(this._date,j,0,0,0,1)},v.plusMinutes=function z(j){return this._plusWithOverflow(this._date,0,j,0,0,1)},v.plusSeconds=function z(j){return this._plusWithOverflow(this._date,0,0,j,0,1)},v.plusNanos=function z(j){return this._plusWithOverflow(this._date,0,0,0,j,1)},v._minusUnit=function z(j,M){return X(M,"unit"),this._plusUnit(-1*j,M)},v.minusYears=function z(j){return this.plusYears(-1*j)},v.minusMonths=function z(j){return this.plusMonths(-1*j)},v.minusWeeks=function z(j){return this.plusWeeks(-1*j)},v.minusDays=function z(j){return this.plusDays(-1*j)},v.minusHours=function z(j){return this._plusWithOverflow(this._date,j,0,0,0,-1)},v.minusMinutes=function z(j){return this._plusWithOverflow(this._date,0,j,0,0,-1)},v.minusSeconds=function z(j){return this._plusWithOverflow(this._date,0,0,j,0,-1)},v.minusNanos=function z(j){return this._plusWithOverflow(this._date,0,0,0,j,-1)},v._plusWithOverflow=function z(j,M,A,S,R,r){if(M===0&&A===0&&S===0&&R===0)return this._withDateTime(j,this._time);var o=W.intDiv(R,d.NANOS_PER_DAY)+W.intDiv(S,d.SECONDS_PER_DAY)+W.intDiv(A,d.MINUTES_PER_DAY)+W.intDiv(M,d.HOURS_PER_DAY);o*=r;var I=W.intMod(R,d.NANOS_PER_DAY)+W.intMod(S,d.SECONDS_PER_DAY)*d.NANOS_PER_SECOND+W.intMod(A,d.MINUTES_PER_DAY)*d.NANOS_PER_MINUTE+W.intMod(M,d.HOURS_PER_DAY)*d.NANOS_PER_HOUR,Q=this._time.toNanoOfDay();I=I*r+Q,o+=W.floorDiv(I,d.NANOS_PER_DAY);var P$=W.floorMod(I,d.NANOS_PER_DAY),j$=P$===Q?this._time:d.ofNanoOfDay(P$);return this._withDateTime(j.plusDays(o),j$)},v.query=function z(j){if(X(j,"query"),j===c.localDate())return this.toLocalDate();return D.prototype.query.call(this,j)},v.adjustInto=function z(j){return D.prototype.adjustInto.call(this,j)},v.until=function z(j,M){X(j,"endExclusive"),X(M,"unit");var A=H.from(j);if(M instanceof u){if(M.isTimeBased()){var S=this._date.daysUntil(A._date),R=A._time.toNanoOfDay()-this._time.toNanoOfDay();if(S>0&&R<0)S--,R+=d.NANOS_PER_DAY;else if(S<0&&R>0)S++,R-=d.NANOS_PER_DAY;var r=S;switch(M){case u.NANOS:return r=W.safeMultiply(r,d.NANOS_PER_DAY),W.safeAdd(r,R);case u.MICROS:return r=W.safeMultiply(r,d.MICROS_PER_DAY),W.safeAdd(r,W.intDiv(R,1000));case u.MILLIS:return r=W.safeMultiply(r,d.MILLIS_PER_DAY),W.safeAdd(r,W.intDiv(R,1e6));case u.SECONDS:return r=W.safeMultiply(r,d.SECONDS_PER_DAY),W.safeAdd(r,W.intDiv(R,d.NANOS_PER_SECOND));case u.MINUTES:return r=W.safeMultiply(r,d.MINUTES_PER_DAY),W.safeAdd(r,W.intDiv(R,d.NANOS_PER_MINUTE));case u.HOURS:return r=W.safeMultiply(r,d.HOURS_PER_DAY),W.safeAdd(r,W.intDiv(R,d.NANOS_PER_HOUR));case u.HALF_DAYS:return r=W.safeMultiply(r,2),W.safeAdd(r,W.intDiv(R,d.NANOS_PER_HOUR*12))}throw new P("Unsupported unit: "+M)}var{_date:o,_time:I}=A;if(o.isAfter(this._date)&&I.isBefore(this._time))o=o.minusDays(1);else if(o.isBefore(this._date)&&I.isAfter(this._time))o=o.plusDays(1);return this._date.until(o,M)}return M.between(this,A)},v.atOffset=function z(j){return b8.of(this,j)},v.atZone=function z(j){return d8.of(this,j)},v.toLocalDate=function z(){return this._date},v.toLocalTime=function z(){return this._time},v.compareTo=function z(j){return X(j,"other"),C(j,H,"other"),this._compareTo0(j)},v._compareTo0=function z(j){var M=this._date.compareTo(j.toLocalDate());if(M===0)M=this._time.compareTo(j.toLocalTime());return M},v.isAfter=function z(j){return this.compareTo(j)>0},v.isBefore=function z(j){return this.compareTo(j)<0},v.isEqual=function z(j){return this.compareTo(j)===0},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._date.equals(j._date)&&this._time.equals(j._time);return!1},v.hashCode=function z(){return this._date.hashCode()^this._time.hashCode()},v.toString=function z(){return this._date.toString()+"T"+this._time.toString()},v.toJSON=function z(){return this.toString()},v.format=function z(j){return X(j,"formatter"),j.format(this)},H}(l9);function FI(){u$.MIN=u$.of(q$.MIN,d.MIN),u$.MAX=u$.of(q$.MAX,d.MAX),u$.FROM=z6("LocalDateTime.FROM",function(D){return u$.from(D)})}var d=function(D){T(H,D),H.now=function z(j){if(j==null)return H._now(n$.systemDefaultZone());else if(j instanceof n$)return H._now(j);else return H._now(n$.system(j))},H._now=function z(j){if(j===void 0)j=n$.systemDefaultZone();return X(j,"clock"),H.ofInstant(j.instant(),j.zone())},H.ofInstant=function z(j,M){if(M===void 0)M=m$.systemDefault();var A=M.rules().offset(j),S=W.intMod(j.epochSecond(),H.SECONDS_PER_DAY);if(S=W.intMod(S+A.totalSeconds(),H.SECONDS_PER_DAY),S<0)S+=H.SECONDS_PER_DAY;return H.ofSecondOfDay(S,j.nano())},H.of=function z(j,M,A,S){return new H(j,M,A,S)},H.ofSecondOfDay=function z(j,M){if(j===void 0)j=0;if(M===void 0)M=0;J.SECOND_OF_DAY.checkValidValue(j),J.NANO_OF_SECOND.checkValidValue(M);var A=W.intDiv(j,H.SECONDS_PER_HOUR);j-=A*H.SECONDS_PER_HOUR;var S=W.intDiv(j,H.SECONDS_PER_MINUTE);return j-=S*H.SECONDS_PER_MINUTE,new H(A,S,j,M)},H.ofNanoOfDay=function z(j){if(j===void 0)j=0;J.NANO_OF_DAY.checkValidValue(j);var M=W.intDiv(j,H.NANOS_PER_HOUR);j-=M*H.NANOS_PER_HOUR;var A=W.intDiv(j,H.NANOS_PER_MINUTE);j-=A*H.NANOS_PER_MINUTE;var S=W.intDiv(j,H.NANOS_PER_SECOND);return j-=S*H.NANOS_PER_SECOND,new H(M,A,S,j)},H.from=function z(j){X(j,"temporal");var M=j.query(c.localTime());if(M==null)throw new _("Unable to obtain LocalTime TemporalAccessor: "+j+", type "+(j.constructor!=null?j.constructor.name:""));return M},H.parse=function z(j,M){if(M===void 0)M=Y$.ISO_LOCAL_TIME;return X(M,"formatter"),M.parse(j,H.FROM)};function H(z,j,M,A){var S;if(z===void 0)z=0;if(j===void 0)j=0;if(M===void 0)M=0;if(A===void 0)A=0;S=D.call(this)||this;var R=W.safeToInt(z),r=W.safeToInt(j),o=W.safeToInt(M),I=W.safeToInt(A);if(H._validate(R,r,o,I),r===0&&o===0&&I===0){if(!H.HOURS[R])S._hour=R,S._minute=r,S._second=o,S._nano=I,H.HOURS[R]=G(S);return H.HOURS[R]||G(S)}return S._hour=R,S._minute=r,S._second=o,S._nano=I,S}H._validate=function z(j,M,A,S){J.HOUR_OF_DAY.checkValidValue(j),J.MINUTE_OF_HOUR.checkValidValue(M),J.SECOND_OF_MINUTE.checkValidValue(A),J.NANO_OF_SECOND.checkValidValue(S)};var v=H.prototype;return v.isSupported=function z(j){if(j instanceof J)return j.isTimeBased();else if(j instanceof u)return j.isTimeBased();return j!=null&&j.isSupportedBy(this)},v.range=function z(j){return X(j),D.prototype.range.call(this,j)},v.get=function z(j){return this.getLong(j)},v.getLong=function z(j){if(X(j,"field"),j instanceof J)return this._get0(j);return j.getFrom(this)},v._get0=function z(j){switch(j){case J.NANO_OF_SECOND:return this._nano;case J.NANO_OF_DAY:return this.toNanoOfDay();case J.MICRO_OF_SECOND:return W.intDiv(this._nano,1000);case J.MICRO_OF_DAY:return W.intDiv(this.toNanoOfDay(),1000);case J.MILLI_OF_SECOND:return W.intDiv(this._nano,1e6);case J.MILLI_OF_DAY:return W.intDiv(this.toNanoOfDay(),1e6);case J.SECOND_OF_MINUTE:return this._second;case J.SECOND_OF_DAY:return this.toSecondOfDay();case J.MINUTE_OF_HOUR:return this._minute;case J.MINUTE_OF_DAY:return this._hour*60+this._minute;case J.HOUR_OF_AMPM:return W.intMod(this._hour,12);case J.CLOCK_HOUR_OF_AMPM:{var M=W.intMod(this._hour,12);return M%12===0?12:M}case J.HOUR_OF_DAY:return this._hour;case J.CLOCK_HOUR_OF_DAY:return this._hour===0?24:this._hour;case J.AMPM_OF_DAY:return W.intDiv(this._hour,12)}throw new P("Unsupported field: "+j)},v.hour=function z(){return this._hour},v.minute=function z(){return this._minute},v.second=function z(){return this._second},v.nano=function z(){return this._nano},v._withAdjuster=function z(j){if(X(j,"adjuster"),j instanceof H)return j;return D.prototype._withAdjuster.call(this,j)},v._withField=function z(j,M){if(X(j,"field"),C(j,E6,"field"),j instanceof J){switch(j.checkValidValue(M),j){case J.NANO_OF_SECOND:return this.withNano(M);case J.NANO_OF_DAY:return H.ofNanoOfDay(M);case J.MICRO_OF_SECOND:return this.withNano(M*1000);case J.MICRO_OF_DAY:return H.ofNanoOfDay(M*1000);case J.MILLI_OF_SECOND:return this.withNano(M*1e6);case J.MILLI_OF_DAY:return H.ofNanoOfDay(M*1e6);case J.SECOND_OF_MINUTE:return this.withSecond(M);case J.SECOND_OF_DAY:return this.plusSeconds(M-this.toSecondOfDay());case J.MINUTE_OF_HOUR:return this.withMinute(M);case J.MINUTE_OF_DAY:return this.plusMinutes(M-(this._hour*60+this._minute));case J.HOUR_OF_AMPM:return this.plusHours(M-W.intMod(this._hour,12));case J.CLOCK_HOUR_OF_AMPM:return this.plusHours((M===12?0:M)-W.intMod(this._hour,12));case J.HOUR_OF_DAY:return this.withHour(M);case J.CLOCK_HOUR_OF_DAY:return this.withHour(M===24?0:M);case J.AMPM_OF_DAY:return this.plusHours((M-W.intDiv(this._hour,12))*12)}throw new P("Unsupported field: "+j)}return j.adjustInto(this,M)},v.withHour=function z(j){if(j===void 0)j=0;if(this._hour===j)return this;return new H(j,this._minute,this._second,this._nano)},v.withMinute=function z(j){if(j===void 0)j=0;if(this._minute===j)return this;return new H(this._hour,j,this._second,this._nano)},v.withSecond=function z(j){if(j===void 0)j=0;if(this._second===j)return this;return new H(this._hour,this._minute,j,this._nano)},v.withNano=function z(j){if(j===void 0)j=0;if(this._nano===j)return this;return new H(this._hour,this._minute,this._second,j)},v.truncatedTo=function z(j){if(X(j,"unit"),j===u.NANOS)return this;var M=j.duration();if(M.seconds()>H.SECONDS_PER_DAY)throw new _("Unit is too large to be used for truncation");var A=M.toNanos();if(W.intMod(H.NANOS_PER_DAY,A)!==0)throw new _("Unit must divide into a standard day without remainder");var S=this.toNanoOfDay();return H.ofNanoOfDay(W.intDiv(S,A)*A)},v._plusUnit=function z(j,M){if(X(M,"unit"),M instanceof u){switch(M){case u.NANOS:return this.plusNanos(j);case u.MICROS:return this.plusNanos(W.intMod(j,H.MICROS_PER_DAY)*1000);case u.MILLIS:return this.plusNanos(W.intMod(j,H.MILLIS_PER_DAY)*1e6);case u.SECONDS:return this.plusSeconds(j);case u.MINUTES:return this.plusMinutes(j);case u.HOURS:return this.plusHours(j);case u.HALF_DAYS:return this.plusHours(W.intMod(j,2)*12)}throw new P("Unsupported unit: "+M)}return M.addTo(this,j)},v.plusHours=function z(j){if(j===0)return this;var M=W.intMod(W.intMod(j,H.HOURS_PER_DAY)+this._hour+H.HOURS_PER_DAY,H.HOURS_PER_DAY);return new H(M,this._minute,this._second,this._nano)},v.plusMinutes=function z(j){if(j===0)return this;var M=this._hour*H.MINUTES_PER_HOUR+this._minute,A=W.intMod(W.intMod(j,H.MINUTES_PER_DAY)+M+H.MINUTES_PER_DAY,H.MINUTES_PER_DAY);if(M===A)return this;var S=W.intDiv(A,H.MINUTES_PER_HOUR),R=W.intMod(A,H.MINUTES_PER_HOUR);return new H(S,R,this._second,this._nano)},v.plusSeconds=function z(j){if(j===0)return this;var M=this._hour*H.SECONDS_PER_HOUR+this._minute*H.SECONDS_PER_MINUTE+this._second,A=W.intMod(W.intMod(j,H.SECONDS_PER_DAY)+M+H.SECONDS_PER_DAY,H.SECONDS_PER_DAY);if(M===A)return this;var S=W.intDiv(A,H.SECONDS_PER_HOUR),R=W.intMod(W.intDiv(A,H.SECONDS_PER_MINUTE),H.MINUTES_PER_HOUR),r=W.intMod(A,H.SECONDS_PER_MINUTE);return new H(S,R,r,this._nano)},v.plusNanos=function z(j){if(j===0)return this;var M=this.toNanoOfDay(),A=W.intMod(W.intMod(j,H.NANOS_PER_DAY)+M+H.NANOS_PER_DAY,H.NANOS_PER_DAY);if(M===A)return this;var S=W.intDiv(A,H.NANOS_PER_HOUR),R=W.intMod(W.intDiv(A,H.NANOS_PER_MINUTE),H.MINUTES_PER_HOUR),r=W.intMod(W.intDiv(A,H.NANOS_PER_SECOND),H.SECONDS_PER_MINUTE),o=W.intMod(A,H.NANOS_PER_SECOND);return new H(S,R,r,o)},v._minusUnit=function z(j,M){return X(M,"unit"),this._plusUnit(-1*j,M)},v.minusHours=function z(j){return this.plusHours(-1*W.intMod(j,H.HOURS_PER_DAY))},v.minusMinutes=function z(j){return this.plusMinutes(-1*W.intMod(j,H.MINUTES_PER_DAY))},v.minusSeconds=function z(j){return this.plusSeconds(-1*W.intMod(j,H.SECONDS_PER_DAY))},v.minusNanos=function z(j){return this.plusNanos(-1*W.intMod(j,H.NANOS_PER_DAY))},v.query=function z(j){if(X(j,"query"),j===c.precision())return u.NANOS;else if(j===c.localTime())return this;if(j===c.chronology()||j===c.zoneId()||j===c.zone()||j===c.offset()||j===c.localDate())return null;return j.queryFrom(this)},v.adjustInto=function z(j){return j.with(H.NANO_OF_DAY,this.toNanoOfDay())},v.until=function z(j,M){X(j,"endExclusive"),X(M,"unit");var A=H.from(j);if(M instanceof u){var S=A.toNanoOfDay()-this.toNanoOfDay();switch(M){case u.NANOS:return S;case u.MICROS:return W.intDiv(S,1000);case u.MILLIS:return W.intDiv(S,1e6);case u.SECONDS:return W.intDiv(S,H.NANOS_PER_SECOND);case u.MINUTES:return W.intDiv(S,H.NANOS_PER_MINUTE);case u.HOURS:return W.intDiv(S,H.NANOS_PER_HOUR);case u.HALF_DAYS:return W.intDiv(S,12*H.NANOS_PER_HOUR)}throw new P("Unsupported unit: "+M)}return M.between(this,A)},v.atDate=function z(j){return u$.of(j,this)},v.atOffset=function z(j){return vq.of(this,j)},v.toSecondOfDay=function z(){var j=this._hour*H.SECONDS_PER_HOUR;return j+=this._minute*H.SECONDS_PER_MINUTE,j+=this._second,j},v.toNanoOfDay=function z(){var j=this._hour*H.NANOS_PER_HOUR;return j+=this._minute*H.NANOS_PER_MINUTE,j+=this._second*H.NANOS_PER_SECOND,j+=this._nano,j},v.compareTo=function z(j){X(j,"other"),C(j,H,"other");var M=W.compareNumbers(this._hour,j._hour);if(M===0){if(M=W.compareNumbers(this._minute,j._minute),M===0){if(M=W.compareNumbers(this._second,j._second),M===0)M=W.compareNumbers(this._nano,j._nano)}}return M},v.isAfter=function z(j){return this.compareTo(j)>0},v.isBefore=function z(j){return this.compareTo(j)<0},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this._hour===j._hour&&this._minute===j._minute&&this._second===j._second&&this._nano===j._nano;return!1},v.hashCode=function z(){var j=this.toNanoOfDay();return W.hash(j)},v.toString=function z(){var j="",M=this._hour,A=this._minute,S=this._second,R=this._nano;if(j+=M<10?"0":"",j+=M,j+=A<10?":0":":",j+=A,S>0||R>0){if(j+=S<10?":0":":",j+=S,R>0)if(j+=".",W.intMod(R,1e6)===0)j+=(""+(W.intDiv(R,1e6)+1000)).substring(1);else if(W.intMod(R,1000)===0)j+=(""+(W.intDiv(R,1000)+1e6)).substring(1);else j+=(""+(R+1e9)).substring(1)}return j},v.toJSON=function z(){return this.toString()},v.format=function z(j){return X(j,"formatter"),j.format(this)},H}(_8);function UI(){d.HOURS=[];for(var D=0;D<24;D++)d.of(D,0,0,0);d.MIN=d.HOURS[0],d.MAX=new d(23,59,59,999999999),d.MIDNIGHT=d.HOURS[0],d.NOON=d.HOURS[12],d.FROM=z6("LocalTime.FROM",function(H){return d.from(H)})}d.HOURS_PER_DAY=24,d.MINUTES_PER_HOUR=60,d.MINUTES_PER_DAY=d.MINUTES_PER_HOUR*d.HOURS_PER_DAY,d.SECONDS_PER_MINUTE=60,d.SECONDS_PER_HOUR=d.SECONDS_PER_MINUTE*d.MINUTES_PER_HOUR,d.SECONDS_PER_DAY=d.SECONDS_PER_HOUR*d.HOURS_PER_DAY,d.MILLIS_PER_DAY=d.SECONDS_PER_DAY*1000,d.MICROS_PER_DAY=d.SECONDS_PER_DAY*1e6,d.NANOS_PER_SECOND=1e9,d.NANOS_PER_MINUTE=d.NANOS_PER_SECOND*d.SECONDS_PER_MINUTE,d.NANOS_PER_HOUR=d.NANOS_PER_MINUTE*d.MINUTES_PER_HOUR,d.NANOS_PER_DAY=d.NANOS_PER_HOUR*d.HOURS_PER_DAY;var zw=1e6,V$=function(D){T(H,D),H.now=function z(j){if(j===void 0)j=n$.systemUTC();return j.instant()},H.ofEpochSecond=function z(j,M){if(M===void 0)M=0;var A=j+W.floorDiv(M,d.NANOS_PER_SECOND),S=W.floorMod(M,d.NANOS_PER_SECOND);return H._create(A,S)},H.ofEpochMilli=function z(j){var M=W.floorDiv(j,1000),A=W.floorMod(j,1000);return H._create(M,A*1e6)},H.ofEpochMicro=function z(j){var M=W.floorDiv(j,1e6),A=W.floorMod(j,1e6);return H._create(M,A*1000)},H.from=function z(j){try{var M=j.getLong(J.INSTANT_SECONDS),A=j.get(J.NANO_OF_SECOND);return H.ofEpochSecond(M,A)}catch(S){throw new _("Unable to obtain Instant from TemporalAccessor: "+j+", type "+typeof j,S)}},H.parse=function z(j){return Y$.ISO_INSTANT.parse(j,H.FROM)},H._create=function z(j,M){if(j===0&&M===0)return H.EPOCH;return new H(j,M)},H._validate=function z(j,M){if(j<H.MIN_SECONDS||j>H.MAX_SECONDS)throw new _("Instant exceeds minimum or maximum instant");if(M<0||M>d.NANOS_PER_SECOND)throw new _("Instant exceeds minimum or maximum instant")};function H(z,j){var M=D.call(this)||this;return H._validate(z,j),M._seconds=W.safeToInt(z),M._nanos=W.safeToInt(j),M}var v=H.prototype;return v.isSupported=function z(j){if(j instanceof J)return j===J.INSTANT_SECONDS||j===J.NANO_OF_SECOND||j===J.MICRO_OF_SECOND||j===J.MILLI_OF_SECOND;if(j instanceof u)return j.isTimeBased()||j===u.DAYS;return j!=null&&j.isSupportedBy(this)},v.range=function z(j){return D.prototype.range.call(this,j)},v.get=function z(j){return this.getLong(j)},v.getLong=function z(j){if(j instanceof J){switch(j){case J.NANO_OF_SECOND:return this._nanos;case J.MICRO_OF_SECOND:return W.intDiv(this._nanos,1000);case J.MILLI_OF_SECOND:return W.intDiv(this._nanos,zw);case J.INSTANT_SECONDS:return this._seconds}throw new P("Unsupported field: "+j)}return j.getFrom(this)},v.epochSecond=function z(){return this._seconds},v.nano=function z(){return this._nanos},v._withField=function z(j,M){if(X(j,"field"),j instanceof J){switch(j.checkValidValue(M),j){case J.MILLI_OF_SECOND:{var A=M*zw;return A!==this._nanos?H._create(this._seconds,A):this}case J.MICRO_OF_SECOND:{var S=M*1000;return S!==this._nanos?H._create(this._seconds,S):this}case J.NANO_OF_SECOND:return M!==this._nanos?H._create(this._seconds,M):this;case J.INSTANT_SECONDS:return M!==this._seconds?H._create(M,this._nanos):this}throw new P("Unsupported field: "+j)}return j.adjustInto(this,M)},v.truncatedTo=function z(j){if(X(j,"unit"),j===u.NANOS)return this;var M=j.duration();if(M.seconds()>d.SECONDS_PER_DAY)throw new _("Unit is too large to be used for truncation");var A=M.toNanos();if(W.intMod(d.NANOS_PER_DAY,A)!==0)throw new _("Unit must divide into a standard day without remainder");var S=W.intMod(this._seconds,d.SECONDS_PER_DAY)*d.NANOS_PER_SECOND+this._nanos,R=W.intDiv(S,A)*A;return this.plusNanos(R-S)},v._plusUnit=function z(j,M){if(X(j,"amountToAdd"),X(M,"unit"),C(M,b),M instanceof u){switch(M){case u.NANOS:return this.plusNanos(j);case u.MICROS:return this.plusMicros(j);case u.MILLIS:return this.plusMillis(j);case u.SECONDS:return this.plusSeconds(j);case u.MINUTES:return this.plusSeconds(W.safeMultiply(j,d.SECONDS_PER_MINUTE));case u.HOURS:return this.plusSeconds(W.safeMultiply(j,d.SECONDS_PER_HOUR));case u.HALF_DAYS:return this.plusSeconds(W.safeMultiply(j,d.SECONDS_PER_DAY/2));case u.DAYS:return this.plusSeconds(W.safeMultiply(j,d.SECONDS_PER_DAY))}throw new P("Unsupported unit: "+M)}return M.addTo(this,j)},v.plusSeconds=function z(j){return this._plus(j,0)},v.plusMillis=function z(j){return this._plus(W.intDiv(j,1000),W.intMod(j,1000)*zw)},v.plusNanos=function z(j){return this._plus(0,j)},v.plusMicros=function z(j){return this._plus(W.intDiv(j,1e6),W.intMod(j,1e6)*1000)},v._plus=function z(j,M){if(j===0&&M===0)return this;var A=this._seconds+j;A=A+W.intDiv(M,d.NANOS_PER_SECOND);var S=this._nanos+M%d.NANOS_PER_SECOND;return H.ofEpochSecond(A,S)},v._minusUnit=function z(j,M){return this._plusUnit(-1*j,M)},v.minusSeconds=function z(j){return this.plusSeconds(j*-1)},v.minusMillis=function z(j){return this.plusMillis(-1*j)},v.minusNanos=function z(j){return this.plusNanos(-1*j)},v.minusMicros=function z(j){return this.plusMicros(-1*j)},v.query=function z(j){if(X(j,"query"),j===c.precision())return u.NANOS;if(j===c.localDate()||j===c.localTime()||j===c.chronology()||j===c.zoneId()||j===c.zone()||j===c.offset())return null;return j.queryFrom(this)},v.adjustInto=function z(j){return X(j,"temporal"),j.with(J.INSTANT_SECONDS,this._seconds).with(J.NANO_OF_SECOND,this._nanos)},v.until=function z(j,M){X(j,"endExclusive"),X(M,"unit");var A=H.from(j);if(M instanceof u){switch(M){case u.NANOS:return this._nanosUntil(A);case u.MICROS:return this._microsUntil(A);case u.MILLIS:return W.safeSubtract(A.toEpochMilli(),this.toEpochMilli());case u.SECONDS:return this._secondsUntil(A);case u.MINUTES:return W.intDiv(this._secondsUntil(A),d.SECONDS_PER_MINUTE);case u.HOURS:return W.intDiv(this._secondsUntil(A),d.SECONDS_PER_HOUR);case u.HALF_DAYS:return W.intDiv(this._secondsUntil(A),12*d.SECONDS_PER_HOUR);case u.DAYS:return W.intDiv(this._secondsUntil(A),d.SECONDS_PER_DAY)}throw new P("Unsupported unit: "+M)}return M.between(this,A)},v._microsUntil=function z(j){var M=W.safeSubtract(j.epochSecond(),this.epochSecond()),A=W.safeMultiply(M,1e6);return W.safeAdd(A,W.intDiv(j.nano()-this.nano(),1000))},v._nanosUntil=function z(j){var M=W.safeSubtract(j.epochSecond(),this.epochSecond()),A=W.safeMultiply(M,d.NANOS_PER_SECOND);return W.safeAdd(A,j.nano()-this.nano())},v._secondsUntil=function z(j){var M=W.safeSubtract(j.epochSecond(),this.epochSecond()),A=j.nano()-this.nano();if(M>0&&A<0)M--;else if(M<0&&A>0)M++;return M},v.atOffset=function z(j){return b8.ofInstant(this,j)},v.atZone=function z(j){return d8.ofInstant(this,j)},v.toEpochMilli=function z(){var j=W.safeMultiply(this._seconds,1000);return j+W.intDiv(this._nanos,zw)},v.compareTo=function z(j){X(j,"otherInstant"),C(j,H,"otherInstant");var M=W.compareNumbers(this._seconds,j._seconds);if(M!==0)return M;return this._nanos-j._nanos},v.isAfter=function z(j){return this.compareTo(j)>0},v.isBefore=function z(j){return this.compareTo(j)<0},v.equals=function z(j){if(this===j)return!0;if(j instanceof H)return this.epochSecond()===j.epochSecond()&&this.nano()===j.nano();return!1},v.hashCode=function z(){return W.hashCode(this._seconds,this._nanos)},v.toString=function z(){return Y$.ISO_INSTANT.format(this)},v.toJSON=function z(){return this.toString()},H}(_8);function QI(){V$.MIN_SECONDS=-31619119219200,V$.MAX_SECONDS=31494816403199,V$.EPOCH=new V$(0,0),V$.MIN=V$.ofEpochSecond(V$.MIN_SECONDS,0),V$.MAX=V$.ofEpochSecond(V$.MAX_SECONDS,999999999),V$.FROM=z6("Instant.FROM",function(D){return V$.from(D)})}var n$=function(){function D(){}D.systemUTC=function v(){return new t9(O$.UTC)},D.systemDefaultZone=function v(){return new t9(m$.systemDefault())},D.system=function v(z){return new t9(z)},D.fixed=function v(z,j){return new $l(z,j)},D.offset=function v(z,j){return new ql(z,j)};var H=D.prototype;return H.millis=function v(){N("Clock.millis")},H.instant=function v(){N("Clock.instant")},H.zone=function v(){N("Clock.zone")},H.withZone=function v(){N("Clock.withZone")},D}(),t9=function(D){T(H,D);function H(z){var j;return X(z,"zone"),j=D.call(this)||this,j._zone=z,j}var v=H.prototype;return v.zone=function z(){return this._zone},v.millis=function z(){return new Date().getTime()},v.instant=function z(){return V$.ofEpochMilli(this.millis())},v.equals=function z(j){if(j instanceof H)return this._zone.equals(j._zone);return!1},v.withZone=function z(j){if(j.equals(this._zone))return this;return new H(j)},v.toString=function z(){return"SystemClock["+this._zone.toString()+"]"},H}(n$),$l=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._instant=z,M._zoneId=j,M}var v=H.prototype;return v.instant=function z(){return this._instant},v.millis=function z(){return this._instant.toEpochMilli()},v.zone=function z(){return this._zoneId},v.toString=function z(){return"FixedClock[]"},v.equals=function z(j){if(j instanceof H)return this._instant.equals(j._instant)&&this._zoneId.equals(j._zoneId);return!1},v.withZone=function z(j){if(j.equals(this._zoneId))return this;return new H(this._instant,j)},H}(n$),ql=function(D){T(H,D);function H(z,j){var M=D.call(this)||this;return M._baseClock=z,M._offset=j,M}var v=H.prototype;return v.zone=function z(){return this._baseClock.zone()},v.withZone=function z(j){if(j.equals(this._baseClock.zone()))return this;return new H(this._baseClock.withZone(j),this._offset)},v.millis=function z(){return this._baseClock.millis()+this._offset.toMillis()},v.instant=function z(){return this._baseClock.instant().plus(this._offset)},v.equals=function z(j){if(j instanceof H)return this._baseClock.equals(j._baseClock)&&this._offset.equals(j._offset);return!1},v.toString=function z(){return"OffsetClock["+this._baseClock+","+this._offset+"]"},H}(n$),ok=function(){D.of=function v(z,j,M){return new D(z,j,M)};function D(v,z,j){if(X(v,"transition"),X(z,"offsetBefore"),X(j,"offsetAfter"),z.equals(j))throw new O("Offsets must not be equal");if(v.nano()!==0)throw new O("Nano-of-second must be zero");if(v instanceof u$)this._transition=v;else this._transition=u$.ofEpochSecond(v,0,z);this._offsetBefore=z,this._offsetAfter=j}var H=D.prototype;return H.instant=function v(){return this._transition.toInstant(this._offsetBefore)},H.toEpochSecond=function v(){return this._transition.toEpochSecond(this._offsetBefore)},H.dateTimeBefore=function v(){return this._transition},H.dateTimeAfter=function v(){return this._transition.plusSeconds(this.durationSeconds())},H.offsetBefore=function v(){return this._offsetBefore},H.offsetAfter=function v(){return this._offsetAfter},H.duration=function v(){return x.ofSeconds(this.durationSeconds())},H.durationSeconds=function v(){return this._offsetAfter.totalSeconds()-this._offsetBefore.totalSeconds()},H.isGap=function v(){return this._offsetAfter.totalSeconds()>this._offsetBefore.totalSeconds()},H.isOverlap=function v(){return this._offsetAfter.totalSeconds()<this._offsetBefore.totalSeconds()},H.isValidOffset=function v(z){return this.isGap()?!1:this._offsetBefore.equals(z)||this._offsetAfter.equals(z)},H.validOffsets=function v(){if(this.isGap())return[];else return[this._offsetBefore,this._offsetAfter]},H.compareTo=function v(z){return this.instant().compareTo(z.instant())},H.equals=function v(z){if(z===this)return!0;if(z instanceof D){var j=z;return this._transition.equals(j._transition)&&this._offsetBefore.equals(j.offsetBefore())&&this._offsetAfter.equals(j.offsetAfter())}return!1},H.hashCode=function v(){return this._transition.hashCode()^this._offsetBefore.hashCode()^this._offsetAfter.hashCode()>>>16},H.toString=function v(){return"Transition["+(this.isGap()?"Gap":"Overlap")+" at "+this._transition.toString()+this._offsetBefore.toString()+" to "+this._offsetAfter+"]"},D}();function _l(){c.ZONE_ID=z6("ZONE_ID",function(D){return D.query(c.ZONE_ID)}),c.CHRONO=z6("CHRONO",function(D){return D.query(c.CHRONO)}),c.PRECISION=z6("PRECISION",function(D){return D.query(c.PRECISION)}),c.OFFSET=z6("OFFSET",function(D){if(D.isSupported(J.OFFSET_SECONDS))return O$.ofTotalSeconds(D.get(J.OFFSET_SECONDS));return null}),c.ZONE=z6("ZONE",function(D){var H=D.query(c.ZONE_ID);return H!=null?H:D.query(c.OFFSET)}),c.LOCAL_DATE=z6("LOCAL_DATE",function(D){if(D.isSupported(J.EPOCH_DAY))return q$.ofEpochDay(D.getLong(J.EPOCH_DAY));return null}),c.LOCAL_TIME=z6("LOCAL_TIME",function(D){if(D.isSupported(J.NANO_OF_DAY))return d.ofNanoOfDay(D.getLong(J.NANO_OF_DAY));return null})}var Kl=function(D){T(H,D);function H(){return D.apply(this,arguments)||this}var v=H.prototype;return v.isFixedOffset=function z(){return!1},v.offsetOfInstant=function z(j){var M=new Date(j.toEpochMilli()).getTimezoneOffset();return O$.ofTotalMinutes(M*-1)},v.offsetOfEpochMilli=function z(j){var M=new Date(j).getTimezoneOffset();return O$.ofTotalMinutes(M*-1)},v.offsetOfLocalDateTime=function z(j){var M=j.toEpochSecond(O$.UTC)*1000,A=new Date(M).getTimezoneOffset(),S=M+A*60000,R=new Date(S).getTimezoneOffset();return O$.ofTotalMinutes(R*-1)},v.validOffsets=function z(j){return[this.offsetOfLocalDateTime(j)]},v.transition=function z(){return null},v.standardOffset=function z(j){return this.offsetOfInstant(j)},v.daylightSavings=function z(){this._throwNotSupported()},v.isDaylightSavings=function z(){this._throwNotSupported()},v.isValidOffset=function z(j,M){return this.offsetOfLocalDateTime(j).equals(M)},v.nextTransition=function z(){this._throwNotSupported()},v.previousTransition=function z(){this._throwNotSupported()},v.transitions=function z(){this._throwNotSupported()},v.transitionRules=function z(){this._throwNotSupported()},v._throwNotSupported=function z(){throw new _("not supported operation")},v.equals=function z(j){if(this===j||j instanceof H)return!0;else return!1},v.toString=function z(){return"SYSTEM"},H}(NP),Pl=function(D){T(H,D);function H(){var z=D.call(this)||this;return z._rules=new Kl,z}var v=H.prototype;return v.rules=function z(){return this._rules},v.equals=function z(j){if(this===j)return!0;return!1},v.id=function z(){return"SYSTEM"},H}(m$),E4=function(){function D(){}return D.systemDefault=function H(){return s9},D.getAvailableZoneIds=function H(){return uP.getAvailableZoneIds()},D.of=function H(v){if(X(v,"zoneId"),v==="Z")return O$.UTC;if(v.length===1)throw new _("Invalid zone: "+v);if(Vq.startsWith(v,"+")||Vq.startsWith(v,"-"))return O$.of(v);if(v==="UTC"||v==="GMT"||v==="GMT0"||v==="UT")return new Mq(v,O$.UTC.rules());if(Vq.startsWith(v,"UTC+")||Vq.startsWith(v,"GMT+")||Vq.startsWith(v,"UTC-")||Vq.startsWith(v,"GMT-")){var z=O$.of(v.substring(3));if(z.totalSeconds()===0)return new Mq(v.substring(0,3),z.rules());return new Mq(v.substring(0,3)+z.id(),z.rules())}if(Vq.startsWith(v,"UT+")||Vq.startsWith(v,"UT-")){var j=O$.of(v.substring(2));if(j.totalSeconds()===0)return new Mq("UT",j.rules());return new Mq("UT"+j.id(),j.rules())}if(v==="SYSTEM")return m$.systemDefault();return Mq.ofId(v)},D.ofOffset=function H(v,z){if(X(v,"prefix"),X(z,"offset"),v.length===0)return z;if(v==="GMT"||v==="UTC"||v==="UT"){if(z.totalSeconds()===0)return new Mq(v,z.rules());return new Mq(v+z.id(),z.rules())}throw new O("Invalid prefix, must be GMT, UTC or UT: "+v)},D.from=function H(v){X(v,"temporal");var z=v.query(c.zone());if(z==null)throw new _("Unable to obtain ZoneId from TemporalAccessor: "+v+", type "+(v.constructor!=null?v.constructor.name:""));return z},D}(),s9=null;function jl(){s9=new Pl,m$.systemDefault=E4.systemDefault,m$.getAvailableZoneIds=E4.getAvailableZoneIds,m$.of=E4.of,m$.ofOffset=E4.ofOffset,m$.from=E4.from,O$.from=E4.from,m$.SYSTEM=s9,m$.UTC=O$.ofTotalSeconds(0)}var ik=!1;function wl(){if(ik)return;ik=!0,v$(),g(),Cq(),GK(),UI(),VI(),_l(),Y_(),QI(),BI(),FI(),cI(),L9(),aI(),gI(),mI(),uI(),sI(),jl(),II(),iI(),oI(),eI(),lI()}wl();var Ol=function(){function D(v,z){var j;if(v instanceof V$){this.instant=v;return}else if(v instanceof q$)z=z==null?m$.systemDefault():z,j=v.atStartOfDay(z);else if(v instanceof u$)z=z==null?m$.systemDefault():z,j=v.atZone(z);else if(v instanceof d8)if(z==null)j=v;else j=v.withZoneSameInstant(z);else throw new O("unsupported instance for convert operation:"+v);this.instant=j.toInstant()}var H=D.prototype;return H.toDate=function v(){return new Date(this.instant.toEpochMilli())},H.toEpochMilli=function v(){return this.instant.toEpochMilli()},D}();function gk(D,H){return new Ol(D,H)}function ak(D,H){if(H===void 0)H=m$.systemDefault();if(X(D,"date"),X(H,"zone"),D instanceof Date)return V$.ofEpochMilli(D.getTime()).atZone(H);else if(typeof D.toDate==="function"&&D.toDate()instanceof Date)return V$.ofEpochMilli(D.toDate().getTime()).atZone(H);throw new O("date must be a javascript Date or a moment instance")}function zl(D){var H=[];return function v(z){if(!~H.indexOf(z))z(D),H.push(z);return D}}var ck={assert:L,DateTimeBuilder:Pw,DateTimeParseContext:Ek,DateTimePrintContext:Rk,MathUtil:W,StringUtil:Vq,StringBuilder:xk},Ik={_:ck,convert:gk,nativeJs:ak,ArithmeticException:w,DateTimeException:_,DateTimeParseException:K,IllegalArgumentException:O,IllegalStateException:f,UnsupportedTemporalTypeException:P,NullPointerException:Y,Clock:n$,DayOfWeek:N$,Duration:x,Instant:V$,LocalDate:q$,LocalTime:d,LocalDateTime:u$,OffsetTime:vq,OffsetDateTime:b8,Month:$$,MonthDay:LP,ParsePosition:C9,Period:rq,Year:x8,YearConstants:s,YearMonth:m4,ZonedDateTime:d8,ZoneOffset:O$,ZoneId:m$,ZoneRegion:Mq,ZoneOffsetTransition:ok,ZoneRules:NP,ZoneRulesProvider:uP,ChronoLocalDate:p4,ChronoLocalDateTime:l9,ChronoZonedDateTime:I9,IsoChronology:E$,ChronoField:J,ChronoUnit:u,IsoFields:V8,Temporal:_8,TemporalAccessor:zq,TemporalAdjuster:CP,TemporalAdjusters:a9,TemporalAmount:n,TemporalField:E6,TemporalQueries:c,TemporalQuery:ZK,TemporalUnit:b,ValueRange:K$,DateTimeFormatter:Y$,DateTimeFormatterBuilder:R$,DecimalStyle:mP,ResolverStyle:z$,SignStyle:y$,TextStyle:G$},lk=zl(Ik);Ik.use=lk,$.ArithmeticException=w,$.ChronoField=J,$.ChronoLocalDate=p4,$.ChronoLocalDateTime=l9,$.ChronoUnit=u,$.ChronoZonedDateTime=I9,$.Clock=n$,$.DateTimeException=_,$.DateTimeFormatter=Y$,$.DateTimeFormatterBuilder=R$,$.DateTimeParseException=K,$.DayOfWeek=N$,$.DecimalStyle=mP,$.Duration=x,$.IllegalArgumentException=O,$.IllegalStateException=f,$.Instant=V$,$.IsoChronology=E$,$.IsoFields=V8,$.LocalDate=q$,$.LocalDateTime=u$,$.LocalTime=d,$.Month=$$,$.MonthDay=LP,$.NullPointerException=Y,$.OffsetDateTime=b8,$.OffsetTime=vq,$.ParsePosition=C9,$.Period=rq,$.ResolverStyle=z$,$.SignStyle=y$,$.Temporal=_8,$.TemporalAccessor=zq,$.TemporalAdjuster=CP,$.TemporalAdjusters=a9,$.TemporalAmount=n,$.TemporalField=E6,$.TemporalQueries=c,$.TemporalQuery=ZK,$.TemporalUnit=b,$.TextStyle=G$,$.UnsupportedTemporalTypeException=P,$.ValueRange=K$,$.Year=x8,$.YearConstants=s,$.YearMonth=m4,$.ZoneId=m$,$.ZoneOffset=O$,$.ZoneOffsetTransition=ok,$.ZoneRegion=Mq,$.ZoneRules=NP,$.ZoneRulesProvider=uP,$.ZonedDateTime=d8,$._=ck,$.convert=gk,$.nativeJs=ak,$.use=lk})});var $b=y((Fd,Ud)=>{Object.defineProperty(Fd,"__esModule",{value:!0});Fd.default=void 0;var bJ$=oJ$(s5()),U5=s3();function oJ$($){return $&&$.__esModule?$:{default:$}}var iJ$=U5.LocalDate.ofYearDay(1900,1),gJ$=Buffer.from([0]),aJ$=Buffer.from([8]),Bd={id:61,type:"DATETIME",name:"DateTime",declaration:function(){return"datetime"},generateTypeInfo(){return Buffer.from([bJ$.default.id,8])},generateParameterLength($,q){if($.value==null)return gJ$;return aJ$},generateParameterData:function*($,q){if($.value==null)return;let _=$.value,K;if(q.useUTC)K=U5.LocalDate.of(_.getUTCFullYear(),_.getUTCMonth()+1,_.getUTCDate());else K=U5.LocalDate.of(_.getFullYear(),_.getMonth()+1,_.getDate());let P=iJ$.until(K,U5.ChronoUnit.DAYS),w,O;if(q.useUTC){let Y=_.getUTCHours()*60*60;Y+=_.getUTCMinutes()*60,Y+=_.getUTCSeconds(),w=Y*1000+_.getUTCMilliseconds()}else{let Y=_.getHours()*60*60;Y+=_.getMinutes()*60,Y+=_.getSeconds(),w=Y*1000+_.getMilliseconds()}if(O=w/3.3333333333333335,O=Math.round(O),O===25920000)P+=1,O=0;let f=Buffer.alloc(8);f.writeInt32LE(P,0),f.writeUInt32LE(O,4),yield f},validate:function($,q,_){if($==null)return null;if(!($ instanceof Date))$=new Date(Date.parse($));$=$;let K;if(_&&_.useUTC)K=$.getUTCFullYear();else K=$.getFullYear();if(K<1753||K>9999)throw new TypeError("Out of range.");if(isNaN($))throw new TypeError("Invalid date.");return $}},Mn$=Fd.default=Bd;Ud.exports=Bd});var jb=y((_b,Kb)=>{Object.defineProperty(_b,"__esModule",{value:!0});_b.default=void 0;var cJ$=IJ$(e5());function IJ$($){return $&&$.__esModule?$:{default:$}}var lJ$=Buffer.from([0]),qb={id:62,type:"FLT8",name:"Float",declaration:function(){return"float"},generateTypeInfo(){return Buffer.from([cJ$.default.id,8])},generateParameterLength($,q){if($.value==null)return lJ$;return Buffer.from([8])},*generateParameterData($,q){if($.value==null)return;let _=Buffer.alloc(8);_.writeDoubleLE(parseFloat($.value),0),yield _},validate:function($){if($==null)return null;if($=parseFloat($),isNaN($))throw new TypeError("Invalid number.");return $}},vn$=_b.default=qb;Kb.exports=qb});var DY=y((Ob,zb)=>{Object.defineProperty(Ob,"__esModule",{value:!0});Ob.default=void 0;var wb={id:106,type:"DECIMALN",name:"DecimalN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},Hn$=Ob.default=wb;zb.exports=wb});var kb=y((Hb,Yb)=>{Object.defineProperty(Hb,"__esModule",{value:!0});Hb.default=void 0;var tJ$=Mb(DY()),pY=Mb(k8());function Mb($){return $&&$.__esModule?$:{default:$}}var sJ$=Buffer.from([0]),vb={id:55,type:"DECIMAL",name:"Decimal",declaration:function($){return"decimal("+this.resolvePrecision($)+", "+this.resolveScale($)+")"},resolvePrecision:function($){if($.precision!=null)return $.precision;else if($.value===null)return 1;else return 18},resolveScale:function($){if($.scale!=null)return $.scale;else return 0},generateTypeInfo($,q){let _;if($.precision<=9)_=5;else if($.precision<=19)_=9;else if($.precision<=28)_=13;else _=17;return Buffer.from([tJ$.default.id,_,$.precision,$.scale])},generateParameterLength($,q){if($.value==null)return sJ$;let _=$.precision;if(_<=9)return Buffer.from([5]);else if(_<=19)return Buffer.from([9]);else if(_<=28)return Buffer.from([13]);else return Buffer.from([17])},*generateParameterData($,q){if($.value==null)return;let _=$.value<0?0:1,K=Math.round(Math.abs($.value*Math.pow(10,$.scale))),P=$.precision;if(P<=9){let w=Buffer.alloc(5);w.writeUInt8(_,0),w.writeUInt32LE(K,1),yield w}else if(P<=19){let w=new pY.default(9);w.writeUInt8(_),w.writeUInt64LE(K),yield w.data}else if(P<=28){let w=new pY.default(13);w.writeUInt8(_),w.writeUInt64LE(K),w.writeUInt32LE(0),yield w.data}else{let w=new pY.default(17);w.writeUInt8(_),w.writeUInt64LE(K),w.writeUInt32LE(0),w.writeUInt32LE(0),yield w.data}},validate:function($){if($==null)return null;if($=parseFloat($),isNaN($))throw new TypeError("Invalid number.");return $}},Yn$=Hb.default=vb;Yb.exports=vb});var yY=y((Ab,Wb)=>{Object.defineProperty(Ab,"__esModule",{value:!0});Ab.default=void 0;var Tb={id:108,type:"NUMERICN",name:"NumericN",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},hn$=Ab.default=Tb;Wb.exports=Tb});var Gb=y((pb,yb)=>{Object.defineProperty(pb,"__esModule",{value:!0});pb.default=void 0;var eJ$=Xb(yY()),SY=Xb(k8());function Xb($){return $&&$.__esModule?$:{default:$}}var BJ$=Buffer.from([0]),Db={id:63,type:"NUMERIC",name:"Numeric",declaration:function($){return"numeric("+this.resolvePrecision($)+", "+this.resolveScale($)+")"},resolvePrecision:function($){if($.precision!=null)return $.precision;else if($.value===null)return 1;else return 18},resolveScale:function($){if($.scale!=null)return $.scale;else return 0},generateTypeInfo($){let q;if($.precision<=9)q=5;else if($.precision<=19)q=9;else if($.precision<=28)q=13;else q=17;return Buffer.from([eJ$.default.id,q,$.precision,$.scale])},generateParameterLength($,q){if($.value==null)return BJ$;let _=$.precision;if(_<=9)return Buffer.from([5]);else if(_<=19)return Buffer.from([9]);else if(_<=28)return Buffer.from([13]);else return Buffer.from([17])},*generateParameterData($,q){if($.value==null)return;let _=$.value<0?0:1,K=Math.round(Math.abs($.value*Math.pow(10,$.scale)));if($.precision<=9){let P=Buffer.alloc(5);P.writeUInt8(_,0),P.writeUInt32LE(K,1),yield P}else if($.precision<=19){let P=new SY.default(10);P.writeUInt8(_),P.writeUInt64LE(K),yield P.data}else if($.precision<=28){let P=new SY.default(14);P.writeUInt8(_),P.writeUInt64LE(K),P.writeUInt32LE(0),yield P.data}else{let P=new SY.default(18);P.writeUInt8(_),P.writeUInt64LE(K),P.writeUInt32LE(0),P.writeUInt32LE(0),yield P.data}},validate:function($){if($==null)return null;if($=parseFloat($),isNaN($))throw new TypeError("Invalid number.");return $}},kn$=pb.default=Db;yb.exports=Db});var ub=y((Nb,mb)=>{Object.defineProperty(Nb,"__esModule",{value:!0});Nb.default=void 0;var FJ$=UJ$(B5());function UJ$($){return $&&$.__esModule?$:{default:$}}var QJ$=Buffer.from([4]),$X$=Buffer.from([0]),Zb={id:122,type:"MONEY4",name:"SmallMoney",declaration:function(){return"smallmoney"},generateTypeInfo:function(){return Buffer.from([FJ$.default.id,4])},generateParameterLength($,q){if($.value==null)return $X$;return QJ$},*generateParameterData($,q){if($.value==null)return;let _=Buffer.alloc(4);_.writeInt32LE($.value*1e4,0),yield _},validate:function($){if($==null)return null;if($=parseFloat($),isNaN($))throw new TypeError("Invalid number.");if($<-214748.3648||$>214748.3647)throw new TypeError("Value must be between -214748.3648 and 214748.3647.");return $}},Tn$=Nb.default=Zb;mb.exports=Zb});var db=y((rb,Vb)=>{Object.defineProperty(rb,"__esModule",{value:!0});rb.default=void 0;var qX$=Cb(HP()),_X$=Cb(k8());function Cb($){return $&&$.__esModule?$:{default:$}}var KX$=Buffer.from([8]),PX$=Buffer.from([0]),Rb=9223372036854775807n,Lb=-9223372036854775808n,nb={id:127,type:"INT8",name:"BigInt",declaration:function(){return"bigint"},generateTypeInfo(){return Buffer.from([qX$.default.id,8])},generateParameterLength($,q){if($.value==null)return PX$;return KX$},*generateParameterData($,q){if($.value==null)return;let _=new _X$.default(8);_.writeBigInt64LE(typeof $.value==="bigint"?$.value:globalThis.BigInt($.value)),yield _.data},validate:function($){if($==null)return null;if(typeof $!=="bigint")$=globalThis.BigInt($);if($<Lb||$>Rb)throw new TypeError(`Value must be between ${Lb} and ${Rb}, inclusive.`);return $}},An$=rb.default=nb;Vb.exports=nb});var ab=y((ob,ib)=>{Object.defineProperty(ob,"__esModule",{value:!0});ob.default=void 0;var jX$=Buffer.from([255,255,255,255]),bb={id:34,type:"IMAGE",name:"Image",hasTableName:!0,declaration:function(){return"image"},resolveLength:function($){if($.value!=null)return $.value.length;else return-1},generateTypeInfo($){let q=Buffer.alloc(5);return q.writeUInt8(this.id,0),q.writeInt32LE($.length,1),q},generateParameterLength($,q){if($.value==null)return jX$;let _=Buffer.alloc(4);return _.writeInt32LE($.value.length,0),_},*generateParameterData($,q){if($.value==null)return;yield $.value},validate:function($){if($==null)return null;if(!Buffer.isBuffer($))throw new TypeError("Invalid buffer.");return $}},Wn$=ob.default=bb;ib.exports=bb});var x_=y((Jn$,cb)=>{var Q5=i("buffer"),YP=Q5.Buffer,Kq={},Pq;for(Pq in Q5){if(!Q5.hasOwnProperty(Pq))continue;if(Pq==="SlowBuffer"||Pq==="Buffer")continue;Kq[Pq]=Q5[Pq]}var hP=Kq.Buffer={};for(Pq in YP){if(!YP.hasOwnProperty(Pq))continue;if(Pq==="allocUnsafe"||Pq==="allocUnsafeSlow")continue;hP[Pq]=YP[Pq]}Kq.Buffer.prototype=YP.prototype;if(!hP.from||hP.from===Uint8Array.from)hP.from=function($,q,_){if(typeof $==="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof $);if($&&typeof $.length==="undefined")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);return YP($,q,_)};if(!hP.alloc)hP.alloc=function($,q,_){if(typeof $!=="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof $);if($<0||$>=2147483648)throw new RangeError('The value "'+$+'" is invalid for option "size"');var K=YP($);if(!q||q.length===0)K.fill(0);else if(typeof _==="string")K.fill(q,_);else K.fill(q);return K};if(!Kq.kStringMaxLength)try{Kq.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch($){}if(!Kq.constants){if(Kq.constants={MAX_LENGTH:Kq.kMaxLength},Kq.kStringMaxLength)Kq.constants.MAX_STRING_LENGTH=Kq.kStringMaxLength}cb.exports=Kq});var lb=y((wX$)=>{var Ib="\uFEFF";wX$.PrependBOM=GY;function GY($,q){this.encoder=$,this.addBOM=!0}GY.prototype.write=function($){if(this.addBOM)$=Ib+$,this.addBOM=!1;return this.encoder.write($)};GY.prototype.end=function(){return this.encoder.end()};wX$.StripBOM=ZY;function ZY($,q){this.decoder=$,this.pass=!1,this.options=q||{}}ZY.prototype.write=function($){var q=this.decoder.write($);if(this.pass||!q)return q;if(q[0]===Ib){if(q=q.slice(1),typeof this.options.stripBOM==="function")this.options.stripBOM()}return this.pass=!0,q};ZY.prototype.end=function(){return this.decoder.end()}});var sb=y((Dn$,tb)=>{var A4=x_().Buffer;tb.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:mY};function mY($,q){if(this.enc=$.encodingName,this.bomAware=$.bomAware,this.enc==="base64")this.encoder=RY;else if(this.enc==="cesu8"){if(this.enc="utf8",this.encoder=LY,A4.from("eda0bdedb2a9","hex").toString()!=="\uD83D\uDCA9")this.decoder=CY,this.defaultCharUnicode=q.defaultCharUnicode}}mY.prototype.encoder=uY;mY.prototype.decoder=EY;var NY=i("string_decoder").StringDecoder;if(!NY.prototype.end)NY.prototype.end=function(){};function EY($,q){this.decoder=new NY(q.enc)}EY.prototype.write=function($){if(!A4.isBuffer($))$=A4.from($);return this.decoder.write($)};EY.prototype.end=function(){return this.decoder.end()};function uY($,q){this.enc=q.enc}uY.prototype.write=function($){return A4.from($,this.enc)};uY.prototype.end=function(){};function RY($,q){this.prevStr=""}RY.prototype.write=function($){$=this.prevStr+$;var q=$.length-$.length%4;return this.prevStr=$.slice(q),$=$.slice(0,q),A4.from($,"base64")};RY.prototype.end=function(){return A4.from(this.prevStr,"base64")};function LY($,q){}LY.prototype.write=function($){var q=A4.alloc($.length*3),_=0;for(var K=0;K<$.length;K++){var P=$.charCodeAt(K);if(P<128)q[_++]=P;else if(P<2048)q[_++]=192+(P>>>6),q[_++]=128+(P&63);else q[_++]=224+(P>>>12),q[_++]=128+(P>>>6&63),q[_++]=128+(P&63)}return q.slice(0,_)};LY.prototype.end=function(){};function CY($,q){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=q.defaultCharUnicode}CY.prototype.write=function($){var q=this.acc,_=this.contBytes,K=this.accBytes,P="";for(var w=0;w<$.length;w++){var O=$[w];if((O&192)!==128){if(_>0)P+=this.defaultCharUnicode,_=0;if(O<128)P+=String.fromCharCode(O);else if(O<224)q=O&31,_=1,K=1;else if(O<240)q=O&15,_=2,K=1;else P+=this.defaultCharUnicode}else if(_>0){if(q=q<<6|O&63,_--,K++,_===0)if(K===2&&q<128&&q>0)P+=this.defaultCharUnicode;else if(K===3&&q<2048)P+=this.defaultCharUnicode;else P+=String.fromCharCode(q)}else P+=this.defaultCharUnicode}return this.acc=q,this.contBytes=_,this.accBytes=K,P};CY.prototype.end=function(){var $=0;if(this.contBytes>0)$+=this.defaultCharUnicode;return $}});var Fb=y((fX$)=>{var $9=x_().Buffer;fX$._utf32=nY;function nY($,q){this.iconv=q,this.bomAware=!0,this.isLE=$.isLE}fX$.utf32le={type:"_utf32",isLE:!0};fX$.utf32be={type:"_utf32",isLE:!1};fX$.ucs4le="utf32le";fX$.ucs4be="utf32be";nY.prototype.encoder=rY;nY.prototype.decoder=VY;function rY($,q){this.isLE=q.isLE,this.highSurrogate=0}rY.prototype.write=function($){var q=$9.from($,"ucs2"),_=$9.alloc(q.length*2),K=this.isLE?_.writeUInt32LE:_.writeUInt32BE,P=0;for(var w=0;w<q.length;w+=2){var O=q.readUInt16LE(w),f=55296<=O&&O<56320,Y=56320<=O&&O<57344;if(this.highSurrogate)if(f||!Y)K.call(_,this.highSurrogate,P),P+=4;else{var h=(this.highSurrogate-55296<<10|O-56320)+65536;K.call(_,h,P),P+=4,this.highSurrogate=0;continue}if(f)this.highSurrogate=O;else K.call(_,O,P),P+=4,this.highSurrogate=0}if(P<_.length)_=_.slice(0,P);return _};rY.prototype.end=function(){if(!this.highSurrogate)return;var $=$9.alloc(4);if(this.isLE)$.writeUInt32LE(this.highSurrogate,0);else $.writeUInt32BE(this.highSurrogate,0);return this.highSurrogate=0,$};function VY($,q){this.isLE=q.isLE,this.badChar=q.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}VY.prototype.write=function($){if($.length===0)return"";var q=0,_=0,K=$9.alloc($.length+4),P=0,w=this.isLE,O=this.overflow,f=this.badChar;if(O.length>0){for(;q<$.length&&O.length<4;q++)O.push($[q]);if(O.length===4){if(w)_=O[q]|O[q+1]<<8|O[q+2]<<16|O[q+3]<<24;else _=O[q+3]|O[q+2]<<8|O[q+1]<<16|O[q]<<24;O.length=0,P=eb(K,P,_,f)}}for(;q<$.length-3;q+=4){if(w)_=$[q]|$[q+1]<<8|$[q+2]<<16|$[q+3]<<24;else _=$[q+3]|$[q+2]<<8|$[q+1]<<16|$[q]<<24;P=eb(K,P,_,f)}for(;q<$.length;q++)O.push($[q]);return K.slice(0,P).toString("ucs2")};function eb($,q,_,K){if(_<0||_>1114111)_=K;if(_>=65536){_-=65536;var P=55296|_>>10;$[q++]=P&255,$[q++]=P>>8;var _=56320|_&1023}return $[q++]=_&255,$[q++]=_>>8,q}VY.prototype.end=function(){this.overflow.length=0};fX$.utf32=xY;fX$.ucs4="utf32";function xY($,q){this.iconv=q}xY.prototype.encoder=dY;xY.prototype.decoder=bY;function dY($,q){if($=$||{},$.addBOM===void 0)$.addBOM=!0;this.encoder=q.iconv.getEncoder($.defaultEncoding||"utf-32le",$)}dY.prototype.write=function($){return this.encoder.write($)};dY.prototype.end=function(){return this.encoder.end()};function bY($,q){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=$||{},this.iconv=q.iconv}bY.prototype.write=function($){if(!this.decoder){if(this.initialBufs.push($),this.initialBufsLen+=$.length,this.initialBufsLen<32)return"";var q=Bb(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(q,this.options);var _="";for(var K=0;K<this.initialBufs.length;K++)_+=this.decoder.write(this.initialBufs[K]);return this.initialBufs.length=this.initialBufsLen=0,_}return this.decoder.write($)};bY.prototype.end=function(){if(!this.decoder){var $=Bb(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder($,this.options);var q="";for(var _=0;_<this.initialBufs.length;_++)q+=this.decoder.write(this.initialBufs[_]);var K=this.decoder.end();if(K)q+=K;return this.initialBufs.length=this.initialBufsLen=0,q}return this.decoder.end()};function Bb($,q){var _=[],K=0,P=0,w=0,O=0,f=0;$:for(var Y=0;Y<$.length;Y++){var h=$[Y];for(var k=0;k<h.length;k++)if(_.push(h[k]),_.length===4){if(K===0){if(_[0]===255&&_[1]===254&&_[2]===0&&_[3]===0)return"utf-32le";if(_[0]===0&&_[1]===0&&_[2]===254&&_[3]===255)return"utf-32be"}if(_[0]!==0||_[1]>16)w++;if(_[3]!==0||_[2]>16)P++;if(_[0]===0&&_[1]===0&&(_[2]!==0||_[3]!==0))f++;if((_[0]!==0||_[1]!==0)&&_[2]===0&&_[3]===0)O++;if(_.length=0,K++,K>=100)break $}}if(f-w>O-P)return"utf-32be";if(f-w<O-P)return"utf-32le";return q||"utf-32le"}});var $o=y((AX$)=>{var Ub=x_().Buffer;AX$.utf16be=q9;function q9(){}q9.prototype.encoder=oY;q9.prototype.decoder=iY;q9.prototype.bomAware=!0;function oY(){}oY.prototype.write=function($){var q=Ub.from($,"ucs2");for(var _=0;_<q.length;_+=2){var K=q[_];q[_]=q[_+1],q[_+1]=K}return q};oY.prototype.end=function(){};function iY(){this.overflowByte=-1}iY.prototype.write=function($){if($.length==0)return"";var q=Ub.alloc($.length+1),_=0,K=0;if(this.overflowByte!==-1)q[0]=$[0],q[1]=this.overflowByte,_=1,K=2;for(;_<$.length-1;_+=2,K+=2)q[K]=$[_+1],q[K+1]=$[_];return this.overflowByte=_==$.length-1?$[$.length-1]:-1,q.slice(0,K).toString("ucs2")};iY.prototype.end=function(){this.overflowByte=-1};AX$.utf16=gY;function gY($,q){this.iconv=q}gY.prototype.encoder=aY;gY.prototype.decoder=cY;function aY($,q){if($=$||{},$.addBOM===void 0)$.addBOM=!0;this.encoder=q.iconv.getEncoder("utf-16le",$)}aY.prototype.write=function($){return this.encoder.write($)};aY.prototype.end=function(){return this.encoder.end()};function cY($,q){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=$||{},this.iconv=q.iconv}cY.prototype.write=function($){if(!this.decoder){if(this.initialBufs.push($),this.initialBufsLen+=$.length,this.initialBufsLen<16)return"";var q=Qb(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(q,this.options);var _="";for(var K=0;K<this.initialBufs.length;K++)_+=this.decoder.write(this.initialBufs[K]);return this.initialBufs.length=this.initialBufsLen=0,_}return this.decoder.write($)};cY.prototype.end=function(){if(!this.decoder){var $=Qb(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder($,this.options);var q="";for(var _=0;_<this.initialBufs.length;_++)q+=this.decoder.write(this.initialBufs[_]);var K=this.decoder.end();if(K)q+=K;return this.initialBufs.length=this.initialBufsLen=0,q}return this.decoder.end()};function Qb($,q){var _=[],K=0,P=0,w=0;$:for(var O=0;O<$.length;O++){var f=$[O];for(var Y=0;Y<f.length;Y++)if(_.push(f[Y]),_.length===2){if(K===0){if(_[0]===255&&_[1]===254)return"utf-16le";if(_[0]===254&&_[1]===255)return"utf-16be"}if(_[0]===0&&_[1]!==0)w++;if(_[0]!==0&&_[1]===0)P++;if(_.length=0,K++,K>=100)break $}}if(w>P)return"utf-16be";if(w<P)return"utf-16le";return q||"utf-16le"}});var _o=y((yX$)=>{var O_=x_().Buffer;yX$.utf7=_9;yX$.unicode11utf7="utf7";function _9($,q){this.iconv=q}_9.prototype.encoder=lY;_9.prototype.decoder=tY;_9.prototype.bomAware=!0;var XX$=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function lY($,q){this.iconv=q.iconv}lY.prototype.write=function($){return O_.from($.replace(XX$,function(q){return"+"+(q==="+"?"":this.iconv.encode(q,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))};lY.prototype.end=function(){};function tY($,q){this.iconv=q.iconv,this.inBase64=!1,this.base64Accum=""}var DX$=/[A-Za-z0-9\/+]/,sY=[];for(e3=0;e3<256;e3++)sY[e3]=DX$.test(String.fromCharCode(e3));var e3,pX$=43,W4=45,IY=38;tY.prototype.write=function($){var q="",_=0,K=this.inBase64,P=this.base64Accum;for(var w=0;w<$.length;w++)if(!K){if($[w]==pX$)q+=this.iconv.decode($.slice(_,w),"ascii"),_=w+1,K=!0}else if(!sY[$[w]]){if(w==_&&$[w]==W4)q+="+";else{var O=P+this.iconv.decode($.slice(_,w),"ascii");q+=this.iconv.decode(O_.from(O,"base64"),"utf16-be")}if($[w]!=W4)w--;_=w+1,K=!1,P=""}if(!K)q+=this.iconv.decode($.slice(_),"ascii");else{var O=P+this.iconv.decode($.slice(_),"ascii"),f=O.length-O.length%8;P=O.slice(f),O=O.slice(0,f),q+=this.iconv.decode(O_.from(O,"base64"),"utf16-be")}return this.inBase64=K,this.base64Accum=P,q};tY.prototype.end=function(){var $="";if(this.inBase64&&this.base64Accum.length>0)$=this.iconv.decode(O_.from(this.base64Accum,"base64"),"utf16-be");return this.inBase64=!1,this.base64Accum="",$};yX$.utf7imap=K9;function K9($,q){this.iconv=q}K9.prototype.encoder=eY;K9.prototype.decoder=BY;K9.prototype.bomAware=!0;function eY($,q){this.iconv=q.iconv,this.inBase64=!1,this.base64Accum=O_.alloc(6),this.base64AccumIdx=0}eY.prototype.write=function($){var q=this.inBase64,_=this.base64Accum,K=this.base64AccumIdx,P=O_.alloc($.length*5+10),w=0;for(var O=0;O<$.length;O++){var f=$.charCodeAt(O);if(32<=f&&f<=126){if(q){if(K>0)w+=P.write(_.slice(0,K).toString("base64").replace(/\//g,",").replace(/=+$/,""),w),K=0;P[w++]=W4,q=!1}if(!q){if(P[w++]=f,f===IY)P[w++]=W4}}else{if(!q)P[w++]=IY,q=!0;if(q){if(_[K++]=f>>8,_[K++]=f&255,K==_.length)w+=P.write(_.toString("base64").replace(/\//g,","),w),K=0}}}return this.inBase64=q,this.base64AccumIdx=K,P.slice(0,w)};eY.prototype.end=function(){var $=O_.alloc(10),q=0;if(this.inBase64){if(this.base64AccumIdx>0)q+=$.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),q),this.base64AccumIdx=0;$[q++]=W4,this.inBase64=!1}return $.slice(0,q)};function BY($,q){this.iconv=q.iconv,this.inBase64=!1,this.base64Accum=""}var qo=sY.slice();qo[44]=!0;BY.prototype.write=function($){var q="",_=0,K=this.inBase64,P=this.base64Accum;for(var w=0;w<$.length;w++)if(!K){if($[w]==IY)q+=this.iconv.decode($.slice(_,w),"ascii"),_=w+1,K=!0}else if(!qo[$[w]]){if(w==_&&$[w]==W4)q+="&";else{var O=P+this.iconv.decode($.slice(_,w),"ascii").replace(/,/g,"/");q+=this.iconv.decode(O_.from(O,"base64"),"utf16-be")}if($[w]!=W4)w--;_=w+1,K=!1,P=""}if(!K)q+=this.iconv.decode($.slice(_),"ascii");else{var O=P+this.iconv.decode($.slice(_),"ascii").replace(/,/g,"/"),f=O.length-O.length%8;P=O.slice(f),O=O.slice(0,f),q+=this.iconv.decode(O_.from(O,"base64"),"utf16-be")}return this.inBase64=K,this.base64Accum=P,q};BY.prototype.end=function(){var $="";if(this.inBase64&&this.base64Accum.length>0)$=this.iconv.decode(O_.from(this.base64Accum,"base64"),"utf16-be");return this.inBase64=!1,this.base64Accum="",$}});var Ko=y((NX$)=>{var P9=x_().Buffer;NX$._sbcs=FY;function FY($,q){if(!$)throw new Error("SBCS codec is called without the data.");if(!$.chars||$.chars.length!==128&&$.chars.length!==256)throw new Error("Encoding '"+$.type+"' has incorrect 'chars' (must be of len 128 or 256)");if($.chars.length===128){var _="";for(var K=0;K<128;K++)_+=String.fromCharCode(K);$.chars=_+$.chars}this.decodeBuf=P9.from($.chars,"ucs2");var P=P9.alloc(65536,q.defaultCharSingleByte.charCodeAt(0));for(var K=0;K<$.chars.length;K++)P[$.chars.charCodeAt(K)]=K;this.encodeBuf=P}FY.prototype.encoder=UY;FY.prototype.decoder=QY;function UY($,q){this.encodeBuf=q.encodeBuf}UY.prototype.write=function($){var q=P9.alloc($.length);for(var _=0;_<$.length;_++)q[_]=this.encodeBuf[$.charCodeAt(_)];return q};UY.prototype.end=function(){};function QY($,q){this.decodeBuf=q.decodeBuf}QY.prototype.write=function($){var q=this.decodeBuf,_=P9.alloc($.length*2),K=0,P=0;for(var w=0;w<$.length;w++)K=$[w]*2,P=w*2,_[P]=q[K],_[P+1]=q[K+1];return _.toString("ucs2")};QY.prototype.end=function(){}});var jo=y((Zn$,Po)=>{Po.exports={"10029":"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},"808":"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620","10000":"macroman","10006":"macgreek","10007":"maccyrillic","10079":"maciceland","10081":"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r","20866":"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u","21866":"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}});var Oo=y((Nn$,wo)=>{wo.exports={"437":"cp437","737":"cp737","775":"cp775","850":"cp850","852":"cp852","855":"cp855","856":"cp856","857":"cp857","858":"cp858","860":"cp860","861":"cp861","862":"cp862","863":"cp863","864":"cp864","865":"cp865","866":"cp866","869":"cp869","874":"windows874","922":"cp922","1046":"cp1046","1124":"cp1124","1125":"cp1125","1129":"cp1129","1133":"cp1133","1161":"cp1161","1162":"cp1162","1163":"cp1163","1250":"windows1250","1251":"windows1251","1252":"windows1252","1253":"windows1253","1254":"windows1254","1255":"windows1255","1256":"windows1256","1257":"windows1257","1258":"windows1258","28591":"iso88591","28592":"iso88592","28593":"iso88593","28594":"iso88594","28595":"iso88595","28596":"iso88596","28597":"iso88597","28598":"iso88598","28599":"iso88599","28600":"iso885910","28601":"iso885911","28603":"iso885913","28604":"iso885914","28605":"iso885915","28606":"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\x00\x01\x02\x03\x04\x05\x06\x07\b	
\v\f\r\x0E\x0F\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1A\x1B\x1C\x1D\x1E\x1F !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\x00\x03\x07\b	
\v\f\r\x0E\x0F\x10\x18\x19\x1A\x1B\x1C\x1D\x1E\x1F !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\x00\x01\x03\x04\x07\b	
\v\f\r\x0E\x0F\x10\x11\x12\x13\x15\x16\x17\x18\x1A\x1B\x1C\x1D\x1F !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\x00\x01\x02\x03\x04\x05\x06\x07\b	
\v\f\r\x0E\x0F\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1A\x1B\x1C\x1D\x1E\x1F !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\x00\x01\x02\x03\x04\x05\x06\x07\b	
\v\f\r\x0E\x0F\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1A\x1B\x1C\x1D\x1E\x1F !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}});var fo=y((EX$)=>{var $h=x_().Buffer;EX$._dbcs=d_;var b6=-1,zo=-2,jq=-10,H8=-1000,kP=new Array(256),B3=-1;for(j9=0;j9<256;j9++)kP[j9]=b6;var j9;function d_($,q){if(this.encodingName=$.encodingName,!$)throw new Error("DBCS codec is called without the data.");if(!$.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var _=$.table();this.decodeTables=[],this.decodeTables[0]=kP.slice(0),this.decodeTableSeq=[];for(var K=0;K<_.length;K++)this._addDecodeChunk(_[K]);if(typeof $.gb18030==="function"){this.gb18030=$.gb18030();var P=this.decodeTables.length;this.decodeTables.push(kP.slice(0));var w=this.decodeTables.length;this.decodeTables.push(kP.slice(0));var O=this.decodeTables[0];for(var K=129;K<=254;K++){var f=this.decodeTables[H8-O[K]];for(var Y=48;Y<=57;Y++){if(f[Y]===b6)f[Y]=H8-P;else if(f[Y]>H8)throw new Error("gb18030 decode tables conflict at byte 2");var h=this.decodeTables[H8-f[Y]];for(var k=129;k<=254;k++){if(h[k]===b6)h[k]=H8-w;else if(h[k]===H8-w)continue;else if(h[k]>H8)throw new Error("gb18030 decode tables conflict at byte 3");var T=this.decodeTables[H8-h[k]];for(var p=48;p<=57;p++)if(T[p]===b6)T[p]=zo}}}}this.defaultCharUnicode=q.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var G={};if($.encodeSkipVals)for(var K=0;K<$.encodeSkipVals.length;K++){var Z=$.encodeSkipVals[K];if(typeof Z==="number")G[Z]=!0;else for(var Y=Z.from;Y<=Z.to;Y++)G[Y]=!0}if(this._fillEncodeTable(0,0,G),$.encodeAdd){for(var X in $.encodeAdd)if(Object.prototype.hasOwnProperty.call($.encodeAdd,X))this._setEncodeChar(X.charCodeAt(0),$.encodeAdd[X])}if(this.defCharSB=this.encodeTable[0][q.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===b6)this.defCharSB=this.encodeTable[0]["?"];if(this.defCharSB===b6)this.defCharSB=63}d_.prototype.encoder=w9;d_.prototype.decoder=qh;d_.prototype._getDecodeTrieNode=function($){var q=[];for(;$>0;$>>>=8)q.push($&255);if(q.length==0)q.push(0);var _=this.decodeTables[0];for(var K=q.length-1;K>0;K--){var P=_[q[K]];if(P==b6)_[q[K]]=H8-this.decodeTables.length,this.decodeTables.push(_=kP.slice(0));else if(P<=H8)_=this.decodeTables[H8-P];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+$.toString(16))}return _};d_.prototype._addDecodeChunk=function($){var q=parseInt($[0],16),_=this._getDecodeTrieNode(q);q=q&255;for(var K=1;K<$.length;K++){var P=$[K];if(typeof P==="string")for(var w=0;w<P.length;){var O=P.charCodeAt(w++);if(55296<=O&&O<56320){var f=P.charCodeAt(w++);if(56320<=f&&f<57344)_[q++]=65536+(O-55296)*1024+(f-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+$[0])}else if(4080<O&&O<=4095){var Y=4095-O+2,h=[];for(var k=0;k<Y;k++)h.push(P.charCodeAt(w++));_[q++]=jq-this.decodeTableSeq.length,this.decodeTableSeq.push(h)}else _[q++]=O}else if(typeof P==="number"){var T=_[q-1]+1;for(var w=0;w<P;w++)_[q++]=T++}else throw new Error("Incorrect type '"+typeof P+"' given in "+this.encodingName+" at chunk "+$[0])}if(q>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+$[0]+": too long"+q)};d_.prototype._getEncodeBucket=function($){var q=$>>8;if(this.encodeTable[q]===void 0)this.encodeTable[q]=kP.slice(0);return this.encodeTable[q]};d_.prototype._setEncodeChar=function($,q){var _=this._getEncodeBucket($),K=$&255;if(_[K]<=jq)this.encodeTableSeq[jq-_[K]][B3]=q;else if(_[K]==b6)_[K]=q};d_.prototype._setEncodeSequence=function($,q){var _=$[0],K=this._getEncodeBucket(_),P=_&255,w;if(K[P]<=jq)w=this.encodeTableSeq[jq-K[P]];else{if(w={},K[P]!==b6)w[B3]=K[P];K[P]=jq-this.encodeTableSeq.length,this.encodeTableSeq.push(w)}for(var O=1;O<$.length-1;O++){var f=w[_];if(typeof f==="object")w=f;else if(w=w[_]={},f!==void 0)w[B3]=f}_=$[$.length-1],w[_]=q};d_.prototype._fillEncodeTable=function($,q,_){var K=this.decodeTables[$],P=!1,w={};for(var O=0;O<256;O++){var f=K[O],Y=q+O;if(_[Y])continue;if(f>=0)this._setEncodeChar(f,Y),P=!0;else if(f<=H8){var h=H8-f;if(!w[h]){var k=Y<<8>>>0;if(this._fillEncodeTable(h,k,_))P=!0;else w[h]=!0}}else if(f<=jq)this._setEncodeSequence(this.decodeTableSeq[jq-f],Y),P=!0}return P};function w9($,q){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=q.encodeTable,this.encodeTableSeq=q.encodeTableSeq,this.defaultCharSingleByte=q.defCharSB,this.gb18030=q.gb18030}w9.prototype.write=function($){var q=$h.alloc($.length*(this.gb18030?4:3)),_=this.leadSurrogate,K=this.seqObj,P=-1,w=0,O=0;while(!0){if(P===-1){if(w==$.length)break;var f=$.charCodeAt(w++)}else{var f=P;P=-1}if(55296<=f&&f<57344)if(f<56320)if(_===-1){_=f;continue}else _=f,f=b6;else if(_!==-1)f=65536+(_-55296)*1024+(f-56320),_=-1;else f=b6;else if(_!==-1)P=f,f=b6,_=-1;var Y=b6;if(K!==void 0&&f!=b6){var h=K[f];if(typeof h==="object"){K=h;continue}else if(typeof h=="number")Y=h;else if(h==null){if(h=K[B3],h!==void 0)Y=h,P=f}K=void 0}else if(f>=0){var k=this.encodeTable[f>>8];if(k!==void 0)Y=k[f&255];if(Y<=jq){K=this.encodeTableSeq[jq-Y];continue}if(Y==b6&&this.gb18030){var T=_h(this.gb18030.uChars,f);if(T!=-1){var Y=this.gb18030.gbChars[T]+(f-this.gb18030.uChars[T]);q[O++]=129+Math.floor(Y/12600),Y=Y%12600,q[O++]=48+Math.floor(Y/1260),Y=Y%1260,q[O++]=129+Math.floor(Y/10),Y=Y%10,q[O++]=48+Y;continue}}}if(Y===b6)Y=this.defaultCharSingleByte;if(Y<256)q[O++]=Y;else if(Y<65536)q[O++]=Y>>8,q[O++]=Y&255;else if(Y<16777216)q[O++]=Y>>16,q[O++]=Y>>8&255,q[O++]=Y&255;else q[O++]=Y>>>24,q[O++]=Y>>>16&255,q[O++]=Y>>>8&255,q[O++]=Y&255}return this.seqObj=K,this.leadSurrogate=_,q.slice(0,O)};w9.prototype.end=function(){if(this.leadSurrogate===-1&&this.seqObj===void 0)return;var $=$h.alloc(10),q=0;if(this.seqObj){var _=this.seqObj[B3];if(_!==void 0)if(_<256)$[q++]=_;else $[q++]=_>>8,$[q++]=_&255;this.seqObj=void 0}if(this.leadSurrogate!==-1)$[q++]=this.defaultCharSingleByte,this.leadSurrogate=-1;return $.slice(0,q)};w9.prototype.findIdx=_h;function qh($,q){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=q.decodeTables,this.decodeTableSeq=q.decodeTableSeq,this.defaultCharUnicode=q.defaultCharUnicode,this.gb18030=q.gb18030}qh.prototype.write=function($){var q=$h.alloc($.length*2),_=this.nodeIdx,K=this.prevBytes,P=this.prevBytes.length,w=-this.prevBytes.length,O;for(var f=0,Y=0;f<$.length;f++){var h=f>=0?$[f]:K[f+P],O=this.decodeTables[_][h];if(O>=0);else if(O===b6)O=this.defaultCharUnicode.charCodeAt(0),f=w;else if(O===zo){if(f>=3)var k=($[f-3]-129)*12600+($[f-2]-48)*1260+($[f-1]-129)*10+(h-48);else var k=(K[f-3+P]-129)*12600+((f-2>=0?$[f-2]:K[f-2+P])-48)*1260+((f-1>=0?$[f-1]:K[f-1+P])-129)*10+(h-48);var T=_h(this.gb18030.gbChars,k);O=this.gb18030.uChars[T]+k-this.gb18030.gbChars[T]}else if(O<=H8){_=H8-O;continue}else if(O<=jq){var p=this.decodeTableSeq[jq-O];for(var G=0;G<p.length-1;G++)O=p[G],q[Y++]=O&255,q[Y++]=O>>8;O=p[p.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+O+" at "+_+"/"+h);if(O>=65536){O-=65536;var Z=55296|O>>10;q[Y++]=Z&255,q[Y++]=Z>>8,O=56320|O&1023}q[Y++]=O&255,q[Y++]=O>>8,_=0,w=f+1}return this.nodeIdx=_,this.prevBytes=w>=0?Array.prototype.slice.call($,w):K.slice(w+P).concat(Array.prototype.slice.call($)),q.slice(0,Y).toString("ucs2")};qh.prototype.end=function(){var $="";while(this.prevBytes.length>0){$+=this.defaultCharUnicode;var q=this.prevBytes.slice(1);if(this.prevBytes=[],this.nodeIdx=0,q.length>0)$+=this.write(q)}return this.prevBytes=[],this.nodeIdx=0,$};function _h($,q){if($[0]>q)return-1;var _=0,K=$.length;while(_<K-1){var P=_+(K-_+1>>1);if($[P]<=q)_=P;else K=P}return _}});var Mo=y((En$,RX$)=>{RX$.exports=[["0","\x00",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]});var vo=y((un$,LX$)=>{LX$.exports=[["0","\x00",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]});var O9=y((Rn$,CX$)=>{CX$.exports=[["0","\x00",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]});var Kh=y((Ln$,nX$)=>{nX$.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]]});var Ho=y((Cn$,rX$)=>{rX$.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}});var Yo=y((nn$,VX$)=>{VX$.exports=[["0","\x00",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]});var Ph=y((rn$,xX$)=>{xX$.exports=[["0","\x00",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]});var ho=y((Vn$,dX$)=>{dX$.exports=[["8740","\uD85C\uDE67\uD85F\uDCB1\uD85F\uDCC5\uD850\uDEBF\uD84D\uDE17\uD85C\uDF52\uD85B\uDE8B\uD85C\uDCD2\uD868\uDF51\uD85F\uDC6C\uD85A\uDF23\uD856\uDE54\uD846\uDE63\uD84F\uDE06\uD84F\uDF61"],["8767","\uD862\uDFB9\uD85E\uDFEF\uD847\uDD5E\uD867\uDEB0\uD866\uDD45\uD847\uDD53\uD84D\uDE9E\uD858\uDC21"],["87a1","\uD856\uDCDE\uD850\uDD61\uD862\uDD0D\uD84C\uDDEA\uD842\uDE8A\uD84C\uDE5E\uD857\uDDB9\uD84D\uDE8E\uD85E\uDF65\uD85B\uDE88\uD857\uDD99\uD849\uDCBC\uD849\uDCC1\uD849\uDCC9\uD849\uDCCC\uD84D\uDDBB\uD86B\uDDFF"],["8840","",4,"\uD840\uDD0C\uD840\uDCD1\uD840\uDCCD\uD840\uDCCB\uD847\uDFE8\uD840\uDCCA\uD840\uDD0E"],["88a1",""],["8940","\uD868\uDFA9\uD844\uDD45"],["8943",""],["8946",""],["894c","\uD85D\uDF35"],["89a1",""],["89ab",""],["89b0","\uD842\uDDE7"],["89b5","\uD867\uDDF6\uD85C\uDC0E\uD868\uDD33"],["89c1",""],["89c5","\uD861\uDC6C\uD847\uDDCA\uD841\uDDD0\uD84A\uDEE6"],["8a40","\uD85F\uDD84"],["8a43","\uD843\uDC42\uD843\uDD15\uD854\uDD2B\uD84B\uDCC6\uD840\uDF41\uD853\uDDB8\uD865\uDCE5\uD860\uDCBE\uD84B\uDC38\uD860\uDD5D\uD85A\uDDF2\uD853\uDDEA\uD843\uDD7C\uD843\uDFB4\uD843\uDCD5\uD844\uDCF4\uD843\uDE96\uD843\uDC0B\uD843\uDF64\uD84B\uDCA9\uD860\uDE56\uD851\uDCD3"],["8a64","\uD843\uDD46\uD866\uDE4D\uD860\uDCE9\uD853\uDEA7\uD84B\uDCC2\uD865\uDDF4\uD854\uDEC7\uD865\uDFD4\uD85E\uDCC8\uD84B\uDD44"],["8a76","\uD858\uDCA5\uD84B\uDD4C\uD84A\uDFCA\uD844\uDC77\uD844\uDC6F"],["8aa1","\uD859\uDEDA\uD859\uDF16\uD85E\uDDA0\uD854\uDC52\uD843\uDC43\uD848\uDDA1\uD862\uDF4C\uD841\uDF31"],["8aac","\uD840\uDDA9\uD84B\uDD8D"],["8ab2","\uD851\uDDC8\uD841\uDCFC\uD858\uDC97\uD843\uDF4C\uD843\uDD96"],["8abb","\uD84A\uDE66\uD844\uDC9D\uD843\uDD9C\uD849\uDF75"],["8ac9","\uD869\uDE01\uD843\uDE09\uD84A\uDECF\uD84B\uDCC9"],["8ace","\uD844\uDCC8\uD84E\uDDC2\uD860\uDE9B\uD857\uDE49\uD848\uDCC7\uD843\uDF31\uD84B\uDCB2\uD865\uDF20\uD853\uDE3B"],["8adf","\uD85D\uDD74\uD84B\uDE8B\uD848\uDE08\uD869\uDE5B\uD863\uDCCD\uD843\uDE7A\uD843\uDC34\uD85A\uDC1C\uD844\uDCCF\uD84A\uDC03\uD84A\uDD39\uD854\uDDE3\uD843\uDE8C\uD843\uDF8D\uD843\uDEAA\uD843\uDF30\uD843\uDD47\uD844\uDD4F\uD843\uDE4C"],["8af6","\uD843\uDEAB\uD842\uDFA9\uD843\uDD48\uD844\uDCC0\uD844\uDD3D\uD849\uDE96\uD843\uDFAD"],["8b40","\uD84C\uDFF4\uD85D\uDE39\uD84A\uDFCE\uD843\uDD7E\uD843\uDD7F\uD84B\uDC51\uD84B\uDC55\uD843\uDE98\uD844\uDCC7\uD843\uDF2E\uD869\uDE32\uD85A\uDF50\uD863\uDCD2\uD863\uDD99\uD863\uDCCA"],["8b55","\uD867\uDEC3\uD85D\uDF5E\uD84B\uDDEE\uD859\uDD72\uD860\uDCBD\uD843\uDEFA\uD843\uDE0F\uD843\uDE77\uD843\uDEFB\uD853\uDDEB\uD843\uDCD6\uD849\uDFB5\uD844\uDCC9\uD843\uDE10\uD843\uDE78\uD844\uDC78\uD844\uDD48\uD860\uDE07\uD845\uDC55\uD843\uDE79\uD853\uDE50\uD84B\uDDA4\uD844\uDC1D\uD844\uDC1E\uD844\uDCF5\uD844\uDCF6\uD843\uDE11"],["8ba1","\uD85D\uDE94\uD860\uDECD\uD843\uDFB5\uD843\uDE7B\uD854\uDD7E\uD843\uDFB6\uD844\uDD80\uD854\uDED8\uD868\uDEBD\uD852\uDDDA\uD846\uDC3A\uD850\uDD77\uD860\uDE7C\uD855\uDF3D\uD856\uDF74\uD84C\uDD3D\uD846\uDFC1\uD87E\uDC78\uD840\uDC86\uD852\uDCE9\uD858\uDE6A"],["8bde","\uD858\uDF4B\uD859\uDE12\uD85A\uDD51\uD85E\uDCB2\uD863\uDE0F\uD866\uDC10\uD840\uDC87"],["8c40","\uD867\uDC73\uD850\uDD4E\uD854\uDDCD\uD857\uDD30\uD862\uDE32\uD84C\uDE81\uD868\uDD07\uD846\uDD80\uD861\uDF0F\uD868\uDEBA\uD842\uDE6F\uD866\uDD47\uD862\uDEEA\uD848\uDC7E\uD862\uDDE3\uD847\uDDB6\uD849\uDF12"],["8ca1","\uD84C\uDFF9\uD84F\uDC63"],["8ca7","\uD851\uDD05\uD852\uDE13\uD857\uDCA4\uD855\uDE95\uD863\uDDB9\uD845\uDC3F"],["8cc9",""],["8cce","\uD852\uDD7B\uD85C\uDD0D\uD85B\uDD74\uD85A\uDF15\uD85B\uDFBE\uD84C\uDE56\uD849\uDF96"],["8ce6","\uD84E\uDF1A\uD84D\uDD51\uD850\uDCEC\uD847\uDE23\uD840\uDDA4\uD85B\uDC41\uD840\uDE39\uD866\uDCFA"],["8d40","\uD842\uDF9F"],["8d42","\uD848\uDDC1\uD862\uDD6D\uD864\uDC79\uD868\uDDB5\uD85B\uDC46\uD861\uDEB2\uD85C\uDFFF\uD855\uDC9A\uD852\uDF0F"],["8da1","\uD862\uDDC0\uD84F\uDF41\uD840\uDF25\uD843\uDED8"],["8e40","\uD84F\uDED7\uD85B\uDED3\uD855\uDFE0\uD862\uDFE9\uD856\uDCE1\uD865\uDCD9\uD856\uDDAC\uD859\uDC8D\uD857\uDC01\uD854\uDF0E\uD857\uDCFE\uD856\uDFB4\uD85B\uDC7F\uD857\uDD20\uD857\uDC65\uD857\uDCC1\uD852\uDC82\uD851\uDD78"],["8ea1","\uD85B\uDE44\uD85B\uDED6\uD850\uDC57\uD858\uDC29\uD845\uDFF9\uD860\uDF6D\uD858\uDD21\uD858\uDD5A\uD858\uDED0\uD858\uDF51\uD845\uDE61\uD840\uDC68\uD84D\uDF66\uD860\uDF3A\uD859\uDC89\uD868\uDC87\uD85B\uDCC3\uD849\uDF14\uD859\uDE26\uD84F\uDDE3\uD859\uDEE8\uD862\uDE48\uD849\uDEF6\uD859\uDC98\uD853\uDFB8\uD845\uDC8A\uD846\uDC5E\uD852\uDE65\uD852\uDE95\uD842\uDF0D\uD85A\uDE52\uD84F\uDD7E\uD845\uDCFD\uD85A\uDF0A\uD852\uDDA7\uD84D\uDD30\uD845\uDF73\uD84F\uDDF8\uD87E\uDD94"],["8f40","\uD843\uDE16\uD845\uDFB4\uD84C\uDD7D\uD84D\uDD5A\uD84F\uDE8B\uD85B\uDDA3\uD85A\uDF05\uD85A\uDF97\uD84D\uDDCE\uD85B\uDDA5\uD85B\uDED4\uD85B\uDE42\uD84B\uDEEF\uD856\uDFE4\uD84F\uDCB5\uD85A\uDF96\uD85B\uDE77\uD85B\uDE43\uD857\uDC91\uD857\uDCC0\uD85B\uDE99"],["8fa1","\uD861\uDE25\uD861\uDE3B\uD85C\uDC88\uD845\uDD82\uD85C\uDCCD\uD87E\uDDB2\uD846\uDCA2\uD85C\uDF9A\uD868\uDCF8\uD84B\uDC27\uD85D\uDDE0\uD84F\uDDB9\uD85D\uDDE4\uD85D\uDF0F\uD862\uDE25\uD85E\uDD24\uD85E\uDEBD\uD85E\uDE59\uD85E\uDF3A\uD84F\uDF8F\uD85E\uDF38\uD855\uDC30\uD855\uDD65\uD852\uDE7A\uD845\uDEDF\uD85F\uDD54\uD85F\uDD8F\uD87E\uDDD4\uD85F\uDD53\uD85F\uDD98\uD85F\uDDBD\uD846\uDD10\uD853\uDCC9"],["9040","\uD860\uDC02\uD844\uDC14\uD852\uDD8A\uD860\uDDBC\uD85C\uDD0C\uD860\uDF65\uD861\uDC12\uD868\uDE9F\uD842\uDE50\uD862\uDDDE\uD861\uDD3D\uD84F\uDDBB\uD84C\uDE62\uD868\uDC14\uD861\uDEBC\uD861\uDD01\uD848\uDF25\uD85B\uDED7\uD861\uDD3C\uD85E\uDEBE\uD861\uDD6C\uD861\uDE0B\uD861\uDF13\uD861\uDEE6\uD862\uDD33\uD847\uDE89\uD855\uDDB9\uD862\uDEC6\uD84F\uDC9B\uD862\uDF0C\uD855\uDDDB"],["90a1","\uD843\uDD31\uD862\uDEE1\uD862\uDFEB\uD862\uDEE2\uD862\uDEE5\uD862\uDFEC\uD863\uDC39\uD862\uDFFF\uD849\uDE7A\uD861\uDED8\uD844\uDE7C\uD84F\uDE2E\uD85B\uDED5\uD862\uDEE0\uD85B\uDCB8\uD840\uDE74\uD859\uDC10\uD864\uDCAF\uD864\uDCE5\uD852\uDED1\uD846\uDD15\uD84C\uDF0A\uD852\uDEE9\uD864\uDDD5\uD864\uDDEB\uD84C\uDCB7\uD84C\uDCBC\uD855\uDC6C\uD865\uDC33\uD865\uDC1D\uD85E\uDD7A\uD85C\uDD75\uD841\uDE30\uD850\uDD5C"],["9140","\uD855\uDF06\uD85B\uDD27\uD845\uDED3\uD852\uDE29\uD866\uDC57\uD866\uDD05\uD855\uDF25\uD864\uDCB1\uD866\uDFD5\uD866\uDF05\uD861\uDE00\uD85A\uDDA8\uD84C\uDC7D\uD867\uDD3E\uD846\uDC63\uD850\uDE4B\uD867\uDE68\uD867\uDFB7\uD868\uDD92\uD868\uDDAB\uD868\uDCE1\uD868\uDD23\uD868\uDDDF\uD868\uDD34"],["91a1","\uD848\uDD5B\uD868\uDD93\uD868\uDE20\uD846\uDD3B\uD868\uDE33\uD868\uDCB9\uD868\uDEB4\uD850\uDF64\uD863\uDC2B\uD85B\uDDA2\uD864\uDC8B\uD852\uDD75\uD852\uDDBB\uD852\uDDF8\uD850\uDF48\uD852\uDE51\uD862\uDFDA\uD846\uDCFA\uD862\uDD7E\uD863\uDE36\uD862\uDE44\uD862\uDD6C\uD851\uDCB9\uD851\uDC73\uD850\uDFF8\uD845\uDFEF\uD846\uDCBE\uD84D\uDD99\uD846\uDC85\uD855\uDC2F\uD845\uDFF8\uD845\uDEFB\uD846\uDC39\uD845\uDF74\uD846\uDCD1\uD857\uDF4B\uD845\uDEC0\uD852\uDE25\uD844\uDFFE\uD844\uDEA8"],["9240","\uD844\uDFC6\uD845\uDCB6\uD84D\uDEA6\uD852\uDD94\uD85C\uDD65\uD84F\uDE31\uD855\uDD5C\uD84F\uDEFB\uD85C\uDC52\uD84D\uDEEE\uD866\uDD9D\uD85B\uDF26\uD846\uDD22\uD84D\uDF3F\uD850\uDCE1\uD850\uDC8B\uD850\uDD0F\uD85B\uDC21\uD859\uDEB1\uD843\uDFDF\uD842\uDFA8\uD843\uDE0D\uD862\uDF13\uD851\uDC36\uD841\uDC65\uD840\uDF7F\uD855\uDE51\uD840\uDDAB\uD840\uDFCB\uD840\uDF0A\uD841\uDC14\uD840\uDEC0\uD863\uDEB3\uD840\uDE75\uD840\uDE0C"],["92a1","\uD852\uDE0E\uD84F\uDE8A\uD84D\uDD95\uD84F\uDE39\uD84F\uDEBF\uD846\uDC84\uD84F\uDE89\uD841\uDDE0\uD841\uDCA3\uD841\uDC92\uD841\uDC91\uD862\uDE9C\uD841\uDF0E\uD842\uDC73\uD850\uDF8C\uD843\uDC20\uD852\uDDAC\uD844\uDCE4\uD843\uDE1D\uD852\uDEBC\uD850\uDC8D\uD850\uDCC9\uD840\uDF45\uD842\uDFC6\uD862\uDE46\uD845\uDEFA\uD845\uDF6F\uD845\uDF10\uD856\uDD46\uD846\uDDF3\uD846\uDC61\uD850\uDE95\uD857\uDE83"],["9340","\uD862\uDFD7\uD841\uDC13\uD844\uDF03\uD862\uDDFB\uD846\uDD96\uD846\uDD7C\uD84E\uDEEE\uD846\uDD03\uD846\uDD04\uD846\uDCA0\uD845\uDEFE\uD862\uDE47\uD847\uDDBA\uD84D\uDC72\uD862\uDDA8\uD846\uDD27\uD845\uDFAB\uD845\uDF3B\uD85D\uDDFD\uD84A\uDC60\uD849\uDE2B\uD849\uDDAF\uD849\uDDBE\uD864\uDC88\uD85B\uDF73\uD840\uDC3E\uD840\uDC46\uD849\uDE1B\uD84B\uDC9B\uD84B\uDD07\uD851\uDED4\uD864\uDD4D"],["93a1","\uD851\uDE65\uD84A\uDF6A\uD84A\uDF22\uD84D\uDC50\uD866\uDCEA\uD84B\uDE78\uD869\uDC5B\uD852\uDDE3\uD84B\uDD67\uD84B\uDCA1\uD84C\uDC8E\uD84C\uDEAD\uD852\uDD89\uD84C\uDEAB\uD84C\uDEE0\uD846\uDCD9\uD865\uDC3F\uD84C\uDE89\uD84C\uDDB3\uD855\uDD84\uD862\uDF22\uD855\uDD8F\uD845\uDEFC\uD855\uDD5B\uD855\uDC25\uD84C\uDD03\uD846\uDC2A\uD84C\uDE34\uD84C\uDE0F\uD84C\uDD82\uD850\uDEC9\uD85B\uDD24\uD85E\uDC70\uD847\uDDEB\uD84C\uDED2\uD84C\uDEE1\uD856\uDC72\uD84E\uDC3A\uD84D\uDFBC\uD84D\uDFA2\uD84C\uDFFE\uD851\uDE2A\uD84D\uDFD5\uD851\uDC87\uD846\uDD12\uD84F\uDFC0\uD84F\uDC9A\uD862\uDFEA\uD862\uDECB"],["9440","\uD860\uDC1E\uD862\uDDDC\uD852\uDDEC\uD84F\uDF7F\uD850\uDC3C\uD850\uDF1A\uD850\uDE76\uD851\uDF8F\uD851\uDF25\uD852\uDEA4\uD841\uDDEB\uD84F\uDEF8\uD84D\uDE5F\uD852\uDE4A\uD852\uDD17\uD857\uDFE1\uD852\uDEDF\uD863\uDC23\uD84F\uDF35\uD85B\uDDEA\uD853\uDCD9\uD853\uDD06\uD869\uDDC6\uD862\uDECC\uD852\uDDAB\uD852\uDD8E"],["94a1","\uD852\uDE4E\uD852\uDDC5\uD852\uDCF3\uD862\uDEE3\uD846\uDC64\uD854\uDE21\uD854\uDDE7\uD84C\uDE32\uD851\uDE97\uD84D\uDF81\uD852\uDCF0\uD852\uDEBA\uD852\uDEC7\uD852\uDE96\uD858\uDDAE\uD855\uDD81\uD85D\uDF41\uD855\uDEE3\uD84F\uDEFA\uD845\uDEE6\uD843\uDD4C\uD852\uDD8C\uD840\uDE99\uD84F\uDDBA\uD845\uDF6E\uD840\uDDD4\uD843\uDC0D\uD849\uDEF5\uD856\uDEAF\uD856\uDE9C\uD840\uDE5B\uD856\uDFC6\uD856\uDFB3\uD857\uDEBC\uD857\uDEA6\uD852\uDDF9\uD845\uDFB0\uD858\uDE61"],["9540","\uD858\uDD5C\uD85E\uDF48\uD857\uDE82\uD85A\uDF75\uD842\uDD16\uD840\uDC4E\uD84D\uDDCF\uD859\uDC12\uD858\uDFF8\uD852\uDD62\uD842\uDC2C\uD856\uDEE9\uD857\uDD43\uD857\uDE0E\uD84D\uDC3F\uD852\uDDF7\uD859\uDDAD\uD859\uDDA0\uD85C\uDD27\uD85B\uDCD1\uD859\uDFB4\uD85A\uDE42\uD85A\uDE51\uD85B\uDDA7\uD85C\uDE1B\uD846\uDC40\uD846\uDCA1\uD846\uDCD8\uD87E\uDDBC\uD84F\uDD8F\uD85D\uDC22"],["95a1","\uD855\uDE83\uD85D\uDF85\uD85D\uDF84\uD862\uDFF5\uD862\uDFD9\uD862\uDF9C\uD862\uDDF9\uD865\uDC48\uD850\uDE84\uD846\uDC45\uD85F\uDDDC\uD853\uDC09\uD848\uDF21\uD845\uDFDA\uD852\uDD2F\uD862\uDE4B\uD862\uDEFC\uD863\uDC1D\uD863\uDC3B\uD863\uDD34\uD852\uDCFF\uD852\uDE42\uD850\uDFEA\uD84C\uDE25\uD863\uDEE7\uD863\uDE66\uD863\uDE65\uD852\uDDED\uD852\uDE78\uD84F\uDFEE\uD864\uDCB0"],["9640","\uD864\uDC93\uD855\uDFDF\uD862\uDD89\uD863\uDC26\uD862\uDF2F\uD858\uDFBE\uD850\uDE1B\uD843\uDF26\uD862\uDFC5\uD852\uDEB2\uD865\uDCDA\uD865\uDDD7\uD862\uDF50\uD852\uDE67\uD862\uDF64\uD862\uDE45\uD85E\uDF06\uD862\uDF65\uD856\uDCC8\uD866\uDCF1\uD866\uDD48\uD844\uDF02\uD852\uDDB8"],["96a1","\uD845\uDCE8\uD849\uDF1F\uD84F\uDDB8\uD849\uDF81\uD84A\uDD6B\uD867\uDE2D\uD868\uDDF5\uD868\uDCFE\uD850\uDD04\uD868\uDDB4\uD868\uDCED\uD868\uDCF3\uD866\uDD2F\uD85B\uDE12\uD85B\uDFDF\uD85A\uDF82\uD85B\uDDA4\uD85B\uDE84\uD85B\uDDF0\uD85B\uDE00\uD84D\uDFD7\uD858\uDC64\uD84D\uDD9C\uD84D\uDE40\uD852\uDDDE\uD840\uDEBF\uD855\uDD5D\uD845\uDF57\uD84C\uDDC9\uD852\uDD41\uD850\uDDB5\uD850\uDDAC\uD85B\uDC40\uD853\uDF97\uD845\uDFB5\uD862\uDE49"],["9740","\uD851\uDC88\uD862\uDDFC\uD846\uDCD6\uD843\uDF1D\uD85B\uDCC0\uD845\uDC13\uD850\uDEFA\uD84B\uDC26\uD850\uDFC1\uD84F\uDDB7\uD859\uDF41\uD858\uDD5B\uD858\uDCA4\uD852\uDDB9\uD852\uDD8B\uD862\uDDFA\uD862\uDF63\uD846\uDC9F\uD852\uDEB3\uD852\uDE3E\uD852\uDE94\uD845\uDFD9\uD852\uDE66\uD840\uDFA7\uD845\uDC24\uD852\uDDE5\uD852\uDD16\uD852\uDD76\uD841\uDCFE\uD862\uDECE\uD862\uDE16\uD862\uDFE7\uD855\uDDD5\uD862\uDE82"],["97a1","\uD852\uDD43\uD843\uDCFF\uD841\uDE1A\uD842\uDFEB\uD843\uDCB8\uD845\uDFFA\uD845\uDEC2\uD852\uDE50\uD846\uDC52\uD862\uDEC0\uD852\uDDAD\uD846\uDCBF\uD846\uDC83\uD85D\uDC84\uD84F\uDD5B\uD862\uDE81\uD846\uDC62\uD842\uDEB4\uD844\uDF9C\uD860\uDE18\uD864\uDCE4\uD85F\uDE4F\uD84F\uDFED\uD84F\uDE2D\uD840\uDFF5\uD863\uDC1C\uD85A\uDFC0\uD845\uDC52\uD850\uDF62\uD852\uDE71\uD84B\uDFE3\uD844\uDEB0\uD848\uDFBD\uD844\uDF98\uD84D\uDCE5\uD85E\uDFF4\uD84D\uDEDF\uD862\uDE83\uD84D\uDFD6\uD84C\uDFFA\uD853\uDC9F\uD84D\uDEAD\uD85B\uDCB7"],["9840","\uD85B\uDD26\uD85B\uDD51\uD85B\uDC82\uD85B\uDFDE\uD85C\uDD09\uD845\uDF3A\uD85B\uDC80\uD85C\uDC53\uD845\uDFDB\uD845\uDFB3\uD846\uDD05\uD850\uDDFC\uD845\uDF3C\uD850\uDEA5\uD850\uDE93\uD84F\uDEF9\uD85D\uDF36\uD851\uDC5B\uD850\uDECA\uD850\uDE59\uD862\uDDE1\uD85B\uDD28\uD851\uDCCE\uD85F\uDE4D\uD850\uDFBD\uD850\uDE56\uD844\uDF04\uD850\uDFE9\uD87E\uDC25\uD852\uDE4F\uD852\uDE5D\uD845\uDFDF"],["98a1","\uD84E\uDEFA\uD84C\uDF00\uD840\uDE14\uD842\uDCD5\uD841\uDE19\uD847\uDF9E\uD868\uDEB6\uD864\uDD5B\uD862\uDE59\uD865\uDC20\uD85E\uDEF4\uD855\uDEF6\uD85E\uDF18\uD852\uDCF2\uD853\uDF5C\uD855\uDD35"],["9940","\uD843\uDCCF"],["99a1","\uD85E\uDD67"],["9a40","\uD846\uDFC2"],["9aa1","\uD840\uDC94\uD840\uDEB7\uD840\uDFA0\uD841\uDCD7\uD841\uDDD5\uD841\uDE15\uD841\uDE76\uD845\uDEBA\uD842\uDEC2\uD842\uDECD\uD842\uDFBF\uD87E\uDC3B\uD842\uDFCB\uD842\uDFFB\uD843\uDC3B\uD843\uDC53\uD843\uDC65\uD843\uDC7C\uD843\uDC8D\uD843\uDCB5\uD843\uDCDD\uD843\uDCED\uD843\uDD6F\uD843\uDDB2\uD843\uDDC8\uD843\uDE04\uD843\uDE0E\uD843\uDED7\uD843\uDF90\uD843\uDF2D\uD843\uDE73\uD843\uDFBC\uD844\uDC5C\uD844\uDC4F\uD844\uDC76\uD844\uDC7B\uD844\uDC88\uD844\uDC96\uD844\uDCBF\uD844\uDCD3\uD844\uDD2F\uD844\uDD3B\uD844\uDEE3\uD844\uDF75\uD844\uDF36\uD845\uDD77\uD845\uDE19\uD845\uDFC3\uD845\uDFC7\uD846\uDC2D\uD846\uDD6A"],["9b40","\uD846\uDE2D\uD846\uDE45\uD847\uDC2A\uD847\uDC70\uD847\uDCAC\uD847\uDEC8\uD847\uDED5\uD847\uDF15\uD848\uDC45\uD848\uDE7C\uD848\uDFD7\uD848\uDFFA\uD849\uDF2A\uD84A\uDC71\uD84A\uDD4F\uD84A\uDD67\uD84A\uDD93\uD84A\uDED5\uD84A\uDEE8\uD84A\uDF0E\uD84A\uDF3F\uD84B\uDC4C"],["9b62","\uD84B\uDC88\uD84B\uDCB7\uD856\uDFE8\uD84B\uDD08\uD84B\uDD12\uD84B\uDDB7\uD84B\uDD95\uD84B\uDE42\uD84B\uDF74\uD84B\uDFCC\uD84C\uDC33\uD84C\uDC66\uD84C\uDF1F\uD84C\uDFDE\uD85E\uDE79\uD84D\uDD67\uD84D\uDDF3\uD852\uDDBA\uD84D\uDE1A\uD84D\uDF16\uD840\uDF46"],["9ba1","\uD84E\uDEA7\uD85D\uDE57\uD857\uDFE2\uD84F\uDE11\uD84F\uDEB9\uD85D\uDDFE\uD848\uDC9A\uD850\uDD19\uD862\uDE9A\uD850\uDEEE\uD850\uDF0D\uD850\uDC3B\uD850\uDF34\uD850\uDF96\uD852\uDE45\uD841\uDDCA\uD841\uDE11\uD847\uDEA8\uD84F\uDCFF\uD851\uDC04\uD851\uDCD6\uD851\uDE74\uD851\uDF2F\uD861\uDDE8\uD866\uDDC9\uD848\uDDC3\uD862\uDF4E\uD852\uDC12\uD852\uDCFB\uD852\uDE15\uD852\uDEC0\uD843\uDC78\uD853\uDEA5\uD853\uDF86\uD841\uDF79\uD854\uDC2C\uD854\uDE99\uD855\uDC19\uD84F\uDF4A\uD852\uDEA7\uD855\uDC46\uD855\uDC6E\uD85A\uDF52\uD855\uDD3F\uD85D\uDE32\uD855\uDD5E\uD855\uDD62\uD855\uDD66\uD855\uDFC7\uD852\uDD3F\uD856\uDC5D\uD84C\uDFCC\uD856\uDD03\uD862\uDD48\uD856\uDEAE\uD856\uDF89\uD857\uDC06\uD847\uDD90\uD858\uDD02\uD85F\uDC12\uD858\uDDB2\uD853\uDF9A\uD859\uDC02\uD859\uDC4A"],["9c40","\uD85A\uDFF7\uD859\uDC84\uD846\uDD1C\uD852\uDDF6\uD859\uDC88\uD84F\uDFEF\uD859\uDD12\uD859\uDDBF\uD859\uDEB5\uD849\uDF1B\uD855\uDFE1\uD87E\uDCCD\uD851\uDD21\uD859\uDEFC\uD852\uDD34\uD85B\uDCBD\uD859\uDF99\uD85A\uDC6E\uD859\uDC11\uD85A\uDC5E\uD85A\uDCC7\uD864\uDCC0\uD842\uDE11\uD85A\uDD26\uD85A\uDD39\uD85A\uDDFA\uD85A\uDE2D\uD859\uDC69\uD840\uDC21\uD85A\uDE34\uD85A\uDF5B\uD84D\uDD19\uD85A\uDF9D\uD85B\uDCA4\uD85B\uDDAE"],["9ca1","\uD849\uDD8D\uD85C\uDC4B\uD85C\uDDCD\uD85C\uDE80\uD85C\uDE85\uD848\uDD7A\uD85C\uDE8B\uD85C\uDEE6\uD852\uDDD0\uD85D\uDC50\uD843\uDEF8\uD84A\uDD26\uD861\uDC73\uD845\uDFB1\uD852\uDE2A\uD846\uDC20\uD867\uDCAD\uD866\uDCA4\uD85D\uDFCC\uD85E\uDC58\uD845\uDE0A\uD84D\uDF2F\uD860\uDCE8\uD844\uDFC5\uD85E\uDDDD\uD864\uDDA8\uD85C\uDCAF\uD862\uDDAB\uD85E\uDDFD\uD85E\uDE0A\uD85E\uDF0B\uD85F\uDD66\uD850\uDD7A\uD860\uDC09\uD868\uDEDF\uD860\uDF18\uD85B\uDE07\uD860\uDD6F\uD860\uDC23\uD85A\uDDB5\uD844\uDFED\uD84C\uDE2F\uD860\uDC48\uD863\uDC30\uD860\uDC83\uD862\uDD49\uD852\uDD88\uD852\uDEA5\uD84F\uDF81\uD860\uDC90\uD860\uDCF4\uD860\uDD2E\uD847\uDFA1\uD860\uDD4F"],["9d40","\uD860\uDD89\uD860\uDDAF\uD860\uDE1A\uD860\uDF06\uD860\uDF2F\uD860\uDF8A\uD861\uDC68\uD861\uDEAA\uD862\uDD56\uD862\uDDB8\uD862\uDDE7\uD862\uDDE8\uD862\uDF46\uD862\uDFD4\uD863\uDC09\uD863\uDFC5\uD864\uDCEC\uD864\uDD10\uD864\uDD3C\uD864\uDD5E\uD852\uDECA\uD865\uDCE7\uD865\uDDE9\uD865\uDDB0\uD865\uDDB8\uD865\uDF32\uD866\uDCD1\uD866\uDD49\uD866\uDD6A\uD866\uDDC3\uD866\uDE28\uD866\uDF0E\uD867\uDD5A\uD867\uDD9B\uD867\uDEF8\uD867\uDF23\uD868\uDE93\uD868\uDEFF\uD869\uDDCB\uD843\uDC9C"],["9da1","\uD849\uDCB0\uD852\uDE93\uD862\uDF2C\uD85E\uDC9D\uD845\uDFF5\uD860\uDC24\uD862\uDF6C\uD862\uDF99\uD85E\uDE3E\uD859\uDEAF\uD85D\uDE55\uD84F\uDCB7\uD855\uDE35\uD856\uDD56\uD857\uDE81\uD858\uDE58\uD843\uDE6D\uD84F\uDE88\uD853\uDC9E\uD845\uDFF6\uD846\uDC7B\uD857\uDC4A\uD854\uDF11\uD867\uDD98\uD857\uDED8\uD84F\uDD40\uD843\uDFEA\uD843\uDD49\uD84D\uDEBA\uD843\uDE9D\uD860\uDEE2\uD843\uDC41\uD843\uDC96\uD854\uDD48\uD843\uDE76\uD84B\uDC62"],["9e40","\uD843\uDEA2\uD844\uDC75\uD84A\uDF43\uD84B\uDEB3\uD843\uDDA7\uD85A\uDC8A\uD844\uDCC1\uD851\uDF06\uD85A\uDC93\uD849\uDEF4\uD85F\uDD2F\uD850\uDDA3\uD85F\uDD73\uD85B\uDED0\uD85C\uDEB6\uD844\uDDD9\uD84F\uDCFC\uD869\uDEA9\uD843\uDEAC\uD843\uDEF9\uD847\uDCA2\uD853\uDFC2\uD85F\uDFF9\uD843\uDFEB"],["9ea1","\uD84B\uDDA0\uD851\uDFE0\uD867\uDD7C\uD843\uDFEC\uD843\uDE0A\uD85D\uDDA3\uD843\uDFED"],["9ead","\uD858\uDC48\uD844\uDD87\uD851\uDE18\uD852\uDF6E\uD856\uDE95\uD842\uDD79"],["9ec5","\uD849\uDC65\uD867\uDEAC\uD84F\uDCFE\uD867\uDF30\uD853\uDFA9\uD865\uDD9E\uD867\uDFDE\uD84F\uDDB6\uD85C\uDEB2\uD859\uDFB3\uD84D\uDF20\uD84F\uDEF7\uD84F\uDE2C\uD841\uDC8E\uD843\uDEB6\uD85F\uDF2E\uD869\uDC34\uD84C\uDCDA\uD850\uDFF2"],["9ef5","\uD844\uDEA9\uD852\uDD63\uD867\uDE06\uD85C\uDCAE"],["9f40","\uD845\uDF6C\uD865\uDCD0\uD858\uDF35\uD85C\uDD64\uD843\uDD28\uD85B\uDD22\uD852\uDEE2\uD843\uDD71"],["9f4f","\uD847\uDF0F\uD847\uDDD1\uD852\uDD3E"],["9fa1","\uD845\uDF6D"],["9fae",""],["9fb2","\uD863\uDE97\uD85B\uDD23\uD840\uDFFC\uD857\uDC21\uD84F\uDCFD"],["9fc1","\uD852\uDD19\uD843\uDCD4"],["9fc9","\uD840\uDDF2"],["9fdb",""],["9fe7",""],["9feb","\uD869\uDE4A"],["9ff0","\uD860\uDF7D\uD852\uDE77"],["a040","\uD862\uDE5A\uD868\uDEB2\uD87E\uDC40\uD852\uDEBB"],["a055","\uD846\uDC3B\uD85B\uDE05"],["a058","\uD849\uDD1B"],["a05b",""],["a063","\uD858\uDD59"],["a073","\uD84C\uDFF5"],["a0a1","\uD862\uDFC2\uD863\uDE39"],["a0a6","\uD847\uDD46\uD843\uDF3B"],["a0ae",""],["a0b0","\uD857\uDF1A\uD85D\uDC86\uD859\uDFCC\uD85B\uDED1"],["a0d4","\uD850\uDC11"],["a0e2","\uD862\uDF2D\uD84F\uDCC7\uD857\uDED7\uD85D\uDE56\uD855\uDD31\uD846\uDD44\uD844\uDEFE\uD866\uDD03\uD85B\uDDDC\uD85C\uDCAD\uD858\uDDAD\uD862\uDE0F\uD84D\uDE77\uD840\uDCEE\uD85A\uDC46\uD853\uDF0E\uD858\uDF4C\uD858\uDE6B"],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,"\uD840\uDCCC\uD840\uDC8A"],["c8a1","\uD85D\uDE07"],["c8cd",""],["c8f5",""],["f9fe",""],["fa40","\uD841\uDD47\uD841\uDDDF\uD84F\uDFC5\uD852\uDD42\uD862\uDDE4\uD846\uDDDB\uD84F\uDCC8\uD852\uDD33\uD862\uDDAA\uD840\uDEA0\uD85A\uDFB3\uD844\uDF05\uD849\uDCED\uD85B\uDD29\uD85E\uDE84\uD84D\uDE00\uD852\uDEB1\uD849\uDD13\uD840\uDF7E\uD840\uDF80\uD840\uDF47\uD841\uDC1F\uD852\uDDA4\uD841\uDC87\uD84C\uDFB4\uD842\uDFFF\uD848\uDCFC\uD840\uDEE5\uD849\uDD30\uD841\uDD8E\uD84C\uDE33\uD846\uDD83\uD841\uDDB3\uD84F\uDC99"],["faa1","\uD852\uDEA6\uD84D\uDF2D\uD85A\uDF13\uD862\uDEDE\uD84F\uDF80\uD842\uDD54\uD84F\uDFEC\uD842\uDFE2\uD845\uDF26\uD845\uDEE8\uD861\uDEAB\uD845\uDD96\uD845\uDE13\uD862\uDE9B\uD855\uDF72\uD842\uDF8F\uD84F\uDFEB\uD84B\uDDA3\uD843\uDC77\uD85A\uDF53\uD843\uDD74\uD845\uDF0D\uD843\uDEDD\uD843\uDD4D"],["fb40","\uD862\uDDBC\uD849\uDE98\uD846\uDCD7\uD850\uDC3A\uD851\uDC35\uD844\uDCB4\uD84C\uDE8A\uD862\uDF66\uD844\uDE4F\uD850\uDDA5\uD85B\uDC7E\uD845\uDC16\uD845\uDC54\uD850\uDF63\uD852\uDFF5\uD844\uDE3C\uD868\uDD50\uD850\uDE78"],["fba1","\uD845\uDE3E\uD845\uDE92\uD843\uDD4E\uD85B\uDC81\uD85B\uDD2A\uD845\uDFDC\uD845\uDFFB\uD845\uDFB2\uD85B\uDDA6\uD846\uDC28\uD845\uDED5\uD85B\uDE45\uD852\uDDA9\uD85B\uDFA1\uD849\uDD54\uD846\uDD11\uD845\uDEB8\uD85E\uDE0E\uD840\uDE04\uD846\uDE34\uD856\uDDCC\uD841\uDDA5\uD846\uDF44\uD847\uDCA5\uD85A\uDF28\uD847\uDDF9\uD847\uDE37\uD847\uDEA4\uD852\uDD01\uD848\uDC49\uD848\uDD73\uD851\uDCBC\uD843\uDCD3\uD845\uDF71\uD861\uDC82"],["fc40","\uD840\uDDC1\uD87E\uDC94\uD844\uDF3A\uD85A\uDC88\uD848\uDFD0\uD849\uDC71\uD85B\uDE6E\uD862\uDE36\uD854\uDE50\uD847\uDF6A\uD85C\uDCF8\uD849\uDE68\uD840\uDE9E\uD862\uDE29\uD846\uDC77\uD849\uDFB4\uD852\uDD82\uD852\uDD8F\uD85E\uDE53\uD87E\uDCA6\uD85B\uDED2\uD841\uDE56\uD84F\uDFB7"],["fca1","\uD84A\uDC5F\uD862\uDF9D\uD866\uDD5D\uD84A\uDD80\uD84A\uDCC1\uD840\uDD18\uD845\uDF70\uD84B\uDE0D\uD852\uDDDF\uD844\uDF8E\uD845\uDFFC\uD84B\uDE36\uD850\uDC8C\uD855\uDF1D\uD852\uDE28\uD852\uDE23\uD84C\uDC7E\uD852\uDD40\uD846\uDC29\uD84D\uDC00\uD84C\uDDF7\uD84C\uDDF8\uD84C\uDDA4\uD84C\uDDA5\uD843\uDE75\uD854\uDDE6\uD847\uDE3D\uD84C\uDE31\uD861\uDDF4\uD84C\uDDC8\uD854\uDF13\uD84A\uDCF7\uD850\uDF9C\uD852\uDE21\uD84D\uDFC2\uD850\uDDCD\uD864\uDCED\uD84C\uDFE6\uD85B\uDDA0"],["fd40","\uD84D\uDC6F\uD862\uDEDF\uD84D\uDDCD\uD84D\uDE3C\uD862\uDE4A\uD840\uDFC9\uD84D\uDE59\uD848\uDD2A\uD84D\uDF03\uD864\uDD9C\uD842\uDD23\uD849\uDFCD\uD84E\uDEDB\uD840\uDFB5\uD846\uDD58\uD84E\uDF5A\uD84F\uDEFC\uD849\uDC8B\uD852\uDCF1\uD85A\uDF51\uD84F\uDDBC\uD84F\uDDBD\uD850\uDDA4\uD852\uDD0C\uD852\uDD00"],["fda1","\uD84F\uDCC9\uD843\uDD32\uD84C\uDDF9\uD849\uDC91\uD85B\uDD25\uD85B\uDDA1\uD85B\uDDEB\uD852\uDD7F\uD850\uDC85\uD85B\uDE72\uD85B\uDF74\uD862\uDF21\uD84F\uDE2F\uD84F\uDF82\uD84C\uDC4B\uD84F\uDE30\uD845\uDC97\uD850\uDC3D\uD864\uDD70\uD850\uDD44\uD850\uDC91\uD850\uDD55\uD850\uDC39\uD84F\uDFF0\uD84F\uDFB4\uD850\uDD3F\uD850\uDD56\uD850\uDD57\uD850\uDD40\uD858\uDDDD\uD850\uDE77\uD850\uDF65\uD850\uDEC1\uD851\uDC5A\uD852\uDE27\uD852\uDE22\uD862\uDFE8"],["fe40","\uD855\uDE05\uD852\uDD74\uD84C\uDC44\uD852\uDC23\uD862\uDC2B\uD862\uDC04\uD843\uDC3A\uD85A\uDE2E\uD850\uDDE2\uD845\uDEE7\uD852\uDE24\uD852\uDDB7\uD852\uDD8D\uD852\uDDFB\uD852\uDE26\uD841\uDDC3\uD84A\uDCAD\uD863\uDEB2\uD852\uDE8C"],["fea1","\uD850\uDD5F\uD852\uDE79\uD862\uDF8F\uD863\uDC03\uD846\uDC9E\uD846\uDD88\uD863\uDED9\uD846\uDE4B\uD863\uDEAC\uD853\uDF82\uD853\uDD13\uD858\uDFF5\uD85A\uDD11\uD85A\uDD0E\uD85B\uDF9F\uD854\uDC9D\uD854\uDD7D\uD847\uDE1C\uD854\uDE20\uD84C\uDEAC\uD862\uDD64\uD862\uDD68\uD845\uDEC1\uD844\uDF76\uD852\uDE12\uD855\uDDE0\uD85D\uDE0C\uD862\uDF2B\uD858\uDC83\uD849\uDE1C\uD856\uDC57\uD85E\uDF39\uD85C\uDD26\uD864\uDD0D"]]});var To=y((xn$,ko)=>{ko.exports={shiftjis:{type:"_dbcs",table:function(){return Mo()},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis","932":"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return vo()},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936","936":"cp936",cp936:{type:"_dbcs",table:function(){return O9()}},gbk:{type:"_dbcs",table:function(){return O9().concat(Kh())}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return O9().concat(Kh())},gb18030:function(){return Ho()},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949","949":"cp949",cp949:{type:"_dbcs",table:function(){return Yo()}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950","950":"cp950",cp950:{type:"_dbcs",table:function(){return Ph()}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return Ph().concat(ho())},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}});var Jo=y((Wo,TP)=>{var Ao=[sb(),Fb(),$o(),_o(),Ko(),jo(),Oo(),fo(),To()];for(z9=0;z9<Ao.length;z9++){TP=Ao[z9];for(f9 in TP)if(Object.prototype.hasOwnProperty.call(TP,f9))Wo[f9]=TP[f9]}var TP,f9,z9});var po=y((dn$,Do)=>{var Xo=x_().Buffer;Do.exports=function($){var q=$.Transform;function _(P,w){this.conv=P,w=w||{},w.decodeStrings=!1,q.call(this,w)}_.prototype=Object.create(q.prototype,{constructor:{value:_}}),_.prototype._transform=function(P,w,O){if(typeof P!="string")return O(new Error("Iconv encoding stream needs strings as its input."));try{var f=this.conv.write(P);if(f&&f.length)this.push(f);O()}catch(Y){O(Y)}},_.prototype._flush=function(P){try{var w=this.conv.end();if(w&&w.length)this.push(w);P()}catch(O){P(O)}},_.prototype.collect=function(P){var w=[];return this.on("error",P),this.on("data",function(O){w.push(O)}),this.on("end",function(){P(null,Xo.concat(w))}),this};function K(P,w){this.conv=P,w=w||{},w.encoding=this.encoding="utf8",q.call(this,w)}return K.prototype=Object.create(q.prototype,{constructor:{value:K}}),K.prototype._transform=function(P,w,O){if(!Xo.isBuffer(P)&&!(P instanceof Uint8Array))return O(new Error("Iconv decoding stream needs buffers as its input."));try{var f=this.conv.write(P);if(f&&f.length)this.push(f,this.encoding);O()}catch(Y){O(Y)}},K.prototype._flush=function(P){try{var w=this.conv.end();if(w&&w.length)this.push(w,this.encoding);P()}catch(O){P(O)}},K.prototype.collect=function(P){var w="";return this.on("error",P),this.on("data",function(O){w+=O}),this.on("end",function(){P(null,w)}),this},{IconvLiteEncoderStream:_,IconvLiteDecoderStream:K}}});var DK=y((bn$,Go)=>{var yo=x_().Buffer,So=lb(),T$=bn$;T$.encodings=null;T$.defaultCharUnicode="";T$.defaultCharSingleByte="?";T$.encode=function $(q,_,K){q=""+(q||"");var P=T$.getEncoder(_,K),w=P.write(q),O=P.end();return O&&O.length>0?yo.concat([w,O]):w};T$.decode=function $(q,_,K){if(typeof q==="string"){if(!T$.skipDecodeWarning)console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),T$.skipDecodeWarning=!0;q=yo.from(""+(q||""),"binary")}var P=T$.getDecoder(_,K),w=P.write(q),O=P.end();return O?w+O:w};T$.encodingExists=function $(q){try{return T$.getCodec(q),!0}catch(_){return!1}};T$.toEncoding=T$.encode;T$.fromEncoding=T$.decode;T$._codecDataCache={};T$.getCodec=function $(q){if(!T$.encodings)T$.encodings=Jo();var _=T$._canonicalizeEncoding(q),K={};while(!0){var P=T$._codecDataCache[_];if(P)return P;var w=T$.encodings[_];switch(typeof w){case"string":_=w;break;case"object":for(var O in w)K[O]=w[O];if(!K.encodingName)K.encodingName=_;_=w.type;break;case"function":if(!K.encodingName)K.encodingName=_;return P=new w(K,T$),T$._codecDataCache[K.encodingName]=P,P;default:throw new Error("Encoding not recognized: '"+q+"' (searched as: '"+_+"')")}}};T$._canonicalizeEncoding=function($){return(""+$).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")};T$.getEncoder=function $(q,_){var K=T$.getCodec(q),P=new K.encoder(_,K);if(K.bomAware&&_&&_.addBOM)P=new So.PrependBOM(P,_);return P};T$.getDecoder=function $(q,_){var K=T$.getCodec(q),P=new K.decoder(_,K);if(K.bomAware&&!(_&&_.stripBOM===!1))P=new So.StripBOM(P,_);return P};T$.enableStreamingAPI=function $(q){if(T$.supportsStreams)return;var _=po()(q);T$.IconvLiteEncoderStream=_.IconvLiteEncoderStream,T$.IconvLiteDecoderStream=_.IconvLiteDecoderStream,T$.encodeStream=function K(P,w){return new T$.IconvLiteEncoderStream(T$.getEncoder(P,w),w)},T$.decodeStream=function K(P,w){return new T$.IconvLiteDecoderStream(T$.getDecoder(P,w),w)},T$.supportsStreams=!0};var M9;try{M9=i("stream")}catch($){}if(M9&&M9.Transform)T$.enableStreamingAPI(M9);else T$.encodeStream=T$.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}});var uo=y((No,mo)=>{Object.defineProperty(No,"__esModule",{value:!0});No.default=void 0;var bX$=oX$(DK());function oX$($){return $&&$.__esModule?$:{default:$}}var iX$=Buffer.from([255,255,255,255]),Zo={id:35,type:"TEXT",name:"Text",hasTableName:!0,declaration:function(){return"text"},resolveLength:function($){let q=$.value;if(q!=null)return q.length;else return-1},generateTypeInfo($,q){let _=Buffer.alloc(10);if(_.writeUInt8(this.id,0),_.writeInt32LE($.length,1),$.collation)$.collation.toBuffer().copy(_,5,0,5);return _},generateParameterLength($,q){let _=$.value;if(_==null)return iX$;let K=Buffer.alloc(4);return K.writeInt32LE(_.length,0),K},generateParameterData:function*($,q){let _=$.value;if(_==null)return;yield _},validate:function($,q){if($==null)return null;if(typeof $!=="string")throw new TypeError("Invalid string.");if(!q)throw new Error("No collation was set by the server for the current connection.");if(!q.codepage)throw new Error("The collation set by the server has no associated encoding.");return bX$.default.encode($,q.codepage)}},on$=No.default=Zo;mo.exports=Zo});var jh=y((Ro)=>{Object.defineProperty(Ro,"__esModule",{value:!0});Ro.bufferToLowerCaseGuid=aX$;Ro.bufferToUpperCaseGuid=gX$;Ro.guidToArray=cX$;var U6=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],Q6=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function gX$($){return U6[$[3]]+U6[$[2]]+U6[$[1]]+U6[$[0]]+"-"+U6[$[5]]+U6[$[4]]+"-"+U6[$[7]]+U6[$[6]]+"-"+U6[$[8]]+U6[$[9]]+"-"+U6[$[10]]+U6[$[11]]+U6[$[12]]+U6[$[13]]+U6[$[14]]+U6[$[15]]}function aX$($){return Q6[$[3]]+Q6[$[2]]+Q6[$[1]]+Q6[$[0]]+"-"+Q6[$[5]]+Q6[$[4]]+"-"+Q6[$[7]]+Q6[$[6]]+"-"+Q6[$[8]]+Q6[$[9]]+"-"+Q6[$[10]]+Q6[$[11]]+Q6[$[12]]+Q6[$[13]]+Q6[$[14]]+Q6[$[15]]}var o6={},AP=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","A","B","C","D","E","F"].map(($)=>$.charCodeAt(0));for(let $=0;$<AP.length;$++){let q=o6[AP[$]]={};for(let _=0;_<AP.length;_++){let K=String.fromCharCode(AP[$],AP[_]),P=parseInt(K,16);q[AP[_]]=P}}function cX$($){return[o6[$.charCodeAt(6)][$.charCodeAt(7)],o6[$.charCodeAt(4)][$.charCodeAt(5)],o6[$.charCodeAt(2)][$.charCodeAt(3)],o6[$.charCodeAt(0)][$.charCodeAt(1)],o6[$.charCodeAt(11)][$.charCodeAt(12)],o6[$.charCodeAt(9)][$.charCodeAt(10)],o6[$.charCodeAt(16)][$.charCodeAt(17)],o6[$.charCodeAt(14)][$.charCodeAt(15)],o6[$.charCodeAt(19)][$.charCodeAt(20)],o6[$.charCodeAt(21)][$.charCodeAt(22)],o6[$.charCodeAt(24)][$.charCodeAt(25)],o6[$.charCodeAt(26)][$.charCodeAt(27)],o6[$.charCodeAt(28)][$.charCodeAt(29)],o6[$.charCodeAt(30)][$.charCodeAt(31)],o6[$.charCodeAt(32)][$.charCodeAt(33)],o6[$.charCodeAt(34)][$.charCodeAt(35)]]}});var Vo=y((Co,no)=>{Object.defineProperty(Co,"__esModule",{value:!0});Co.default=void 0;var sX$=jh(),eX$=Buffer.from([0]),BX$=Buffer.from([16]),Lo={id:36,type:"GUIDN",name:"UniqueIdentifier",declaration:function(){return"uniqueidentifier"},resolveLength:function(){return 16},generateTypeInfo(){return Buffer.from([this.id,16])},generateParameterLength($,q){if($.value==null)return eX$;return BX$},generateParameterData:function*($,q){if($.value==null)return;yield Buffer.from(sX$.guidToArray($.value))},validate:function($){if($==null)return null;if(typeof $!=="string")throw new TypeError("Invalid string.");if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test($))throw new TypeError("Invalid GUID.");return $}},gn$=Co.default=Lo;no.exports=Lo});var go=y((bo,oo)=>{Object.defineProperty(bo,"__esModule",{value:!0});bo.default=void 0;var FX$=Buffer.from([255,255,255,255]),xo={id:99,type:"NTEXT",name:"NText",hasTableName:!0,declaration:function(){return"ntext"},resolveLength:function($){let q=$.value;if(q!=null)return q.length;else return-1},generateTypeInfo($,q){let _=Buffer.alloc(10);if(_.writeUInt8(this.id,0),_.writeInt32LE($.length,1),$.collation)$.collation.toBuffer().copy(_,5,0,5);return _},generateParameterLength($,q){if($.value==null)return FX$;let _=Buffer.alloc(4);return _.writeInt32LE(Buffer.byteLength($.value,"ucs2"),0),_},generateParameterData:function*($,q){if($.value==null)return;yield Buffer.from($.value.toString(),"ucs2")},validate:function($){if($==null)return null;if(typeof $!=="string")throw new TypeError("Invalid string.");return $}},an$=bo.default=xo;oo.exports=xo});var to=y((co,Io)=>{Object.defineProperty(co,"__esModule",{value:!0});co.default=void 0;var UX$=65535,QX$=Buffer.from([254,255,255,255,255,255,255,255]),$D$=Buffer.from([0,0,0,0]),qD$=Buffer.from([255,255]),_D$=Buffer.from([255,255,255,255,255,255,255,255]),ao={id:165,type:"BIGVARBIN",name:"VarBinary",maximumLength:8000,declaration:function($){let q=$.value,_;if($.length)_=$.length;else if(q!=null)_=q.length||1;else if(q===null&&!$.output)_=1;else _=this.maximumLength;if(_<=this.maximumLength)return"varbinary("+_+")";else return"varbinary(max)"},resolveLength:function($){let q=$.value;if($.length!=null)return $.length;else if(q!=null)return q.length;else return this.maximumLength},generateTypeInfo:function($){let q=Buffer.alloc(3);if(q.writeUInt8(this.id,0),$.length<=this.maximumLength)q.writeUInt16LE($.length,1);else q.writeUInt16LE(UX$,1);return q},generateParameterLength($,q){if($.value==null)if($.length<=this.maximumLength)return qD$;else return _D$;let _=$.value;if(!Buffer.isBuffer(_))_=_.toString();let K=Buffer.byteLength(_,"ucs2");if($.length<=this.maximumLength){let P=Buffer.alloc(2);return P.writeUInt16LE(K,0),P}else return QX$},*generateParameterData($,q){if($.value==null)return;let _=$.value;if($.length<=this.maximumLength)if(Buffer.isBuffer(_))yield _;else yield Buffer.from(_.toString(),"ucs2");else{if(!Buffer.isBuffer(_))_=_.toString();let K=Buffer.byteLength(_,"ucs2");if(K>0){let P=Buffer.alloc(4);if(P.writeUInt32LE(K,0),yield P,Buffer.isBuffer(_))yield _;else yield Buffer.from(_,"ucs2")}yield $D$}},validate:function($){if($==null)return null;if(!Buffer.isBuffer($))throw new TypeError("Invalid buffer.");return $}},cn$=co.default=ao;Io.exports=ao});var Uo=y((eo,Bo)=>{Object.defineProperty(eo,"__esModule",{value:!0});eo.default=void 0;var KD$=PD$(DK());function PD$($){return $&&$.__esModule?$:{default:$}}var jD$=65535,wD$=Buffer.from([254,255,255,255,255,255,255,255]),OD$=Buffer.from([0,0,0,0]),zD$=Buffer.from([255,255]),fD$=Buffer.from([255,255,255,255,255,255,255,255]),so={id:167,type:"BIGVARCHR",name:"VarChar",maximumLength:8000,declaration:function($){let q=$.value,_;if($.length)_=$.length;else if(q!=null)_=q.length||1;else if(q===null&&!$.output)_=1;else _=this.maximumLength;if(_<=this.maximumLength)return"varchar("+_+")";else return"varchar(max)"},resolveLength:function($){let q=$.value;if($.length!=null)return $.length;else if(q!=null)return q.length||1;else return this.maximumLength},generateTypeInfo($){let q=Buffer.alloc(8);if(q.writeUInt8(this.id,0),$.length<=this.maximumLength)q.writeUInt16LE($.length,1);else q.writeUInt16LE(jD$,1);if($.collation)$.collation.toBuffer().copy(q,3,0,5);return q},generateParameterLength($,q){let _=$.value;if(_==null)if($.length<=this.maximumLength)return zD$;else return fD$;if($.length<=this.maximumLength){let K=Buffer.alloc(2);return K.writeUInt16LE(_.length,0),K}else return wD$},*generateParameterData($,q){let _=$.value;if(_==null)return;if($.length<=this.maximumLength)yield _;else{if(_.length>0){let K=Buffer.alloc(4);K.writeUInt32LE(_.length,0),yield K,yield _}yield OD$}},validate:function($,q){if($==null)return null;if(typeof $!=="string")throw new TypeError("Invalid string.");if(!q)throw new Error("No collation was set by the server for the current connection.");if(!q.codepage)throw new Error("The collation set by the server has no associated encoding.");return KD$.default.encode($,q.codepage)}},In$=eo.default=so;Bo.exports=so});var Ki=y(($i,qi)=>{Object.defineProperty($i,"__esModule",{value:!0});$i.default=void 0;var MD$=Buffer.from([255,255]),Qo={id:173,type:"BIGBinary",name:"Binary",maximumLength:8000,declaration:function($){let q=$.value,_;if($.length)_=$.length;else if(q!=null)_=q.length||1;else if(q===null&&!$.output)_=1;else _=this.maximumLength;return"binary("+_+")"},resolveLength:function($){let q=$.value;if(q!=null)return q.length;else return this.maximumLength},generateTypeInfo($){let q=Buffer.alloc(3);return q.writeUInt8(this.id,0),q.writeUInt16LE($.length,1),q},generateParameterLength($,q){if($.value==null)return MD$;let _=Buffer.alloc(2);return _.writeUInt16LE($.length,0),_},*generateParameterData($,q){if($.value==null)return;yield $.value.slice(0,$.length!==void 0?Math.min($.length,this.maximumLength):this.maximumLength)},validate:function($){if($==null)return null;if(!Buffer.isBuffer($))throw new TypeError("Invalid buffer.");return $}},ln$=$i.default=Qo;qi.exports=Qo});var zi=y((ji,wi)=>{Object.defineProperty(ji,"__esModule",{value:!0});ji.default=void 0;var vD$=HD$(DK());function HD$($){return $&&$.__esModule?$:{default:$}}var YD$=Buffer.from([255,255]),Pi={id:175,type:"BIGCHAR",name:"Char",maximumLength:8000,declaration:function($){let q=$.value,_;if($.length)_=$.length;else if(q!=null)_=q.length||1;else if(q===null&&!$.output)_=1;else _=this.maximumLength;if(_<this.maximumLength)return"char("+_+")";else return"char("+this.maximumLength+")"},resolveLength:function($){let q=$.value;if($.length!=null)return $.length;else if(q!=null)return q.length||1;else return this.maximumLength},generateTypeInfo($){let q=Buffer.alloc(8);if(q.writeUInt8(this.id,0),q.writeUInt16LE($.length,1),$.collation)$.collation.toBuffer().copy(q,3,0,5);return q},generateParameterLength($,q){let _=$.value;if(_==null)return YD$;let K=Buffer.alloc(2);return K.writeUInt16LE(_.length,0),K},*generateParameterData($,q){if($.value==null)return;yield Buffer.from($.value,"ascii")},validate:function($,q){if($==null)return null;if(typeof $!=="string")throw new TypeError("Invalid string.");if(!q)throw new Error("No collation was set by the server for the current connection.");if(!q.codepage)throw new Error("The collation set by the server has no associated encoding.");return vD$.default.encode($,q.codepage)}},tn$=ji.default=Pi;wi.exports=Pi});var Yi=y((Mi,vi)=>{Object.defineProperty(Mi,"__esModule",{value:!0});Mi.default=void 0;var hD$=65535,kD$=Buffer.from([254,255,255,255,255,255,255,255]),TD$=Buffer.from([0,0,0,0]),AD$=Buffer.from([255,255]),WD$=Buffer.from([255,255,255,255,255,255,255,255]),fi={id:231,type:"NVARCHAR",name:"NVarChar",maximumLength:4000,declaration:function($){let q=$.value,_;if($.length)_=$.length;else if(q!=null)_=q.toString().length||1;else if(q===null&&!$.output)_=1;else _=this.maximumLength;if(_<=this.maximumLength)return"nvarchar("+_+")";else return"nvarchar(max)"},resolveLength:function($){let q=$.value;if($.length!=null)return $.length;else if(q!=null)if(Buffer.isBuffer(q))return q.length/2||1;else return q.toString().length||1;else return this.maximumLength},generateTypeInfo($){let q=Buffer.alloc(8);if(q.writeUInt8(this.id,0),$.length<=this.maximumLength)q.writeUInt16LE($.length*2,1);else q.writeUInt16LE(hD$,1);if($.collation)$.collation.toBuffer().copy(q,3,0,5);return q},generateParameterLength($,q){if($.value==null)if($.length<=this.maximumLength)return AD$;else return WD$;let _=$.value;if($.length<=this.maximumLength){let K;if(_ instanceof Buffer)K=_.length;else _=_.toString(),K=Buffer.byteLength(_,"ucs2");let P=Buffer.alloc(2);return P.writeUInt16LE(K,0),P}else return kD$},*generateParameterData($,q){if($.value==null)return;let _=$.value;if($.length<=this.maximumLength)if(_ instanceof Buffer)yield _;else _=_.toString(),yield Buffer.from(_,"ucs2");else{if(_ instanceof Buffer){let K=_.length;if(K>0){let P=Buffer.alloc(4);P.writeUInt32LE(K,0),yield P,yield _}}else{_=_.toString();let K=Buffer.byteLength(_,"ucs2");if(K>0){let P=Buffer.alloc(4);P.writeUInt32LE(K,0),yield P,yield Buffer.from(_,"ucs2")}}yield TD$}},validate:function($){if($==null)return null;if(typeof $!=="string")throw new TypeError("Invalid string.");return $}},sn$=Mi.default=fi;vi.exports=fi});var Wi=y((ki,Ti)=>{Object.defineProperty(ki,"__esModule",{value:!0});ki.default=void 0;var JD$=Buffer.from([255,255]),hi={id:239,type:"NCHAR",name:"NChar",maximumLength:4000,declaration:function($){let q=$.value,_;if($.length)_=$.length;else if($.value!=null)_=q.toString().length||1;else if($.value===null&&!$.output)_=1;else _=this.maximumLength;if(_<this.maximumLength)return"nchar("+_+")";else return"nchar("+this.maximumLength+")"},resolveLength:function($){let q=$.value;if($.length!=null)return $.length;else if($.value!=null)if(Buffer.isBuffer($.value))return $.value.length/2||1;else return q.toString().length||1;else return this.maximumLength},generateTypeInfo:function($){let q=Buffer.alloc(8);if(q.writeUInt8(this.id,0),q.writeUInt16LE($.length*2,1),$.collation)$.collation.toBuffer().copy(q,3,0,5);return q},generateParameterLength($,q){if($.value==null)return JD$;let{value:_}=$;if(_ instanceof Buffer){let K=_.length,P=Buffer.alloc(2);return P.writeUInt16LE(K,0),P}else{let K=Buffer.byteLength(_.toString(),"ucs2"),P=Buffer.alloc(2);return P.writeUInt16LE(K,0),P}},*generateParameterData($,q){if($.value==null)return;let _=$.value;if(_ instanceof Buffer)yield _;else yield Buffer.from(_,"ucs2")},validate:function($){if($==null)return null;if(typeof $!=="string")throw new TypeError("Invalid string.");return $}},en$=ki.default=hi;Ti.exports=hi});var yi=y((Xi,Di)=>{Object.defineProperty(Xi,"__esModule",{value:!0});Xi.default=void 0;var Ji={id:241,type:"XML",name:"Xml",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},Bn$=Xi.default=Ji;Di.exports=Ji});var mi=y((Gi,Zi)=>{Object.defineProperty(Gi,"__esModule",{value:!0});Gi.default=void 0;var XD$=DD$(k8());function DD$($){return $&&$.__esModule?$:{default:$}}var pD$=Buffer.from([0]),Si={id:41,type:"TIMEN",name:"Time",declaration:function($){return"time("+this.resolveScale($)+")"},resolveScale:function($){if($.scale!=null)return $.scale;else if($.value===null)return 0;else return 7},generateTypeInfo($){return Buffer.from([this.id,$.scale])},generateParameterLength($,q){if($.value==null)return pD$;switch($.scale){case 0:case 1:case 2:return Buffer.from([3]);case 3:case 4:return Buffer.from([4]);case 5:case 6:case 7:return Buffer.from([5]);default:throw new Error("invalid scale")}},*generateParameterData($,q){if($.value==null)return;let _=new XD$.default(16),K=$.value,P;if(q.useUTC)P=((K.getUTCHours()*60+K.getUTCMinutes())*60+K.getUTCSeconds())*1000+K.getUTCMilliseconds();else P=((K.getHours()*60+K.getMinutes())*60+K.getSeconds())*1000+K.getMilliseconds();switch(P=P*Math.pow(10,$.scale-3),P+=($.value.nanosecondDelta!=null?$.value.nanosecondDelta:0)*Math.pow(10,$.scale),P=Math.round(P),$.scale){case 0:case 1:case 2:_.writeUInt24LE(P);break;case 3:case 4:_.writeUInt32LE(P);break;case 5:case 6:case 7:_.writeUInt40LE(P)}yield _.data},validate:function($){if($==null)return null;if(!($ instanceof Date))$=new Date(Date.parse($));if(isNaN($))throw new TypeError("Invalid time.");return $}},Fn$=Gi.default=Si;Zi.exports=Si});var Ci=y((ui,Ri)=>{Object.defineProperty(ui,"__esModule",{value:!0});ui.default=void 0;var v9=s3(),wh=global.Date,yD$=v9.LocalDate.ofYearDay(1,1),SD$=Buffer.from([0]),GD$=Buffer.from([3]),Ei={id:40,type:"DATEN",name:"Date",declaration:function(){return"date"},generateTypeInfo:function(){return Buffer.from([this.id])},generateParameterLength($,q){if($.value==null)return SD$;return GD$},*generateParameterData($,q){if($.value==null)return;let _=$.value,K;if(q.useUTC)K=v9.LocalDate.of(_.getUTCFullYear(),_.getUTCMonth()+1,_.getUTCDate());else K=v9.LocalDate.of(_.getFullYear(),_.getMonth()+1,_.getDate());let P=yD$.until(K,v9.ChronoUnit.DAYS),w=Buffer.alloc(3);w.writeUIntLE(P,0,3),yield w},validate:function($,q,_){if($==null)return null;if(!($ instanceof wh))$=new wh(wh.parse($));$=$;let K;if(_&&_.useUTC)K=$.getUTCFullYear();else K=$.getFullYear();if(K<1||K>9999)throw new TypeError("Out of range.");if(isNaN($))throw new TypeError("Invalid date.");return $}},Un$=ui.default=Ei;Ri.exports=Ei});var di=y((ri,Vi)=>{Object.defineProperty(ri,"__esModule",{value:!0});ri.default=void 0;var H9=s3(),ZD$=ND$(k8());function ND$($){return $&&$.__esModule?$:{default:$}}var mD$=H9.LocalDate.ofYearDay(1,1),ED$=Buffer.from([0]),ni={id:42,type:"DATETIME2N",name:"DateTime2",declaration:function($){return"datetime2("+this.resolveScale($)+")"},resolveScale:function($){if($.scale!=null)return $.scale;else if($.value===null)return 0;else return 7},generateTypeInfo($,q){return Buffer.from([this.id,$.scale])},generateParameterLength($,q){if($.value==null)return ED$;switch($.scale){case 0:case 1:case 2:return Buffer.from([6]);case 3:case 4:return Buffer.from([7]);case 5:case 6:case 7:return Buffer.from([8]);default:throw new Error("invalid scale")}},*generateParameterData($,q){if($.value==null)return;let{value:_,scale:K}=$,P=new ZD$.default(16);K=K;let w;if(q.useUTC)w=((_.getUTCHours()*60+_.getUTCMinutes())*60+_.getUTCSeconds())*1000+_.getUTCMilliseconds();else w=((_.getHours()*60+_.getMinutes())*60+_.getSeconds())*1000+_.getMilliseconds();switch(w=w*Math.pow(10,K-3),w+=(_.nanosecondDelta!=null?_.nanosecondDelta:0)*Math.pow(10,K),w=Math.round(w),K){case 0:case 1:case 2:P.writeUInt24LE(w);break;case 3:case 4:P.writeUInt32LE(w);break;case 5:case 6:case 7:P.writeUInt40LE(w)}let O;if(q.useUTC)O=H9.LocalDate.of(_.getUTCFullYear(),_.getUTCMonth()+1,_.getUTCDate());else O=H9.LocalDate.of(_.getFullYear(),_.getMonth()+1,_.getDate());let f=mD$.until(O,H9.ChronoUnit.DAYS);P.writeUInt24LE(f),yield P.data},validate:function($,q,_){if($==null)return null;if(!($ instanceof Date))$=new Date(Date.parse($));$=$;let K;if(_&&_.useUTC)K=$.getUTCFullYear();else K=$.getFullYear();if(K<1||K>9999)throw new TypeError("Out of range.");if(isNaN($))throw new TypeError("Invalid date.");return $}},Qn$=ri.default=ni;Vi.exports=ni});var ai=y((oi,ii)=>{Object.defineProperty(oi,"__esModule",{value:!0});oi.default=void 0;var Oh=s3(),uD$=RD$(k8());function RD$($){return $&&$.__esModule?$:{default:$}}var LD$=Oh.LocalDate.ofYearDay(1,1),CD$=Buffer.from([0]),bi={id:43,type:"DATETIMEOFFSETN",name:"DateTimeOffset",declaration:function($){return"datetimeoffset("+this.resolveScale($)+")"},resolveScale:function($){if($.scale!=null)return $.scale;else if($.value===null)return 0;else return 7},generateTypeInfo($){return Buffer.from([this.id,$.scale])},generateParameterLength($,q){if($.value==null)return CD$;switch($.scale){case 0:case 1:case 2:return Buffer.from([8]);case 3:case 4:return Buffer.from([9]);case 5:case 6:case 7:return Buffer.from([10]);default:throw new Error("invalid scale")}},*generateParameterData($,q){if($.value==null)return;let{value:_,scale:K}=$,P=new uD$.default(16);K=K;let w;switch(w=((_.getUTCHours()*60+_.getUTCMinutes())*60+_.getUTCSeconds())*1000+_.getMilliseconds(),w=w*Math.pow(10,K-3),w+=(_.nanosecondDelta!=null?_.nanosecondDelta:0)*Math.pow(10,K),w=Math.round(w),K){case 0:case 1:case 2:P.writeUInt24LE(w);break;case 3:case 4:P.writeUInt32LE(w);break;case 5:case 6:case 7:P.writeUInt40LE(w)}let O=Oh.LocalDate.of(_.getUTCFullYear(),_.getUTCMonth()+1,_.getUTCDate()),f=LD$.until(O,Oh.ChronoUnit.DAYS);P.writeUInt24LE(f);let Y=-_.getTimezoneOffset();P.writeInt16LE(Y),yield P.data},validate:function($,q,_){if($==null)return null;if(!($ instanceof Date))$=new Date(Date.parse($));$=$;let K;if(_&&_.useUTC)K=$.getUTCFullYear();else K=$.getFullYear();if(K<1||K>9999)throw new TypeError("Out of range.");if(isNaN($))throw new TypeError("Invalid date.");return $}},$r$=oi.default=bi;ii.exports=bi});var si=y((Ii,li)=>{Object.defineProperty(Ii,"__esModule",{value:!0});Ii.default=void 0;var ci={id:240,type:"UDTTYPE",name:"UDT",declaration(){throw new Error("not implemented")},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},qr$=Ii.default=ci;li.exports=ci});var Qi=y((Bi,Fi)=>{Object.defineProperty(Bi,"__esModule",{value:!0});Bi.default=void 0;var nD$=AK(),rD$=VD$(k8());function VD$($){return $&&$.__esModule?$:{default:$}}var xD$=Buffer.from([1]),Y9=Buffer.from([0]),dD$=Buffer.from([255,255]),ei={id:243,type:"TVPTYPE",name:"TVP",declaration:function($){return $.value.name+" readonly"},generateTypeInfo($){let _=$.value?.schema??"",K=$.value?.name??"",P=2+Buffer.byteLength("","ucs2")+1+Buffer.byteLength(_,"ucs2")+1+Buffer.byteLength(K,"ucs2"),w=new rD$.default(P,"ucs2");return w.writeUInt8(this.id),w.writeBVarchar(""),w.writeBVarchar(_),w.writeBVarchar(K),w.data},generateParameterLength($,q){if($.value==null)return dD$;let{columns:_}=$.value,K=Buffer.alloc(2);return K.writeUInt16LE(_.length,0),K},*generateParameterData($,q){if($.value==null){yield Y9,yield Y9;return}let{columns:_,rows:K}=$.value;for(let P=0,w=_.length;P<w;P++){let O=_[P],f=Buffer.alloc(6);f.writeUInt32LE(0,0),f.writeUInt16LE(0,4),yield f,yield O.type.generateTypeInfo(O),yield Buffer.from([0])}yield Y9;for(let P=0,w=K.length;P<w;P++){yield xD$;let O=K[P];for(let f=0,Y=O.length;f<Y;f++){let h=_[f],k=O[f],T;try{T=h.type.validate(k,$.collation)}catch(G){throw new nD$.InputError(`TVP column '${h.name}' has invalid data at row index ${P}`,{cause:G})}let p={value:T,length:h.length,scale:h.scale,precision:h.precision};yield h.type.generateParameterLength(p,q),yield*h.type.generateParameterData(p,q)}}yield Y9},validate:function($){if($==null)return null;if(typeof $!=="object")throw new TypeError("Invalid table.");if(!Array.isArray($.columns))throw new TypeError("Invalid table.");if(!Array.isArray($.rows))throw new TypeError("Invalid table.");return $}},_r$=Bi.default=ei;Fi.exports=ei});var Pg=y((qg,_g)=>{Object.defineProperty(qg,"__esModule",{value:!0});qg.default=void 0;var $g={id:98,type:"SSVARIANTTYPE",name:"Variant",declaration:function(){return"sql_variant"},generateTypeInfo(){throw new Error("not implemented")},generateParameterLength(){throw new Error("not implemented")},generateParameterData(){throw new Error("not implemented")},validate(){throw new Error("not implemented")}},Kr$=qg.default=$g;_g.exports=$g});var F3=y((Yg)=>{Object.defineProperty(Yg,"__esModule",{value:!0});Yg.typeByName=Yg.TYPES=Yg.TYPE=void 0;var jg=X$(lx()),zh=X$(qd()),fh=X$(Md()),Mh=X$(kd()),vh=X$(Xd()),Hh=X$(ud()),Yh=X$(bd()),hh=X$(sd()),kh=X$($b()),Th=X$(jb()),Ah=X$(kb()),Wh=X$(Gb()),Jh=X$(ub()),Xh=X$(db()),Dh=X$(ab()),ph=X$(uo()),yh=X$(Vo()),wg=X$(HP()),Sh=X$(go()),Og=X$(XY()),zg=X$(DY()),fg=X$(yY()),Mg=X$(e5()),vg=X$(B5()),Hg=X$(s5()),Gh=X$(to()),Zh=X$(Uo()),Nh=X$(Ki()),mh=X$(zi()),Eh=X$(Yi()),uh=X$(Wi()),Rh=X$(yi()),Lh=X$(mi()),Ch=X$(Ci()),nh=X$(di()),rh=X$(ai()),Vh=X$(si()),xh=X$(Qi()),dh=X$(Pg());function X$($){return $&&$.__esModule?$:{default:$}}var Pr$=Yg.TYPE={[jg.default.id]:jg.default,[zh.default.id]:zh.default,[fh.default.id]:fh.default,[Mh.default.id]:Mh.default,[vh.default.id]:vh.default,[Hh.default.id]:Hh.default,[Yh.default.id]:Yh.default,[hh.default.id]:hh.default,[kh.default.id]:kh.default,[Th.default.id]:Th.default,[Ah.default.id]:Ah.default,[Wh.default.id]:Wh.default,[Jh.default.id]:Jh.default,[Xh.default.id]:Xh.default,[Dh.default.id]:Dh.default,[ph.default.id]:ph.default,[yh.default.id]:yh.default,[wg.default.id]:wg.default,[Sh.default.id]:Sh.default,[Og.default.id]:Og.default,[zg.default.id]:zg.default,[fg.default.id]:fg.default,[Mg.default.id]:Mg.default,[vg.default.id]:vg.default,[Hg.default.id]:Hg.default,[Gh.default.id]:Gh.default,[Zh.default.id]:Zh.default,[Nh.default.id]:Nh.default,[mh.default.id]:mh.default,[Eh.default.id]:Eh.default,[uh.default.id]:uh.default,[Rh.default.id]:Rh.default,[Lh.default.id]:Lh.default,[Ch.default.id]:Ch.default,[nh.default.id]:nh.default,[rh.default.id]:rh.default,[Vh.default.id]:Vh.default,[xh.default.id]:xh.default,[dh.default.id]:dh.default},bD$=Yg.TYPES={TinyInt:zh.default,Bit:fh.default,SmallInt:Mh.default,Int:vh.default,SmallDateTime:Hh.default,Real:Yh.default,Money:hh.default,DateTime:kh.default,Float:Th.default,Decimal:Ah.default,Numeric:Wh.default,SmallMoney:Jh.default,BigInt:Xh.default,Image:Dh.default,Text:ph.default,UniqueIdentifier:yh.default,NText:Sh.default,VarBinary:Gh.default,VarChar:Zh.default,Binary:Nh.default,Char:mh.default,NVarChar:Eh.default,NChar:uh.default,Xml:Rh.default,Time:Lh.default,Date:Ch.default,DateTime2:nh.default,DateTimeOffset:rh.default,UDT:Vh.default,TVP:xh.default,Variant:dh.default},jr$=Yg.typeByName=bD$});var i6=y((kg)=>{Object.defineProperty(kg,"__esModule",{value:!0});kg.Result=kg.NotEnoughDataError=void 0;kg.readBVarByte=QD$;kg.readBVarChar=UD$;kg.readBigInt64LE=eD$;kg.readBigUInt64LE=sD$;kg.readDoubleLE=FD$;kg.readFloatLE=BD$;kg.readInt16LE=gD$;kg.readInt32LE=tD$;kg.readUInt16LE=oh;kg.readUInt24LE=aD$;kg.readUInt32BE=ID$;kg.readUInt32LE=cD$;kg.readUInt40LE=lD$;kg.readUInt8=bh;kg.readUNumeric128LE=Pp$;kg.readUNumeric64LE=_p$;kg.readUNumeric96LE=Kp$;kg.readUsVarByte=qp$;kg.readUsVarChar=$p$;class h6{constructor($,q){this.value=$,this.offset=q}}kg.Result=h6;class k6 extends Error{byteCount;constructor($){super();this.byteCount=$}}kg.NotEnoughDataError=k6;function bh($,q){if(q=+q,$.length<q+1)throw new k6(q+1);return new h6($.readUInt8(q),q+1)}function oh($,q){if(q=+q,$.length<q+2)throw new k6(q+2);return new h6($.readUInt16LE(q),q+2)}function gD$($,q){if(q=+q,$.length<q+2)throw new k6(q+2);return new h6($.readInt16LE(q),q+2)}function aD$($,q){if(q=+q,$.length<q+3)throw new k6(q+3);return new h6($.readUIntLE(q,3),q+3)}function cD$($,q){if(q=+q,$.length<q+4)throw new k6(q+4);return new h6($.readUInt32LE(q),q+4)}function ID$($,q){if(q=+q,$.length<q+4)throw new k6(q+4);return new h6($.readUInt32BE(q),q+4)}function lD$($,q){if(q=+q,$.length<q+5)throw new k6(q+5);return new h6($.readUIntLE(q,5),q+5)}function tD$($,q){if(q=+q,$.length<q+4)throw new k6(q+4);return new h6($.readInt32LE(q),q+4)}function sD$($,q){if(q=+q,$.length<q+8)throw new k6(q+8);return new h6($.readBigUInt64LE(q),q+8)}function eD$($,q){if(q=+q,$.length<q+8)throw new k6(q+8);return new h6($.readBigInt64LE(q),q+8)}function BD$($,q){if(q=+q,$.length<q+4)throw new k6(q+4);return new h6($.readFloatLE(q),q+4)}function FD$($,q){if(q=+q,$.length<q+8)throw new k6(q+8);return new h6($.readDoubleLE(q),q+8)}function UD$($,q){q=+q;let _;({offset:q,value:_}=bh($,q));let K=_*2;if($.length<q+K)throw new k6(q+K);return new h6($.toString("ucs2",q,q+K),q+K)}function QD$($,q){q=+q;let _;if({offset:q,value:_}=bh($,q),$.length<q+_)throw new k6(q+_);return new h6($.slice(q,q+_),q+_)}function $p$($,q){q=+q;let _;({offset:q,value:_}=oh($,q));let K=_*2;if($.length<q+K)throw new k6(q+K);return new h6($.toString("ucs2",q,q+K),q+K)}function qp$($,q){q=+q;let _;if({offset:q,value:_}=oh($,q),$.length<q+_)throw new k6(q+_);return new h6($.slice(q,q+_),q+_)}function _p$($,q){if(q=+q,$.length<q+8)throw new k6(q+8);let _=$.readUInt32LE(q),K=$.readUInt32LE(q+4);return new h6(4294967296*K+_,q+8)}function Kp$($,q){if(q=+q,$.length<q+12)throw new k6(q+12);let _=$.readUInt32LE(q),K=$.readUInt32LE(q+4),P=$.readUInt32LE(q+8);return new h6(_+4294967296*K+18446744073709552000*P,q+12)}function Pp$($,q){if(q=+q,$.length<q+16)throw new k6(q+16);let _=$.readUInt32LE(q),K=$.readUInt32LE(q+4),P=$.readUInt32LE(q+8),w=$.readUInt32LE(q+12);return new h6(_+4294967296*K+18446744073709552000*P+79228162514264340000000000000*w,q+16)}});var T9=y((Jg,k9)=>{Object.defineProperty(Jg,"__esModule",{value:!0});Jg.default=void 0;Jg.readCollation=h9;Jg.readMetadata=ih;var Gp$=JY(),Zp$=F3(),Ag=e7(),J$=i6();function h9($,q){if(q=+q,$.length<q+5)throw new J$.NotEnoughDataError(q+5);let _=Gp$.Collation.fromBuffer($.slice(q,q+5));return new J$.Result(_,q+5)}function Np$($,q){q=+q;let _;if({offset:q,value:_}=J$.readUInt8($,q),_!==1)return new J$.Result(void 0,q);let K;({offset:q,value:K}=J$.readBVarChar($,q));let P;({offset:q,value:P}=J$.readBVarChar($,q));let w;return{offset:q,value:w}=J$.readUsVarChar($,q),new J$.Result({dbname:K,owningSchema:P,xmlSchemaCollection:w},q)}function mp$($,q){let _;({offset:q,value:_}=J$.readUInt16LE($,q));let K;({offset:q,value:K}=J$.readBVarChar($,q));let P;({offset:q,value:P}=J$.readBVarChar($,q));let w;({offset:q,value:w}=J$.readBVarChar($,q));let O;return{offset:q,value:O}=J$.readUsVarChar($,q),new J$.Result({maxByteSize:_,dbname:K,owningSchema:P,typeName:w,assemblyName:O},q)}function ih($,q,_){let K;({offset:q,value:K}=(_.tdsVersion<"7_2"?J$.readUInt16LE:J$.readUInt32LE)($,q));let P;({offset:q,value:P}=J$.readUInt16LE($,q));let w;({offset:q,value:w}=J$.readUInt8($,q));let O=Zp$.TYPE[w];if(!O)throw new Error(Ag.sprintf("Unrecognised data type 0x%02X",w));switch(O.name){case"Null":case"TinyInt":case"SmallInt":case"Int":case"BigInt":case"Real":case"Float":case"SmallMoney":case"Money":case"Bit":case"SmallDateTime":case"DateTime":case"Date":return new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:void 0},q);case"IntN":case"FloatN":case"MoneyN":case"BitN":case"UniqueIdentifier":case"DateTimeN":{let f;return{offset:q,value:f}=J$.readUInt8($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:void 0,dataLength:f,schema:void 0,udtInfo:void 0},q)}case"Variant":{let f;return{offset:q,value:f}=J$.readUInt32LE($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:void 0,dataLength:f,schema:void 0,udtInfo:void 0},q)}case"VarChar":case"Char":case"NVarChar":case"NChar":{let f;({offset:q,value:f}=J$.readUInt16LE($,q));let Y;return{offset:q,value:Y}=h9($,q),new J$.Result({userType:K,flags:P,type:O,collation:Y,precision:void 0,scale:void 0,dataLength:f,schema:void 0,udtInfo:void 0},q)}case"Text":case"NText":{let f;({offset:q,value:f}=J$.readUInt32LE($,q));let Y;return{offset:q,value:Y}=h9($,q),new J$.Result({userType:K,flags:P,type:O,collation:Y,precision:void 0,scale:void 0,dataLength:f,schema:void 0,udtInfo:void 0},q)}case"VarBinary":case"Binary":{let f;return{offset:q,value:f}=J$.readUInt16LE($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:void 0,dataLength:f,schema:void 0,udtInfo:void 0},q)}case"Image":{let f;return{offset:q,value:f}=J$.readUInt32LE($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:void 0,dataLength:f,schema:void 0,udtInfo:void 0},q)}case"Xml":{let f;return{offset:q,value:f}=Np$($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:f,udtInfo:void 0},q)}case"Time":case"DateTime2":case"DateTimeOffset":{let f;return{offset:q,value:f}=J$.readUInt8($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:f,dataLength:void 0,schema:void 0,udtInfo:void 0},q)}case"NumericN":case"DecimalN":{let f;({offset:q,value:f}=J$.readUInt8($,q));let Y;({offset:q,value:Y}=J$.readUInt8($,q));let h;return{offset:q,value:h}=J$.readUInt8($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:Y,scale:h,dataLength:f,schema:void 0,udtInfo:void 0},q)}case"UDT":{let f;return{offset:q,value:f}=mp$($,q),new J$.Result({userType:K,flags:P,type:O,collation:void 0,precision:void 0,scale:void 0,dataLength:void 0,schema:void 0,udtInfo:f},q)}default:throw new Error(Ag.sprintf("Unrecognised type %s",O.name))}}function Wg($,q,_){(async()=>{while(!0){let K;try{K=ih($.buffer,$.position,q)}catch(P){if(P instanceof J$.NotEnoughDataError){await $.waitForChunk();continue}throw P}return $.position=K.offset,_(K.value)}})()}var zr$=Jg.default=Wg;k9.exports=Wg;k9.exports.readCollation=h9;k9.exports.readMetadata=ih});var Gg=y((pg,yg)=>{Object.defineProperty(pg,"__esModule",{value:!0});pg.default=void 0;var Rp$=T9(),Lp$=c6(),C8=i6();function Cp$($,q,_,K){if(!_.type.hasTableName)return new C8.Result(void 0,q);if(K.tdsVersion<"7_2")return C8.readUsVarChar($,q);let P;({offset:q,value:P}=C8.readUInt8($,q));let w=[];for(let O=0;O<P;O++){let f;({offset:q,value:f}=C8.readUsVarChar($,q)),w.push(f)}return new C8.Result(w,q)}function np$($,q,_,K,P){let w;if({offset:q,value:w}=C8.readBVarChar($,q),P.columnNameReplacer)return new C8.Result(P.columnNameReplacer(w,_,K),q);else if(P.camelCaseColumns)return new C8.Result(w.replace(/^[A-Z]/,function(O){return O.toLowerCase()}),q);else return new C8.Result(w,q)}function rp$($,q,_,K){let P;({offset:q,value:P}=Rp$.readMetadata($,q,_));let w;({offset:q,value:w}=Cp$($,q,P,_));let O;return{offset:q,value:O}=np$($,q,K,P,_),new C8.Result({userType:P.userType,flags:P.flags,type:P.type,collation:P.collation,precision:P.precision,scale:P.scale,udtInfo:P.udtInfo,dataLength:P.dataLength,schema:P.schema,colName:O,tableName:w},q)}async function Dg($){let q;while(!0){let K;try{({offset:K,value:q}=C8.readUInt16LE($.buffer,$.position))}catch(P){if(P instanceof C8.NotEnoughDataError){await $.waitForChunk();continue}throw P}$.position=K;break}let _=[];for(let K=0;K<q;K++)while(!0){let P,w;try{({offset:w,value:P}=rp$($.buffer,$.position,$.options,K))}catch(O){if(O instanceof C8.NotEnoughDataError){await $.waitForChunk();continue}throw O}$.position=w,_.push(P);break}return new Lp$.ColMetadataToken(_)}var fr$=pg.default=Dg;yg.exports=Dg});var Ng=y((Zg)=>{Object.defineProperty(Zg,"__esModule",{value:!0});Zg.doneInProcParser=xp$;Zg.doneParser=Vp$;Zg.doneProcParser=dp$;var gh=c6(),pK=i6(),U3={MORE:1,ERROR:2,INXACT:4,COUNT:16,ATTN:32,SRVERROR:256};function ah($,q,_){let K;({offset:q,value:K}=pK.readUInt16LE($,q));let P=!!(K&U3.MORE),w=!!(K&U3.ERROR),O=!!(K&U3.COUNT),f=!!(K&U3.ATTN),Y=!!(K&U3.SRVERROR),h;({offset:q,value:h}=pK.readUInt16LE($,q));let k;return{offset:q,value:k}=(_.tdsVersion<"7_2"?pK.readUInt32LE:pK.readBigUInt64LE)($,q),new pK.Result({more:P,sqlError:w,attention:f,serverError:Y,rowCount:O?Number(k):void 0,curCmd:h},q)}function Vp$($,q,_){let K;return{offset:q,value:K}=ah($,q,_),new pK.Result(new gh.DoneToken(K),q)}function xp$($,q,_){let K;return{offset:q,value:K}=ah($,q,_),new pK.Result(new gh.DoneInProcToken(K),q)}function dp$($,q,_){let K;return{offset:q,value:K}=ah($,q,_),new pK.Result(new gh.DoneProcToken(K),q)}});var Cg=y((ug,Rg)=>{Object.defineProperty(ug,"__esModule",{value:!0});ug.default=void 0;var mg=JY(),Rq=c6(),H6=i6(),gp$={1:{name:"DATABASE",event:"databaseChange"},2:{name:"LANGUAGE",event:"languageChange"},3:{name:"CHARSET",event:"charsetChange"},4:{name:"PACKET_SIZE",event:"packetSizeChange"},7:{name:"SQL_COLLATION",event:"sqlCollationChange"},8:{name:"BEGIN_TXN",event:"beginTransaction"},9:{name:"COMMIT_TXN",event:"commitTransaction"},10:{name:"ROLLBACK_TXN",event:"rollbackTransaction"},13:{name:"DATABASE_MIRRORING_PARTNER",event:"partnerNode"},17:{name:"TXN_ENDED"},18:{name:"RESET_CONNECTION",event:"resetConnection"},20:{name:"ROUTING_CHANGE",event:"routingChange"}};function ap$($,q,_,K){switch(K.name){case"DATABASE":case"LANGUAGE":case"CHARSET":case"PACKET_SIZE":case"DATABASE_MIRRORING_PARTNER":{let P;({offset:q,value:P}=H6.readBVarChar($,q));let w;switch({offset:q,value:w}=H6.readBVarChar($,q),K.name){case"PACKET_SIZE":return new H6.Result(new Rq.PacketSizeEnvChangeToken(parseInt(P),parseInt(w)),q);case"DATABASE":return new H6.Result(new Rq.DatabaseEnvChangeToken(P,w),q);case"LANGUAGE":return new H6.Result(new Rq.LanguageEnvChangeToken(P,w),q);case"CHARSET":return new H6.Result(new Rq.CharsetEnvChangeToken(P,w),q);case"DATABASE_MIRRORING_PARTNER":return new H6.Result(new Rq.DatabaseMirroringPartnerEnvChangeToken(P,w),q)}throw new Error("unreachable")}case"SQL_COLLATION":case"BEGIN_TXN":case"COMMIT_TXN":case"ROLLBACK_TXN":case"RESET_CONNECTION":{let P;({offset:q,value:P}=H6.readBVarByte($,q));let w;switch({offset:q,value:w}=H6.readBVarByte($,q),K.name){case"SQL_COLLATION":{let O=P.length?mg.Collation.fromBuffer(P):void 0,f=w.length?mg.Collation.fromBuffer(w):void 0;return new H6.Result(new Rq.CollationChangeToken(O,f),q)}case"BEGIN_TXN":return new H6.Result(new Rq.BeginTransactionEnvChangeToken(P,w),q);case"COMMIT_TXN":return new H6.Result(new Rq.CommitTransactionEnvChangeToken(P,w),q);case"ROLLBACK_TXN":return new H6.Result(new Rq.RollbackTransactionEnvChangeToken(P,w),q);case"RESET_CONNECTION":return new H6.Result(new Rq.ResetConnectionEnvChangeToken(P,w),q)}throw new Error("unreachable")}case"ROUTING_CHANGE":{let P;({offset:q,value:P}=H6.readUsVarByte($,q));let w;({offset:q,value:w}=H6.readUsVarByte($,q));let O=P.readUInt8(0);if(O!==0)throw new Error("Unknown protocol byte in routing change event");let f=P.readUInt16LE(1),Y=P.readUInt16LE(3),h=P.toString("ucs2",5,5+Y*2),k={protocol:O,port:f,server:h};return new H6.Result(new Rq.RoutingEnvChangeToken(k,w),q)}default:return console.error("Tedious > Unsupported ENVCHANGE type "+K.name),new H6.Result(void 0,q+_-1)}}function Eg($,q,_){let K;if({offset:q,value:K}=H6.readUInt16LE($,q),$.length<q+K)throw new H6.NotEnoughDataError(q+K);let P;({offset:q,value:P}=H6.readUInt8($,q));let w=gp$[P];if(!w)return console.error("Tedious > Unsupported ENVCHANGE type "+P),new H6.Result(void 0,q+K-1);return ap$($,q,K,w)}var vr$=ug.default=Eg;Rg.exports=Eg});var xg=y((Vg)=>{Object.defineProperty(Vg,"__esModule",{value:!0});Vg.errorParser=Ip$;Vg.infoParser=cp$;var n8=i6(),ng=c6();function rg($,q,_){let K;if({offset:q,value:K}=n8.readUInt16LE($,q),$.length<K+q)throw new n8.NotEnoughDataError(K+q);let P;({offset:q,value:P}=n8.readUInt32LE($,q));let w;({offset:q,value:w}=n8.readUInt8($,q));let O;({offset:q,value:O}=n8.readUInt8($,q));let f;({offset:q,value:f}=n8.readUsVarChar($,q));let Y;({offset:q,value:Y}=n8.readBVarChar($,q));let h;({offset:q,value:h}=n8.readBVarChar($,q));let k;return{offset:q,value:k}=_.tdsVersion<"7_2"?n8.readUInt16LE($,q):n8.readUInt32LE($,q),new n8.Result({number:P,state:w,class:O,message:f,serverName:Y,procName:h,lineNumber:k},q)}function cp$($,q,_){let K;return{offset:q,value:K}=rg($,q,_),new n8.Result(new ng.InfoMessageToken(K),q)}function Ip$($,q,_){let K;return{offset:q,value:K}=rg($,q,_),new n8.Result(new ng.ErrorMessageToken(K),q)}});var ag=y((og,ig)=>{Object.defineProperty(og,"__esModule",{value:!0});og.default=void 0;var ch=i6(),sp$=c6(),dg={STSURL:1,SPN:2};function ep$($){let q=0,_,K,P=$.readUInt32LE(q);q+=4;for(let w=0;w<P;w++){let O=$.readUInt8(q);q+=1;let f=$.readUInt32LE(q);q+=4;let Y=$.readUInt32LE(q);switch(q+=4,O){case dg.SPN:_=$.toString("ucs2",Y,Y+f);break;case dg.STSURL:K=$.toString("ucs2",Y,Y+f);break;default:break}}return{spn:_,stsurl:K}}function bg($,q,_){let K;if({offset:q,value:K}=ch.readUInt32LE($,q),$.length<q+K)throw new ch.NotEnoughDataError(q+K);let P=$.slice(q,q+K);q+=K;let{spn:w,stsurl:O}=ep$(P);return new ch.Result(new sp$.FedAuthInfoToken(w,O),q)}var Yr$=og.default=bg;ig.exports=bg});var sg=y((Ig,lg)=>{Object.defineProperty(Ig,"__esModule",{value:!0});Ig.default=void 0;var A9=i6(),Bp$=c6(),Ih={SESSIONRECOVERY:1,FEDAUTH:2,COLUMNENCRYPTION:4,GLOBALTRANSACTIONS:5,AZURESQLSUPPORT:8,UTF8_SUPPORT:10,TERMINATOR:255};function cg($,q,_){let K,P;while(!0){let w;if({value:w,offset:q}=A9.readUInt8($,q),w===Ih.TERMINATOR)return new A9.Result(new Bp$.FeatureExtAckToken(K,P),q);let O;if({value:O,offset:q}=A9.readUInt32LE($,q),$.length<q+O)throw new A9.NotEnoughDataError(q+O);let f=$.slice(q,q+O);switch(q+=O,w){case Ih.FEDAUTH:K=f;break;case Ih.UTF8_SUPPORT:P=!!f[0];break}}}var hr$=Ig.default=cg;lg.exports=cg});var Qg=y((Bg,Fg)=>{Object.defineProperty(Bg,"__esModule",{value:!0});Bg.default=void 0;var Fp$=c6(),Up$=u3(),z_=i6(),Qp$={0:"SQL_DFLT",1:"SQL_TSQL"};function eg($,q,_){let K;if({offset:q,value:K}=z_.readUInt16LE($,q),$.length<K+q)throw new z_.NotEnoughDataError(K+q);let P;({offset:q,value:P}=z_.readUInt8($,q));let w=Qp$[P],O;({offset:q,value:O}=z_.readUInt32BE($,q));let f=Up$.versionsByValue[O],Y;({offset:q,value:Y}=z_.readBVarChar($,q));let h;({offset:q,value:h}=z_.readUInt8($,q));let k;({offset:q,value:k}=z_.readUInt8($,q));let T;({offset:q,value:T}=z_.readUInt8($,q));let p;return{offset:q,value:p}=z_.readUInt8($,q),new z_.Result(new Fp$.LoginAckToken({interface:w,tdsVersion:f,progName:Y,progVersion:{major:h,minor:k,buildNumHi:T,buildNumLow:p}}),q)}var kr$=Bg.default=eg;Fg.exports=eg});var Pa=y((qa,_a)=>{Object.defineProperty(qa,"__esModule",{value:!0});qa.default=void 0;var $y$=c6(),W9=i6();function $a($,q,_){let K;if({offset:q,value:K}=W9.readUInt16LE($,q),$.length<q+K)throw new W9.NotEnoughDataError(q+K);let P=[];for(let w=0;w<K;w+=2){let O;({offset:q,value:O}=W9.readUInt16LE($,q)),P.push(O)}return new W9.Result(new $y$.OrderToken(P),q)}var Tr$=qa.default=$a;_a.exports=$a});var Ma=y((Oa,za)=>{Object.defineProperty(Oa,"__esModule",{value:!0});Oa.default=void 0;var ja=i6(),qy$=c6();function wa($,q,_){let K;return{value:K,offset:q}=ja.readInt32LE($,q),new ja.Result(new qy$.ReturnStatusToken(K),q)}var Ar$=Oa.default=wa;za.exports=wa});var D9=y((ya,X9)=>{Object.defineProperty(ya,"__esModule",{value:!0});ya.isPLPStream=Ta;ya.readPLPStream=Ja;ya.readValue=ka;var va=T9(),_y$=F3(),Ky$=Py$(DK()),Ya=e7(),Ha=jh(),t=i6();function Py$($){return $&&$.__esModule?$:{default:$}}var lh=65535,jy$=65535,wy$=3.3333333333333335,ha=1e4,Oy$=0xFFFFFFFFFFFFFFFFn,zy$=0xFFFFFFFFFFFFFFFEn,fy$="utf8";function th($,q){return t.readUInt8($,q)}function sh($,q){return t.readInt16LE($,q)}function eh($,q){return t.readInt32LE($,q)}function Bh($,q){let _;return{offset:q,value:_}=t.readBigInt64LE($,q),new t.Result(_.toString(),q)}function Fh($,q){return t.readFloatLE($,q)}function Uh($,q){return t.readDoubleLE($,q)}function Qh($,q){let _;return{offset:q,value:_}=t.readInt32LE($,q),new t.Result(_/ha,q)}function $k($,q){let _;({offset:q,value:_}=t.readInt32LE($,q));let K;return{offset:q,value:K}=t.readUInt32LE($,q),new t.Result((K+4294967296*_)/ha,q)}function qk($,q){let _;return{offset:q,value:_}=t.readUInt8($,q),new t.Result(!!_,q)}function ka($,q,_,K){switch(_.type.name){case"Null":return new t.Result(null,q);case"TinyInt":return th($,q);case"SmallInt":return sh($,q);case"Int":return eh($,q);case"BigInt":return Bh($,q);case"IntN":{let w;switch({offset:q,value:w}=t.readUInt8($,q),w){case 0:return new t.Result(null,q);case 1:return th($,q);case 2:return sh($,q);case 4:return eh($,q);case 8:return Bh($,q);default:throw new Error("Unsupported dataLength "+w+" for IntN")}}case"Real":return Fh($,q);case"Float":return Uh($,q);case"FloatN":{let w;switch({offset:q,value:w}=t.readUInt8($,q),w){case 0:return new t.Result(null,q);case 4:return Fh($,q);case 8:return Uh($,q);default:throw new Error("Unsupported dataLength "+w+" for FloatN")}}case"SmallMoney":return Qh($,q);case"Money":return $k($,q);case"MoneyN":{let w;switch({offset:q,value:w}=t.readUInt8($,q),w){case 0:return new t.Result(null,q);case 4:return Qh($,q);case 8:return $k($,q);default:throw new Error("Unsupported dataLength "+w+" for MoneyN")}}case"Bit":return qk($,q);case"BitN":{let w;switch({offset:q,value:w}=t.readUInt8($,q),w){case 0:return new t.Result(null,q);case 1:return qk($,q);default:throw new Error("Unsupported dataLength "+w+" for BitN")}}case"VarChar":case"Char":{let w=_.collation.codepage,O;if({offset:q,value:O}=t.readUInt16LE($,q),O===lh)return new t.Result(null,q);return _k($,q,O,w)}case"NVarChar":case"NChar":{let w;if({offset:q,value:w}=t.readUInt16LE($,q),w===lh)return new t.Result(null,q);return Kk($,q,w)}case"VarBinary":case"Binary":{let w;if({offset:q,value:w}=t.readUInt16LE($,q),w===lh)return new t.Result(null,q);return f_($,q,w)}case"Text":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);({offset:q}=f_($,q,w)),{offset:q}=f_($,q,8);let O;return{offset:q,value:O}=t.readUInt32LE($,q),_k($,q,O,_.collation.codepage)}case"NText":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);({offset:q}=f_($,q,w)),{offset:q}=f_($,q,8);let O;return{offset:q,value:O}=t.readUInt32LE($,q),Kk($,q,O)}case"Image":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);({offset:q}=f_($,q,w)),{offset:q}=f_($,q,8);let O;return{offset:q,value:O}=t.readUInt32LE($,q),f_($,q,O)}case"SmallDateTime":return Pk($,q,K.useUTC);case"DateTime":return jk($,q,K.useUTC);case"DateTimeN":{let w;switch({offset:q,value:w}=t.readUInt8($,q),w){case 0:return new t.Result(null,q);case 4:return Pk($,q,K.useUTC);case 8:return jk($,q,K.useUTC);default:throw new Error("Unsupported dataLength "+w+" for DateTimeN")}}case"Time":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);return J9($,q,w,_.scale,K.useUTC)}case"Date":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);return Xa($,q,K.useUTC)}case"DateTime2":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);return Da($,q,w,_.scale,K.useUTC)}case"DateTimeOffset":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);return pa($,q,w,_.scale)}case"NumericN":case"DecimalN":{let w;if({offset:q,value:w}=t.readUInt8($,q),w===0)return new t.Result(null,q);return Wa($,q,w,_.precision,_.scale)}case"UniqueIdentifier":{let w;switch({offset:q,value:w}=t.readUInt8($,q),w){case 0:return new t.Result(null,q);case 16:return Aa($,q,K);default:throw new Error(Ya.sprintf("Unsupported guid size %d",w-1))}}case"Variant":{let w;if({offset:q,value:w}=t.readUInt32LE($,q),w===0)return new t.Result(null,q);return My$($,q,K,w)}default:throw new Error("Invalid type!")}}function Ta($){switch($.type.name){case"VarChar":case"NVarChar":case"VarBinary":return $.dataLength===jy$;case"Xml":return!0;case"UDT":return!0}}function Aa($,q,_){let K;return{value:K,offset:q}=f_($,q,16),new t.Result(_.lowerCaseGuids?Ha.bufferToLowerCaseGuid(K):Ha.bufferToUpperCaseGuid(K),q)}function Wa($,q,_,K,P){let w;({offset:q,value:w}=t.readUInt8($,q)),w=w===1?1:-1;let O;if(_===5)({offset:q,value:O}=t.readUInt32LE($,q));else if(_===9)({offset:q,value:O}=t.readUNumeric64LE($,q));else if(_===13)({offset:q,value:O}=t.readUNumeric96LE($,q));else if(_===17)({offset:q,value:O}=t.readUNumeric128LE($,q));else throw new Error(Ya.sprintf("Unsupported numeric dataLength %d",_));return new t.Result(O*w/Math.pow(10,P),q)}function My$($,q,_,K){let P;({value:P,offset:q}=t.readUInt8($,q));let w=_y$.TYPE[P],O;switch({value:O,offset:q}=t.readUInt8($,q),K=K-O-2,w.name){case"UniqueIdentifier":return Aa($,q,_);case"Bit":return qk($,q);case"TinyInt":return th($,q);case"SmallInt":return sh($,q);case"Int":return eh($,q);case"BigInt":return Bh($,q);case"SmallDateTime":return Pk($,q,_.useUTC);case"DateTime":return jk($,q,_.useUTC);case"Real":return Fh($,q);case"Float":return Uh($,q);case"SmallMoney":return Qh($,q);case"Money":return $k($,q);case"Date":return Xa($,q,_.useUTC);case"Time":{let f;return{value:f,offset:q}=t.readUInt8($,q),J9($,q,K,f,_.useUTC)}case"DateTime2":{let f;return{value:f,offset:q}=t.readUInt8($,q),Da($,q,K,f,_.useUTC)}case"DateTimeOffset":{let f;return{value:f,offset:q}=t.readUInt8($,q),pa($,q,K,f)}case"VarBinary":case"Binary":return{offset:q}=t.readUInt16LE($,q),f_($,q,K);case"NumericN":case"DecimalN":{let f;({value:f,offset:q}=t.readUInt8($,q));let Y;return{value:Y,offset:q}=t.readUInt8($,q),Wa($,q,K,f,Y)}case"VarChar":case"Char":{({offset:q}=t.readUInt16LE($,q));let f;return{value:f,offset:q}=va.readCollation($,q),_k($,q,K,f.codepage)}case"NVarChar":case"NChar":return{offset:q}=t.readUInt16LE($,q),{offset:q}=va.readCollation($,q),Kk($,q,K);default:throw new Error("Invalid type!")}}function f_($,q,_){if($.length<q+_)throw new t.NotEnoughDataError(q+_);return new t.Result($.slice(q,q+_),q+_)}function _k($,q,_,K){if($.length<q+_)throw new t.NotEnoughDataError(q+_);return new t.Result(Ky$.default.decode($.slice(q,q+_),K??fy$),q+_)}function Kk($,q,_){if($.length<q+_)throw new t.NotEnoughDataError(q+_);return new t.Result($.toString("ucs2",q,q+_),q+_)}async function Ja($){while($.buffer.length<$.position+8)await $.waitForChunk();let q=$.buffer.readBigUInt64LE($.position);if($.position+=8,q===Oy$)return null;let _=[],K=0;while(!0){while($.buffer.length<$.position+4)await $.waitForChunk();let P=$.buffer.readUInt32LE($.position);if($.position+=4,!P)break;while($.buffer.length<$.position+P)await $.waitForChunk();_.push($.buffer.slice($.position,$.position+P)),$.position+=P,K+=P}if(q!==zy$){if(K!==Number(q))throw new Error("Partially Length-prefixed Bytes unmatched lengths : expected "+q+", but got "+K+" bytes")}return _}function Pk($,q,_){let K;({offset:q,value:K}=t.readUInt16LE($,q));let P;({offset:q,value:P}=t.readUInt16LE($,q));let w;if(_)w=new Date(Date.UTC(1900,0,1+K,0,P));else w=new Date(1900,0,1+K,0,P);return new t.Result(w,q)}function jk($,q,_){let K;({offset:q,value:K}=t.readInt32LE($,q));let P;({offset:q,value:P}=t.readInt32LE($,q));let w=Math.round(P*wy$),O;if(_)O=new Date(Date.UTC(1900,0,1+K,0,0,0,w));else O=new Date(1900,0,1+K,0,0,0,w);return new t.Result(O,q)}function J9($,q,_,K,P){let w;switch(_){case 3:{({value:w,offset:q}=t.readUInt24LE($,q));break}case 4:{({value:w,offset:q}=t.readUInt32LE($,q));break}case 5:{({value:w,offset:q}=t.readUInt40LE($,q));break}default:throw new Error("unreachable")}if(K<7)for(let f=K;f<7;f++)w*=10;let O;if(P)O=new Date(Date.UTC(1970,0,1,0,0,0,w/1e4));else O=new Date(1970,0,1,0,0,0,w/1e4);return Object.defineProperty(O,"nanosecondsDelta",{enumerable:!1,value:w%1e4/Math.pow(10,7)}),new t.Result(O,q)}function Xa($,q,_){let K;if({offset:q,value:K}=t.readUInt24LE($,q),_)return new t.Result(new Date(Date.UTC(2000,0,K-730118)),q);else return new t.Result(new Date(2000,0,K-730118),q)}function Da($,q,_,K,P){let w;({offset:q,value:w}=J9($,q,_-3,K,P));let O;({offset:q,value:O}=t.readUInt24LE($,q));let f;if(P)f=new Date(Date.UTC(2000,0,O-730118,0,0,0,+w));else f=new Date(2000,0,O-730118,w.getHours(),w.getMinutes(),w.getSeconds(),w.getMilliseconds());return Object.defineProperty(f,"nanosecondsDelta",{enumerable:!1,value:w.nanosecondsDelta}),new t.Result(f,q)}function pa($,q,_,K){let P;({offset:q,value:P}=J9($,q,_-5,K,!0));let w;({offset:q,value:w}=t.readUInt24LE($,q)),{offset:q}=t.readUInt16LE($,q);let O=new Date(Date.UTC(2000,0,w-730118,0,0,0,+P));return Object.defineProperty(O,"nanosecondsDelta",{enumerable:!1,value:P.nanosecondsDelta}),new t.Result(O,q)}ya.readValue=ka;ya.isPLPStream=Ta;ya.readPLPStream=Ja});var La=y((Ea,ua)=>{Object.defineProperty(Ea,"__esModule",{value:!0});Ea.default=void 0;var vy$=c6(),Hy$=T9(),wk=D9(),Q3=i6(),Yy$=hy$(DK());function Na($){if(typeof WeakMap!="function")return null;var q=new WeakMap,_=new WeakMap;return(Na=function(K){return K?_:q})($)}function hy$($,q){if(!q&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var _=Na(q);if(_&&_.has($))return _.get($);var K={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in $)if(w!=="default"&&Object.prototype.hasOwnProperty.call($,w)){var O=P?Object.getOwnPropertyDescriptor($,w):null;O&&(O.get||O.set)?Object.defineProperty(K,w,O):K[w]=$[w]}return K.default=$,_&&_.set($,K),K}async function ma($){let q,_,K;while(!0){let{buffer:w,position:O}=$;try{if({offset:O,value:_}=Q3.readUInt16LE(w,O),{offset:O,value:q}=Q3.readBVarChar(w,O),{offset:O}=Q3.readUInt8(w,O),{offset:O,value:K}=Hy$.readMetadata(w,O,$.options),q.charAt(0)==="@")q=q.slice(1)}catch(f){if(f instanceof Q3.NotEnoughDataError){await $.waitForChunk();continue}throw f}$.position=O;break}let P;while(!0){let{buffer:w,position:O}=$;if(wk.isPLPStream(K)){let f=await wk.readPLPStream($);if(f===null)P=f;else if(K.type.name==="NVarChar"||K.type.name==="Xml")P=Buffer.concat(f).toString("ucs2");else if(K.type.name==="VarChar")P=Yy$.decode(Buffer.concat(f),K.collation?.codepage??"utf8");else if(K.type.name==="VarBinary"||K.type.name==="UDT")P=Buffer.concat(f)}else{try{({value:P,offset:O}=wk.readValue(w,O,K,$.options))}catch(f){if(f instanceof Q3.NotEnoughDataError){await $.waitForChunk();continue}throw f}$.position=O}break}return new vy$.ReturnValueToken({paramOrdinal:_,paramName:q,metadata:K,value:P})}var Wr$=Ea.default=ma;ua.exports=ma});var ba=y((Va,xa)=>{Object.defineProperty(Va,"__esModule",{value:!0});Va.default=void 0;var Ca=c6(),ky$=Ay$(DK()),Ok=D9(),Ty$=i6();function na($){if(typeof WeakMap!="function")return null;var q=new WeakMap,_=new WeakMap;return(na=function(K){return K?_:q})($)}function Ay$($,q){if(!q&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var _=na(q);if(_&&_.has($))return _.get($);var K={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in $)if(w!=="default"&&Object.prototype.hasOwnProperty.call($,w)){var O=P?Object.getOwnPropertyDescriptor($,w):null;O&&(O.get||O.set)?Object.defineProperty(K,w,O):K[w]=$[w]}return K.default=$,_&&_.set($,K),K}async function ra($){let q=[];for(let _ of $.colMetadata)while(!0){if(Ok.isPLPStream(_)){let K=await Ok.readPLPStream($);if(K===null)q.push({value:K,metadata:_});else if(_.type.name==="NVarChar"||_.type.name==="Xml")q.push({value:Buffer.concat(K).toString("ucs2"),metadata:_});else if(_.type.name==="VarChar")q.push({value:ky$.decode(Buffer.concat(K),_.collation?.codepage??"utf8"),metadata:_});else if(_.type.name==="VarBinary"||_.type.name==="UDT")q.push({value:Buffer.concat(K),metadata:_})}else{let K;try{K=Ok.readValue($.buffer,$.position,_,$.options)}catch(P){if(P instanceof Ty$.NotEnoughDataError){await $.waitForChunk();continue}throw P}$.position=K.offset,q.push({value:K.value,metadata:_})}break}if($.options.useColumnNames){let _=Object.create(null);return q.forEach((K)=>{let P=K.metadata.colName;if(_[P]==null)_[P]=K}),new Ca.RowToken(_)}else return new Ca.RowToken(q)}var Jr$=Va.default=ra;xa.exports=ra});var la=y((aa,ca)=>{Object.defineProperty(aa,"__esModule",{value:!0});aa.default=void 0;var oa=c6(),Wy$=Xy$(DK()),zk=D9(),Jy$=i6();function ia($){if(typeof WeakMap!="function")return null;var q=new WeakMap,_=new WeakMap;return(ia=function(K){return K?_:q})($)}function Xy$($,q){if(!q&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var _=ia(q);if(_&&_.has($))return _.get($);var K={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in $)if(w!=="default"&&Object.prototype.hasOwnProperty.call($,w)){var O=P?Object.getOwnPropertyDescriptor($,w):null;O&&(O.get||O.set)?Object.defineProperty(K,w,O):K[w]=$[w]}return K.default=$,_&&_.set($,K),K}async function ga($){let q=$.colMetadata,_=[],K=[],P=Math.ceil(q.length/8);while($.buffer.length-$.position<P)await $.waitForChunk();let w=$.buffer.slice($.position,$.position+P);$.position+=P;for(let O=0,f=w.length;O<f;O++){let Y=w[O];K.push(Y&1?!0:!1),K.push(Y&2?!0:!1),K.push(Y&4?!0:!1),K.push(Y&8?!0:!1),K.push(Y&16?!0:!1),K.push(Y&32?!0:!1),K.push(Y&64?!0:!1),K.push(Y&128?!0:!1)}for(let O=0;O<q.length;O++){let f=q[O];if(K[O]){_.push({value:null,metadata:f});continue}while(!0){if(zk.isPLPStream(f)){let Y=await zk.readPLPStream($);if(Y===null)_.push({value:Y,metadata:f});else if(f.type.name==="NVarChar"||f.type.name==="Xml")_.push({value:Buffer.concat(Y).toString("ucs2"),metadata:f});else if(f.type.name==="VarChar")_.push({value:Wy$.decode(Buffer.concat(Y),f.collation?.codepage??"utf8"),metadata:f});else if(f.type.name==="VarBinary"||f.type.name==="UDT")_.push({value:Buffer.concat(Y),metadata:f})}else{let Y;try{Y=zk.readValue($.buffer,$.position,f,$.options)}catch(h){if(h instanceof Jy$.NotEnoughDataError){await $.waitForChunk();continue}throw h}$.position=Y.offset,_.push({value:Y.value,metadata:f})}break}}if($.options.useColumnNames){let O=Object.create(null);return _.forEach((f)=>{let Y=f.metadata.colName;if(O[Y]==null)O[Y]=f}),new oa.NBCRowToken(O)}else return new oa.NBCRowToken(_)}var Xr$=aa.default=ga;ca.exports=ga});var Fa=y((sa,ea)=>{Object.defineProperty(sa,"__esModule",{value:!0});sa.default=void 0;var fk=i6(),Dy$=c6();function py$($){let q={};return q.magic=$.slice(0,8).toString("utf8"),q.type=$.readInt32LE(8),q.domainLen=$.readInt16LE(12),q.domainMax=$.readInt16LE(14),q.domainOffset=$.readInt32LE(16),q.flags=$.readInt32LE(20),q.nonce=$.slice(24,32),q.zeroes=$.slice(32,40),q.targetLen=$.readInt16LE(40),q.targetMax=$.readInt16LE(42),q.targetOffset=$.readInt32LE(44),q.oddData=$.slice(48,56),q.domain=$.slice(56,56+q.domainLen).toString("ucs2"),q.target=$.slice(56+q.domainLen,56+q.domainLen+q.targetLen),q}function ta($,q,_){let K;if({offset:q,value:K}=fk.readUInt16LE($,q),$.length<q+K)throw new fk.NotEnoughDataError(q+K);let P=$.slice(q,q+K);return q+=K,new fk.Result(new Dy$.SSPIToken(py$(P),P),q)}var Dr$=sa.default=ta;ea.exports=ta});var _c=y((Qa,$c)=>{Object.defineProperty(Qa,"__esModule",{value:!0});Qa.default=void 0;var $8=c6(),yy$=Lq(Gg()),Mk=Ng(),Sy$=Lq(Cg()),Ua=xg(),Gy$=Lq(ag()),Zy$=Lq(sg()),Ny$=Lq(Qg()),my$=Lq(Pa()),Ey$=Lq(Ma()),uy$=Lq(La()),Ry$=Lq(ba()),Ly$=Lq(la()),Cy$=Lq(Fa()),wq=i6();function Lq($){return $&&$.__esModule?$:{default:$}}class p9{debug;colMetadata;options;iterator;buffer;position;static async*parseTokens($,q,_,K=[]){let P=new p9($,q,_);P.colMetadata=K;while(!0){try{await P.waitForChunk()}catch(w){if(P.position===P.buffer.length)return;throw w}while(P.buffer.length>=P.position+1){let w=P.buffer.readUInt8(P.position);P.position+=1;let O=P.readToken(w);if(O!==void 0)yield O}}}readToken($){switch($){case $8.TYPE.DONE:return this.readDoneToken();case $8.TYPE.DONEPROC:return this.readDoneProcToken();case $8.TYPE.DONEINPROC:return this.readDoneInProcToken();case $8.TYPE.ERROR:return this.readErrorToken();case $8.TYPE.INFO:return this.readInfoToken();case $8.TYPE.ENVCHANGE:return this.readEnvChangeToken();case $8.TYPE.LOGINACK:return this.readLoginAckToken();case $8.TYPE.RETURNSTATUS:return this.readReturnStatusToken();case $8.TYPE.ORDER:return this.readOrderToken();case $8.TYPE.FEDAUTHINFO:return this.readFedAuthInfoToken();case $8.TYPE.SSPI:return this.readSSPIToken();case $8.TYPE.COLMETADATA:return this.readColMetadataToken();case $8.TYPE.RETURNVALUE:return this.readReturnValueToken();case $8.TYPE.ROW:return this.readRowToken();case $8.TYPE.NBCROW:return this.readNbcRowToken();case $8.TYPE.FEATUREEXTACK:return this.readFeatureExtAckToken();default:throw new Error("Unknown type: "+$)}}readFeatureExtAckToken(){let $;try{$=Zy$.default(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readFeatureExtAckToken()});throw q}return this.position=$.offset,$.value}async readNbcRowToken(){return await Ly$.default(this)}async readReturnValueToken(){return await uy$.default(this)}async readColMetadataToken(){let $=await yy$.default(this);return this.colMetadata=$.columns,$}readSSPIToken(){let $;try{$=Cy$.default(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readSSPIToken()});throw q}return this.position=$.offset,$.value}readFedAuthInfoToken(){let $;try{$=Gy$.default(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readFedAuthInfoToken()});throw q}return this.position=$.offset,$.value}readOrderToken(){let $;try{$=my$.default(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readOrderToken()});throw q}return this.position=$.offset,$.value}readReturnStatusToken(){let $;try{$=Ey$.default(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readReturnStatusToken()});throw q}return this.position=$.offset,$.value}readLoginAckToken(){let $;try{$=Ny$.default(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readLoginAckToken()});throw q}return this.position=$.offset,$.value}readEnvChangeToken(){let $;try{$=Sy$.default(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readEnvChangeToken()});throw q}return this.position=$.offset,$.value}readRowToken(){return Ry$.default(this)}readInfoToken(){let $;try{$=Ua.infoParser(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readInfoToken()});throw q}return this.position=$.offset,$.value}readErrorToken(){let $;try{$=Ua.errorParser(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readErrorToken()});throw q}return this.position=$.offset,$.value}readDoneInProcToken(){let $;try{$=Mk.doneInProcParser(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readDoneInProcToken()});throw q}return this.position=$.offset,$.value}readDoneProcToken(){let $;try{$=Mk.doneProcParser(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readDoneProcToken()});throw q}return this.position=$.offset,$.value}readDoneToken(){let $;try{$=Mk.doneParser(this.buffer,this.position,this.options)}catch(q){if(q instanceof wq.NotEnoughDataError)return this.waitForChunk().then(()=>{return this.readDoneToken()});throw q}return this.position=$.offset,$.value}constructor($,q,_){this.debug=q,this.colMetadata=[],this.options=_,this.iterator=($[Symbol.asyncIterator]||$[Symbol.iterator]).call($),this.buffer=Buffer.alloc(0),this.position=0}async waitForChunk(){let $=await this.iterator.next();if($.done)throw new Error("unexpected end of data");if(this.position===this.buffer.length)this.buffer=$.value;else this.buffer=Buffer.concat([this.buffer.slice(this.position),$.value]);this.position=0}}var pr$=Qa.default=p9;$c.exports=p9});var wc=y((Pc)=>{Object.defineProperty(Pc,"__esModule",{value:!0});Pc.Parser=void 0;var ny$=i("events"),ry$=xy$(_c()),Vy$=i("stream");function xy$($){return $&&$.__esModule?$:{default:$}}class Kc extends ny$.EventEmitter{constructor($,q,_,K){super();this.debug=q,this.options=K,this.parser=Vy$.Readable.from(ry$.default.parseTokens($,this.debug,this.options)),this.parser.on("data",(P)=>{q.token(P),_[P.handlerName](P)}),this.parser.on("drain",()=>{this.emit("drain")}),this.parser.on("end",()=>{this.emit("end")})}pause(){return this.parser.pause()}resume(){return this.parser.resume()}}Pc.Parser=Kc});var vk=y((fc)=>{Object.defineProperty(fc,"__esModule",{value:!0});fc.Transaction=fc.OPERATION_TYPE=fc.ISOLATION_LEVEL=void 0;fc.assertValidIsolationLevel=by$;fc.isolationLevelByValue=void 0;var y9=dy$(k8()),S9=v5();function dy$($){return $&&$.__esModule?$:{default:$}}var G9=fc.OPERATION_TYPE={TM_GET_DTC_ADDRESS:0,TM_PROPAGATE_XACT:1,TM_BEGIN_XACT:5,TM_PROMOTE_XACT:6,TM_COMMIT_XACT:7,TM_ROLLBACK_XACT:8,TM_SAVE_XACT:9},yK=fc.ISOLATION_LEVEL={NO_CHANGE:0,READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5},Oc=fc.isolationLevelByValue={};for(let $ in yK){let q=yK[$];Oc[q]=$}function by$($,q){if(typeof $!=="number")throw new TypeError(`The "${q}" ${q.includes(".")?"property":"argument"} must be of type number. Received type ${typeof $} (${$})`);if(!Number.isInteger($))throw new RangeError(`The value of "${q}" is out of range. It must be an integer. Received: ${$}`);if(!($>=0&&$<=5))throw new RangeError(`The value of "${q}" is out of range. It must be >= 0 && <= 5. Received: ${$}`)}class zc{constructor($,q=yK.NO_CHANGE){this.name=$,this.isolationLevel=q,this.outstandingRequestCount=1}beginPayload($){let q=new y9.default(100,"ucs2");return S9.writeToTrackingBuffer(q,$,this.outstandingRequestCount),q.writeUShort(G9.TM_BEGIN_XACT),q.writeUInt8(this.isolationLevel),q.writeUInt8(this.name.length*2),q.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield q.data},toString:()=>{return"Begin Transaction: name="+this.name+", isolationLevel="+Oc[this.isolationLevel]}}}commitPayload($){let q=new y9.default(100,"ascii");return S9.writeToTrackingBuffer(q,$,this.outstandingRequestCount),q.writeUShort(G9.TM_COMMIT_XACT),q.writeUInt8(this.name.length*2),q.writeString(this.name,"ucs2"),q.writeUInt8(0),{*[Symbol.iterator](){yield q.data},toString:()=>{return"Commit Transaction: name="+this.name}}}rollbackPayload($){let q=new y9.default(100,"ascii");return S9.writeToTrackingBuffer(q,$,this.outstandingRequestCount),q.writeUShort(G9.TM_ROLLBACK_XACT),q.writeUInt8(this.name.length*2),q.writeString(this.name,"ucs2"),q.writeUInt8(0),{*[Symbol.iterator](){yield q.data},toString:()=>{return"Rollback Transaction: name="+this.name}}}savePayload($){let q=new y9.default(100,"ascii");return S9.writeToTrackingBuffer(q,$,this.outstandingRequestCount),q.writeUShort(G9.TM_SAVE_XACT),q.writeUInt8(this.name.length*2),q.writeString(this.name,"ucs2"),{*[Symbol.iterator](){yield q.data},toString:()=>{return"Save Transaction: name="+this.name}}}isolationLevelToTSQL(){switch(this.isolationLevel){case yK.READ_UNCOMMITTED:return"READ UNCOMMITTED";case yK.READ_COMMITTED:return"READ COMMITTED";case yK.REPEATABLE_READ:return"REPEATABLE READ";case yK.SERIALIZABLE:return"SERIALIZABLE";case yK.SNAPSHOT:return"SNAPSHOT"}return""}}fc.Transaction=zc});var Yc=y((Hc)=>{Object.defineProperty(Hc,"__esModule",{value:!0});Hc.connectInParallel=cy$;Hc.connectInSequence=Iy$;Hc.lookupAllAddresses=Yk;var Z9=Hk(i("net")),ay$=Hk(i("node:url")),WP=Hk(K5());function Hk($){return $&&$.__esModule?$:{default:$}}async function cy$($,q,_){if(_.aborted)throw new WP.default;let K=await Yk($.host,q,_);return await new Promise((P,w)=>{let O=new Array(K.length),f=[];function Y(T){if(f.push(T),this.removeListener("error",Y),this.removeListener("connect",h),this.destroy(),f.length===K.length)_.removeEventListener("abort",k),w(new AggregateError(f,"Could not connect (parallel)"))}function h(){_.removeEventListener("abort",k);for(let T=0;T<O.length;T++){let p=O[T];if(this===p)continue;p.removeListener("error",Y),p.removeListener("connect",h),p.destroy()}P(this)}let k=()=>{for(let T=0;T<O.length;T++){let p=O[T];p.removeListener("error",Y),p.removeListener("connect",h),p.destroy()}w(new WP.default)};for(let T=0,p=K.length;T<p;T++){let G=O[T]=Z9.default.connect({...$,host:K[T].address,family:K[T].family});G.on("error",Y),G.on("connect",h)}_.addEventListener("abort",k,{once:!0})})}async function Iy$($,q,_){if(_.aborted)throw new WP.default;let K=[],P=await Yk($.host,q,_);for(let w of P)try{return await new Promise((O,f)=>{let Y=Z9.default.connect({...$,host:w.address,family:w.family}),h=()=>{Y.removeListener("error",k),Y.removeListener("connect",T),Y.destroy(),f(new WP.default)},k=(p)=>{_.removeEventListener("abort",h),Y.removeListener("error",k),Y.removeListener("connect",T),Y.destroy(),f(p)},T=()=>{_.removeEventListener("abort",h),Y.removeListener("error",k),Y.removeListener("connect",T),O(Y)};_.addEventListener("abort",h,{once:!0}),Y.on("error",k),Y.on("connect",T)})}catch(O){if(O instanceof Error&&O.name==="AbortError")throw O;K.push(O);continue}throw new AggregateError(K,"Could not connect (sequence)")}async function Yk($,q,_){if(_.aborted)throw new WP.default;if(Z9.default.isIPv6($))return[{address:$,family:6}];else if(Z9.default.isIPv4($))return[{address:$,family:4}];else return await new Promise((K,P)=>{let w=()=>{P(new WP.default)};_.addEventListener("abort",w);let O=ay$.default.domainToASCII($);q(O===""?$:O,{all:!0},(f,Y)=>{_.removeEventListener("abort",w),f?P(f):K(Y)})})}});var hk=y((hc)=>{Object.defineProperty(hc,"__esModule",{value:!0});hc.name=void 0;var Zr$=hc.name="Tedious"});var Ac=y((Tc)=>{Object.defineProperty(Tc,"__esModule",{value:!0});Tc.createNTLMRequest=ey$;var Oq={NTLM_NegotiateUnicode:1,NTLM_NegotiateOEM:2,NTLM_RequestTarget:4,NTLM_Unknown9:8,NTLM_NegotiateSign:16,NTLM_NegotiateSeal:32,NTLM_NegotiateDatagram:64,NTLM_NegotiateLanManagerKey:128,NTLM_Unknown8:256,NTLM_NegotiateNTLM:512,NTLM_NegotiateNTOnly:1024,NTLM_Anonymous:2048,NTLM_NegotiateOemDomainSupplied:4096,NTLM_NegotiateOemWorkstationSupplied:8192,NTLM_Unknown6:16384,NTLM_NegotiateAlwaysSign:32768,NTLM_TargetTypeDomain:65536,NTLM_TargetTypeServer:131072,NTLM_TargetTypeShare:262144,NTLM_NegotiateExtendedSecurity:524288,NTLM_NegotiateIdentify:1048576,NTLM_Unknown5:2097152,NTLM_RequestNonNTSessionKey:4194304,NTLM_NegotiateTargetInfo:8388608,NTLM_Unknown4:16777216,NTLM_NegotiateVersion:33554432,NTLM_Unknown3:67108864,NTLM_Unknown2:134217728,NTLM_Unknown1:268435456,NTLM_Negotiate128:536870912,NTLM_NegotiateKeyExchange:1073741824,NTLM_Negotiate56:2147483648};function ey$($){let q=escape($.domain.toUpperCase()),_=$.workstation?escape($.workstation.toUpperCase()):"",K=Oq.NTLM_NegotiateUnicode+Oq.NTLM_NegotiateOEM+Oq.NTLM_RequestTarget+Oq.NTLM_NegotiateNTLM+Oq.NTLM_NegotiateOemDomainSupplied+Oq.NTLM_NegotiateOemWorkstationSupplied+Oq.NTLM_NegotiateAlwaysSign+Oq.NTLM_NegotiateVersion+Oq.NTLM_NegotiateExtendedSecurity+Oq.NTLM_Negotiate128+Oq.NTLM_Negotiate56;if(_==="")K-=Oq.NTLM_NegotiateOemWorkstationSupplied;let P=Buffer.alloc(40),w=[P],O=0;return O+=P.write("NTLMSSP",O,7,"ascii"),O=P.writeUInt8(0,O),O=P.writeUInt32LE(1,O),O=P.writeUInt32LE(K,O),O=P.writeUInt16LE(q.length,O),O=P.writeUInt16LE(q.length,O),O=P.writeUInt32LE(P.length+_.length,O),O=P.writeUInt16LE(_.length,O),O=P.writeUInt16LE(_.length,O),O=P.writeUInt32LE(P.length,O),O=P.writeUInt8(5,O),O=P.writeUInt8(0,O),O=P.writeUInt16LE(2195,O),O=P.writeUInt8(0,O),O=P.writeUInt8(0,O),O=P.writeUInt8(0,O),P.writeUInt8(15,O),w.push(Buffer.from(_,"ascii")),w.push(Buffer.from(q,"ascii")),Buffer.concat(w)}});var Dc=y((Jc)=>{Object.defineProperty(Jc,"__esModule",{value:!0});Jc.BulkLoadPayload=void 0;class Wc{constructor($){this.bulkLoad=$,this.iterator=this.bulkLoad.rowToPacketTransform[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterator}toString($=""){return $+"BulkLoad"}}Jc.BulkLoadPayload=Wc});var Zc=y((yc,Sc)=>{Object.defineProperty(yc,"__esModule",{value:!0});yc.default=void 0;var pc={Sp_Cursor:1,Sp_CursorOpen:2,Sp_CursorPrepare:3,Sp_CursorExecute:4,Sp_CursorPrepExec:5,Sp_CursorUnprepare:6,Sp_CursorFetch:7,Sp_CursorOption:8,Sp_CursorClose:9,Sp_ExecuteSql:10,Sp_Prepare:11,Sp_Execute:12,Sp_PrepExec:13,Sp_PrepExecRpc:14,Sp_Unprepare:15},ur$=yc.default=pc;Sc.exports=pc});var Nc=y((Rr$,Fy$)=>{Fy$.exports={author:"Mike D Pilsbury <mike.pilsbury@gmail.com>",contributors:["Alex Robson","Arthur Schreiber","Bret Copeland <bret@atlantisflight.org> (https://github.com/bretcope)","Bryan Ross <bryan@rossipedia.com> (https://github.com/rossipedia)","Ciaran Jessup <ciaranj@gmail.com>","Cort Fritz <cfritz@caa.com>","lastonesky","Patrik Simek <patrik@patriksimek.cz>","Phil Dodderidge <pdodde@poyntz.com>","Zach Aller"],name:"tedious",description:"A TDS driver, for connecting to MS SQLServer databases.",keywords:["sql","database","mssql","sqlserver","sql-server","tds","msnodesql","azure"],homepage:"https://github.com/tediousjs/tedious",bugs:"https://github.com/tediousjs/tedious/issues",license:"MIT",version:"18.6.1",main:"./lib/tedious.js",types:"./lib/tedious.d.ts",repository:{type:"git",url:"https://github.com/tediousjs/tedious.git"},engines:{node:">=18"},publishConfig:{tag:"next",provenance:!0},dependencies:{"@azure/core-auth":"^1.7.2","@azure/identity":"^4.2.1","@azure/keyvault-keys":"^4.4.0","@js-joda/core":"^5.6.1","@types/node":">=18",bl:"^6.0.11","iconv-lite":"^0.6.3","js-md4":"^0.3.2","native-duplexpair":"^1.0.0","sprintf-js":"^1.1.3"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.23.9","@babel/node":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@babel/register":"^7.23.7","@types/async":"^3.2.24","@types/bl":"^5.1.0","@types/chai":"^4.3.12","@types/depd":"^1.1.36","@types/lru-cache":"^5.1.1","@types/mocha":"^10.0.6","@types/sprintf-js":"^1.1.4","@typescript-eslint/eslint-plugin":"^7.0.2","@typescript-eslint/parser":"^7.0.2",async:"^3.2.5","babel-plugin-istanbul":"^6.1.1",chai:"^4.4.1",codecov:"^3.8.3",eslint:"^8.57.0",mitm:"^1.7.2",mocha:"^10.3.0",nyc:"^15.1.0",rimraf:"^5.0.5","semantic-release":"^19.0.3",sinon:"^15.2.0",typedoc:"^0.26.5",typescript:"^5.5.4"},scripts:{docs:"typedoc",lint:"eslint src test --ext .js,.ts && tsc",test:"mocha --forbid-only test/unit test/unit/token test/unit/tracking-buffer","test-integration":"mocha --forbid-only test/integration/","test-all":"mocha --forbid-only test/unit/ test/unit/token/ test/unit/tracking-buffer test/integration/","build:types":"tsc --project tsconfig.build-types.json",build:"rimraf lib && babel src --out-dir lib --extensions .js,.ts && npm run build:types",prepublish:"npm run build","semantic-release":"semantic-release"},babel:{sourceMaps:"both",ignore:["./src/**/*.d.ts"],presets:[["@babel/preset-env",{targets:{node:18}}],["@babel/preset-typescript",{allowDeclareFields:!0}]],plugins:[["@babel/transform-typescript",{allowDeclareFields:!0}]]},mocha:{require:"test/setup.js",timeout:5000,extension:["js","ts"]},nyc:{sourceMap:!1,instrument:!1,extension:[".ts"]}}});var nc=y((Lc)=>{Object.defineProperty(Lc,"__esModule",{value:!0});Lc.UnexpectedTokenError=Lc.TokenHandler=Lc.RequestTokenHandler=Lc.Login7TokenHandler=Lc.InitialSqlTokenHandler=Lc.AttentionTokenHandler=void 0;var Uy$=Qy$(M5()),M_=AK();function Qy$($){return $&&$.__esModule?$:{default:$}}class g$ extends Error{constructor($,q){super("Unexpected token `"+q.name+"` in `"+$.constructor.name+"`")}}Lc.UnexpectedTokenError=g$;class JP{onInfoMessage($){throw new g$(this,$)}onErrorMessage($){throw new g$(this,$)}onSSPI($){throw new g$(this,$)}onDatabaseChange($){throw new g$(this,$)}onLanguageChange($){throw new g$(this,$)}onCharsetChange($){throw new g$(this,$)}onSqlCollationChange($){throw new g$(this,$)}onRoutingChange($){throw new g$(this,$)}onPacketSizeChange($){throw new g$(this,$)}onResetConnection($){throw new g$(this,$)}onBeginTransaction($){throw new g$(this,$)}onCommitTransaction($){throw new g$(this,$)}onRollbackTransaction($){throw new g$(this,$)}onFedAuthInfo($){throw new g$(this,$)}onFeatureExtAck($){throw new g$(this,$)}onLoginAck($){throw new g$(this,$)}onColMetadata($){throw new g$(this,$)}onOrder($){throw new g$(this,$)}onRow($){throw new g$(this,$)}onReturnStatus($){throw new g$(this,$)}onReturnValue($){throw new g$(this,$)}onDoneProc($){throw new g$(this,$)}onDoneInProc($){throw new g$(this,$)}onDone($){throw new g$(this,$)}onDatabaseMirroringPartner($){throw new g$(this,$)}}Lc.TokenHandler=JP;class mc extends JP{constructor($){super();this.connection=$}onInfoMessage($){this.connection.emit("infoMessage",$)}onErrorMessage($){this.connection.emit("errorMessage",$)}onDatabaseChange($){this.connection.emit("databaseChange",$.newValue)}onLanguageChange($){this.connection.emit("languageChange",$.newValue)}onCharsetChange($){this.connection.emit("charsetChange",$.newValue)}onSqlCollationChange($){this.connection.databaseCollation=$.newValue}onPacketSizeChange($){this.connection.messageIo.packetSize($.newValue)}onBeginTransaction($){this.connection.transactionDescriptors.push($.newValue),this.connection.inTransaction=!0}onCommitTransaction($){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction($){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata($){this.connection.emit("error",new Error("Received 'columnMetadata' when no sqlRequest is in progress")),this.connection.close()}onOrder($){this.connection.emit("error",new Error("Received 'order' when no sqlRequest is in progress")),this.connection.close()}onRow($){this.connection.emit("error",new Error("Received 'row' when no sqlRequest is in progress")),this.connection.close()}onReturnStatus($){}onReturnValue($){}onDoneProc($){}onDoneInProc($){}onDone($){}onResetConnection($){this.connection.emit("resetConnection")}}Lc.InitialSqlTokenHandler=mc;class Ec extends JP{constructor($){super();this.loginAckReceived=!1,this.connection=$}onInfoMessage($){this.connection.emit("infoMessage",$)}onErrorMessage($){this.connection.emit("errorMessage",$);let q=new M_.ConnectionError($.message,"ELOGIN");if(this.connection.transientErrorLookup.isTransientError($.number)&&this.connection.curTransientRetryCount!==this.connection.config.options.maxRetriesOnTransientErrors)q.isTransient=!0;this.connection.loginError=q}onSSPI($){if($.ntlmpacket)this.connection.ntlmpacket=$.ntlmpacket,this.connection.ntlmpacketBuffer=$.ntlmpacketBuffer}onDatabaseChange($){this.connection.emit("databaseChange",$.newValue)}onLanguageChange($){this.connection.emit("languageChange",$.newValue)}onCharsetChange($){this.connection.emit("charsetChange",$.newValue)}onSqlCollationChange($){this.connection.databaseCollation=$.newValue}onFedAuthInfo($){this.fedAuthInfoToken=$}onFeatureExtAck($){let{authentication:q}=this.connection.config;if(q.type==="azure-active-directory-password"||q.type==="azure-active-directory-access-token"||q.type==="azure-active-directory-msi-vm"||q.type==="azure-active-directory-msi-app-service"||q.type==="azure-active-directory-service-principal-secret"||q.type==="azure-active-directory-default"){if($.fedAuth===void 0)this.connection.loginError=new M_.ConnectionError("Did not receive Active Directory authentication acknowledgement");else if($.fedAuth.length!==0)this.connection.loginError=new M_.ConnectionError(`Active Directory authentication acknowledgment for ${q.type} authentication method includes extra data`)}else if($.fedAuth===void 0&&$.utf8Support===void 0)this.connection.loginError=new M_.ConnectionError("Received acknowledgement for unknown feature");else if($.fedAuth)this.connection.loginError=new M_.ConnectionError("Did not request Active Directory authentication, but received the acknowledgment")}onLoginAck($){if(!$.tdsVersion){this.connection.loginError=new M_.ConnectionError("Server responded with unknown TDS version.","ETDS");return}if(!$.interface){this.connection.loginError=new M_.ConnectionError("Server responded with unsupported interface.","EINTERFACENOTSUPP");return}this.connection.config.options.tdsVersion=$.tdsVersion,this.loginAckReceived=!0}onRoutingChange($){let[q]=$.newValue.server.split("\\");this.routingData={server:q,port:$.newValue.port}}onDoneInProc($){}onDone($){}onPacketSizeChange($){this.connection.messageIo.packetSize($.newValue)}onDatabaseMirroringPartner($){}}Lc.Login7TokenHandler=Ec;class uc extends JP{constructor($,q){super();this.connection=$,this.request=q,this.errors=[]}onInfoMessage($){this.connection.emit("infoMessage",$)}onErrorMessage($){if(this.connection.emit("errorMessage",$),!this.request.canceled){let q=new M_.RequestError($.message,"EREQUEST");if(q.number=$.number,q.state=$.state,q.class=$.class,q.serverName=$.serverName,q.procName=$.procName,q.lineNumber=$.lineNumber,this.errors.push(q),this.request.error=q,this.request instanceof Uy$.default&&this.errors.length>1)this.request.error=new AggregateError(this.errors)}}onDatabaseChange($){this.connection.emit("databaseChange",$.newValue)}onLanguageChange($){this.connection.emit("languageChange",$.newValue)}onCharsetChange($){this.connection.emit("charsetChange",$.newValue)}onSqlCollationChange($){this.connection.databaseCollation=$.newValue}onPacketSizeChange($){this.connection.messageIo.packetSize($.newValue)}onBeginTransaction($){this.connection.transactionDescriptors.push($.newValue),this.connection.inTransaction=!0}onCommitTransaction($){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1}onRollbackTransaction($){this.connection.transactionDescriptors.length=1,this.connection.inTransaction=!1,this.connection.emit("rollbackTransaction")}onColMetadata($){if(!this.request.canceled)if(this.connection.config.options.useColumnNames){let q=Object.create(null);for(let _=0,K=$.columns.length;_<K;_++){let P=$.columns[_];if(q[P.colName]==null)q[P.colName]=P}this.request.emit("columnMetadata",q)}else this.request.emit("columnMetadata",$.columns)}onOrder($){if(!this.request.canceled)this.request.emit("order",$.orderColumns)}onRow($){if(!this.request.canceled){if(this.connection.config.options.rowCollectionOnRequestCompletion)this.request.rows.push($.columns);if(this.connection.config.options.rowCollectionOnDone)this.request.rst.push($.columns);this.request.emit("row",$.columns)}}onReturnStatus($){if(!this.request.canceled)this.connection.procReturnStatusValue=$.value}onReturnValue($){if(!this.request.canceled)this.request.emit("returnValue",$.paramName,$.value,$.metadata)}onDoneProc($){if(!this.request.canceled){if($.sqlError&&!this.request.error)this.request.error=new M_.RequestError("An unknown error has occurred.","UNKNOWN");if(this.request.emit("doneProc",$.rowCount,$.more,this.connection.procReturnStatusValue,this.request.rst),this.connection.procReturnStatusValue=void 0,$.rowCount!==void 0)this.request.rowCount+=$.rowCount;if(this.connection.config.options.rowCollectionOnDone)this.request.rst=[]}}onDoneInProc($){if(!this.request.canceled){if(this.request.emit("doneInProc",$.rowCount,$.more,this.request.rst),$.rowCount!==void 0)this.request.rowCount+=$.rowCount;if(this.connection.config.options.rowCollectionOnDone)this.request.rst=[]}}onDone($){if(!this.request.canceled){if($.sqlError&&!this.request.error)this.request.error=new M_.RequestError("An unknown error has occurred.","UNKNOWN");if(this.request.emit("done",$.rowCount,$.more,this.request.rst),$.rowCount!==void 0)this.request.rowCount+=$.rowCount;if(this.connection.config.options.rowCollectionOnDone)this.request.rst=[]}}onResetConnection($){this.connection.emit("resetConnection")}}Lc.RequestTokenHandler=uc;class Rc extends JP{constructor($,q){super();this.connection=$,this.request=q,this.attentionReceived=!1}onDone($){if($.attention)this.attentionReceived=!0}}Lc.AttentionTokenHandler=Rc});var Ic=y((gc,ac)=>{Object.defineProperty(gc,"__esModule",{value:!0});gc.default=void 0;var jS$=Y8(i("crypto")),wS$=Y8(i("os")),rc=ic(i("tls")),OS$=ic(i("net")),zS$=Y8(i("dns")),fS$=Y8(i("constants")),kk=i("stream"),N9=AC(),MS$=VC(),vS$=Y8(TM()),HS$=Y8(iC()),DP=i("events"),YS$=Pn(),hS$=zn(),N6=E3(),bc=Y8(Xn()),kS$=Y8(Nn()),TS$=Y8(nn()),G8=Y8(M5()),$w=Y8(Un()),Vc=Y8(_r()),AS$=Y8(dx()),WS$=wc(),r8=vk(),T6=AK(),xc=Yc(),JS$=hk(),XS$=u3(),dc=Y8(Y5()),DS$=Ac(),J4=F3(),pS$=Dc(),m9=Y8(Zc()),yS$=Nc(),SS$=i("url"),XP=nc();function oc($){if(typeof WeakMap!="function")return null;var q=new WeakMap,_=new WeakMap;return(oc=function(K){return K?_:q})($)}function ic($,q){if(!q&&$&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var _=oc(q);if(_&&_.has($))return _.get($);var K={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in $)if(w!=="default"&&Object.prototype.hasOwnProperty.call($,w)){var O=P?Object.getOwnPropertyDescriptor($,w):null;O&&(O.get||O.set)?Object.defineProperty(K,w,O):K[w]=$[w]}return K.default=$,_&&_.set($,K),K}function Y8($){return $&&$.__esModule?$:{default:$}}var GS$=30000,ZS$=15000,NS$=15000,mS$=5000,ES$=500,uS$=4096,RS$=2147483647,LS$=7,CS$=1433,nS$="7_4",rS$="us_english",VS$="mdy",qw={NORMAL:0,REDIRECT:1,RETRY:2};class E9 extends DP.EventEmitter{_cancelAfterRequestSent;constructor($){super();if(typeof $!=="object"||$===null)throw new TypeError('The "config" argument is required and must be of type Object.');if(typeof $.server!=="string")throw new TypeError('The "config.server" property is required and must be of type string.');this.fedAuthRequired=!1;let q;if($.authentication!==void 0){if(typeof $.authentication!=="object"||$.authentication===null)throw new TypeError('The "config.authentication" property must be of type Object.');let _=$.authentication.type,K=$.authentication.options===void 0?{}:$.authentication.options;if(typeof _!=="string")throw new TypeError('The "config.authentication.type" property must be of type string.');if(_!=="default"&&_!=="ntlm"&&_!=="token-credential"&&_!=="azure-active-directory-password"&&_!=="azure-active-directory-access-token"&&_!=="azure-active-directory-msi-vm"&&_!=="azure-active-directory-msi-app-service"&&_!=="azure-active-directory-service-principal-secret"&&_!=="azure-active-directory-default")throw new TypeError('The "type" property must one of "default", "ntlm", "token-credential", "azure-active-directory-password", "azure-active-directory-access-token", "azure-active-directory-default", "azure-active-directory-msi-vm" or "azure-active-directory-msi-app-service" or "azure-active-directory-service-principal-secret".');if(typeof K!=="object"||K===null)throw new TypeError('The "config.authentication.options" property must be of type object.');if(_==="ntlm"){if(typeof K.domain!=="string")throw new TypeError('The "config.authentication.options.domain" property must be of type string.');if(K.userName!==void 0&&typeof K.userName!=="string")throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(K.password!==void 0&&typeof K.password!=="string")throw new TypeError('The "config.authentication.options.password" property must be of type string.');q={type:"ntlm",options:{userName:K.userName,password:K.password,domain:K.domain&&K.domain.toUpperCase()}}}else if(_==="token-credential"){if(!MS$.isTokenCredential(K.credential))throw new TypeError('The "config.authentication.options.credential" property must be an instance of the token credential class.');q={type:"token-credential",options:{credential:K.credential}}}else if(_==="azure-active-directory-password"){if(typeof K.clientId!=="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');if(K.userName!==void 0&&typeof K.userName!=="string")throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(K.password!==void 0&&typeof K.password!=="string")throw new TypeError('The "config.authentication.options.password" property must be of type string.');if(K.tenantId!==void 0&&typeof K.tenantId!=="string")throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.');q={type:"azure-active-directory-password",options:{userName:K.userName,password:K.password,tenantId:K.tenantId,clientId:K.clientId}}}else if(_==="azure-active-directory-access-token"){if(typeof K.token!=="string")throw new TypeError('The "config.authentication.options.token" property must be of type string.');q={type:"azure-active-directory-access-token",options:{token:K.token}}}else if(_==="azure-active-directory-msi-vm"){if(K.clientId!==void 0&&typeof K.clientId!=="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');q={type:"azure-active-directory-msi-vm",options:{clientId:K.clientId}}}else if(_==="azure-active-directory-default"){if(K.clientId!==void 0&&typeof K.clientId!=="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');q={type:"azure-active-directory-default",options:{clientId:K.clientId}}}else if(_==="azure-active-directory-msi-app-service"){if(K.clientId!==void 0&&typeof K.clientId!=="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');q={type:"azure-active-directory-msi-app-service",options:{clientId:K.clientId}}}else if(_==="azure-active-directory-service-principal-secret"){if(typeof K.clientId!=="string")throw new TypeError('The "config.authentication.options.clientId" property must be of type string.');if(typeof K.clientSecret!=="string")throw new TypeError('The "config.authentication.options.clientSecret" property must be of type string.');if(typeof K.tenantId!=="string")throw new TypeError('The "config.authentication.options.tenantId" property must be of type string.');q={type:"azure-active-directory-service-principal-secret",options:{clientId:K.clientId,clientSecret:K.clientSecret,tenantId:K.tenantId}}}else{if(K.userName!==void 0&&typeof K.userName!=="string")throw new TypeError('The "config.authentication.options.userName" property must be of type string.');if(K.password!==void 0&&typeof K.password!=="string")throw new TypeError('The "config.authentication.options.password" property must be of type string.');q={type:"default",options:{userName:K.userName,password:K.password}}}}else q={type:"default",options:{userName:void 0,password:void 0}};if(this.config={server:$.server,authentication:q,options:{abortTransactionOnError:!1,appName:void 0,camelCaseColumns:!1,cancelTimeout:mS$,columnEncryptionKeyCacheTTL:7200000,columnEncryptionSetting:!1,columnNameReplacer:void 0,connectionRetryInterval:ES$,connectTimeout:ZS$,connector:void 0,connectionIsolationLevel:r8.ISOLATION_LEVEL.READ_COMMITTED,cryptoCredentialsDetails:{},database:void 0,datefirst:LS$,dateFormat:VS$,debug:{data:!1,packet:!1,payload:!1,token:!1},enableAnsiNull:!0,enableAnsiNullDefault:!0,enableAnsiPadding:!0,enableAnsiWarnings:!0,enableArithAbort:!0,enableConcatNullYieldsNull:!0,enableCursorCloseOnCommit:null,enableImplicitTransactions:!1,enableNumericRoundabort:!1,enableQuotedIdentifier:!0,encrypt:!0,fallbackToDefaultDb:!1,encryptionKeyStoreProviders:void 0,instanceName:void 0,isolationLevel:r8.ISOLATION_LEVEL.READ_COMMITTED,language:rS$,localAddress:void 0,maxRetriesOnTransientErrors:3,multiSubnetFailover:!1,packetSize:uS$,port:CS$,readOnlyIntent:!1,requestTimeout:NS$,rowCollectionOnDone:!1,rowCollectionOnRequestCompletion:!1,serverName:void 0,serverSupportsColumnEncryption:!1,tdsVersion:nS$,textsize:RS$,trustedServerNameAE:void 0,trustServerCertificate:!1,useColumnNames:!1,useUTC:!0,workstationId:void 0,lowerCaseGuids:!1}},$.options){if($.options.port&&$.options.instanceName)throw new Error("Port and instanceName are mutually exclusive, but "+$.options.port+" and "+$.options.instanceName+" provided");if($.options.abortTransactionOnError!==void 0){if(typeof $.options.abortTransactionOnError!=="boolean"&&$.options.abortTransactionOnError!==null)throw new TypeError('The "config.options.abortTransactionOnError" property must be of type string or null.');this.config.options.abortTransactionOnError=$.options.abortTransactionOnError}if($.options.appName!==void 0){if(typeof $.options.appName!=="string")throw new TypeError('The "config.options.appName" property must be of type string.');this.config.options.appName=$.options.appName}if($.options.camelCaseColumns!==void 0){if(typeof $.options.camelCaseColumns!=="boolean")throw new TypeError('The "config.options.camelCaseColumns" property must be of type boolean.');this.config.options.camelCaseColumns=$.options.camelCaseColumns}if($.options.cancelTimeout!==void 0){if(typeof $.options.cancelTimeout!=="number")throw new TypeError('The "config.options.cancelTimeout" property must be of type number.');this.config.options.cancelTimeout=$.options.cancelTimeout}if($.options.columnNameReplacer){if(typeof $.options.columnNameReplacer!=="function")throw new TypeError('The "config.options.cancelTimeout" property must be of type function.');this.config.options.columnNameReplacer=$.options.columnNameReplacer}if($.options.connectionIsolationLevel!==void 0)r8.assertValidIsolationLevel($.options.connectionIsolationLevel,"config.options.connectionIsolationLevel"),this.config.options.connectionIsolationLevel=$.options.connectionIsolationLevel;if($.options.connectTimeout!==void 0){if(typeof $.options.connectTimeout!=="number")throw new TypeError('The "config.options.connectTimeout" property must be of type number.');this.config.options.connectTimeout=$.options.connectTimeout}if($.options.connector!==void 0){if(typeof $.options.connector!=="function")throw new TypeError('The "config.options.connector" property must be a function.');this.config.options.connector=$.options.connector}if($.options.cryptoCredentialsDetails!==void 0){if(typeof $.options.cryptoCredentialsDetails!=="object"||$.options.cryptoCredentialsDetails===null)throw new TypeError('The "config.options.cryptoCredentialsDetails" property must be of type Object.');this.config.options.cryptoCredentialsDetails=$.options.cryptoCredentialsDetails}if($.options.database!==void 0){if(typeof $.options.database!=="string")throw new TypeError('The "config.options.database" property must be of type string.');this.config.options.database=$.options.database}if($.options.datefirst!==void 0){if(typeof $.options.datefirst!=="number"&&$.options.datefirst!==null)throw new TypeError('The "config.options.datefirst" property must be of type number.');if($.options.datefirst!==null&&($.options.datefirst<1||$.options.datefirst>7))throw new RangeError('The "config.options.datefirst" property must be >= 1 and <= 7');this.config.options.datefirst=$.options.datefirst}if($.options.dateFormat!==void 0){if(typeof $.options.dateFormat!=="string"&&$.options.dateFormat!==null)throw new TypeError('The "config.options.dateFormat" property must be of type string or null.');this.config.options.dateFormat=$.options.dateFormat}if($.options.debug){if($.options.debug.data!==void 0){if(typeof $.options.debug.data!=="boolean")throw new TypeError('The "config.options.debug.data" property must be of type boolean.');this.config.options.debug.data=$.options.debug.data}if($.options.debug.packet!==void 0){if(typeof $.options.debug.packet!=="boolean")throw new TypeError('The "config.options.debug.packet" property must be of type boolean.');this.config.options.debug.packet=$.options.debug.packet}if($.options.debug.payload!==void 0){if(typeof $.options.debug.payload!=="boolean")throw new TypeError('The "config.options.debug.payload" property must be of type boolean.');this.config.options.debug.payload=$.options.debug.payload}if($.options.debug.token!==void 0){if(typeof $.options.debug.token!=="boolean")throw new TypeError('The "config.options.debug.token" property must be of type boolean.');this.config.options.debug.token=$.options.debug.token}}if($.options.enableAnsiNull!==void 0){if(typeof $.options.enableAnsiNull!=="boolean"&&$.options.enableAnsiNull!==null)throw new TypeError('The "config.options.enableAnsiNull" property must be of type boolean or null.');this.config.options.enableAnsiNull=$.options.enableAnsiNull}if($.options.enableAnsiNullDefault!==void 0){if(typeof $.options.enableAnsiNullDefault!=="boolean"&&$.options.enableAnsiNullDefault!==null)throw new TypeError('The "config.options.enableAnsiNullDefault" property must be of type boolean or null.');this.config.options.enableAnsiNullDefault=$.options.enableAnsiNullDefault}if($.options.enableAnsiPadding!==void 0){if(typeof $.options.enableAnsiPadding!=="boolean"&&$.options.enableAnsiPadding!==null)throw new TypeError('The "config.options.enableAnsiPadding" property must be of type boolean or null.');this.config.options.enableAnsiPadding=$.options.enableAnsiPadding}if($.options.enableAnsiWarnings!==void 0){if(typeof $.options.enableAnsiWarnings!=="boolean"&&$.options.enableAnsiWarnings!==null)throw new TypeError('The "config.options.enableAnsiWarnings" property must be of type boolean or null.');this.config.options.enableAnsiWarnings=$.options.enableAnsiWarnings}if($.options.enableArithAbort!==void 0){if(typeof $.options.enableArithAbort!=="boolean"&&$.options.enableArithAbort!==null)throw new TypeError('The "config.options.enableArithAbort" property must be of type boolean or null.');this.config.options.enableArithAbort=$.options.enableArithAbort}if($.options.enableConcatNullYieldsNull!==void 0){if(typeof $.options.enableConcatNullYieldsNull!=="boolean"&&$.options.enableConcatNullYieldsNull!==null)throw new TypeError('The "config.options.enableConcatNullYieldsNull" property must be of type boolean or null.');this.config.options.enableConcatNullYieldsNull=$.options.enableConcatNullYieldsNull}if($.options.enableCursorCloseOnCommit!==void 0){if(typeof $.options.enableCursorCloseOnCommit!=="boolean"&&$.options.enableCursorCloseOnCommit!==null)throw new TypeError('The "config.options.enableCursorCloseOnCommit" property must be of type boolean or null.');this.config.options.enableCursorCloseOnCommit=$.options.enableCursorCloseOnCommit}if($.options.enableImplicitTransactions!==void 0){if(typeof $.options.enableImplicitTransactions!=="boolean"&&$.options.enableImplicitTransactions!==null)throw new TypeError('The "config.options.enableImplicitTransactions" property must be of type boolean or null.');this.config.options.enableImplicitTransactions=$.options.enableImplicitTransactions}if($.options.enableNumericRoundabort!==void 0){if(typeof $.options.enableNumericRoundabort!=="boolean"&&$.options.enableNumericRoundabort!==null)throw new TypeError('The "config.options.enableNumericRoundabort" property must be of type boolean or null.');this.config.options.enableNumericRoundabort=$.options.enableNumericRoundabort}if($.options.enableQuotedIdentifier!==void 0){if(typeof $.options.enableQuotedIdentifier!=="boolean"&&$.options.enableQuotedIdentifier!==null)throw new TypeError('The "config.options.enableQuotedIdentifier" property must be of type boolean or null.');this.config.options.enableQuotedIdentifier=$.options.enableQuotedIdentifier}if($.options.encrypt!==void 0){if(typeof $.options.encrypt!=="boolean"){if($.options.encrypt!=="strict")throw new TypeError('The "encrypt" property must be set to "strict", or of type boolean.')}this.config.options.encrypt=$.options.encrypt}if($.options.fallbackToDefaultDb!==void 0){if(typeof $.options.fallbackToDefaultDb!=="boolean")throw new TypeError('The "config.options.fallbackToDefaultDb" property must be of type boolean.');this.config.options.fallbackToDefaultDb=$.options.fallbackToDefaultDb}if($.options.instanceName!==void 0){if(typeof $.options.instanceName!=="string")throw new TypeError('The "config.options.instanceName" property must be of type string.');this.config.options.instanceName=$.options.instanceName,this.config.options.port=void 0}if($.options.isolationLevel!==void 0)r8.assertValidIsolationLevel($.options.isolationLevel,"config.options.isolationLevel"),this.config.options.isolationLevel=$.options.isolationLevel;if($.options.language!==void 0){if(typeof $.options.language!=="string"&&$.options.language!==null)throw new TypeError('The "config.options.language" property must be of type string or null.');this.config.options.language=$.options.language}if($.options.localAddress!==void 0){if(typeof $.options.localAddress!=="string")throw new TypeError('The "config.options.localAddress" property must be of type string.');this.config.options.localAddress=$.options.localAddress}if($.options.multiSubnetFailover!==void 0){if(typeof $.options.multiSubnetFailover!=="boolean")throw new TypeError('The "config.options.multiSubnetFailover" property must be of type boolean.');this.config.options.multiSubnetFailover=$.options.multiSubnetFailover}if($.options.packetSize!==void 0){if(typeof $.options.packetSize!=="number")throw new TypeError('The "config.options.packetSize" property must be of type number.');this.config.options.packetSize=$.options.packetSize}if($.options.port!==void 0){if(typeof $.options.port!=="number")throw new TypeError('The "config.options.port" property must be of type number.');if($.options.port<=0||$.options.port>=65536)throw new RangeError('The "config.options.port" property must be > 0 and < 65536');this.config.options.port=$.options.port,this.config.options.instanceName=void 0}if($.options.readOnlyIntent!==void 0){if(typeof $.options.readOnlyIntent!=="boolean")throw new TypeError('The "config.options.readOnlyIntent" property must be of type boolean.');this.config.options.readOnlyIntent=$.options.readOnlyIntent}if($.options.requestTimeout!==void 0){if(typeof $.options.requestTimeout!=="number")throw new TypeError('The "config.options.requestTimeout" property must be of type number.');this.config.options.requestTimeout=$.options.requestTimeout}if($.options.maxRetriesOnTransientErrors!==void 0){if(typeof $.options.maxRetriesOnTransientErrors!=="number")throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be of type number.');if($.options.maxRetriesOnTransientErrors<0)throw new TypeError('The "config.options.maxRetriesOnTransientErrors" property must be equal or greater than 0.');this.config.options.maxRetriesOnTransientErrors=$.options.maxRetriesOnTransientErrors}if($.options.connectionRetryInterval!==void 0){if(typeof $.options.connectionRetryInterval!=="number")throw new TypeError('The "config.options.connectionRetryInterval" property must be of type number.');if($.options.connectionRetryInterval<=0)throw new TypeError('The "config.options.connectionRetryInterval" property must be greater than 0.');this.config.options.connectionRetryInterval=$.options.connectionRetryInterval}if($.options.rowCollectionOnDone!==void 0){if(typeof $.options.rowCollectionOnDone!=="boolean")throw new TypeError('The "config.options.rowCollectionOnDone" property must be of type boolean.');this.config.options.rowCollectionOnDone=$.options.rowCollectionOnDone}if($.options.rowCollectionOnRequestCompletion!==void 0){if(typeof $.options.rowCollectionOnRequestCompletion!=="boolean")throw new TypeError('The "config.options.rowCollectionOnRequestCompletion" property must be of type boolean.');this.config.options.rowCollectionOnRequestCompletion=$.options.rowCollectionOnRequestCompletion}if($.options.tdsVersion!==void 0){if(typeof $.options.tdsVersion!=="string")throw new TypeError('The "config.options.tdsVersion" property must be of type string.');this.config.options.tdsVersion=$.options.tdsVersion}if($.options.textsize!==void 0){if(typeof $.options.textsize!=="number"&&$.options.textsize!==null)throw new TypeError('The "config.options.textsize" property must be of type number or null.');if($.options.textsize>2147483647)throw new TypeError(`The "config.options.textsize" can't be greater than 2147483647.`);else if($.options.textsize<-1)throw new TypeError(`The "config.options.textsize" can't be smaller than -1.`);this.config.options.textsize=$.options.textsize|0}if($.options.trustServerCertificate!==void 0){if(typeof $.options.trustServerCertificate!=="boolean")throw new TypeError('The "config.options.trustServerCertificate" property must be of type boolean.');this.config.options.trustServerCertificate=$.options.trustServerCertificate}if($.options.serverName!==void 0){if(typeof $.options.serverName!=="string")throw new TypeError('The "config.options.serverName" property must be of type string.');this.config.options.serverName=$.options.serverName}if($.options.useColumnNames!==void 0){if(typeof $.options.useColumnNames!=="boolean")throw new TypeError('The "config.options.useColumnNames" property must be of type boolean.');this.config.options.useColumnNames=$.options.useColumnNames}if($.options.useUTC!==void 0){if(typeof $.options.useUTC!=="boolean")throw new TypeError('The "config.options.useUTC" property must be of type boolean.');this.config.options.useUTC=$.options.useUTC}if($.options.workstationId!==void 0){if(typeof $.options.workstationId!=="string")throw new TypeError('The "config.options.workstationId" property must be of type string.');this.config.options.workstationId=$.options.workstationId}if($.options.lowerCaseGuids!==void 0){if(typeof $.options.lowerCaseGuids!=="boolean")throw new TypeError('The "config.options.lowerCaseGuids" property must be of type boolean.');this.config.options.lowerCaseGuids=$.options.lowerCaseGuids}}if(this.secureContextOptions=this.config.options.cryptoCredentialsDetails,this.secureContextOptions.secureOptions===void 0)this.secureContextOptions=Object.create(this.secureContextOptions,{secureOptions:{value:fS$.default.SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS}});this.debug=this.createDebug(),this.inTransaction=!1,this.transactionDescriptors=[Buffer.from([0,0,0,0,0,0,0,0])],this.transactionDepth=0,this.isSqlBatch=!1,this.closed=!1,this.messageBuffer=Buffer.alloc(0),this.curTransientRetryCount=0,this.transientErrorLookup=new hS$.TransientErrorLookup,this.state=this.STATE.INITIALIZED,this._cancelAfterRequestSent=()=>{this.messageIo.sendMessage(N6.TYPE.ATTENTION),this.createCancelTimer()}}connect($){if(this.state!==this.STATE.INITIALIZED)throw new T6.ConnectionError("`.connect` can not be called on a Connection in `"+this.state.name+"` state.");if($){let q=(K)=>{this.removeListener("error",_),$(K)},_=(K)=>{this.removeListener("connect",q),$(K)};this.once("connect",q),this.once("error",_)}this.transitionTo(this.STATE.CONNECTING)}on($,q){return super.on($,q)}emit($,...q){return super.emit($,...q)}close(){this.transitionTo(this.STATE.FINAL)}initialiseConnection(){let $=this.createConnectTimer();if(this.config.options.port)return this.connectOnPort(this.config.options.port,this.config.options.multiSubnetFailover,$,this.config.options.connector);else return YS$.instanceLookup({server:this.config.server,instanceName:this.config.options.instanceName,timeout:this.config.options.connectTimeout,signal:$}).then((q)=>{process.nextTick(()=>{this.connectOnPort(q,this.config.options.multiSubnetFailover,$,this.config.options.connector)})},(q)=>{if(this.clearConnectTimer(),$.aborted)return;process.nextTick(()=>{this.emit("connect",new T6.ConnectionError(q.message,"EINSTLOOKUP",{cause:q}))})})}cleanupConnection($){if(!this.closed){if(this.clearConnectTimer(),this.clearRequestTimer(),this.clearRetryTimer(),this.closeConnection(),$===qw.REDIRECT)this.emit("rerouting");else if($!==qw.RETRY)process.nextTick(()=>{this.emit("end")});let q=this.request;if(q){let _=new T6.RequestError("Connection closed before request completed.","ECLOSE");q.callback(_),this.request=void 0}this.closed=!0,this.loginError=void 0}}createDebug(){let $=new HS$.default(this.config.options.debug);return $.on("debug",(q)=>{this.emit("debug",q)}),$}createTokenStreamParser($,q){return new WS$.Parser($,this.debug,q,this.config.options)}socketHandlingForSendPreLogin($){$.on("error",(q)=>{this.socketError(q)}),$.on("close",()=>{this.socketClose()}),$.on("end",()=>{this.socketEnd()}),$.setKeepAlive(!0,GS$),this.messageIo=new AS$.default($,this.config.options.packetSize,this.debug),this.messageIo.on("secure",(q)=>{this.emit("secure",q)}),this.socket=$,this.closed=!1,this.debug.log("connected to "+this.config.server+":"+this.config.options.port),this.sendPreLogin(),this.transitionTo(this.STATE.SENT_PRELOGIN)}wrapWithTls($,q){return q.throwIfAborted(),new Promise((_,K)=>{let P=rc.createSecureContext(this.secureContextOptions),w=!OS$.isIP(this.config.server)?this.config.server:"",O={host:this.config.server,socket:$,ALPNProtocols:["tds/8.0"],secureContext:P,servername:this.config.options.serverName?this.config.options.serverName:w},f=rc.connect(O),Y=()=>{f.removeListener("error",h),f.removeListener("connect",k),f.destroy(),K(q.reason)},h=(T)=>{q.removeEventListener("abort",Y),f.removeListener("error",h),f.removeListener("connect",k),f.destroy(),K(T)},k=()=>{q.removeEventListener("abort",Y),f.removeListener("error",h),f.removeListener("connect",k),_(f)};q.addEventListener("abort",Y,{once:!0}),f.on("error",h),f.on("secureConnect",k)})}connectOnPort($,q,_,K){let P={host:this.routingData?this.routingData.server:this.config.server,port:this.routingData?this.routingData.port:$,localAddress:this.config.options.localAddress},w=K||(q?xc.connectInParallel:xc.connectInSequence);(async()=>{let O=await w(P,zS$.default.lookup,_);if(this.config.options.encrypt==="strict")try{O=await this.wrapWithTls(O,_)}catch(f){throw O.end(),f}this.socketHandlingForSendPreLogin(O)})().catch((O)=>{if(this.clearConnectTimer(),_.aborted)return;process.nextTick(()=>{this.socketError(O)})})}closeConnection(){if(this.socket)this.socket.destroy()}createConnectTimer(){let $=new AbortController;return this.connectTimer=setTimeout(()=>{$.abort(),this.connectTimeout()},this.config.options.connectTimeout),$.signal}createCancelTimer(){this.clearCancelTimer();let $=this.config.options.cancelTimeout;if($>0)this.cancelTimer=setTimeout(()=>{this.cancelTimeout()},$)}createRequestTimer(){this.clearRequestTimer();let $=this.request,q=$.timeout!==void 0?$.timeout:this.config.options.requestTimeout;if(q)this.requestTimer=setTimeout(()=>{this.requestTimeout()},q)}createRetryTimer(){this.clearRetryTimer(),this.retryTimer=setTimeout(()=>{this.retryTimeout()},this.config.options.connectionRetryInterval)}connectTimeout(){let $=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,q=this.routingData?this.routingData.server:this.config.server,_=this.routingData?`:${this.routingData.port}`:$,K=this.routingData?` (redirected from ${this.config.server}${$})`:"",P=`Failed to connect to ${q}${_}${K} in ${this.config.options.connectTimeout}ms`;this.debug.log(P),this.emit("connect",new T6.ConnectionError(P,"ETIMEOUT")),this.connectTimer=void 0,this.dispatchEvent("connectTimeout")}cancelTimeout(){let $=`Failed to cancel request in ${this.config.options.cancelTimeout}ms`;this.debug.log($),this.dispatchEvent("socketError",new T6.ConnectionError($,"ETIMEOUT"))}requestTimeout(){this.requestTimer=void 0;let $=this.request;$.cancel();let _="Timeout: Request failed to complete in "+($.timeout!==void 0?$.timeout:this.config.options.requestTimeout)+"ms";$.error=new T6.RequestError(_,"ETIMEOUT")}retryTimeout(){this.retryTimer=void 0,this.emit("retry"),this.transitionTo(this.STATE.CONNECTING)}clearConnectTimer(){if(this.connectTimer)clearTimeout(this.connectTimer),this.connectTimer=void 0}clearCancelTimer(){if(this.cancelTimer)clearTimeout(this.cancelTimer),this.cancelTimer=void 0}clearRequestTimer(){if(this.requestTimer)clearTimeout(this.requestTimer),this.requestTimer=void 0}clearRetryTimer(){if(this.retryTimer)clearTimeout(this.retryTimer),this.retryTimer=void 0}transitionTo($){if(this.state===$){this.debug.log("State is already "+$.name);return}if(this.state&&this.state.exit)this.state.exit.call(this,$);if(this.debug.log("State change: "+(this.state?this.state.name:"undefined")+" -> "+$.name),this.state=$,this.state.enter)this.state.enter.apply(this)}getEventHandler($){let q=this.state.events[$];if(!q)throw new Error(`No event '${$}' in state '${this.state.name}'`);return q}dispatchEvent($,...q){let _=this.state.events[$];if(_)_.apply(this,q);else this.emit("error",new Error(`No event '${$}' in state '${this.state.name}'`)),this.close()}socketError($){if(this.state===this.STATE.CONNECTING||this.state===this.STATE.SENT_TLSSSLNEGOTIATION){let q=this.config.options.port?`:${this.config.options.port}`:`\\${this.config.options.instanceName}`,_=this.routingData?this.routingData.server:this.config.server,K=this.routingData?`:${this.routingData.port}`:q,P=this.routingData?` (redirected from ${this.config.server}${q})`:"",w=`Failed to connect to ${_}${K}${P} - ${$.message}`;this.debug.log(w),this.emit("connect",new T6.ConnectionError(w,"ESOCKET",{cause:$}))}else{let q=`Connection lost - ${$.message}`;this.debug.log(q),this.emit("error",new T6.ConnectionError(q,"ESOCKET",{cause:$}))}this.dispatchEvent("socketError",$)}socketEnd(){if(this.debug.log("socket ended"),this.state!==this.STATE.FINAL){let $=new Error("socket hang up");$.code="ECONNRESET",this.socketError($)}}socketClose(){if(this.debug.log("connection to "+this.config.server+":"+this.config.options.port+" closed"),this.state===this.STATE.REROUTING)this.debug.log("Rerouting to "+this.routingData.server+":"+this.routingData.port),this.dispatchEvent("reconnect");else if(this.state===this.STATE.TRANSIENT_FAILURE_RETRY){let $=this.routingData?this.routingData.server:this.config.server,q=this.routingData?this.routingData.port:this.config.options.port;this.debug.log("Retry after transient failure connecting to "+$+":"+q),this.dispatchEvent("retry")}else this.transitionTo(this.STATE.FINAL)}sendPreLogin(){let[,$,q,_]=/^(\d+)\.(\d+)\.(\d+)/.exec(yS$.version)??["0.0.0","0","0","0"],K=new bc.default({encrypt:typeof this.config.options.encrypt==="boolean"&&this.config.options.encrypt,version:{major:Number($),minor:Number(q),build:Number(_),subbuild:0}});this.messageIo.sendMessage(N6.TYPE.PRELOGIN,K.data),this.debug.payload(function(){return K.toString("  ")})}sendLogin7Packet(){let $=new kS$.default({tdsVersion:XS$.versions[this.config.options.tdsVersion],packetSize:this.config.options.packetSize,clientProgVer:0,clientPid:process.pid,connectionId:0,clientTimeZone:new Date().getTimezoneOffset(),clientLcid:1033}),{authentication:q}=this.config;switch(q.type){case"azure-active-directory-password":$.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"default"};break;case"azure-active-directory-access-token":$.fedAuth={type:"SECURITYTOKEN",echo:this.fedAuthRequired,fedAuthToken:q.options.token};break;case"token-credential":case"azure-active-directory-msi-vm":case"azure-active-directory-default":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":$.fedAuth={type:"ADAL",echo:this.fedAuthRequired,workflow:"integrated"};break;case"ntlm":$.sspi=DS$.createNTLMRequest({domain:q.options.domain});break;default:$.userName=q.options.userName,$.password=q.options.password}$.hostname=this.config.options.workstationId||wS$.default.hostname(),$.serverName=this.routingData?this.routingData.server:this.config.server,$.appName=this.config.options.appName||"Tedious",$.libraryName=JS$.name,$.language=this.config.options.language,$.database=this.config.options.database,$.clientId=Buffer.from([1,2,3,4,5,6]),$.readOnlyIntent=this.config.options.readOnlyIntent,$.initDbFatal=!this.config.options.fallbackToDefaultDb,this.routingData=void 0,this.messageIo.sendMessage(N6.TYPE.LOGIN7,$.toBuffer()),this.debug.payload(function(){return $.toString("  ")})}sendFedAuthTokenMessage($){let q=Buffer.byteLength($,"ucs2"),_=Buffer.alloc(8+q),K=0;K=_.writeUInt32LE(q+4,K),K=_.writeUInt32LE(q,K),_.write($,K,"ucs2"),this.messageIo.sendMessage(N6.TYPE.FEDAUTH_TOKEN,_),this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN)}sendInitialSql(){let $=new Vc.default(this.getInitialSql(),this.currentTransactionDescriptor(),this.config.options),q=new dc.default({type:N6.TYPE.SQL_BATCH});this.messageIo.outgoingMessageStream.write(q),kk.Readable.from($).pipe(q)}getInitialSql(){let $=[];if(this.config.options.enableAnsiNull===!0)$.push("set ansi_nulls on");else if(this.config.options.enableAnsiNull===!1)$.push("set ansi_nulls off");if(this.config.options.enableAnsiNullDefault===!0)$.push("set ansi_null_dflt_on on");else if(this.config.options.enableAnsiNullDefault===!1)$.push("set ansi_null_dflt_on off");if(this.config.options.enableAnsiPadding===!0)$.push("set ansi_padding on");else if(this.config.options.enableAnsiPadding===!1)$.push("set ansi_padding off");if(this.config.options.enableAnsiWarnings===!0)$.push("set ansi_warnings on");else if(this.config.options.enableAnsiWarnings===!1)$.push("set ansi_warnings off");if(this.config.options.enableArithAbort===!0)$.push("set arithabort on");else if(this.config.options.enableArithAbort===!1)$.push("set arithabort off");if(this.config.options.enableConcatNullYieldsNull===!0)$.push("set concat_null_yields_null on");else if(this.config.options.enableConcatNullYieldsNull===!1)$.push("set concat_null_yields_null off");if(this.config.options.enableCursorCloseOnCommit===!0)$.push("set cursor_close_on_commit on");else if(this.config.options.enableCursorCloseOnCommit===!1)$.push("set cursor_close_on_commit off");if(this.config.options.datefirst!==null)$.push(`set datefirst ${this.config.options.datefirst}`);if(this.config.options.dateFormat!==null)$.push(`set dateformat ${this.config.options.dateFormat}`);if(this.config.options.enableImplicitTransactions===!0)$.push("set implicit_transactions on");else if(this.config.options.enableImplicitTransactions===!1)$.push("set implicit_transactions off");if(this.config.options.language!==null)$.push(`set language ${this.config.options.language}`);if(this.config.options.enableNumericRoundabort===!0)$.push("set numeric_roundabort on");else if(this.config.options.enableNumericRoundabort===!1)$.push("set numeric_roundabort off");if(this.config.options.enableQuotedIdentifier===!0)$.push("set quoted_identifier on");else if(this.config.options.enableQuotedIdentifier===!1)$.push("set quoted_identifier off");if(this.config.options.textsize!==null)$.push(`set textsize ${this.config.options.textsize}`);if(this.config.options.connectionIsolationLevel!==null)$.push(`set transaction isolation level ${this.getIsolationLevelText(this.config.options.connectionIsolationLevel)}`);if(this.config.options.abortTransactionOnError===!0)$.push("set xact_abort on");else if(this.config.options.abortTransactionOnError===!1)$.push("set xact_abort off");return $.join(`
`)}processedInitialSql(){this.clearConnectTimer(),this.emit("connect")}execSqlBatch($){this.makeRequest($,N6.TYPE.SQL_BATCH,new Vc.default($.sqlTextOrProcedure,this.currentTransactionDescriptor(),this.config.options))}execSql($){try{$.validateParameters(this.databaseCollation)}catch(_){$.error=_,process.nextTick(()=>{this.debug.log(_.message),$.callback(_)});return}let q=[];if(q.push({type:J4.TYPES.NVarChar,name:"statement",value:$.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),$.parameters.length)q.push({type:J4.TYPES.NVarChar,name:"params",value:$.makeParamsParameter($.parameters),output:!1,length:void 0,precision:void 0,scale:void 0}),q.push(...$.parameters);this.makeRequest($,N6.TYPE.RPC_REQUEST,new $w.default(m9.default.Sp_ExecuteSql,q,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}newBulkLoad($,q,_){let K;if(_===void 0)_=q,K={};else K=q;if(typeof K!=="object")throw new TypeError('"options" argument must be an object');return new vS$.default($,this.databaseCollation,this.config.options,K,_)}execBulkLoad($,q){if($.executionStarted=!0,q){if($.streamingMode)throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that was put in streaming mode.");if($.firstRowWritten)throw new Error("Connection.execBulkLoad can't be called with a BulkLoad that already has rows written to it.");let w=kk.Readable.from(q);w.on("error",(O)=>{$.rowToPacketTransform.destroy(O)}),$.rowToPacketTransform.on("error",(O)=>{w.destroy(O)}),w.pipe($.rowToPacketTransform)}else if(!$.streamingMode)$.rowToPacketTransform.end();let _=()=>{P.cancel()},K=new pS$.BulkLoadPayload($),P=new G8.default($.getBulkInsertSql(),(w)=>{if($.removeListener("cancel",_),w){if(w.code==="UNKNOWN")w.message+=" This is likely because the schema of the BulkLoad does not match the schema of the table you are attempting to insert into.";$.error=w,$.callback(w);return}this.makeRequest($,N6.TYPE.BULK_LOAD,K)});$.once("cancel",_),this.execSqlBatch(P)}prepare($){let q=[];q.push({type:J4.TYPES.Int,name:"handle",value:void 0,output:!0,length:void 0,precision:void 0,scale:void 0}),q.push({type:J4.TYPES.NVarChar,name:"params",value:$.parameters.length?$.makeParamsParameter($.parameters):null,output:!1,length:void 0,precision:void 0,scale:void 0}),q.push({type:J4.TYPES.NVarChar,name:"stmt",value:$.sqlTextOrProcedure,output:!1,length:void 0,precision:void 0,scale:void 0}),$.preparing=!0,$.on("returnValue",(_,K)=>{if(_==="handle")$.handle=K;else $.error=new T6.RequestError(`Tedious > Unexpected output parameter ${_} from sp_prepare`)}),this.makeRequest($,N6.TYPE.RPC_REQUEST,new $w.default(m9.default.Sp_Prepare,q,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}unprepare($){let q=[];q.push({type:J4.TYPES.Int,name:"handle",value:$.handle,output:!1,length:void 0,precision:void 0,scale:void 0}),this.makeRequest($,N6.TYPE.RPC_REQUEST,new $w.default(m9.default.Sp_Unprepare,q,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}execute($,q){let _=[];_.push({type:J4.TYPES.Int,name:"",value:$.handle,output:!1,length:void 0,precision:void 0,scale:void 0});try{for(let K=0,P=$.parameters.length;K<P;K++){let w=$.parameters[K];_.push({...w,value:w.type.validate(q?q[w.name]:null,this.databaseCollation)})}}catch(K){$.error=K,process.nextTick(()=>{this.debug.log(K.message),$.callback(K)});return}this.makeRequest($,N6.TYPE.RPC_REQUEST,new $w.default(m9.default.Sp_Execute,_,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}callProcedure($){try{$.validateParameters(this.databaseCollation)}catch(q){$.error=q,process.nextTick(()=>{this.debug.log(q.message),$.callback(q)});return}this.makeRequest($,N6.TYPE.RPC_REQUEST,new $w.default($.sqlTextOrProcedure,$.parameters,this.currentTransactionDescriptor(),this.config.options,this.databaseCollation))}beginTransaction($,q="",_=this.config.options.isolationLevel){r8.assertValidIsolationLevel(_,"isolationLevel");let K=new r8.Transaction(q,_);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new G8.default("SET TRANSACTION ISOLATION LEVEL "+K.isolationLevelToTSQL()+";BEGIN TRAN "+K.name,(w)=>{if(this.transactionDepth++,this.transactionDepth===1)this.inTransaction=!0;$(w)}));let P=new G8.default(void 0,(w)=>{return $(w,this.currentTransactionDescriptor())});return this.makeRequest(P,N6.TYPE.TRANSACTION_MANAGER,K.beginPayload(this.currentTransactionDescriptor()))}commitTransaction($,q=""){let _=new r8.Transaction(q);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new G8.default("COMMIT TRAN "+_.name,(P)=>{if(this.transactionDepth--,this.transactionDepth===0)this.inTransaction=!1;$(P)}));let K=new G8.default(void 0,$);return this.makeRequest(K,N6.TYPE.TRANSACTION_MANAGER,_.commitPayload(this.currentTransactionDescriptor()))}rollbackTransaction($,q=""){let _=new r8.Transaction(q);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new G8.default("ROLLBACK TRAN "+_.name,(P)=>{if(this.transactionDepth--,this.transactionDepth===0)this.inTransaction=!1;$(P)}));let K=new G8.default(void 0,$);return this.makeRequest(K,N6.TYPE.TRANSACTION_MANAGER,_.rollbackPayload(this.currentTransactionDescriptor()))}saveTransaction($,q){let _=new r8.Transaction(q);if(this.config.options.tdsVersion<"7_2")return this.execSqlBatch(new G8.default("SAVE TRAN "+_.name,(P)=>{this.transactionDepth++,$(P)}));let K=new G8.default(void 0,$);return this.makeRequest(K,N6.TYPE.TRANSACTION_MANAGER,_.savePayload(this.currentTransactionDescriptor()))}transaction($,q){if(typeof $!=="function")throw new TypeError("`cb` must be a function");let _=this.inTransaction,K="_tedious_"+jS$.default.randomBytes(10).toString("hex"),P=(w,O,...f)=>{if(w)if(this.inTransaction&&this.state===this.STATE.LOGGED_IN)this.rollbackTransaction((Y)=>{O(Y||w,...f)},K);else O(w,...f);else if(_){if(this.config.options.tdsVersion<"7_2")this.transactionDepth--;O(null,...f)}else this.commitTransaction((Y)=>{O(Y,...f)},K)};if(_)return this.saveTransaction((w)=>{if(w)return $(w);if(q)return this.execSqlBatch(new G8.default("SET transaction isolation level "+this.getIsolationLevelText(q),(O)=>{return $(O,P)}));else return $(null,P)},K);else return this.beginTransaction((w)=>{if(w)return $(w);return $(null,P)},K,q)}makeRequest($,q,_){if(this.state!==this.STATE.LOGGED_IN){let K="Requests can only be made in the "+this.STATE.LOGGED_IN.name+" state, not the "+this.state.name+" state";this.debug.log(K),$.callback(new T6.RequestError(K,"EINVALIDSTATE"))}else if($.canceled)process.nextTick(()=>{$.callback(new T6.RequestError("Canceled.","ECANCEL"))});else{if(q===N6.TYPE.SQL_BATCH)this.isSqlBatch=!0;else this.isSqlBatch=!1;this.request=$,$.connection=this,$.rowCount=0,$.rows=[],$.rst=[];let K=()=>{if(w.unpipe(P),w.destroy(new T6.RequestError("Canceled.","ECANCEL")),P.ignore=!0,P.end(),$ instanceof G8.default&&$.paused)$.resume()};$.once("cancel",K),this.createRequestTimer();let P=new dc.default({type:q,resetConnection:this.resetConnectionOnNextRequest});this.messageIo.outgoingMessageStream.write(P),this.transitionTo(this.STATE.SENT_CLIENT_REQUEST),P.once("finish",()=>{$.removeListener("cancel",K),$.once("cancel",this._cancelAfterRequestSent),this.resetConnectionOnNextRequest=!1,this.debug.payload(function(){return _.toString("  ")})});let w=kk.Readable.from(_);w.once("error",(O)=>{w.unpipe(P),$.error??=O,P.ignore=!0,P.end()}),w.pipe(P)}}cancel(){if(!this.request)return!1;if(this.request.canceled)return!1;return this.request.cancel(),!0}reset($){let q=new G8.default(this.getInitialSql(),(_)=>{if(this.config.options.tdsVersion<"7_2")this.inTransaction=!1;$(_)});this.resetConnectionOnNextRequest=!0,this.execSqlBatch(q)}currentTransactionDescriptor(){return this.transactionDescriptors[this.transactionDescriptors.length-1]}getIsolationLevelText($){switch($){case r8.ISOLATION_LEVEL.READ_UNCOMMITTED:return"read uncommitted";case r8.ISOLATION_LEVEL.REPEATABLE_READ:return"repeatable read";case r8.ISOLATION_LEVEL.SERIALIZABLE:return"serializable";case r8.ISOLATION_LEVEL.SNAPSHOT:return"snapshot";default:return"read committed"}}}function Tk($){if($ instanceof AggregateError)$=$.errors[0];return $ instanceof T6.ConnectionError&&!!$.isTransient}var Cr$=gc.default=E9;ac.exports=E9;E9.prototype.STATE={INITIALIZED:{name:"Initialized",events:{}},CONNECTING:{name:"Connecting",enter:function(){this.initialiseConnection()},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_PRELOGIN:{name:"SentPrelogin",enter:function(){(async()=>{let $=Buffer.alloc(0),q;try{q=await this.messageIo.readMessage()}catch(P){return this.socketError(P)}for await(let P of q)$=Buffer.concat([$,P]);let _=new bc.default($);if(this.debug.payload(function(){return _.toString("  ")}),_.fedAuthRequired===1)this.fedAuthRequired=!0;if(this.config.options.encrypt!=="strict"&&(_.encryptionString==="ON"||_.encryptionString==="REQ")){if(!this.config.options.encrypt)return this.emit("connect",new T6.ConnectionError("Server requires encryption, set 'encrypt' config option to true.","EENCRYPT")),this.close();try{this.transitionTo(this.STATE.SENT_TLSSSLNEGOTIATION),await this.messageIo.startTls(this.secureContextOptions,this.config.options.serverName?this.config.options.serverName:this.routingData?.server??this.config.server,this.config.options.trustServerCertificate)}catch(P){return this.socketError(P)}}this.sendLogin7Packet();let{authentication:K}=this.config;switch(K.type){case"token-credential":case"azure-active-directory-password":case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":case"azure-active-directory-service-principal-secret":case"azure-active-directory-default":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_FEDAUTH);break;case"ntlm":this.transitionTo(this.STATE.SENT_LOGIN7_WITH_NTLM);break;default:this.transitionTo(this.STATE.SENT_LOGIN7_WITH_STANDARD_LOGIN);break}})().catch(($)=>{process.nextTick(()=>{throw $})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},REROUTING:{name:"ReRouting",enter:function(){this.cleanupConnection(qw.REDIRECT)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},reconnect:function(){this.transitionTo(this.STATE.CONNECTING)}}},TRANSIENT_FAILURE_RETRY:{name:"TRANSIENT_FAILURE_RETRY",enter:function(){this.curTransientRetryCount++,this.cleanupConnection(qw.RETRY)},events:{message:function(){},socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)},retry:function(){this.createRetryTimer()}}},SENT_TLSSSLNEGOTIATION:{name:"SentTLSSSLNegotiation",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_STANDARD_LOGIN:{name:"SentLogin7WithStandardLogin",enter:function(){(async()=>{let $;try{$=await this.messageIo.readMessage()}catch(K){return this.socketError(K)}let q=new XP.Login7TokenHandler(this),_=this.createTokenStreamParser($,q);if(await DP.once(_,"end"),q.loginAckReceived)if(q.routingData)this.routingData=q.routingData,this.transitionTo(this.STATE.REROUTING);else this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL);else if(this.loginError)if(Tk(this.loginError))this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY);else this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);else this.emit("connect",new T6.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL)})().catch(($)=>{process.nextTick(()=>{throw $})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_NTLM:{name:"SentLogin7WithNTLMLogin",enter:function(){(async()=>{while(!0){let $;try{$=await this.messageIo.readMessage()}catch(K){return this.socketError(K)}let q=new XP.Login7TokenHandler(this),_=this.createTokenStreamParser($,q);if(await DP.once(_,"end"),q.loginAckReceived)if(q.routingData)return this.routingData=q.routingData,this.transitionTo(this.STATE.REROUTING);else return this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL);else if(this.ntlmpacket){let K=this.config.authentication,P=new TS$.default({domain:K.options.domain,userName:K.options.userName,password:K.options.password,ntlmpacket:this.ntlmpacket});this.messageIo.sendMessage(N6.TYPE.NTLMAUTH_PKT,P.data),this.debug.payload(function(){return P.toString("  ")}),this.ntlmpacket=void 0}else if(this.loginError)if(Tk(this.loginError))return this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY);else return this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);else return this.emit("connect",new T6.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL)}})().catch(($)=>{process.nextTick(()=>{throw $})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_LOGIN7_WITH_FEDAUTH:{name:"SentLogin7Withfedauth",enter:function(){(async()=>{let $;try{$=await this.messageIo.readMessage()}catch(P){return this.socketError(P)}let q=new XP.Login7TokenHandler(this),_=this.createTokenStreamParser($,q);if(await DP.once(_,"end"),q.loginAckReceived){if(q.routingData)this.routingData=q.routingData,this.transitionTo(this.STATE.REROUTING);else this.transitionTo(this.STATE.LOGGED_IN_SENDING_INITIAL_SQL);return}let K=q.fedAuthInfoToken;if(K&&K.stsurl&&K.spn){let P=this.config.authentication,w=new SS$.URL("/.default",K.spn).toString(),O;switch(P.type){case"token-credential":O=P.options.credential;break;case"azure-active-directory-password":O=new N9.UsernamePasswordCredential(P.options.tenantId??"common",P.options.clientId,P.options.userName,P.options.password);break;case"azure-active-directory-msi-vm":case"azure-active-directory-msi-app-service":let Y=P.options.clientId?[P.options.clientId,{}]:[{}];O=new N9.ManagedIdentityCredential(...Y);break;case"azure-active-directory-default":let h=P.options.clientId?{managedIdentityClientId:P.options.clientId}:{};O=new N9.DefaultAzureCredential(h);break;case"azure-active-directory-service-principal-secret":O=new N9.ClientSecretCredential(P.options.tenantId,P.options.clientId,P.options.clientSecret);break}let f;try{f=await O.getToken(w)}catch(Y){this.loginError=new AggregateError([new T6.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH"),Y]),this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);return}if(f===null){this.loginError=new AggregateError([new T6.ConnectionError("Security token could not be authenticated or authorized.","EFEDAUTH")]),this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);return}this.sendFedAuthTokenMessage(f.token)}else if(this.loginError)if(Tk(this.loginError))this.debug.log("Initiating retry on transient error"),this.transitionTo(this.STATE.TRANSIENT_FAILURE_RETRY);else this.emit("connect",this.loginError),this.transitionTo(this.STATE.FINAL);else this.emit("connect",new T6.ConnectionError("Login failed.","ELOGIN")),this.transitionTo(this.STATE.FINAL)})().catch(($)=>{process.nextTick(()=>{throw $})})},events:{socketError:function(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN_SENDING_INITIAL_SQL:{name:"LoggedInSendingInitialSql",enter:function(){(async()=>{this.sendInitialSql();let $;try{$=await this.messageIo.readMessage()}catch(_){return this.socketError(_)}let q=this.createTokenStreamParser($,new XP.InitialSqlTokenHandler(this));await DP.once(q,"end"),this.transitionTo(this.STATE.LOGGED_IN),this.processedInitialSql()})().catch(($)=>{process.nextTick(()=>{throw $})})},events:{socketError:function $(){this.transitionTo(this.STATE.FINAL)},connectTimeout:function(){this.transitionTo(this.STATE.FINAL)}}},LOGGED_IN:{name:"LoggedIn",events:{socketError:function(){this.transitionTo(this.STATE.FINAL)}}},SENT_CLIENT_REQUEST:{name:"SentClientRequest",enter:function(){(async()=>{let $;try{$=await this.messageIo.readMessage()}catch(O){return this.socketError(O)}this.clearRequestTimer();let q=this.createTokenStreamParser($,new XP.RequestTokenHandler(this,this.request));if(this.request?.canceled&&this.cancelTimer)return this.transitionTo(this.STATE.SENT_ATTENTION);let _=()=>{q.resume()},K=()=>{q.pause(),this.request?.once("resume",_)};if(this.request?.on("pause",K),this.request instanceof G8.default&&this.request.paused)K();let P=()=>{if(q.removeListener("end",w),this.request instanceof G8.default&&this.request.paused)this.request.resume();this.request?.removeListener("pause",K),this.request?.removeListener("resume",_),this.transitionTo(this.STATE.SENT_ATTENTION)},w=()=>{this.request?.removeListener("cancel",this._cancelAfterRequestSent),this.request?.removeListener("cancel",P),this.request?.removeListener("pause",K),this.request?.removeListener("resume",_),this.transitionTo(this.STATE.LOGGED_IN);let O=this.request;if(this.request=void 0,this.config.options.tdsVersion<"7_2"&&O.error&&this.isSqlBatch)this.inTransaction=!1;O.callback(O.error,O.rowCount,O.rows)};q.once("end",w),this.request?.once("cancel",P)})()},exit:function($){this.clearRequestTimer()},events:{socketError:function($){let q=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),q.callback($)}}},SENT_ATTENTION:{name:"SentAttention",enter:function(){(async()=>{let $;try{$=await this.messageIo.readMessage()}catch(K){return this.socketError(K)}let q=new XP.AttentionTokenHandler(this,this.request),_=this.createTokenStreamParser($,q);if(await DP.once(_,"end"),q.attentionReceived){this.clearCancelTimer();let K=this.request;if(this.request=void 0,this.transitionTo(this.STATE.LOGGED_IN),K.error&&K.error instanceof T6.RequestError&&K.error.code==="ETIMEOUT")K.callback(K.error);else K.callback(new T6.RequestError("Canceled.","ECANCEL"))}})().catch(($)=>{process.nextTick(()=>{throw $})})},events:{socketError:function($){let q=this.request;this.request=void 0,this.transitionTo(this.STATE.FINAL),q.callback($)}}},FINAL:{name:"Final",enter:function(){this.cleanupConnection(qw.NORMAL)},events:{connectTimeout:function(){},message:function(){},socketError:function(){}}}}});var Wk=y((v_)=>{Object.defineProperty(v_,"__esModule",{value:!0});Object.defineProperty(v_,"BulkLoad",{enumerable:!0,get:function(){return xS$.default}});Object.defineProperty(v_,"Connection",{enumerable:!0,get:function(){return lc.default}});Object.defineProperty(v_,"ConnectionError",{enumerable:!0,get:function(){return tc.ConnectionError}});Object.defineProperty(v_,"ISOLATION_LEVEL",{enumerable:!0,get:function(){return iS$.ISOLATION_LEVEL}});Object.defineProperty(v_,"Request",{enumerable:!0,get:function(){return dS$.default}});Object.defineProperty(v_,"RequestError",{enumerable:!0,get:function(){return tc.RequestError}});Object.defineProperty(v_,"TDS_VERSION",{enumerable:!0,get:function(){return gS$.versions}});Object.defineProperty(v_,"TYPES",{enumerable:!0,get:function(){return oS$.TYPES}});v_.connect=aS$;v_.library=void 0;var xS$=Ak(TM()),lc=Ak(Ic()),dS$=Ak(M5()),bS$=hk(),tc=AK(),oS$=F3(),iS$=vk(),gS$=u3();function Ak($){return $&&$.__esModule?$:{default:$}}var nr$=v_.library={name:bS$.name};function aS$($,q){let _=new lc.default($);return _.connect(q),_}});var Qc=y((Vr$,Uc)=>{var ec=Wk(),pP=Aq()("mssql:tedi"),IS$=jM(),{IDS:SK}=cq(),Jk=D_(),Bc=ew();class Fc extends IS${_config(){let $={server:this.config.server,options:Object.assign({encrypt:typeof this.config.encrypt==="boolean"?this.config.encrypt:!0,trustServerCertificate:typeof this.config.trustServerCertificate==="boolean"?this.config.trustServerCertificate:!1},this.config.options),authentication:Object.assign({type:this.config.domain!==void 0?"ntlm":this.config.authentication_type!==void 0?this.config.authentication_type:"default",options:Object.entries({userName:this.config.user,password:this.config.password,domain:this.config.domain,clientId:this.config.clientId,clientSecret:this.config.clientSecret,tenantId:this.config.tenantId,token:this.config.token,msiEndpoint:this.config.msiEndpoint,msiSecret:this.config.msiSecret}).reduce((q,[_,K])=>{if(typeof K!=="undefined")return{...q,[_]:K};return q},{})},this.config.authentication)};if($.options.database=$.options.database||this.config.database,$.options.port=$.options.port||this.config.port,$.options.connectTimeout=$.options.connectTimeout??this.config.connectionTimeout??this.config.timeout??15000,$.options.requestTimeout=$.options.requestTimeout??this.config.requestTimeout??this.config.timeout??15000,$.options.tdsVersion=$.options.tdsVersion||"7_4",$.options.rowCollectionOnDone=$.options.rowCollectionOnDone||!1,$.options.rowCollectionOnRequestCompletion=$.options.rowCollectionOnRequestCompletion||!1,$.options.useColumnNames=$.options.useColumnNames||!1,$.options.appName=$.options.appName||"node-mssql",$.options.instanceName)delete $.options.port;if(isNaN($.options.requestTimeout))$.options.requestTimeout=15000;if($.options.requestTimeout===1/0||$.options.requestTimeout<0)$.options.requestTimeout=0;if(!$.options.debug&&this.config.debug)$.options.debug={packet:!0,token:!0,data:!0,payload:!0};return $}_poolCreate(){return new Jk.Promise(($,q)=>{let _=(w)=>{$(w),$=q=()=>{}},K=(w)=>{q(w),$=q=()=>{}},P;try{P=new ec.Connection(this._config())}catch(w){K(w);return}if(P.connect((w)=>{if(w)return w=new Bc(w),K(w);pP("connection(%d): established",SK.get(P)),this.collation=P.databaseCollation,_(P)}),SK.add(P,"Connection"),pP("pool(%d): connection #%d created",SK.get(this),SK.get(P)),pP("connection(%d): establishing",SK.get(P)),P.on("end",()=>{let w=new Bc("The connection ended without ever completing the connection");K(w)}),P.on("error",(w)=>{if(w.code==="ESOCKET")P.hasError=!0;else this.emit("error",w);K(w)}),this.config.debug)P.on("debug",this.emit.bind(this,"debug",P));if(typeof this.config.beforeConnect==="function")this.config.beforeConnect(P)})}_poolValidate($){if($&&!$.closed&&!$.hasError)return!this.config.validateConnection||new Jk.Promise((q)=>{let _=new ec.Request("SELECT 1;",(K)=>{q(!K)});$.execSql(_)});return!1}_poolDestroy($){return new Jk.Promise((q,_)=>{if(!$){q();return}if(pP("connection(%d): destroying",SK.get($)),$.closed)pP("connection(%d): already closed",SK.get($)),q();else $.once("end",()=>{pP("connection(%d): destroyed",SK.get($)),q()}),$.close()})}}Uc.exports=Fc});var _I=y((xr$,qI)=>{var yP=Aq()("mssql:tedi"),lS$=MM(),{IDS:SP}=cq(),Xk=KM();class $I extends lS${constructor($){super($);this._abort=()=>{if(!this._rollbackRequested){let q=this._acquiredConnection;setImmediate(this.parent.release.bind(this.parent),q),this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this._acquiredConnection=null,this._acquiredConfig=null,this._aborted=!0,this.emit("rollback",!0)}}}_begin($,q){super._begin($,(_)=>{if(_)return q(_);yP("transaction(%d): begin",SP.get(this)),this.parent.acquire(this,(K,P,w)=>{if(K)return q(K);this._acquiredConnection=P,this._acquiredConnection.on("rollbackTransaction",this._abort),this._acquiredConfig=w,P.beginTransaction((O)=>{if(O)O=new Xk(O);yP("transaction(%d): begun",SP.get(this)),q(O)},this.name,this.isolationLevel)})})}_commit($){super._commit((q)=>{if(q)return $(q);yP("transaction(%d): commit",SP.get(this)),this._acquiredConnection.commitTransaction((_)=>{if(_)_=new Xk(_);if(this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,!_)yP("transaction(%d): commited",SP.get(this));$(_)})})}_rollback($){super._rollback((q)=>{if(q)return $(q);yP("transaction(%d): rollback",SP.get(this)),this._acquiredConnection.rollbackTransaction((_)=>{if(_)_=new Xk(_);if(this._acquiredConnection.removeListener("rollbackTransaction",this._abort),this.parent.release(this._acquiredConnection),this._acquiredConnection=null,this._acquiredConfig=null,!_)yP("transaction(%d): rolled back",SP.get(this));$(_)})})}}qI.exports=$I});var jI=y((QS$,PI)=>{class Dk{constructor(){this.x=0,this.y=0,this.z=null,this.m=null}}var tS$=($,q,_)=>{let K=[];if(q<1)return K;if(_)for(let P=1;P<=q;P++){let w=new Dk;K.push(w),w.x=$.readDoubleLE($.position),w.y=$.readDoubleLE($.position+8),$.position+=16}else for(let P=1;P<=q;P++){let w=new Dk;K.push(w),w.lat=$.readDoubleLE($.position),w.lng=$.readDoubleLE($.position+8),w.x=w.lat,w.y=w.lng,$.position+=16}return K},sS$=($,q)=>{if(q<1)return;q.forEach((_)=>{_.z=$.readDoubleLE($.position),$.position+=8})},eS$=($,q)=>{if(q<1)return;q.forEach((_)=>{_.m=$.readDoubleLE($.position),$.position+=8})},BS$=($,q,_)=>{let K=[];if(q<1)return K;if(_.P)K.push({attribute:1,pointOffset:0});else if(_.L)K.push({attribute:1,pointOffset:0});else for(let P=1;P<=q;P++)K.push({attribute:$.readUInt8($.position),pointOffset:$.readInt32LE($.position+1)}),$.position+=5;return K},FS$=($,q,_)=>{let K=[];if(q<1)return K;if(_.P)K.push({parentOffset:-1,figureOffset:0,type:1});else if(_.L)K.push({parentOffset:-1,figureOffset:0,type:2});else for(let P=1;P<=q;P++)K.push({parentOffset:$.readInt32LE($.position),figureOffset:$.readInt32LE($.position+4),type:$.readUInt8($.position+8)}),$.position+=9;return K},US$=($,q)=>{let _=[];if(q<1)return _;for(let K=1;K<=q;K++)_.push({type:$.readUInt8($.position)}),$.position++;return _},KI=($,q)=>{let _=$.readInt32LE(0);if(_===-1)return null;let K={srid:_,version:$.readUInt8(4)},P=$.readUInt8(5);$.position=6;let w={Z:(P&1)>0,M:(P&2)>0,V:(P&4)>0,P:(P&8)>0,L:(P&16)>0};if(K.version===2)w.H=(P&8)>0;let O;if(w.P)O=1;else if(w.L)O=2;else O=$.readUInt32LE($.position),$.position+=4;if(K.points=tS$($,O,q),w.Z)sS$($,K.points);if(w.M)eS$($,K.points);let f;if(w.P)f=1;else if(w.L)f=1;else f=$.readUInt32LE($.position),$.position+=4;K.figures=BS$($,f,w);let Y;if(w.P)Y=1;else if(w.L)Y=1;else Y=$.readUInt32LE($.position),$.position+=4;if(K.shapes=FS$($,Y,w),K.version===2&&$.position<$.length){let h=$.readUInt32LE($.position);$.position+=4,K.segments=US$($,h)}else K.segments=[];return K};QS$.PARSERS={geography($){return KI($,!1)},geometry($){return KI($,!0)}}});var hI=y((dr$,YI)=>{var U=Wk(),q8=Aq()("mssql:tedi"),qG$=OM(),h8=_M(),{IDS:m6,objectHasProperty:GP}=cq(),{TYPES:e,DECLARATIONS:wI,declare:_G$,cast:KG$}=e_(),pk=Bw(),{PARSERS:OI}=jI(),{valueHandler:zI}=D_(),X4={BitN:104,DateTimeN:111,DecimalN:106,FloatN:109,IntN:38,MoneyN:110,NumericN:108},D4=function($){switch($){case e.VarChar:return U.TYPES.VarChar;case e.NVarChar:return U.TYPES.NVarChar;case e.Text:return U.TYPES.Text;case e.Int:return U.TYPES.Int;case e.BigInt:return U.TYPES.BigInt;case e.TinyInt:return U.TYPES.TinyInt;case e.SmallInt:return U.TYPES.SmallInt;case e.Bit:return U.TYPES.Bit;case e.Float:return U.TYPES.Float;case e.Decimal:return U.TYPES.Decimal;case e.Numeric:return U.TYPES.Numeric;case e.Real:return U.TYPES.Real;case e.Money:return U.TYPES.Money;case e.SmallMoney:return U.TYPES.SmallMoney;case e.Time:return U.TYPES.Time;case e.Date:return U.TYPES.Date;case e.DateTime:return U.TYPES.DateTime;case e.DateTime2:return U.TYPES.DateTime2;case e.DateTimeOffset:return U.TYPES.DateTimeOffset;case e.SmallDateTime:return U.TYPES.SmallDateTime;case e.UniqueIdentifier:return U.TYPES.UniqueIdentifier;case e.Xml:return U.TYPES.NVarChar;case e.Char:return U.TYPES.Char;case e.NChar:return U.TYPES.NChar;case e.NText:return U.TYPES.NVarChar;case e.Image:return U.TYPES.Image;case e.Binary:return U.TYPES.Binary;case e.VarBinary:return U.TYPES.VarBinary;case e.UDT:case e.Geography:case e.Geometry:return U.TYPES.UDT;case e.TVP:return U.TYPES.TVP;case e.Variant:return U.TYPES.Variant;default:return $}},vI=function($,q){if(typeof $!=="object")return;switch($){case U.TYPES.Char:return e.Char;case U.TYPES.NChar:return e.NChar;case U.TYPES.VarChar:return e.VarChar;case U.TYPES.NVarChar:return e.NVarChar;case U.TYPES.Text:return e.Text;case U.TYPES.NText:return e.NText;case U.TYPES.Int:return e.Int;case U.TYPES.BigInt:return e.BigInt;case U.TYPES.TinyInt:return e.TinyInt;case U.TYPES.SmallInt:return e.SmallInt;case U.TYPES.Bit:return e.Bit;case U.TYPES.Float:return e.Float;case U.TYPES.Real:return e.Real;case U.TYPES.Money:return e.Money;case U.TYPES.SmallMoney:return e.SmallMoney;case U.TYPES.Numeric:return e.Numeric;case U.TYPES.Decimal:return e.Decimal;case U.TYPES.DateTime:return e.DateTime;case U.TYPES.Time:return e.Time;case U.TYPES.Date:return e.Date;case U.TYPES.DateTime2:return e.DateTime2;case U.TYPES.DateTimeOffset:return e.DateTimeOffset;case U.TYPES.SmallDateTime:return e.SmallDateTime;case U.TYPES.UniqueIdentifier:return e.UniqueIdentifier;case U.TYPES.Image:return e.Image;case U.TYPES.Binary:return e.Binary;case U.TYPES.VarBinary:return e.VarBinary;case U.TYPES.Xml:return e.Xml;case U.TYPES.UDT:return e.UDT;case U.TYPES.TVP:return e.TVP;case U.TYPES.Variant:return e.Variant;default:switch($.id){case X4.BitN:return e.Bit;case X4.NumericN:return e.Numeric;case X4.DecimalN:return e.Decimal;case X4.IntN:if(q===8)return e.BigInt;if(q===4)return e.Int;if(q===2)return e.SmallInt;return e.TinyInt;case X4.FloatN:if(q===8)return e.Float;return e.Real;case X4.MoneyN:if(q===8)return e.Money;return e.SmallMoney;case X4.DateTimeN:if(q===8)return e.DateTime;return e.SmallDateTime}}},fI=function($,q){let _={};if(q)_=[];for(let K=0,P=$.length;K<P;K++){let w=$[K],O={index:K,name:w.colName,length:w.dataLength,type:vI(w.type,w.dataLength),scale:w.scale,precision:w.precision,nullable:!!(w.flags&1),caseSensitive:!!(w.flags&2),identity:!!(w.flags&16),readOnly:!(w.flags&12)};if(w.udtInfo){if(O.udt={name:w.udtInfo.typeName,database:w.udtInfo.dbname,schema:w.udtInfo.owningSchema,assembly:w.udtInfo.assemblyName},wI[w.udtInfo.typeName])O.type=wI[w.udtInfo.typeName]}if(q)_.push(O);else _[w.colName]=O}return _},MI=function($,q){let _=vI(q.type);if(zI.has(_))return zI.get(_)($);else if(q.type===U.TYPES.UDT&&$!=null)if(OI[q.udtInfo.typeName])return OI[q.udtInfo.typeName]($);else return $;else return $},u9=function($){if($ instanceof pk){let q={name:$.name,schema:$.schema,columns:[],rows:$.rows};for(let _ of $.columns)q.columns.push({name:_.name,type:D4(_.type),length:_.length,scale:_.scale,precision:_.precision});return q}else return $};class HI extends qG${_batch($,q){this._isBatch=!0,this._query($,q)}_bulk($,q,_){super._bulk($,q,(K)=>{if(K)return _(K);try{$._makeBulk()}catch(h){return _(new h8(h,"EREQUEST"))}if(!$.name)return _(new h8("Table name must be specified for bulk insert.","ENAME"));if($.name.charAt(0)==="@")return _(new h8("You can't use table variables for bulk insert.","ENAME"));let P=[],w={},O=!1,f=(h,k,T)=>{let p=new Error(T.message);if(p.info=T,p=new h8(p,"EREQUEST"),this.stream)this.emit("error",p);else if(h&&!O){if(k){for(let G in w)k.removeListener(G,w[G]);this.parent.release(k)}O=!0,_(p)}P.push(p)},Y=(h)=>{this.emit("info",{message:h.message,number:h.number,state:h.state,class:h.class,lineNumber:h.lineNumber,serverName:h.serverName,procName:h.procName})};this.parent.acquire(this,(h,k)=>{let T=(Z,...X)=>{try{this.parent.release(k)}catch(C){}_(Z,...X)};if(h)return T(h);if(q8("connection(%d): borrowed to request #%d",m6.get(k),m6.get(this)),this.canceled)return q8("request(%d): canceled",m6.get(this)),T(new h8("Canceled.","ECANCEL"));this._cancel=()=>{q8("request(%d): cancel",m6.get(this)),k.cancel()},k.on("infoMessage",w.infoMessage=Y),k.on("errorMessage",w.errorMessage=f.bind(null,!1,k)),k.on("error",w.error=f.bind(null,!0,k));let p=(Z,X)=>{if(Z&&(!P.length||P.length&&Z.message!==P[P.length-1].message)){if(Z=new h8(Z,"EREQUEST"),this.stream)this.emit("error",Z);P.push(Z)}delete this._cancel;let C;if(P.length&&!this.stream)C=P.pop(),C.precedingErrors=P;if(!O){for(let N in w)k.removeListener(N,w[N]);if(O=!0,this.stream)T(null,X);else T(C,X)}},G=k.newBulkLoad($.path,q,p);for(let Z of $.columns)G.addColumn(Z.name,D4(Z.type),{nullable:Z.nullable,length:Z.length,scale:Z.scale,precision:Z.precision});if($.create){let Z=$.temporary?`tempdb..[${$.name}]`:$.path,X=new U.Request(`if object_id('${Z.replace(/'/g,"''")}') is null ${$.declare()}`,(C)=>{if(C)return p(C);k.execBulkLoad(G,$.rows)});this._setCurrentRequest(X),k.execSqlBatch(X)}else k.execBulkLoad(G,$.rows)})})}_query($,q){super._query($,(_)=>{if(_)return q(_);let K=[],P=[],w=[],O={},f={},Y=[],h={},k=[],T=null,p=!1,G=!1,Z=null,X=!1,C=(L,m,E)=>{let W=new Error(E.message);if(W.info=E,W=new h8(W,"EREQUEST"),this.stream)this.emit("error",W);else if(L&&!X){if(m){for(let V in O)m.removeListener(V,O[V]);this.parent.release(m)}X=!0,q(W)}w.push(W)},N=(L)=>{this.emit("info",{message:L.message,number:L.number,state:L.state,class:L.class,lineNumber:L.lineNumber,serverName:L.serverName,procName:L.procName})};this.parent.acquire(this,(L,m,E)=>{if(L)return q(L);q8("connection(%d): borrowed to request #%d",m6.get(m),m6.get(this));let W;if(this.canceled)return q8("request(%d): canceled",m6.get(this)),this.parent.release(m),q(new h8("Canceled.","ECANCEL"));this._cancel=()=>{q8("request(%d): cancel",m6.get(this)),m.cancel()},m.on("infoMessage",O.infoMessage=N),m.on("errorMessage",O.errorMessage=C.bind(null,!1,m)),m.on("error",O.error=C.bind(null,!0,m)),q8("request(%d): query",m6.get(this),$);let V=new U.Request($,(b)=>{if(((b?.errors)?b.errors:[b]).forEach((g,s,{length:v$})=>{if(g&&(!w.length||w.length&&w.length>=v$&&g.message!==w[w.length-v$+s].message)){if(g=new h8(g,"EREQUEST"),this.stream)this.emit("error",g);w.push(g)}}),p){if(!this.stream)T=K.pop()[0];for(let g in T){let s=T[g];if(g!=="___return___")f[g]=s}}delete this._cancel;let x;if(w.length&&!this.stream)x=w.pop(),x.precedingErrors=w;if(!X){for(let g in O)m.removeListener(g,O[g]);if(this.parent.release(m),X=!0,x)q8("request(%d): failed",m6.get(this),x);else q8("request(%d): completed",m6.get(this));if(this.stream)q(null,null,f,Y,P);else q(x,K,f,Y,P)}});this._setCurrentRequest(V),V.on("columnMetadata",(b)=>{if(h=fI(b,this.arrayRowMode),G=!1,b.length===1&&(b[0].colName==="JSON_F52E2B61-18A1-11d1-B105-00805F49916B"||b[0].colName==="XML_F52E2B61-18A1-11d1-B105-00805F49916B"))G=!0,Z=[];if(this.stream)if(this._isBatch){if(!h.___return___)this.emit("recordset",h)}else this.emit("recordset",h);if(this.arrayRowMode)P.push(h)});let n=(b,x)=>{if(b!=null){if(Y.push(b),this.stream)this.emit("rowsaffected",b)}if(Object.keys(h).length===0)return;if(G){let g=Z.join("");if(h["JSON_F52E2B61-18A1-11d1-B105-00805F49916B"]&&E.parseJSON===!0)try{if(g==="")W=null;else W=JSON.parse(g)}catch(s){W=null;let v$=new h8(new Error(`Failed to parse incoming JSON. ${s.message}`),"EJSON");if(this.stream)this.emit("error",v$);w.push(v$)}else W={},W[Object.keys(h)[0]]=g;if(Z=null,this.stream)this.emit("row",W);else k.push(W)}if(!this.stream)Object.defineProperty(k,"columns",{enumerable:!1,configurable:!0,value:h}),Object.defineProperty(k,"toTable",{enumerable:!1,configurable:!0,value(g){return pk.fromRecordset(this,g)}}),K.push(k);k=[],h={}};if(V.on("doneInProc",n),V.on("done",n),V.on("returnValue",(b,x,g)=>{f[b]=x}),V.on("row",(b)=>{if(!k)k=[];if(G)return Z.push(b[0].value);if(this.arrayRowMode)W=[];else W={};for(let x of b)if(x.value=MI(x.value,x.metadata),this.arrayRowMode)W.push(x.value);else{let g=W[x.metadata.colName];if(g!==void 0)if(g instanceof Array)g.push(x.value);else W[x.metadata.colName]=[g,x.value];else W[x.metadata.colName]=x.value}if(this.stream)if(this._isBatch)if(W.___return___)T=W;else this.emit("row",W);else this.emit("row",W);else k.push(W)}),this._isBatch){if(Object.keys(this.parameters).length){for(let s in this.parameters){if(!GP(this.parameters,s))continue;let v$=this.parameters[s];try{v$.value=D4(v$.type).validate(v$.value,this.parent.collation)}catch(u){u.message=`Validation failed for parameter '${s}'. ${u.message}`;let Cq=new h8(u,"EPARAM");return this.parent.release(m),q(Cq)}}let b=[];for(let s in this.parameters){if(!GP(this.parameters,s))continue;let v$=this.parameters[s];b.push(`@${s} ${_G$(v$.type,v$)}`)}let x=[];for(let s in this.parameters){if(!GP(this.parameters,s))continue;let v$=this.parameters[s];x.push(`@${s} = ${KG$(v$.value,v$.type,v$)}`)}let g=[];for(let s in this.parameters){if(!GP(this.parameters,s))continue;if(this.parameters[s].io===2)g.push(`@${s} as [${s}]`)}p=g.length>0,V.sqlTextOrProcedure=`declare ${b.join(", ")};select ${x.join(", ")};${V.sqlTextOrProcedure};${p?`select 1 as [___return___], ${g.join(", ")}`:""}`}}else for(let b in this.parameters){if(!GP(this.parameters,b))continue;let x=this.parameters[b];if(x.io===1)V.addParameter(x.name,D4(x.type),u9(x.value),{length:x.length,scale:x.scale,precision:x.precision});else V.addOutputParameter(x.name,D4(x.type),u9(x.value),{length:x.length,scale:x.scale,precision:x.precision})}try{m[this._isBatch?"execSqlBatch":"execSql"](V)}catch(b){C(!0,m,b)}})})}_execute($,q){super._execute($,(_)=>{if(_)return q(_);let K=[],P=[],w=[],O={},f={},Y=[],h={},k=[],T=0,p=!1,G=null,Z=!1,X=(N,L,m)=>{let E=new Error(m.message);if(E.info=m,E=new h8(E,"EREQUEST"),this.stream)this.emit("error",E);else if(N&&!Z){if(L){for(let W in O)L.removeListener(W,O[W]);this.parent.release(L)}Z=!0,q(E)}w.push(E)},C=(N)=>{this.emit("info",{message:N.message,number:N.number,state:N.state,class:N.class,lineNumber:N.lineNumber,serverName:N.serverName,procName:N.procName})};this.parent.acquire(this,(N,L,m)=>{if(N)return q(N);q8("connection(%d): borrowed to request #%d",m6.get(L),m6.get(this));let E;if(this.canceled)return q8("request(%d): canceled",m6.get(this)),this.parent.release(L),q(new h8("Canceled.","ECANCEL"));if(this._cancel=()=>{q8("request(%d): cancel",m6.get(this)),L.cancel()},L.on("infoMessage",O.infoMessage=C),L.on("errorMessage",O.errorMessage=X.bind(null,!1,L)),L.on("error",O.error=X.bind(null,!0,L)),q8.enabled){let V=Object.keys(this.parameters).map((g)=>this.parameters[g]),n=(g)=>typeof g==="string"&&g.length>50?g.substring(0,47)+"...":g,b=(g)=>g.name+" [sql."+g.type.name+"]",x={};V.forEach((g)=>{x[b(g)]=n(g.value)}),q8("request(%d): execute %s %O",m6.get(this),$,x)}let W=new U.Request($,(V)=>{if(V&&(!w.length||w.length&&V.message!==w[w.length-1].message)){if(V=new h8(V,"EREQUEST"),this.stream)this.emit("error",V);w.push(V)}delete this._cancel;let n;if(w.length&&!this.stream)n=w.pop(),n.precedingErrors=w;if(!Z){for(let b in O)L.removeListener(b,O[b]);if(this.parent.release(L),Z=!0,n)q8("request(%d): failed",m6.get(this),n);else q8("request(%d): complete",m6.get(this));if(this.stream)q(null,null,f,T,Y,P);else q(n,K,f,T,Y,P)}});this._setCurrentRequest(W),W.on("columnMetadata",(V)=>{if(h=fI(V,this.arrayRowMode),p=!1,V.length===1&&(V[0].colName==="JSON_F52E2B61-18A1-11d1-B105-00805F49916B"||V[0].colName==="XML_F52E2B61-18A1-11d1-B105-00805F49916B"))p=!0,G=[];if(this.stream)this.emit("recordset",h);if(this.arrayRowMode)P.push(h)}),W.on("row",(V)=>{if(!k)k=[];if(p)return G.push(V[0].value);if(this.arrayRowMode)E=[];else E={};for(let n of V)if(n.value=MI(n.value,n.metadata),this.arrayRowMode)E.push(n.value);else{let b=E[n.metadata.colName];if(b!=null)if(b instanceof Array)b.push(n.value);else E[n.metadata.colName]=[b,n.value];else E[n.metadata.colName]=n.value}if(this.stream)this.emit("row",E);else k.push(E)}),W.on("doneInProc",(V,n)=>{if(V!=null){if(Y.push(V),this.stream)this.emit("rowsaffected",V)}if(Object.keys(h).length===0)return;if(p){if(h["JSON_F52E2B61-18A1-11d1-B105-00805F49916B"]&&m.parseJSON===!0)try{if(G.length===0)E=null;else E=JSON.parse(G.join(""))}catch(b){E=null;let x=new h8(new Error(`Failed to parse incoming JSON. ${b.message}`),"EJSON");if(this.stream)this.emit("error",x);w.push(x)}else E={},E[Object.keys(h)[0]]=G.join("");if(G=null,this.stream)this.emit("row",E);else k.push(E)}if(!this.stream)Object.defineProperty(k,"columns",{enumerable:!1,configurable:!0,value:h}),Object.defineProperty(k,"toTable",{enumerable:!1,configurable:!0,value(b){return pk.fromRecordset(this,b)}}),K.push(k);k=[],h={}}),W.on("doneProc",(V,n,b)=>{T=b}),W.on("returnValue",(V,n,b)=>{f[V]=n});for(let V in this.parameters){if(!GP(this.parameters,V))continue;let n=this.parameters[V];if(n.io===1)W.addParameter(n.name,D4(n.type),u9(n.value),{length:n.length,scale:n.scale,precision:n.precision});else W.addOutputParameter(n.name,D4(n.type),u9(n.value),{length:n.length,scale:n.scale,precision:n.precision})}L.callProcedure(W)})})}_pause(){if(super._pause(),this._currentRequest)this._currentRequest.pause()}_resume(){if(super._resume(),this._currentRequest)this._currentRequest.resume()}}YI.exports=HI});var yk=y((br$,R9)=>{var b_=EX(),kI=Qc(),TI=_I(),AI=hI();R9.exports=Object.assign({ConnectionPool:kI,Transaction:TI,Request:AI,PreparedStatement:b_.PreparedStatement},b_.exports);Object.defineProperty(R9.exports,"Promise",{enumerable:!0,get:()=>{return b_.Promise},set:($)=>{b_.Promise=$}});Object.defineProperty(R9.exports,"valueHandler",{enumerable:!0,value:b_.valueHandler,writable:!1,configurable:!1});b_.driver.name="tedious";b_.driver.ConnectionPool=kI;b_.driver.Transaction=TI;b_.driver.Request=AI});var Sk=y((or$,XI)=>{var y6=yk();class WI{constructor($){if(!$)throw new Error("A valid SQL connection pool is required.");this.pool=$}async executeProcedure($,q={},_={}){try{let K=this.pool.request();for(let[w,O]of Object.entries(q))K.input(w,O);for(let[w,O]of Object.entries(_))K.output(w,O);return await K.execute($)}catch(K){throw console.error(`Error executing procedure ${$}:`,K),K}}async fetchRecords($,q={},_={}){return(await this.executeProcedure($,q,_)).recordset||[]}async fetchSingleRecord($,q={},_={}){return(await this.fetchRecords($,q,_))[0]||null}}class JI{constructor($,q){if(!q)throw new Error("wellId is required.");this.db=$,this.wellId=q}async saveFailedData($,q,_){await this.db.executeProcedure("OnLine_Failed_ProcessData_SaveDynamic_ByCode",{code:$,Wellid:this.wellId,DateR:q,ServerInfo:_,IsMasterLog:0},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})}async getWellById($=this.wellId){return this.db.fetchSingleRecord("OnLine_WellInfo_GetByID",{CallerUserId:0,WellID:$})}async getFailedDataCount($){return(await this.db.executeProcedure("OnLine_Failed_ProcessData_GetCount",{Wellid:this.wellId,IsMasterLog:0,ServerInfo:$},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})).recordset[0]?.TotalRec||0}async getFailedDataBatch($,q,_){return this.db.fetchRecords("OnLine_Failed_ProcessData_GetBatch_Col",{Wellid:this.wellId,IsMasterLog:0,ServerInfo:$,StartPage:q,PageSize:_},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})}async deleteFailedDataBatch($,q){let _=new y6.Table("ProcessData_Type");_.columns.add("PName",y6.NVarChar),_.columns.add("PVal",y6.NVarChar),q.forEach((K)=>{_.rows.add("",String(K.Code))}),await this.db.executeProcedure("OnLine_Failed_ProcessData_Delete",{Wellid:this.wellId,IsMasterLog:0,ServerInfo:$,ProcessDataList:_},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})}async saveFailedData($,q,_,K){await this.db.executeProcedure("OnLine_Failed_ProcessData_SaveDynamic_ByCode",{wellid:this.wellId,code:$,DateR:q,ServerInfo:_,IsMasterLog:K},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})}async getLastProcessData($=0){return this.db.fetchSingleRecord("ProcessData_Get_Online_Front",{code:$,wellId:this.wellId})}async getMasterLogs($){return this.db.fetchRecords("OnLine_MasterLog_GetAll_ById",{Code:$,Wellid:this.wellId},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})}async getComments($){return this.db.fetchRecords("OnLine_Comment_GetAll_ById",{Id:$,Code:null,Wellid:this.wellId},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})}async getCommentsDeleted($){return(await this.db.fetchRecords("OnLine_Comment_DeleteLog_GetAll_ById",{Wellid:this.wellId,Id:$},{ErrorCode:y6.Int,ErrorDesc:y6.NVarChar})).map((_)=>_.id)}}XI.exports={DatabaseService:WI,Orm:JI}});var yI=y((ir$,pI)=>{var{compressData:ZP}=KJ(),{Orm:PG$}=Sk(),H_=Hw(),{getLastCommentId:jG$,getLastCommentDeletedId:wG$}=Bf();class DI{constructor($,q,_){if(!$||!q)throw new Error("Database service and wellId are required.");this.orm=new PG$($,q),this.socket=_||null,this.wellId=q,this.batchSizeComments=H_.BATCH_SIZE_COMMENTS,this.batchSizeCommentsDeleted=H_.BATCH_SIZE_COMMENTS_DELETED,this.batchSizeMasterLog=H_.BATCH_SIZE_MASTERLOG,this.batchSizeMasterLogDeleted=H_.BATCH_SIZE_MASTERLOG_DELETED,this.batchSizeFailedProcessData=H_.BATCH_SIZE_FAILED_PROCESS_DATA}setSocket($){this.socket=$}async sendFailedData(){try{let $=await this.orm.getFailedDataCount(H_.hostDestination);if($===0){console.log("# [Resend] No failed data to resend.");return}console.log(`# [Resend] Found ${$} failed data to resend.`);let q=Math.ceil($/this.batchSizeFailedProcessData);for(let _=0;_<=q;_++){let K=await this.orm.getFailedDataBatch(H_.hostDestination,_*this.batchSizeFailedProcessData,this.batchSizeFailedProcessData);if(!K.length)continue;let P=await ZP(K);await new Promise((w,O)=>{this.socket.emit("producer-processData-batch",this.wellId,P,async(f)=>{if(f&&f.success)await this.orm.deleteFailedDataBatch(H_.hostDestination,K),w();else O(new Error("Failed to resend batch."))})})}}catch($){console.error("Error in sendFailedData:",$)}}async sendWell(){try{let $=await this.orm.getWellById();if(!$){console.error(`# [Transfer] [well] Error: Well not found for wellId: ${this.wellId}`);return}if(this.socket.emit("producer-well",$),$.WellParentId){let q=await this.orm.getWellById($.WellParentId);if(q)this.socket.emit("producer-well",{...q,socketIsConnected:!0});else console.warn(`# [Transfer] [well] Parent well not found for parentId: ${$.WellParentId}`)}console.log("# [Transfer] [well] End - Well data transfer completed.")}catch($){console.error("# [Transfer] [well] Error in sendWell:",$)}}async sendProcessData($){if(this.socket&&this.socket.connected){let q=await ZP($);this.socket.emit("producer-processData",this.wellId,q,(_)=>{if(!_.success)this.orm.saveFailedData($.code,$.dater,H_.hostDestination)})}else if($)this.orm.saveFailedData($.code,$.dater,H_.hostDestination)}async sendMasterLogs($){try{let q=await this.orm.getMasterLogs(0);if(!q||q.length===0){console.log("# [Transfer] [masterLogs] No master logs to transfer.");return}let _=Math.ceil(q.length/this.batchSizeMasterLog);console.log(`# [Transfer] [masterLogs] Total batches to transfer: ${_}`);for(let K=0;K<_;K++){let P=K*this.batchSizeMasterLog,w=Math.min(P+this.batchSizeMasterLog,q.length),O=q.slice(P,w),f=await ZP(O);this.socket.emit("producer-masterlog",this.wellId,f)}console.log("# [Transfer] [masterLogs] All master logs transferred successfully.")}catch(q){console.error("# [Transfer] [masterLogs] Error:",q)}}async sendComments(){try{let $=await jG$(this.socket,this.wellId),q=await this.orm.getComments($);if(!q||q.length===0){console.log("# [Transfer] [comments] No comments to transfer.");return}let _=Math.ceil(q.length/this.batchSizeComments);console.log(`# [Transfer] [comments] Total batches to transfer: ${_}`);for(let K=0;K<_;K++){let P=K*this.batchSizeComments,w=Math.min(P+this.batchSizeComments,q.length),O=q.slice(P,w),f=await ZP(O);try{await new Promise((Y,h)=>{this.socket.emit("producer-comments",this.wellId,f,(k)=>{if(k&&k.success)Y();else h(new Error("Failed to transfer batch."))})})}catch(Y){throw console.error(`# [Transfer] [comments] Error in transferring batch ${K+1}:`,Y),Y}}}catch($){console.error("# [Transfer] [comments] Error:",$)}}async sendCommentsDeleted(){try{let $=await wG$(this.socket,this.wellId),q=await this.orm.getCommentsDeleted($);if(!q||q.length===0){console.log("# [Transfer] [comments-deleted] No deleted comments to transfer.");return}let _=Math.ceil(q.length/this.batchSizeCommentsDeleted);console.log(`# [Transfer] [comments-deleted] Total batches to transfer: ${_}`);for(let K=0;K<_;K++){let P=K*this.batchSizeCommentsDeleted,w=Math.min(P+this.batchSizeCommentsDeleted,q.length),O=q.slice(P,w),f=await ZP(O);this.socket.emit("producer-comments-deleted",this.wellId,f)}console.log("# [Transfer] [comments-deleted] All batches processed.")}catch($){console.error("# [Transfer] [comments-deleted] Error during transfer:",$)}}async sendMasterLogsDeleted($){try{let q=await this.orm.getMasterLogsForTransfer($);if(!q||q.length===0)return;let _=Math.ceil(q.length/this.batchSizeMasterLogDeleted);for(let K=0;K<_;K++){let P=K*this.batchSizeMasterLogDeleted,w=Math.min(P+this.batchSizeMasterLogDeleted,q.length),O=q.slice(P,w),f=await ZP(O);await new Promise((Y,h)=>{this.socket.emit("producer-masterLogs-deleted",this.wellId,f,(k)=>{if(k&&k.success)Y();else h()})})}console.log("# [Transfer] MasterLogs Deleted transferred successfully.")}catch(q){console.error("Error in sendMasterLogsDeleted:",q)}}}pI.exports={TransferService:DI}});var SG$=y(()=>{U9().config();var{getToken:gr$,getTokenWithRetry:OG$}=hT(),{hostDestination:ar$,hostLocal:SI,sqlConfig:zG$,DESTINATION_API_PASSWORD:fG$,DESTINATION_API_USERNAME:MG$,INTERVAL_CONTROLLER:vG$,INTERVAL_COMMENTS:cr$,INTERVAL_COMMENTS_DELETED:Ir$,INTERVAL_FAILED_PROCESS_DATA:lr$,INTERVAL_MASTERLOG:tr$,INTERVAL_MASTERLOG_DELETED:sr$,INTERVAL_DESTINATION_HEALTH:er$,INTERVAL_TOKEN_DESTINATION:Br$,INTERVAL_TOKEN_LOCAL:HG$,TRANSFER:Fr$,TRANSFER_COMMENTS:Ur$,TRANSFER_COMMENTS_DELETED:Qr$,TRANSFER_MASTERLOG:$V$,TRANSFER_MASTERLOG_DELETED:qV$,TRANSFER_FAILED_PROCESS_DATA:_V$,TRANSFER_ONLINE_PROCESS_DATA:KV$}=Hw(),{initSocket:YG$}=Bf(),{TransferService:hG$}=yI(),{DatabaseService:kG$,Orm:TG$}=Sk(),AG$=yk(),_w=null,WG$=null,JG$=null,GI=null,Kw=process.argv[2];if(!Kw||isNaN(Kw))console.error("Error: Invalid or missing wellId. Please provide a valid number."),process.exit(1);var Gk=null,ZI=null;async function XG$(){try{let $=await AG$.connect(zG$),q=new kG$($);console.log("# [Database] Connection established."),JG$=$,Gk=new TG$(q,Kw),GI=await Gk.getWellById(),ZI=new hG$(q,Kw,WG$)}catch($){console.error("Error connecting to SQL:",$),process.exit(1)}}async function DG$(){return YG$({wellId:GI.WellParentId,serverAddress:SI,token:await OG$(SI,MG$,fG$,HG$),onConnect:async($)=>{console.log("# [Local]       Socket connected"),_w=$},onDisconnect:async($)=>{console.log("# [Local]       Socket disconnected"),_w=null}})}async function pG$(){setInterval(async()=>{let $=await Gk.getLastProcessData();if(_w&&_w.connected)_w.emit("producer-processData-local",Kw,$);await ZI.sendProcessData($)},vG$)}async function yG$(){try{await XG$(),pG$(),DG$()}catch($){console.error("# [Critical Error] Application initialization failed:",$),process.exit(1)}}yG$()});export default SG$();
